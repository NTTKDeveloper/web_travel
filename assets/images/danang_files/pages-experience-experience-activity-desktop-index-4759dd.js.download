(window.webpackJsonp=window.webpackJsonp||[]).push([[228,0,3,8,12,17],Array(880).concat([function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));n(22),n(14),n(11),n(8),n(12),n(30),n(23);var o=n(4),r=n(0),c=(n(47),n(31)),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(10),k=n.n(m),O=n(16),_=n(893),j=n(900);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).result=[],t}var n,h;return Object(f.a)(e,t),Object(l.a)(e,[{key:"getScrollElBySectionConfig2provide",value:function(){var t=this.calcCustomScrollEl||"";return t?{lockLocation:this.$isServer?0:Number(.1*(document.documentElement.clientHeight||document.body.clientHeight))+56,scrollEl:t}:null}},{key:"getDataFail",value:function(){var t=this;setTimeout((function(){t.changeSectionState("failure")}),1e3)}},{key:"getCardType",value:function(t){var e;return!!(null===(e=this.businessData[t])||void 0===e?void 0:e.items)}},{key:"getRatio",value:function(t){var e;return(null===(e=this.businessData[t])||void 0===e?void 0:e.banner_scale)||""}},{key:"getCardData",value:function(t,e){var n,o,r=this.businessData[t]||[];return(null!=(o=null===(n=this.businessData[e]||{})||void 0===n?void 0:n.items)?o:r)||[]}},{key:"getSpmExt",value:function(t){var e,n,o=t||{},c=o.brand_info,l=void 0===c?{}:c,d=o.product_tags,v=void 0===d?{}:d,f={};return!k()(l)&&(null===(n=null===(e=l)||void 0===e?void 0:e.tags)||void 0===n?void 0:n.length)&&(f={campaign_tags:l.tags}),k()(v)||(f=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},f,{},v)),Object(j.a)(f),f}},{key:"getData",value:(h=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isAsync){t.next=18;break}return n=this.sectionContent.src,o=void 0===n?"":n,t.prev=2,t.next=5,this.$axios.$get(Object(O.J)(o),{params:e});case 5:if((r=t.sent).result&&r.success){t.next=8;break}return t.abrupt("return",this.getDataFail());case 8:if(!this.validateRes||this.validateRes(r.result)){t.next=11;break}return this.hideSection&&this.hideSection(),t.abrupt("return");case 11:return this.changeSectionState("success"),t.abrupt("return",r.result);case 15:t.prev=15,t.t0=t.catch(2),this.getDataFail();case 18:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(t){return h.apply(this,arguments)})},{key:"getParams",value:function(){return{}}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isAsync){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getParams();case 4:return e=t.sent,t.next=7,this.getData(e);case 7:this.result=t.sent;case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcCustomScrollEl",get:function(){return this.$attrs["custom-scroll-el"]}},{key:"businessData",get:function(){return"async"===this.sectionContent.load_type?this.result||{}:this.sectionContent.data||{}}},{key:"businessName",get:function(){var t,e;return null===(e=null===(t=this.sectionData)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.name}}]),e}(_.a);P([Object(y.Provide)()],C.prototype,"getScrollElBySectionConfig2provide",null),C=P([y.Component],C)},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n(20),n(11),n(8),n(12);var o=n(5),r=n(71),c=n.n(r),l=function(t){return"object"!==Object(o.a)(t)?{}:[{key:"trg",type:"string",def:"auto"},{key:"oid",type:"string",def:void 0},{key:"ext",type:"string",def:void 0},{key:"evt",type:"string",def:"click"},{key:"typ",type:"string",def:void 0},{key:"idx",type:"number",def:void 0,handleFilter:function(q){return q.len>0}},{key:"len",type:"number",def:void 0,handleFilter:function(q){return q.len>0}}].filter((function(e){return e.handleFilter?e.handleFilter(t):t[e.key]})).reduce((function(e,n){return e[n.key]=t[n.key],e}),{})},d=function(t){var e={};if(!t||"object"!==Object(o.a)(t))return e;var n=c()(t),r=n.type,d=void 0===r?"":r,v=n.spm,f=void 0===v?"":v,h=n.exposure,y=void 0===h||h,m=n.action,k=void 0===m||m;if(!d||!f)return e;var O=n.query,_=void 0===O?{}:O,j="",w="";if("object"===Object(o.a)(_)&&_){_=l(_);var P=["evt","mod","typ"],C=P.reduce((function(t,e){var n=_[e];return n&&(t[e]=n),t}),{});w="?"+Object.keys(C).reduce((function(t,e){var n=void 0===C[e]?"":C[e];return t.push("".concat(e,"=").concat(n)),t}),[]).join("&"),y||(_.trg=_.trg||"manual"),_=l(_),j="?"+Object.keys(_).reduce((function(t,e){if(!P.includes(e)){var n=void 0===_[e]?"":_[e];t.push("".concat(e,"=").concat(n))}return t}),[]).join("&")}switch(d){case"module":e["data-spm-module"]=f+j,k&&(e["data-spm-virtual-item"]="__virtual"+w);break;case"page":case"item":e["data-spm-".concat(d)]=f+j}return e}},function(t,e,n){"use strict";var o=new(n(1).default)({});e.a=o},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(416),n(47),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=(n(70),n(5)),h=n(21),y=n(79),m=n.n(y),k=n(157),O=n.n(k),_=n(131),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showTips=!1,t.defObj={dark:!0,flip:!0,preventOverflow:!0},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showTipsHandler",value:function(t,e){var n=this.klook,o=this.showTips;if("mobile"===n.platform&&o)return this.$toast({duration:2e3,message:t}),e.preventDefault(),e.stopPropagation(),!1}},{key:"clickRightIcon",value:function(title){this.$alert(title)}},{key:"initTips",value:function(){if(this.autoTips){var t=this.$el.querySelector(".js-tag-content-node"),e=this.$el.querySelector(".js-tag-body-node");t&&t.offsetHeight>e.offsetHeight&&(this.showTips=!0)}else this.showTips=!1}},{key:"updated",value:function(){this.initTips()}},{key:"mounted",value:function(){this.initTips()}},{key:"calcPoptip",get:function(){return Object(_.merge)(this.defObj,this.poptipData)}},{key:"customStyle",get:function(){var t=this.$attrs;return{class:t.class,maxWidth:t.maxWidth,color:t.color,borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderRadius:t.borderRadius}}},{key:"leftIcon",get:function(){var t;return null===(t=this.$attrs)||void 0===t?void 0:t.leftIcon}},{key:"rightIcon",get:function(){var t;return(null===(t=this.$attrs)||void 0===t?void 0:t.right_icon)||{}}}]),e}(h.Vue);j([h.State],w.prototype,"klook",void 0),j([Object(h.Prop)()],w.prototype,"autoTips",void 0),j([Object(h.Prop)({default:function(){return{}}})],w.prototype,"poptipData",void 0);var P=w=j([h.Component],w),C=(n(1175),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tagging-tag"},[n("klk-poptip",t._b({attrs:{content:"desktop"===t.klook.platform&&t.showTips?t.$attrs.text:""}},"klk-poptip",t.calcPoptip,!1),[n("div",{staticClass:"tagging-tag_custom js-tag-body-node",style:t.customStyle,on:{click:function(e){return t.showTipsHandler(t.$attrs.text,e)}}},[t.leftIcon&&t.leftIcon.src?n("span",{staticClass:"tagging-tag_tips"},[n("img",t._b({staticClass:"tagging-tag_icon left-icon"},"img",t.leftIcon,!1))]):t._e(),t._v(" "),n("span",{staticClass:"tagging-tag_text"},[n("span",{staticClass:"js-tag-content-node"},[t._v(t._s(t.$attrs.text))])]),t._v(" "),t.rightIcon&&t.rightIcon.src?["desktop"===t.klook.platform?n("klk-poptip",{staticClass:"tagging-tag_tips",attrs:{title:t.rightIcon.desc,dark:""}},[n("img",t._b({staticClass:"tagging-tag_icon right-icon"},"img",t.rightIcon,!1))]):n("span",{staticClass:"tagging-tag_tips"},[n("img",t._b({staticClass:"tagging-tag_icon right-icon",on:{click:function(e){return t.clickRightIcon(t.rightIcon.desc)}}},"img",t.rightIcon,!1))])]:t._e()],2)])],1)}),[],!1,null,"01e9a5cc",null).exports,D=n(881),x=n(16);function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=[{key:1,value:"middle-style"},{key:2,value:"small-style"}],L=[{key:"tag_key",mapKey:"tag_key"},{key:"icon",mapKey:"leftIcon",deepKeys:[{key:"left_icon_url",mapKey:"src"}]},{key:"type",mapKey:"class",getterValue:function(t){var e,n=t.value;return(null===(e=$.find((function(t){return t.key===n})))||void 0===e?void 0:e.value)||"middle-style"}},{key:"text",mapKey:"text"},{key:"text_color",mapKey:"color"},{key:"background_color",mapKey:"backgroundColor",getterValue:function(t){var e,n,o=t.value,r=t.item,c=o||"",l="number"==typeof(null===(e=r)||void 0===e?void 0:e.background_alpha)?null===(n=r)||void 0===n?void 0:n.background_alpha:0;return l=parseInt(255-255*l/100),Object(x.M)(c,l)}},{key:"border_color",mapKey:"borderColor"},{key:"radius",mapKey:"borderRadius",getterValue:function(t){var e=t.value;return"".concat(e,"px")}},{key:"right_action",mapKey:"right_icon",deepKeys:[{key:"icon",mapKey:"src"},{key:"desc",mapKey:"desc"}]}],A=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).typeDefined={tagHeight:{"small-style":20,"middle-style":24}},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getSpecClass",value:function(t){var e,n=t||{},o=n.tag_key,r=n.leftIcon;return"credits"===o&&(null===(e=r)||void 0===e?void 0:e.src)?"credits-style":""}},{key:"getMapsItem",value:function(t,e){var n=this;return e.reduce((function(e,o){var r=o.key,c=o.mapKey,l=o.deepKeys,d=o.getterValue;if(l&&"object"===Object(f.a)(t[r]))e[c]=n.getMapsItem(t[r],l);else{var v=t[r];e[c]=d?d({value:v,item:t}):v}return e}),{})}},{key:"getTrackObj",value:function(t){return M(t)}},{key:"bindIHTrack",value:function(){return D.a.apply(void 0,arguments)}},{key:"wrapStyle",get:function(){var line=this.line,t=this.tagHeight,e=this.typeDefined,n=this.calcTagType,o="small-style"===n?4:8;if(!line)return{};var r=t||e.tagHeight[n];return{maxHeight:"".concat(r*line+(line-1)*o,"px")}}},{key:"calcTagType",get:function(){return m()(this.calcList,"0.class",this.tagType||"middle-style")}},{key:"calcList",get:function(){var t=this;return(Array.isArray(this.list)?this.list:[]).map((function(e){return t.getMapsItem(e,L)}))}},{key:"calcTrack",get:function(){return{type:"item",spm:"Savings_Detail"}}}]),e}(h.Vue);R([Object(h.Prop)({default:!0})],A.prototype,"autoTips",void 0),R([Object(h.Prop)({type:Object,default:null})],A.prototype,"track",void 0),R([Object(h.Prop)({type:Object,default:null})],A.prototype,"pkg",void 0),R([Object(h.Prop)({type:String,default:""})],A.prototype,"tagType",void 0),R([Object(h.Prop)({type:String,default:"auto"})],A.prototype,"maxWidth",void 0),R([Object(h.Prop)({type:Number,default:0})],A.prototype,"line",void 0),R([Object(h.Prop)({type:Number,default:0})],A.prototype,"tagHeight",void 0),R([Object(h.Prop)({type:Array,default:function(){return[]}})],A.prototype,"list",void 0),A=R([Object(h.Component)({components:{tag:S}})],A);var E=function(t){return(t||[]).reduce((function(t,e){var n,o,r,c;return t.TagIDList.push((null===(o=null===(n=e)||void 0===n?void 0:n.track)||void 0===o?void 0:o.tag_id)||""),t.TagKeyList.push((null===(c=null===(r=e)||void 0===r?void 0:r.track)||void 0===c?void 0:c.tag_key)||""),t}),{TagIDList:[],TagKeyList:[]})},M=function(t){var e,track=t.track,n=t.pkg,o=t.list,r=track||{};if(null===(e=r)||void 0===e?void 0:e.spm){var c=n||{},l=c.package_id,d=c.packageId,v=l||d,f=E(o),h={type:"module",spm:"",exposure:!0,action:!1,query:{oid:v?"package_".concat(v):void 0,ext:encodeURIComponent(JSON.stringify(f))}};return O()(h,r)}},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,e={type:1,text:"Display tag",text_color:"#212121",background_color:"#eeeeee",background_alpha:0,border_color:"#eeeeee",radius:4,right_action:{icon:"",desc:""},tag_key:"",group_keys:["product_tag","promotion_tag"]},n=new Array(t).fill(0).map((function(t,i){return I({},e,{tag_key:"key".concat(i)})}));return n},N=A;n(1176);n.d(e,"getTaggingExtraTrackObj",(function(){return E})),n.d(e,"getTaggingTrackObj",(function(){return M})),n.d(e,"getTestTags",(function(){return B}));var V=Object(C.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.calcList&&t.calcList.length?n("div",t._b({staticClass:"tagging-wrap",class:t.calcTagType,style:t.wrapStyle},"div",t.bindIHTrack(t.getTrackObj({track:t.track,pkg:t.pkg,list:t.list})),!1),[n("div",{staticClass:"tagging-box"},t._l(t.calcList,(function(e,i){return n("tag",t._b({key:i,class:[e.class,t.getSpecClass(e)]},"tag",Object.assign({},e,{maxWidth:t.maxWidth,autoTips:t.autoTips}),!1))})),1)]):t._e()}),[],!1,null,"6e1f16c4",null);e.default=V.exports},function(t,e,n){"use strict";n(47);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({type:Number})],h.prototype,"width",void 0),f([Object(v.Prop)({type:String})],h.prototype,"ratio",void 0);var y=h=f([v.Component],h),m=(n(1170),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("img",{staticClass:"v-lazy-logo",style:{width:this.width+"px"},attrs:{src:"https://res.klook.com/image/upload/image_logo_mx7wgd.png",alt:"logoImg"}})}),[],!1,null,"1bf1dec9",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(157),m=n.n(y),k=n(71),O=n.n(k),_=n(1007),j=n(889),w=n(881),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.poptipDef={transfer:!0,visible:!1,showClose:!0},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"bindIHTrack",value:function(){return w.a.apply(void 0,arguments)}},{key:"clickHandle",value:function(t){var e,n=this;this.visible=!t;var o=document.querySelector(".js-hack-total-footer"),r=document.querySelector(".js-custom-bottom-sheet-hack");try{(null===(e=o)||void 0===e?void 0:e.offsetHeight)&&r&&this.$nextTick((function(){r.style.bottom=n.visible?"".concat(o.offsetHeight,"px"):"0",r.style.minHeight=n.visible?"92px":"auto"}))}catch(t){}}},{key:"calcTrack",get:function(){return{type:"module",spm:"Savings_Detail"}}}]),e}(h.Vue);P([h.State],C.prototype,"klook",void 0),P([Object(h.Prop)({default:!0})],C.prototype,"hideDashed",void 0),P([Object(h.Prop)({default:function(){return{}}})],C.prototype,"poptipData",void 0),P([Object(h.Prop)({default:function(){return{}}})],C.prototype,"priceSummary",void 0);var S=C=P([Object(h.Component)({components:{SavingPriceDetails:j.default}})],C),D=(n(1214),n(1215),n(43)),x=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-poptip"},[n("span",t._b({staticClass:"price-poptip__text",on:{click:function(e){return e.stopPropagation(),t.clickHandle(t.visible)}}},"span",t.bindIHTrack(t.calcTrack),!1),[t._t("default"),t._v(" "),t._t("right-icon",[n("span",{class:["arrow-icon",t.visible?"hover-icon":""]},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-standard-down-new",size:"12"}})],1)])],2),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"js-custom-bottom-sheet-hack custom-bottom-sheet-style",class:[t.visible?"hack-style":""],attrs:{visible:t.visible,title:t.$t("76591")},on:{"update:visible":function(e){t.visible=e}}},"klk-bottom-sheet",Object.assign({},t.poptipDef,t.poptipData),!1),[n("SavingPriceDetails",{attrs:{"hide-dashed":t.hideDashed,"price-summary":t.priceSummary}})],1)],1)}),[],!1,null,"5aecdc50",null).exports,T=n(882),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:function(){T.a.$off("setShowPriceSummary2bus",this.setShowPriceSummary2bus).$on("setShowPriceSummary2bus",this.setShowPriceSummary2bus)}},{key:"bindIHTrack",value:function(){return w.a.apply(void 0,arguments)}},{key:"setShowPriceSummary2bus",value:function(t){this.clickHandle(t)}},{key:"clickHandle",value:function(t){var e,n=this;this.visible=t;var o=document.querySelector(".js-hack-total-footer"),r=document.querySelector(".js-custom-bottom-sheet-hack");try{(null===(e=o)||void 0===e?void 0:e.offsetHeight)&&r&&this.$nextTick((function(){r.style.bottom=n.visible?"".concat(o.offsetHeight,"px"):"0",r.style.minHeight=n.visible?"92px":"auto"}))}catch(t){}this.$emit("clickSavePrice",this.visible)}},{key:"calcTrack",get:function(){return{type:"module",spm:"Savings_Detail"}}}]),e}(h.Vue);I([h.State],R.prototype,"klook",void 0),I([Object(h.Prop)({default:!0})],R.prototype,"hideDashed",void 0),I([Object(h.Prop)({default:function(){return{}}})],R.prototype,"poptipData",void 0),I([Object(h.Prop)({default:function(){return{}}})],R.prototype,"priceSummary",void 0);var $=R=I([Object(h.Component)({components:{SavingPriceDetails:j.default}})],R),L=(n(1216),Object(D.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-poptip"},[n("span",t._b({staticClass:"price-poptip__text",on:{click:function(e){return e.stopPropagation(),t.clickHandle(!t.visible)}}},"span",t.bindIHTrack(t.calcTrack),!1),[t._t("default"),t._v(" "),t._t("right-icon",[n("span",{class:["arrow-icon",t.visible?"hover-icon":""]},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-standard-down-new",size:"12"}})],1)])],2)])}),[],!1,null,"0cfb817e",null).exports),A=n(16);function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var B=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).priceMaps={total:[{propKey:"sale_price",className:"salling-price",note:"售卖价"},{propKey:"from_price",className:"market-price",note:"市场价"},{propKey:"save_price",className:"saving-price",note:"节省价"},{propKey:"underline_price",className:"crossed-price",note:"划线价"}]},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"calcPlatform",get:function(){return this.customPlatform||this.klook.platform}},{key:"priceMapList",get:function(){return this.priceMaps[this.priceType]}},{key:"priceList",get:function(){var t=this,e=this.orderList,n=this.priceMapList,o=this.priceData||{};return e.filter((function(t){return o[t]})).map((function(e){var r=o[e];return"from_price"===e&&(r='<span class="spec-from-price">'.concat(t.$t("activity_detail_from_price",[12,r]),"</span>")),M({},n.find((function(t){return t.propKey===e}))||{},{value:r})}))}}]),e}(h.Vue);function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=O()(t||{}),data=m()({_hasDiscount:!1,_openKey:"has_discount",_priceKey:"price_show",_preKeyMaps:{sale_price:"total_price",save_price:"total_saved"},oldPriceShow:{}},n);data._hasDiscount=!!o[data._openKey];var r=data._hasDiscount,c=data._priceKey,l=data._preKeyMaps,d=data.oldPriceShow,v=o[c]||{};if(!r||!e){v.save_price="";var f=d.sale_price||d.from_price?m()({},v,{underline_price:"",save_price:""},d):O()(v);return f.sale_price&&(f.from_price=""),f}var h=O()(e||{}),y=Object.keys(l).reduce((function(t,e){var n=l[e];return t[e]=h[n],t}),{});return m()({},y,h)}function F(t,e,n){var o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{package_list:[M({package_name:null===(o=t)||void 0===o?void 0:o.package_name,sku_list:e.filter((function(t){return t.count})).map((function(t){return{text:t.priceName,value:Object(A.v)(n,t.sellingPrice),count:"x".concat(t.count)}}))},r||{})]}}B([h.State],N.prototype,"klook",void 0),B([Object(h.Prop)()],N.prototype,"customPlatform",void 0),B([Object(h.Prop)({default:function(){return{}}})],N.prototype,"poptipData",void 0),B([Object(h.Prop)({default:!1})],N.prototype,"hideSummaryPrice",void 0),B([Object(h.Prop)({default:""})],N.prototype,"styleType",void 0),B([Object(h.Prop)({default:function(){return{}}})],N.prototype,"priceData",void 0),B([Object(h.Prop)({default:"total"})],N.prototype,"priceType",void 0),B([Object(h.Prop)({default:function(){return["sale_price","from_price","save_price","underline_price"]}})],N.prototype,"orderList",void 0);var W=N=B([Object(h.Component)({components:{SavingPriceDetailsBottomSheet:x,SavingPriceDetailsCustomBs:L,SavingPriceDetailsPoptip:_.a}})],N);n(1217);n.d(e,"b",(function(){return V})),n.d(e,"c",(function(){return F}));var H=Object(D.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.priceData,expression:"priceData"}],staticClass:"total-slot",class:[t.styleType,t.calcPlatform]},[n("div",{staticClass:"total-slot-box"},[t._l(t.priceList,(function(e){return t._t(e.propKey,[e.value?n("span",{key:e.propKey,class:["price-box",e.className]},[t._t(e.propKey+"-value",["save_price"!==e.propKey||t.hideSummaryPrice?[n("span",{domProps:{innerHTML:t._s(e.value)}})]:["desktop"===t.calcPlatform&&t.priceData&&t.priceData.price_summary?n("SavingPriceDetailsPoptip",{staticClass:"inline-block",attrs:{slot:"save_price-value","poptip-data":t.poptipData,"price-summary":t.priceData.price_summary},slot:"save_price-value"},[n("span",{domProps:{innerHTML:t._s(e.value)}})]):t.priceData&&t.priceData.price_summary?n("SavingPriceDetailsCustomBs",t._g({staticClass:"inline-block",attrs:{slot:"save_price-value","price-summary":t.priceData.price_summary},slot:"save_price-value"},t.$listeners),[n("span",{domProps:{innerHTML:t._s(e.value)}})]):t._e()]],{slotScope:e})],2):t._e()],{slotScope:e})})),t._v(" "),t._t("price-details",[n("span",{key:"price-details",class:["price-box","pirce-details"]},[t._t("price-details-value")],2)])],2)])}),[],!1,null,"2a88c45e",null);e.a=H.exports},function(t,e,n){"use strict";n(20),n(27),n(61),n(14),n(11);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(10),y=n.n(h),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).formatLegends=[],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onItemChange",value:function(t){var e,n;if(t&&!y()(t)){var o=(null===(e=t)||void 0===e?void 0:e.legend_keys)||[];if(Array.isArray(o)&&(null===(n=o)||void 0===n?void 0:n.length)){var r=this.getLegendsMap(this.legends),c=this.formatLegends.map((function(t){return t.key})),l=!0,d=!1,v=void 0;try{for(var f,h=o[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;r[m]&&!c.includes(m)&&this.formatLegends.push(r[m])}}catch(t){d=!0,v=t}finally{try{l||null==h.return||h.return()}finally{if(d)throw v}}}else this.formatLegends=[]}else this.formatLegends=this.legends||[]}},{key:"getLegendsMap",value:function(t){return t.reduce((function(p,t){var e=t.key,n=t.color,desc=t.desc,text=t.text;return p[e]={color:n,key:e,desc:desc,text:text},p}),{})}},{key:"handleClick",value:function(){var t;if(!this.isDesktop&&this.showStatement&&this.showText){var e=(null===(t=this.legends)||void 0===t?void 0:t[0])||{},n=e.desc,desc=void 0===n?"":n,o=e.text,text=void 0===o?"":o;this.$emit("showStatement",{desc:desc,title:text})}}},{key:"isDesktop",get:function(){return"desktop"===this.platform}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.Prop)({default:function(){return[]}})],k.prototype,"legends",void 0),m([Object(f.Prop)({default:function(){}})],k.prototype,"item",void 0),m([Object(f.Prop)({default:!1})],k.prototype,"showStatement",void 0),m([Object(f.Prop)({default:!1})],k.prototype,"showText",void 0),m([Object(f.Prop)({default:"16"})],k.prototype,"iconSize",void 0),m([Object(f.Watch)("item",{immediate:!0})],k.prototype,"onItemChange",null);var O=k=m([f.Component],k),_=(n(1295),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"legends-box"},t._l(t.formatLegends,(function(e){return n("div",{key:e.key,staticClass:"legend-item",on:{click:t.handleClick}},[n("i",{staticClass:"dot",style:{"background-color":e.color||""}}),t._v(" "),t.showText?n("span",[t._v(t._s(e.text))]):t._e(),t._v(" "),t.showStatement?n("SvgIcon",{staticStyle:{"margin-left":"4px"},attrs:{name:"activity-common#icon_tips_tips_s_new",size:t.iconSize}}):t._e()],1)})),0)}),[],!1,null,"20ca92fa",null);e.a=component.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return m}));var o=n(7),r=n.n(o),c=n(116),l=n.n(c),d=n(1177),v=n.n(d);function f(t){return t<=0?"00":t<10?"0".concat(t):"".concat(t)}function h(t){var e,n=r.a.duration(r.a.utc(t).diff(r.a.utc()));return{days:(e=n.days(),e<=0?"0":"".concat(e)),hours:f(n.hours()),minutes:f(n.minutes()),seconds:f(n.seconds())}}function y(t){var e=r()().utc();return r.a.utc(t).diff(r()(e))>0}function m(time){var t=r()().utc();return r.a.utc(time).diff(t)}r.a.extend(l.a),r.a.extend(v.a)},,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(212),y=n(881),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return y.a.apply(void 0,arguments)}},{key:"gotoEditPkg",value:function(t){var e=(t||{}).package_id,n=document.querySelector("#js-pkg-id-".concat(e))||document.querySelector("#package_option_card_sku_with_detail")||document.querySelector("#package_option")||document.querySelector("#wifi_package_option"),o=0;n&&(o=Object(h.c)(n)-61-47,Object(h.d)({scrollY:o}))}},{key:"packageList",get:function(){var t;return(null===(t=this.priceSummary)||void 0===t?void 0:t.package_list)||[]}},{key:"savingList",get:function(){var t;return(null===(t=this.priceSummary)||void 0===t?void 0:t.discount_list)||[]}},{key:"totalList",get:function(){var t;return(null===(t=this.priceSummary)||void 0===t?void 0:t.total_saving)||[]}}]),e}(f.Vue);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)()],k.prototype,"styleType",void 0),m([Object(f.Prop)()],k.prototype,"hideTitle",void 0),m([Object(f.Prop)({default:""})],k.prototype,"title",void 0),m([Object(f.Prop)({default:!1})],k.prototype,"hideDashed",void 0),m([Object(f.Prop)()],k.prototype,"priceSummary",void 0);var O=k=m([f.Component],k),_=(n(1053),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"saving-price",class:[t.klook.platform,t.styleType]},[n("div",{staticClass:"details-box"},[t.hideTitle?t._e():n("div",{staticClass:"details-box__title"},[t._v(t._s(t.title||t.$t("76591")))]),t._v(" "),"desktop-right-price-type"===t.styleType?t._l(t.packageList,(function(e,i){return n("div",{key:"one_"+i,staticClass:"details-box__field"},[e.package_name?n("p",{staticClass:"sub-title"},[n("span",{staticClass:"pkg-name",attrs:{title:e.package_name}},[t._v(t._s(e.package_name))]),t._v(" "),n("img",t._b({staticClass:"pkg-edit",attrs:{src:"https://res.klook.com/image/upload/icon_edit_edit_m_dyxtan.svg",alt:"edit"},on:{click:function(n){return t.gotoEditPkg(e)}}},"img",t.bindIHTrack({type:"module",exposure:!1,spm:"LocateAndEditPackageOptions",query:{oid:"package_"+e.package_id}}),!1))]):t._e(),t._v(" "),e.datetime_format?n("p",{staticClass:"datetime-format"},[t._v(t._s(e.datetime_format))]):t._e(),t._v(" "),n("div",{staticClass:"sku-list-box"},[t._l(e.sku_list,(function(e,o){return n("p",{key:"sku_"+o,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value)),n("span",{staticClass:"count"},[t._v(t._s(e.count))])])])})),t._v(" "),t._l(e.extra_list,(function(e,o){return n("p",{key:"extra_"+o,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value))])])}))],2)])})):t._l(t.packageList,(function(e,i){return n("div",{key:"one_"+i,staticClass:"details-box__field"},[e.package_name?n("p",{staticClass:"sub-title"},[t._v(t._s(e.package_name))]):t._e(),t._v(" "),t._l(e.sku_list,(function(e,o){return n("p",{key:"sku_"+o,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value)),n("span",{staticClass:"count"},[t._v(t._s(e.count))])])])})),t._v(" "),t._l(e.extra_list,(function(e,o){return n("p",{key:"extra_"+o,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value))])])}))],2)})),t._v(" "),t.hideDashed?t._e():n("klk-divider",{staticStyle:{margin:"16px 0"},attrs:{dashed:""}}),t._v(" "),t.savingList.length?n("div",{staticClass:"details-box__field saving"},t._l(t.savingList,(function(e,i){return n("p",{key:"saving_"+i,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value))])])})),0):t._e(),t._v(" "),t.totalList.length?n("div",{staticClass:"details-box__field total"},t._l(t.totalList,(function(e,i){return n("p",{key:"total_"+i,staticClass:"line-box"},[n("span",{staticClass:"text"},[t._v(t._s(e.text))]),n("span",{staticClass:"value"},[t._v(t._s(e.value))])])})),0):t._e()],2)])}),[],!1,null,"1eb1a4e7",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(131),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).fetchData=null,t}var n,f;return Object(v.a)(e,t),Object(c.a)(e,[{key:"created",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initHandler(),t.next=3,this.fetchHandler();case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"initHandler",value:function(){var t=this.initFn;this.value="",t&&t(),this.$emit("change","init")}},{key:"fetchHandler",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.fetchFn)){t.next=8;break}return t.next=4,n();case 4:return o=t.sent,this.fetchData=o,(null===(e=o)||void 0===e?void 0:e.success)?this.$emit("change","fetchSuccess"):this.$emit("change","fetchError"),t.abrupt("return",o);case 8:this.$emit("change","fetchWait");case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"mockValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;setTimeout((function(){e.$emit("change",t)}),n)}}]),e}(h.Vue);m([Object(h.Model)("change")],k.prototype,"value",void 0),m([Object(h.Prop)()],k.prototype,"initFn",void 0),m([Object(h.Prop)()],k.prototype,"fetchFn",void 0),k=m([h.Component],k);var O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transfer:!0,class:"exp-common-reset-bottom-sheet",visible:!1,title:"",showClose:!0},o={"common-config":{"can-pull-close":!1},"common-fixed-config":{class:"exp-common-reset-bottom-sheet hack-zindex-safari",height:"90%","can-pull-close":!1},"pickup-return-config":{height:"auto","can-pull-close":!1},"package-options-config":{height:"90%"},"package-details-config":{height:"90%"},"fixed-height-config":{height:"90%"}},r=n;return"string"==typeof t?r=Object(y.merge)(r,o[t]||{}):e=t,r=Object(y.merge)(r,e||{})},_=k,j=(n(1046),n(43));n.d(e,"getBottomSheetConfig",(function(){return O}));var component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"load-hander-wrap"},[e("div",{staticClass:"load-hander-box"},[this.value&&"init"!==this.value?e("div",{staticClass:"common-body-box"},[this._v("\n      common-body-box\n    ")]):e("div",{staticClass:"common-load-box"},[e("klk-loading")],1)])])}),[],!1,null,"36eda23c",null);e.default=component.exports},function(t,e,n){"use strict";var o={};n.r(o),n.d(o,"getActIsHeroPage",(function(){return f})),n.d(o,"getActValidPackages",(function(){return h})),n.d(o,"getActSomeOpenTicket",(function(){return y})),n.d(o,"getActSomeDiscount",(function(){return m})),n.d(o,"getActIsMultiSpec",(function(){return k})),n.d(o,"getActIsNewOpenTicket",(function(){return O})),n.d(o,"FromKeyDefined",(function(){return _}));var r={};n.r(r),n.d(r,"getPkgSelectedData",(function(){return j})),n.d(r,"getPkgIsNewOpenTicket",(function(){return w})),n.d(r,"getPkgIsWarmingOrSuspended",(function(){return P})),n.d(r,"getActInDatePackages",(function(){return C})),n.d(r,"getExpExtraUnitList",(function(){return S}));var c={};n.r(c),n.d(c,"getExpTotalUnitCount",(function(){return x})),n.d(c,"getExpUnitsExtra",(function(){return T})),n.d(c,"setExpAutoSelectSku",(function(){return I})),n.d(c,"getExpAutoSetDate",(function(){return R}));var l={};n.r(l),n.d(l,"getBookingCoreData2section",(function(){return L})),n.d(l,"getBookingCoreData2vm",(function(){return A}));n(22),n(14),n(11),n(8),n(12);var d=n(0),v=n(131);function f(t){return"hero_page"===t}function h(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"has_stocks";return(null===(e=t)||void 0===e?void 0:e.filter((function(t){return t[n]})))||[]}function y(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"package_ticket_type";return null===(e=t)||void 0===e?void 0:e.some((function(t){return 3===t[n]}))}function m(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"product_tags.discount_tags.0";return null===(e=t)||void 0===e?void 0:e.some((function(t){return Object(v.get)(t,n,!1)}))}function k(t){var e;return(null===(e=t)||void 0===e?void 0:e.length)>1}function O(t){return 3===t}var _={desktop:{sku:"desktop_card-sku-with-detail",spec:"desktop_spec-type",wifi:"desktop_wifi-spec-type"},mobile:{sku:"mobile_card-sku",spec:"mobile_spec-type",left:"mobile_spec-type-left",wifi:"mobile_wifi-spec-type"}};n(30),n(20),n(27),n(70);function j(t,e){var n;return e&&t.length&&(null===(n=t)||void 0===n?void 0:n.find((function(t){return t.package_id===e})))||{}}function w(t){return 3===t}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publish_info.publish_status";return[2,3].includes(Object(v.get)(t,e))}function C(t,e){var n;return(null===(n=t)||void 0===n?void 0:n.stocks)?e.filter((function(e){var n=t.stocks;if(!n)return!1;var o=n.find((function(t){return t.package_id===e.package_id}));return!!o&&o.stock>0})):e}function S(t,e){var n=t||{},o=n.arrangementId,r=void 0===o?"default":o,c=n.maxPurchased,l=e.prices,d=void 0===l?[]:l,v=e.inventories,f=void 0===v?{}:v,h=d.filter((function(t){return t.required&&(t.price_min_pax||t.min_pax)})).reduce((function(t,e){return t+(e.price_min_pax||e.min_pax)}),0);return d.map((function(t){var e,n=t.price_min_pax||t.min_pax||0,o=c-h;e=o<0||!(t.required&&n)&&Math.max(n,1)>o;var l=Math.max(n,1)>f[t.inventory_id],d=t.required?n:0;return{redeem_status:t.redeem_status,product_tags:t.product_tags,priceMinPax:n,priceMaxPax:t.price_max_pax||t.max_pax||0,count:d,credits:t.credits,priceId:t.price_id||t.id,sellingPrice:t.selling_price||t.price||0,marketPrice:t.market_price||0,originalPrice:t.original_price||0,promotionDiscount:t.discount||0,priceName:t.price_name||t.name,isSoldOut:e||l,isFree:0===parseFloat(t.selling_price||t.price),specPriceDesc:t.spec_price&&t.spec_price.desc,requireBuy:t.required&&n,requireMinPax:!t.required&&d>=n&&n>1,required:t.required,skuId:t.sku_id,srvSkuInfo:t.srv_sku_info,inventoryId:t.inventory_id,eventId:t.promotion_event?t.promotion_event.event_id:0,isInPromotion:!!t.promotion_event&&!!t.promotion_event.event_id,isDefault:"default"===r}}))}n(47);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){var e;return(null===(e=t)||void 0===e?void 0:e.length)?t.reduce((function(t,e){return t+e.count}),0):0}var T=function(t,e){var n=e.maxPurchased,o=e.inventories,r=void 0===o?{}:o,c=e.credits_tag,l=B.getExpTotalUnitCount(t);return Array.isArray(t)?t.map((function(t){var e=t.required?t.priceMinPax:0,o=Math.min(t.priceMaxPax,n-(l-t.count));if(void 0!==t.prevCount){var v=Math.min(o,Number(r[t.skuId]));t.prevCount>t.count?t.count=t.prevCount>v?0:t.prevCount:t.prevCount<t.count&&(t.count=t.prevCount<e?0:t.prevCount),t.prevCount=void 0}return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({credits_tag:c},t,{requireMinPax:!t.required&&t.count>=t.priceMinPax&&t.priceMinPax>1,minCount:e,maxCount:o})})):[]},I=function(t){var e,n,o,r,c=t.unit,l=t.inventories,d=t.selectedTime,v=t.preSelectedSkuId,f=t.preview,h=t.pkgUnitsObj,y=t.currentSelectedPackage,m=t.totalUnitCount,k=t.$t,O=t.passValidate;if(v===(null===(e=c)||void 0===e?void 0:e.skuId)){var _=(d||{}).maxPurchased,j=(y||{}).max_pax,w=c.count,P=c.priceMinPax,C=c.priceMaxPax,S=c.inventoryId,D=c.maxCount,x=Math.min(C,_-(m-w)),T=Math.min(x,Number(null===(n=l)||void 0===n?void 0:n[S]));if(f&&!(null===(r=null===(o=h)||void 0===o?void 0:o.unitList)||void 0===r?void 0:r.length))return;return m>=j?k("activity.v2.error.package_max",[j]):w>=C?D?k("activity.error.price_max_v2",[D]):void 0:w>=T||0===w&&w+P>T?O?void 0:k("activity.v2.unit_out_of_inventory"):w<C?void(c.count=Math.max(P,1)):k("activity.error.price_max_v2",[C])}},R=function(t){var e,n=t.isFirstDate,o=t.packageSchedules,r=t.currentSelectedPackage,c=Object(v.cloneDeep)(o||[]),l=n?c:c.reverse(),d=function(t){return!!t.stock&&r&&t.stock>=Number(r.min_pax||0)};return(null===(e=l.find((function(t){return(t.time_slots||[]).some(d)})))||void 0===e?void 0:e.date)||""},$=n(2e3);n(37);function L(t){var e,n,o=t.businessData,r=t.basicData,c=t.$route,l=o||{},d=l.activity_id,v=l.activity_ticket_type,f=l.best_package_id,h=l.date_description,y=l.filters,m=l.is_nsw_activity,k=l.is_support_shopping_cart,O=l.package_filter_tags,_=l.packages,j=l.spec,w=l.template_id,P=l.membership_info,C=l.activity_closer_price,S=l.package_detail,D=l.packages_with_sku,x=l.reopen,T=r||{},I=T.act_product_type,R=T.is_line_page,$=T.activity_page_template_id,L=T.is_in_flash_sale,A=T.publish_info,M=c||{},B=M.params,N=M.query;return{reopen:x,activityPageTemplateId:Number($)||-1,isPreview:"preview"===(null===(e=B)||void 0===e?void 0:e.preview),activityId:Number(d)||0,isTranslation:"1"===(null===(n=N)||void 0===n?void 0:n.translation),publishInfo:A,specList:j||[],actProductType:I||"",activityTicketType:Number(v),isLinePage:!!R,packageId:E({best_package_id:f,$route:c}),packageList:_||[],templateId:Number(w)||0,isSupportShoppingCart:!!k,dateDescription:h||"",heroFilterObj:y,packageFilterTagList:O||[],membershipInfo:P||{},packageDetailList:S||[],packagesWithSku:D||[],activityCloserPrice:C||{},isInFlashSale:L,isNswActivity:m}}var A=function(t){var e={reopen:t.reopen,activityPageTemplateId:t.activityPageTemplateId,isPreview:t.isPreview,activityId:t.activityId,isTranslation:t.isTranslation,publishInfo:t.publishInfo,specList:t.specList,actProductType:t.actProductType,activityTicketType:t.activityTicketType,isLinePage:t.isLinePage,packageId:t.packageId,packageList:t.packageList,templateId:t.templateId,isSupportShoppingCart:t.isSupportShoppingCart,dateDescription:t.dateDescription,heroFilterObj:t.heroFilterObj,packageFilterTagList:t.packageFilterTagList,membershipInfo:t.membershipInfo,packageDetailList:t.packageDetailList,packagesWithSku:t.packagesWithSku,activityCloserPrice:t.activityCloserPrice,isInFlashSale:t.isInFlashSale};return Object(v.cloneDeep)(e)},E=function(data){var t,e,n=data.$route.query,o=data.best_package_id,r=(null===(t=n)||void 0===t?void 0:t.package_id)||"";(null===(e=r)||void 0===e?void 0:e.includes("_"))&&(r=r.split("_")[0]);var c=Number(r);return c>0?c:o>0?o:0};function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var B=e.a=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},l,{},o,{},r,{},c,{},$)},function(t,e,n){"use strict";n.r(e);n(20);var o=n(25),r=(n(11),n(8),n(274),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(79),m=n.n(y),k=n(914),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);O([Object(h.Prop)({default:function(){return""}})],_.prototype,"title",void 0);var j=_=O([h.Component],_),w=(n(1277),n(43)),P=Object(w.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return this.title?e("div",{staticClass:"location"},[e("SvgIcon",{attrs:{name:"common#icon_travel_location_fill_xs_color-common-white",size:"14"}}),this._v(" "),e("span",{staticClass:"location-title"},[this._v(" "+this._s(this.title))])],1):this._e()}),[],!1,null,"572b7860",null).exports,C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).isLessThan200=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"style",value:function(t){var e=t.background_color_left,n=t.background_color_right,o=t.text_color,style="\n          background: ".concat(e,";\n          background: -moz-linear-gradient(left,  ").concat(e," 0%, ").concat(n," 100%);\n          background: -webkit-linear-gradient(left,  ").concat(e," 0%,").concat(n," 100%);\n          background: linear-gradient(to right,  ").concat(e," 0%,").concat(n," 100%);\n          filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='").concat(e,"', endColorstr='").concat(n,"',GradientType=1 );\n          color: ").concat(o,"\n        ");return style}},{key:"calcParentWidth",value:function(){var t=document.querySelector(".activity-card-tags").getBoundingClientRect().width;this.isLessThan200=t<200}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.calcParentWidth()}))}},{key:"valid",get:function(){return this.tags&&this.tags.length}}]),e}(h.Vue);C([h.State],S.prototype,"klook",void 0),C([Object(h.Prop)({type:Array,default:function(){return[]}})],S.prototype,"tags",void 0);var D=S=C([h.Component],S),x=(n(1278),Object(w.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"activity-card-tags",class:[t.isLessThan200&&"less-than-200"]},t._l(t.tags,(function(e,o){return n("div",{key:o,staticClass:"tag",style:t.style(e)},[n("span",[t._v(t._s(e.text))])])})),0):t._e()}),[],!1,null,null,null).exports),T=n(1098),I=(n(47),n(954),n(277)),R=n.n(I),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showBookedNumber=!0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"setShowBookedNumber",value:function(){this.bookedNumber&&this.isBigCard||(this.showBookedNumber=!1)}},{key:"calcWidth",value:function(){if(!this.isNewActivity&&this.$el&&this.$el.querySelector){var t=this.$el.querySelector(".page-activity-recommend-score"),e=this.$el.querySelector(".page-activity-recommend-score-number"),n=this.$el.querySelector(".page-activity-recommend-review-number"),o=this.$el.querySelector(".page-activity-recommend-booked-number");if(t){var r=t.clientWidth;if(t.scrollWidth>r){var c=this.calcWidthByLanguage?"0px":"17px";if(e&&n){if(e.scrollWidth+n.scrollWidth>r){this.showBookedNumber=!1;var l="calc(100% - ".concat(e.scrollWidth,"px - 2px)");this.updateElementAttr(n,"style","width:".concat(l))}else if(o){var d="calc(100% - ".concat(e.scrollWidth,"px - ").concat(n.scrollWidth,"px  - 16px - ").concat(c,")");this.updateElementAttr(o,"style","width:".concat(d))}}else if(o&&n)if(n.scrollWidth>r){this.showBookedNumber=!1;this.updateElementAttr(n,"style","width:".concat("calc(100% - 2px)"))}else{var v="calc(100%  - ".concat(n.scrollWidth,"px - 16px - ").concat(c,")");this.updateElementAttr(o,"style","width:".concat(v))}else if(o&&e){var f="calc(100% - ".concat(e.scrollWidth,"px - 16px - ").concat(c,")");this.updateElementAttr(o,"style","width:".concat(f))}}}}}},{key:"updateElementAttr",value:function(t,e,n){t&&t.setAttribute(e,n)}},{key:"created",value:function(){this.setShowBookedNumber()}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.calcWidth()}))}},{key:"starIconSize",get:function(){return this.isBigCard?16:12}},{key:"reviewScore",get:function(){var t;return R()(null===(t=this.reviewData)||void 0===t?void 0:t.score)}},{key:"isNewActivity",get:function(){var t;return!!(null===(t=this.reviewData)||void 0===t?void 0:t.description)}},{key:"reviewNumber",get:function(){var t;return(null===(t=this.reviewData)||void 0===t?void 0:t.number)||""}},{key:"star",get:function(){return Number.isInteger(this.reviewScore)?"".concat(this.reviewScore,".0"):this.reviewScore}},{key:"bookedNumber",get:function(){var t;return(null===(t=this.reviewData)||void 0===t?void 0:t.booked)||""}},{key:"showScore",get:function(){return!this.isNewActivity&&(this.reviewScore>0||this.reviewNumber||this.showBookedNumber)}},{key:"calcWidthByLanguage",get:function(){return["zh-CN","ko","zh-HK","zh-TW","ja"].includes(this.klook.language)}}]),e}(h.Vue);$([h.State],L.prototype,"klook",void 0),$([Object(h.Prop)()],L.prototype,"reviewData",void 0),$([Object(h.Prop)({default:!1})],L.prototype,"isBigCard",void 0);var A=L=$([Object(h.Component)({components:{}})],L),E=(n(1279),Object(w.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showScore||t.isNewActivity?n("div",t._b({staticClass:"page-activity-recommend-info-title-review",class:{"is-big-card":t.isBigCard}},"div",t.$attrs,!1),[t.showScore?n("div",{staticClass:"page-activity-recommend-score"},[t.reviewScore>0?n("span",{staticClass:"page-activity-recommend-score-number"},[n("SvgIcon",{staticClass:"svg-style",attrs:{name:"activity-common#icon_operational_star_fill_xxxs",size:t.starIconSize}}),t._v(" "),n("span",{staticClass:"score-rate"},[t._v(t._s(t.star))])],1):t._e(),t._v(" "),t.reviewNumber?n("span",{staticClass:"page-activity-recommend-review-number"},[t._v("\n      ("),n("span",{staticClass:"review-number"},[t._v(t._s(t.reviewNumber))]),t._v(")\n    ")]):t._e(),t._v(" "),(t.reviewScore>0||t.reviewNumber)&&t.showBookedNumber?n("i",{staticClass:"sep"}):t._e(),t._v(" "),t.showBookedNumber?n("span",{staticClass:"page-activity-recommend-booked-number"},[t._v("\n      "+t._s(t.bookedNumber)+"\n    ")]):t._e()]):t._e(),t._v(" "),t.isNewActivity?n("div",{staticClass:"page-activity-recommend-new-activity"},[n("span",[t._v(t._s(t.reviewData.description))])]):t._e()]):t._e()}),[],!1,null,"d40ddcf0",null).exports),M=(n(45),n(86),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),B=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"calcWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"14px";var o=e||this.$el.querySelectorAll(".dynamic-width-price");if(o){var r=[];(Array.from(o)||[]).forEach((function(t){t.clientWidth<t.scrollWidth&&(t.style.fontSize=n,r.push(t))})),r.length&&this.$nextTick((function(){t.calcWidth(r,"12px")}))}}},{key:"mounted",value:function(){this.calcWidth()}},{key:"isLargeCard",get:function(){return m()(this.$attrs,"is-big-card",!1)}},{key:"fromPrice",get:function(){var t;return(null===(t=this.priceData)||void 0===t?void 0:t.from_price)?this.$t("activity_detail_from_price",[this.priceFromFontSize,this.priceData.from_price]):""}}]),e}(h.Vue);M([h.State],B.prototype,"klook",void 0),M([Object(h.Prop)({type:Object,default:function(){return{}}})],B.prototype,"priceData",void 0),M([Object(h.Prop)({type:Number,default:12})],B.prototype,"priceFromFontSize",void 0),M([Object(h.Prop)({type:Boolean,default:!1})],B.prototype,"isSoldOut",void 0);var N=B=M([h.Component],B),V=(n(1280),Object(w.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.priceData.free_text?n("div",{staticClass:"activity-card-free-text",class:{"small-card":!t.isLargeCard}},[t._v("\n  "+t._s(t.priceData.free_text)+"\n")]):n("div",{staticClass:"activity-card-price-box",class:[t.isLargeCard?"big-card":"small-card"]},[t.fromPrice?n("span",{staticClass:"activity-card-price-box__from-price dynamic-width-price",domProps:{innerHTML:t._s(t.fromPrice)}}):t._e(),t._v(" "),t.priceData.sale_price?n("span",{staticClass:"activity-card-price-box__sell-price dynamic-width-price",class:{"is-sold-out":t.isSoldOut}},[t._v("\n    "+t._s(t.priceData.sale_price)+"\n  ")]):t._e(),t._v(" "),t.priceData.underline_price?n("span",{staticClass:"activity-card-price-box__underline-price dynamic-width-price"},[t._v("\n    "+t._s(t.priceData.underline_price)+"\n  ")]):t._e(),t._v(" "),t.priceData.save_price?n("span",{staticClass:"activity-card-price-box__save-price"},[t._v("\n    "+t._s(t.priceData.save_price)+"\n  ")]):t._e()])}),[],!1,null,"7ded1bc4",null).exports),F=n(1108),W=n(883),H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},U=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).$bannerSwiper=null,t.bannerSwiperOption={resistanceRatio:0,on:{slideChange:function(){t.swiperSlideChange()}}},t.currentIndex=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"swiperSlideChange",value:function(){var t=this.$bannerSwiper.realIndex;this.currentIndex=+t}},{key:"changeSlide",value:function(t){this.$bannerSwiper.slideTo(t)}}]),e}(h.Vue);H([Object(h.Prop)({type:Array,default:[]})],U.prototype,"bannerList",void 0);var z,G=U=H([Object(h.Component)({components:{AdaptiveCard:k.a}})],U),Y=(n(1282),Object(w.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"swiper",rawName:"v-swiper:$bannerSwiper",value:t.bannerSwiperOption,expression:"bannerSwiperOption",arg:"$bannerSwiper"}],staticClass:"swiper-container"},[n("div",{staticClass:"swiper-wrapper"},t._l(t.bannerList,(function(e,o){return n("div",{key:o,staticClass:"swiper-slide"},[n("AdaptiveCard",t._b({key:o,staticClass:"activity-card-background",attrs:{image:e}},"AdaptiveCard",t.$attrs,!1))],1)})),0),t._v(" "),n("div",{staticClass:"swiper-pagination"},t._l(t.bannerList,(function(e,o){return n("div",{key:o,staticClass:"swiper-pagination-item",class:{active:t.currentIndex===o},on:{click:function(e){return e.stopPropagation(),t.changeSlide(o)}}})})),0),t._v(" "),t._t("default")],2)}),[],!1,null,"48ed2029",null).exports),K=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};!function(t){t.MODERN="modern",t.NORMAL="normal"}(z||(z={}));var J=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"cardClick",value:function(){var t=this;setTimeout((function(){var e=+new Date,n="undefined"!=typeof _args3?_args3:null,o=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t};"desktop"===t.klook.platform?window.open(o(t.$href(t.cardData.deeplink))):window.location.href=o(t.$href(t.cardData.deeplink))}))}},{key:"showTag",value:function(t){var e,n,o;return!!(null===(o=null===(n=null===(e=this.cardData)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n[t])||void 0===o?void 0:o.length)}},{key:"bannerList",get:function(){var t,e,n;return null!=(n=null===(e=null===(t=this.cardData)||void 0===t?void 0:t.brand_info)||void 0===e?void 0:e.imgs)?n:[]}},{key:"cardImgAlt",get:function(){var t,e,n;return null!=(n=null===(e=null===(t=this.cardData)||void 0===t?void 0:t.brand_info)||void 0===e?void 0:e.image_alt)?n:""}},{key:"isSingleBanner",get:function(){var t=this.isDesktop,e=this.needBanner,n=this.bannerList;return t||n.length<2||!e}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"isLargeCard",get:function(){return m()(this.$attrs,"isBigCard","")}},{key:"image",get:function(){var t,e;return(null===(e=null===(t=this.cardData)||void 0===t?void 0:t.brand_info)||void 0===e?void 0:e.image_url)||""}},{key:"bannerInfoTages",get:function(){var t,e;return(null===(e=null===(t=this.cardData)||void 0===t?void 0:t.brand_info)||void 0===e?void 0:e.tags)||[]}},{key:"isLarge",get:function(){return"large"===this.type}},{key:"isTagsHidden",get:function(){return!this.isDesktop&&!this.isLarge}},{key:"svgStyle",get:function(){var t=this.isDesktop?"24px":"20px";return{width:t,height:t}}},{key:"ratio",get:function(){var t=this.$attrs.ratio||"";return t||(this.isLargeCard?"16:9":"4:3")}},{key:"whatWeLove",get:function(){var t,e;return(null===(e=null===(t=this.cardData)||void 0===t?void 0:t.seo)||void 0===e?void 0:e.trim())||""}},{key:"isSoldOut",get:function(){var t;return(null===(t=this.cardData)||void 0===t?void 0:t.sold_out)||!1}},{key:"calcDepartureList",get:function(){var t;return(null===(t=this.cardData)||void 0===t?void 0:t.departures)||[]}},{key:"summaries",get:function(){var t=this.cardData||{},e=t.distance,n=void 0===e?"":e,o=t.summaries,r=void 0===o?[]:o;return n&&Array.isArray(r)&&r.push(n),null!=r?r:[]}},{key:"isModernCard",get:function(){return!this.isDesktop||this.theme===z.MODERN}}]),e}(h.Vue);K([h.State],J.prototype,"klook",void 0),K([Object(h.Prop)()],J.prototype,"cardData",void 0),K([Object(h.Prop)()],J.prototype,"imageType",void 0),K([Object(h.Prop)({default:"large"})],J.prototype,"type",void 0),K([Object(h.Prop)({default:z.NORMAL})],J.prototype,"theme",void 0),K([Object(h.Prop)()],J.prototype,"cardType",void 0),K([Object(h.Prop)()],J.prototype,"logoWidth",void 0),K([Object(h.Prop)({type:Boolean,default:!1})],J.prototype,"needBanner",void 0),K([Object(h.Ref)()],J.prototype,"rwdCard",void 0);var X=J=K([Object(h.Component)({components:{CardDeparture:F.a,AdaptiveCard:k.a,CardLocation:P,CardTags:x,CardTitle:T.a,CardTitleScore:E,CardPrice:V,ExpTagging:W.default,CardBanner:Y}})],J),Q=(n(1283),Object(w.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cardData?n("div",t._b({ref:"rwdCard",class:["rwd-activity-card",t.klook.platform,{"large-card":t.isLargeCard,"has-border":t.$attrs.hasBorder,"theme-modern-card":t.isModernCard}],attrs:{"data-spm-virtual-item":"__virtual?typ=entry"},on:{click:t.cardClick}},"div",t.$attrs,!1),[t.isSingleBanner?n("AdaptiveCard",t._b({staticClass:"activity-card-background",attrs:{ratio:t.ratio,image:t.image,"image-alt":t.cardImgAlt,"logo-width":t.logoWidth,"image-type":t.imageType}},"AdaptiveCard",t.$attrs,!1),[t.bannerInfoTages&&t.bannerInfoTages.length>0?n("div",[n("div",{staticClass:"activity-card-wrap"}),t._v(" "),n("div",{staticClass:"activity-card-top",class:[{"activity-card-top_bigCard":t.isLargeCard}]},[n("ExpTagging",{staticClass:"banner-info-tag",attrs:{list:t.bannerInfoTages}})],1)]):t._e()]):n("CardBanner",t._b({attrs:{"banner-list":t.bannerList,ratio:t.ratio,"logo-width":t.logoWidth,"image-type":t.imageType}},"CardBanner",t.$attrs,!1),[t.bannerInfoTages&&t.bannerInfoTages.length>0?n("div",[n("div",{staticClass:"activity-card-wrap"}),t._v(" "),n("div",{staticClass:"activity-card-top",class:[{"activity-card-top_bigCard":t.isLargeCard}]},[n("ExpTagging",{staticClass:"banner-info-tag",attrs:{list:t.bannerInfoTages}})],1)]):t._e()]),t._v(" "),n("div",{class:["activity-card_content",{"large-card_content":t.isLargeCard,"theme-modern-card_content":t.isModernCard}]},[n("div",{staticClass:"activity-card_content-top"},[n("div",{staticClass:"activity-card_content-title-section"},[n("div",{staticClass:"activity-card_content-top_title"},[t.isLargeCard&&t.summaries.length>0?n("div",{staticClass:"activity-card_content-top_baseinfo",class:{"--is-large":t.isLargeCard}},t._l(t.summaries,(function(e,o){return n("span",{key:o,staticClass:"summary-item"},[n("span",[t._v(t._s(e))]),t._v(" "),n("i")])})),0):t._e(),t._v(" "),n("CardTitle",{attrs:{title:t.cardData.title,href:t.cardData.deeplink,"is-large-card":!!t.isLargeCard}}),t._v(" "),t.isLargeCard&&t.calcDepartureList.length?n("CardDeparture",{staticClass:"card-departure-wrap",attrs:{list:t.calcDepartureList}}):t._e(),t._v(" "),t.whatWeLove&&t.isLargeCard?n("div",{staticClass:"seo-content"},[t._v(t._s(t.whatWeLove))]):t._e(),t._v(" "),n("CardTitleScore",{staticClass:"activity-card_score",attrs:{"review-data":t.cardData.review,"is-big-card":t.isLargeCard}}),t._v(" "),t.isLargeCard&&t.showTag("attribute_tags")?n("ExpTagging",{staticClass:"activity-card_property",attrs:{list:t.cardData.product_tags.attribute_tags||[]}}):t._e()],1)])]),t._v(" "),n("div",{staticClass:"activity-card-bottom"},[n("div",[n("CardPrice",{staticClass:"home-activity-card_price",attrs:{"price-data":t.cardData.price,"is-big-card":t.isLargeCard,"is-sold-out":t.isSoldOut}}),t._v(" "),!t.cardData.price.free_text&&t.showTag("discount_tags")?n("ExpTagging",{staticClass:"bottom-tag",attrs:{list:t.cardData.product_tags.discount_tags||[]}}):t._e()],1)])])],1):t._e()}),[],!1,null,"bc8d1656",null).exports),Z=(n(117),n(61),n(14),n(37),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),tt=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"reviewStarNumber",get:function(){return R()(this.reviewStar)}},{key:"isNewActivity",get:function(){return 0===this.reviewStarNumber&&""===this.reviewHint}},{key:"star",get:function(){return Number.isInteger(this.reviewStarNumber)?"".concat(this.reviewStarNumber,".0"):this.reviewStar}},{key:"hint",get:function(){var t=this.$attrs.isBigCard;return this.isNewActivity?this.$t("1597"):t?this.reviewHint:this.reviewHint.split("|")[0]}}]),e}(h.Vue);Z([h.State],tt.prototype,"klook",void 0),Z([Object(h.Prop)()],tt.prototype,"reviewStar",void 0),Z([Object(h.Prop)()],tt.prototype,"reviewHint",void 0);var et=tt=Z([Object(h.Component)({components:{}})],tt),it=(n(1284),Object(w.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({staticClass:"page-activity-recommend-info-title-review"},"div",t.$attrs,!1),[n("div",{staticClass:"page-activity-recommend-score"},[t.reviewStarNumber>0?n("span",{staticClass:"page-activity-recommend-score-number"},[n("SvgIcon",{class:{"fix-en-svg-style":t.klook.language.includes("en")},attrs:{name:"activity-common#icon_operational_star_fill_xxxs",size:"12"}}),t._v(" "),n("span",{staticClass:"score-rate"},[t._v(t._s(t.star))])],1):t._e(),t._v(" "),n("span",{staticClass:"page-activity-recommend-review-number"},[t._v(t._s(t.hint))])])])}),[],!1,null,"7855d481",null).exports),nt=n(85),at=n(16),ot=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ct=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"setSellPriceStyle",value:function(t){var e=Object(at.y)(t),style={fontSize:"14px"},base=this.isBigCard?10:7;return e.length>base&&(style.fontSize="12px"),e.length>base+2&&(style.fontSize="10px"),{price:"<span class='sell-price-box'>".concat(e,"</span>"),style:style}}},{key:"priceWithCurrencySymbol",value:function(t){return"".concat(this.currencySymbol).concat(t)}},{key:"activitySellPrice",get:function(){return Number(this.sellPrice)}},{key:"activityMarketPrice",get:function(){return Number(this.marketPrice)}},{key:"isBigCard",get:function(){return m()(this.$attrs,"is-large-card",null)}},{key:"selling",get:function(){if(isNaN(this.activitySellPrice))return null;if(!this.activitySellPrice)return"<b>".concat(this.desc,"</b>");if(this.activitySellPrice>0){var t=this.setSellPriceStyle(this.sellPrice),e=t.price,style=t.style;return this.toPrice>this.fromPrice?this.$t("activity_detail_from_price",[this.priceFromFontSize,this.priceWithCurrencySymbol(e)]):"<b style='font-size:".concat(style.fontSize,"'>").concat(this.priceWithCurrencySymbol(e),"</b>")}}},{key:"market",get:function(){return this.activitySellPrice>0&&this.activityMarketPrice>this.activitySellPrice?this.priceWithCurrencySymbol(this.marketPrice):null}},{key:"currencySymbol",get:function(){return this.symbol||nt.b[this.klook.currency]}}]),e}(h.Vue);ot([h.State],ct.prototype,"klook",void 0),ot([Object(h.Prop)({default:0})],ct.prototype,"fromPrice",void 0),ot([Object(h.Prop)({default:0})],ct.prototype,"toPrice",void 0),ot([Object(h.Prop)()],ct.prototype,"sellPrice",void 0),ot([Object(h.Prop)()],ct.prototype,"marketPrice",void 0),ot([Object(h.Prop)()],ct.prototype,"desc",void 0),ot([Object(h.Prop)()],ct.prototype,"symbol",void 0),ot([Object(h.Prop)({default:12})],ct.prototype,"priceFromFontSize",void 0);var st=ct=ot([h.Component],ct),lt=Object(w.a)(st,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._g({staticClass:"activity-price"},this.$attrs),[this._t("default",null,{sellPrice:this.selling,marketPrice:this.market})],2)}),[],!1,null,null,null).exports,ut=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},pt=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);ut([Object(h.Prop)({type:Array,default:function(){return[]}})],pt.prototype,"discountList",void 0);var vt=pt=ut([h.Component],pt),ft=(n(1285),Object(w.a)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.discountList&&t.discountList.length?n("div",{staticClass:"activity-promotion-box"},t._l(t.discountList,(function(e,o){return n("span",{key:o,staticClass:"item"},[t._v(t._s(e.text))])})),0):t._e()}),[],!1,null,"8b5d92f8",null).exports),ht=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},gt=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showPormotionBeforeMarketPrice=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"calcWidth",value:function(){var t=this.$el.querySelector(".activity-card-promition-text");t&&t.clientWidth<t.scrollWidth&&(this.showPormotionBeforeMarketPrice=!0)}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.isLargeCard||"mobile"!==t.klook.platform?t.calcWidth():t.showPormotionBeforeMarketPrice=!0}))}},{key:"isLargeCard",get:function(){return m()(this.$attrs,"isbigcard",null)}}]),e}(h.Vue);ht([h.State],gt.prototype,"klook",void 0),ht([Object(h.Prop)({type:Object,default:function(){return{}}})],gt.prototype,"marketPrice",void 0),ht([Object(h.Prop)({type:Object,default:function(){return{}}})],gt.prototype,"sellingPrice",void 0),ht([Object(h.Prop)()],gt.prototype,"freeText",void 0);var bt=gt=ht([Object(h.Component)({components:{ActivityCardPrice:lt,CardPromotion:ft}})],gt),yt=(n(1286),Object(w.a)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.freeText?n("div",{staticClass:"activity-card-free-text"},[t._v("\n  "+t._s(t.freeText)+"\n")]):n("ActivityCardPrice",t._b({attrs:{"market-price":(t.marketPrice||{}).amount_display,"sell-price":(t.sellingPrice||{}).amount_display,symbol:(t.sellingPrice||{}).symbol},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.marketPrice,r=e.sellPrice;return[t.showPormotionBeforeMarketPrice?n("CardPromotion",t._b({staticClass:"activity-card-promition-text clear-top-attr"},"CardPromotion",t.$attrs,!1)):t._e(),t._v(" "),o&&t.isLargeCard&&!t.showPormotionBeforeMarketPrice?n("div",{staticClass:"activity-card-market-price"},[t._v("\n      "+t._s(o)+"\n    ")]):t._e(),t._v(" "),r?n("div",{staticClass:"activity-card-sell"},[n("span",{staticClass:"activity-card-sell-price ",domProps:{innerHTML:t._s(r)}}),t._v(" "),t.showPormotionBeforeMarketPrice?t._e():n("CardPromotion",t._b({staticClass:"activity-card-promition-text flex-no-wrap",class:{"fix-en-tag-style":t.klook.language.includes("en")}},"CardPromotion",t.$attrs,!1))],1):t._e()]}}])},"ActivityCardPrice",t.$attrs,!1))}),[],!1,null,null,null).exports),mt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},kt=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showProperty",get:function(){var t,e;return(null===(t=this.anotherTagsList)||void 0===t?void 0:t.length)||(null===(e=this.bestSellerTagsList)||void 0===e?void 0:e.length)}}]),e}(h.Vue);mt([Object(h.Prop)({type:Array,default:function(){return[]}})],kt.prototype,"anotherTagsList",void 0),mt([Object(h.Prop)({type:Array,default:function(){return[]}})],kt.prototype,"bestSellerTagsList",void 0);var Ot=kt=mt([h.Component],kt),_t=(n(1287),Object(w.a)(Ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showProperty?n("div",{staticClass:"activity-property-box"},[n("div",{staticClass:"activity-property-box_content"},[t._l(t.anotherTagsList,(function(e,o){return n("span",{key:o+"_seller",staticClass:"tag-item blue-color"},[t._v(t._s(e.text))])})),t._v(" "),t._l(t.bestSellerTagsList,(function(e,o){return n("span",{key:o+"_another",staticClass:"tag-item normal-color"},[t._v(t._s(e.text))])}))],2)]):t._e()}),[],!1,null,"5bc1fab1",null).exports),jt=(n(27),n(7)),wt=n.n(jt),Pt=n(211),Ct=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},St=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"recently",get:function(){return["today","tomorrow"].includes(this.date)}},{key:"date",get:function(){if(!this.startTime)return"soldOut";var t=wt()(this.startTime).format("YYYY-MM-DD");return t===wt()().format("YYYY-MM-DD")?"today":t===wt()().add(1,"day").format("YYYY-MM-DD")?"tomorrow":Object(Pt.e)(t,this.$t.bind(this),this.klook.language)}}]),e}(h.Vue);Ct([Object(h.Prop)()],St.prototype,"startTime",void 0),Ct([h.State],St.prototype,"klook",void 0);var Dt=St=Ct([h.Component],St),xt=Object(w.a)(Dt,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["booking-start-date",{recently:this.recently}]},[this._t("default",null,{date:this.date})],2)}),[],!1,null,null,null).exports,Tt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},It=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getStartTime",value:function(t){return{today:this.$t("book.same.day"),tomorrow:this.$t("book.tomorrow"),soldOut:this.$t("book.time.soldout")}[t]||this.$t("book.time.text",[t])}}]),e}(h.Vue);Tt([Object(h.Prop)()],It.prototype,"startTime",void 0);var Rt=It=Tt([Object(h.Component)({components:{BookingStartDate:xt}})],It),$t=(n(1288),Object(w.a)(Rt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("BookingStartDate",{staticClass:"activity-booking-start-date",attrs:{"start-time":t.startTime},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.date;return[t._v("\n    "+t._s(t.getStartTime(n))+"\n  ")]}}])})}),[],!1,null,"25b9c8a0",null).exports),Lt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},At=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).discountList=[],t.bestSellerTagsList=[],t.tagsList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"cardClick",value:function(){var t=this;setTimeout((function(){var e=+new Date,n="undefined"!=typeof _args3?_args3:null,o=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t};"desktop"===t.klook.platform?window.open(o(t.$href(t.cardData.deep_link))):window.location.href=o(t.$href(t.cardData.deep_link))}))}},{key:"filterTags",value:function(t){var e;if(null===(e=t)||void 0===e?void 0:e.length){var n=[],o=!0,r=!1,c=void 0;try{for(var l,d=t[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var v=l.value,f=(v||{}).key;void 0!==f&&"percentage_off"!==f&&(f.startsWith("bestseller")?this.bestSellerTagsList.push(v):f.startsWith("discount")?this.discountList.push(v):n.push(v))}}catch(t){r=!0,c=t}finally{try{o||null==d.return||d.return()}finally{if(r)throw c}}this.tagsList=n}}},{key:"transferCardTag",value:function(){var t=m()(this.cardData,"tag",null);t&&(this.cardData.tags=t)}},{key:"mounted",value:function(){var t=this;this.transferCardTag(),this.filterTags(this.cardData.tags),this.$nextTick((function(){t.$inhouse.updateBinding(t.rwdCard,{ext:{Tags:t.zhenXingTags}})}))}},{key:"showMarketPrice",get:function(){var t=this.cardData.market_price,e=!1;if(t){var n=t.amount_display;Number(void 0===n?0:n)>0&&(e=!0)}return e}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"isLargeCard",get:function(){return m()(this.$attrs,"isBigCard","")}},{key:"activityPropertyTags",get:function(){var t=[];return this.cardData.can_immediately&&t.push({text:this.$t("14296")}),t}},{key:"isLarge",get:function(){return"large"===this.type}},{key:"isTagsHidden",get:function(){return!this.isDesktop&&!this.isLarge}},{key:"svgStyle",get:function(){var t=this.isDesktop?"24px":"20px";return{width:t,height:t}}},{key:"ratio",get:function(){return this.isLargeCard?"16:9":"4:3"}},{key:"whatWeLove",get:function(){return this.cardData.what_we_love&&this.cardData.what_we_love.trim()}},{key:"marketPrice",get:function(){return this.isLarge&&this.cardData.market_price||{}}},{key:"sellingPrice",get:function(){return this.cardData.sell_price||{}}},{key:"isSoldOut",get:function(){return!this.cardData.free_text&&!this.sellingPrice.amount_display}},{key:"zhenXingTags",get:function(){var t,e;return(null===(e=null===(t=this.cardData)||void 0===t?void 0:t.tags)||void 0===e?void 0:e.reduce((function(t,e){return"yifun_voucher"===e.key&&t.push("Yifun"),"guolv_voucher"===e.key&&t.push("Guolv"),t}),[]))||[]}}]),e}(h.Vue);Lt([h.State],At.prototype,"klook",void 0),Lt([Object(h.Prop)()],At.prototype,"cardData",void 0),Lt([Object(h.Prop)()],At.prototype,"imageType",void 0),Lt([Object(h.Prop)({default:"large"})],At.prototype,"type",void 0),Lt([Object(h.Prop)()],At.prototype,"cardType",void 0),Lt([Object(h.Ref)()],At.prototype,"rwdCard",void 0);var Et=At=Lt([Object(h.Component)({components:{AdaptiveCard:k.a,CardLocation:P,CardTags:x,CardTitle:T.a,CardTitleScore:it,CardPriceWithPromo:yt,ActivityBookingStartDate:$t,CardProperty:_t}})],At),Mt=(n(1289),Object(w.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cardData?n("div",t._b({ref:"rwdCard",class:["rwd-activity-card",t.klook.platform,{"large-card":t.isLargeCard,"has-border":t.$attrs.hasBorder}],attrs:{"data-spm-virtual-item":"__virtual?typ=entry"},on:{click:t.cardClick}},"div",t.$attrs,!1),[n("AdaptiveCard",t._b({staticClass:"activity-card-background",attrs:{ratio:t.ratio,image:t.cardData.image_src,"image-type":t.imageType}},"AdaptiveCard",t.$attrs,!1),[t.tagsList&&t.tagsList.length>0?n("div",[n("div",{staticClass:"activity-card-wrap"}),t._v(" "),n("div",{staticClass:"activity-card-top",class:[{"activity-card-top_bigCard":t.isLargeCard}]},[n("CardTags",{attrs:{tags:t.tagsList}})],1)]):t._e()]),t._v(" "),n("div",{class:["activity-card_content",{"large-card_content":t.isLargeCard}]},[n("div",{staticClass:"activity-card_content-top"},[n("div",{staticClass:"activity-card_content-title-section"},[n("div",{staticClass:"activity-card_content-top_title"},[t.isLargeCard?n("div",{staticClass:"activity-card_content-top_baseinfo"},[t.cardData.location_title?n("span",[t._v("\n              "+t._s(t.cardData.location_title)+"\n            ")]):t._e(),t._v(" "),t.cardData.distance?n("span",[n("i",{staticClass:"sep"},[t._v("·")]),t._v("\n              "+t._s(t.cardData.distance)+"\n            ")]):t._e()]):t._e(),t._v(" "),n("CardTitle",{attrs:{title:t.cardData.title,href:t.$href(t.cardData.deep_link)}}),t._v(" "),t.whatWeLove&&t.isLargeCard?n("div",{staticClass:"seo-content"},[t._v(t._s(t.whatWeLove))]):t._e(),t._v(" "),n("CardTitleScore",t._b({staticClass:"activity-card_score",attrs:{"review-hint":t.cardData.review_hint,"review-star":t.cardData.review_star}},"CardTitleScore",{isbigcard:t.isLargeCard},!1)),t._v(" "),t.isLargeCard?n("CardProperty",{staticClass:"activity-card_property",attrs:{"best-seller-tags-list":t.bestSellerTagsList||[],"another-tags-list":t.activityPropertyTags||[]}}):t._e()],1)])]),t._v(" "),t.isSoldOut?t._e():n("div",{staticClass:"activity-card-bottom"},[n("div",[n("CardPriceWithPromo",t._b({staticClass:"home-activity-card_price",attrs:{"free-text":t.cardData.free_text,"market-price":t.marketPrice,"selling-price":t.sellingPrice,"discount-list":t.discountList||[]}},"CardPriceWithPromo",{isbigcard:t.isLargeCard},!1)),t._v(" "),t.isLargeCard||t.isDesktop?n("ActivityBookingStartDate",{staticClass:"home-activity-card_date",attrs:{"start-time":t.cardData.start_time}}):t._e()],1)])]),t._v(" "),t.isSoldOut?n("span",{staticClass:"rwd-activity-card-soldout"},[t._v(t._s(t.$t("act_card.sold.out")))]):t._e()],1):t._e()}),[],!1,null,"fb2bb79a",null).exports),Bt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Nt=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"component",get:function(){return this.useNewCard?"NewCardTemplate":"OldCardTemplate"}},{key:"Vbind",get:function(){var t=["data-spm-module","data-module"],e={};return(Object.entries(this.$attrs)||[]).forEach((function(n){var r=Object(o.a)(n,2),c=r[0],l=r[1];t.includes(c)||(e[c]=l)})),e}}]),e}(h.Vue);Bt([Object(h.State)((function(t){return t.klook.platform}))],Nt.prototype,"platform",void 0),Bt([Object(h.Prop)({type:Boolean,default:!1})],Nt.prototype,"useNewCard",void 0),Bt([Object(h.Prop)()],Nt.prototype,"logoWidth",void 0),Bt([Object(h.Prop)({type:Boolean,default:!1})],Nt.prototype,"needBanner",void 0);var Vt=Nt=Bt([Object(h.Component)({components:{NewCardTemplate:Q,OldCardTemplate:Mt}})],Nt),Ft=Object(w.a)(Vt,(function(){var t=this.$createElement;return(this._self._c||t)(this.component,this._b({tag:"component",attrs:{"logo-width":this.logoWidth,"need-banner":this.needBanner}},"component",this.Vbind,!1))}),[],!1,null,null,null);e.default=Ft.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(157),y=n.n(h),m=n(899),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleHideSection",value:function(){this.hideSection&&this.hideSection()}},{key:"changeSectionState",value:function(t){this.setSectionState&&this.setSectionState(t)}},{key:"sectionData",get:function(){return this.section||{}}},{key:"sectionBody",get:function(){return this.sectionData.body||{}}},{key:"sectionContent",get:function(){return this.sectionBody.content||{}}},{key:"businessData",get:function(){return this.sectionContent.data||{}}},{key:"isAsync",get:function(){return"async"===this.sectionContent.load_type}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"fieldsConfig2section",get:function(){var t=(this.sectionData.fields||[]).reduce((function(t,e){return t[e.key]=e.value,t}),{}),e=(t||{}).activity_package_promotion;if("string"==typeof e){e={activity_package_promotion:1,activity_custom_config_hide_promotions_banner:0}[e]||0}return y()({},m.a,t)}},{key:"sectionVisible",get:function(){var t,e;return!(!1===(null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.placeholder)&&"loading"===this.state)}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"hideSection",void 0),k([Object(f.Prop)()],O.prototype,"setSectionState",void 0),k([Object(f.Prop)()],O.prototype,"state",void 0),k([Object(f.Prop)()],O.prototype,"section",void 0),k([Object(f.Provide)("fieldsConfig2section")],O.prototype,"fieldsConfig2section",null),O=k([f.Component],O),e.a=O},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m={overlay:{showOverlay:!0,overlayColor:"rgba(255, 255, 255, 0)"}},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcObj",get:function(){var t=this.type,e=this.showOverlay,n=this.overlayColor,o=m[t]||{};return Object(h.merge)({},o,{showOverlay:e,overlayColor:n})}}]),e}(f.Vue);y([f.State],k.prototype,"klook",void 0),y([Object(f.Prop)({type:String,default:""})],k.prototype,"type",void 0),y([Object(f.Prop)({type:Boolean,default:void 0})],k.prototype,"showOverlay",void 0),y([Object(f.Prop)({type:Boolean,default:void 0})],k.prototype,"overlayColor",void 0);var O=k=y([f.Component],k),_=(n(1047),n(43)),component=Object(_.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"common-centent-loading",class:[this.klook.platform,this.type]},[e("div",{staticClass:"common-centent-loading-box"},[e("klk-loading",this._b({staticClass:"custom-loading-style"},"klk-loading",this.calcObj,!1))],1)])}),[],!1,null,"0c0c2366",null);e.a=component.exports},,function(t,e,n){"use strict";function o(t){return 16===t?4.2:20===t?3.9:3.6}const r={size:"1em",strokeWidth:3.2,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#2073F9",background:"transparent"},filled:{fill:"#2073F9",background:"#FFF"},twoTone:{fill:"#2073F9",twoTone:"#F44622"},multiColor:{outStrokeColor:"#2073F9",outFillColor:"#F44622",innerStrokeColor:"#08B371",innerFillColor:"#F09B0A"}},prefix:"i"};function c(t,e,n){const r="string"==typeof e.fill?[e.fill]:e.fill||[],c=[];switch(e.theme||n.theme){case"outline":c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("transparent"),c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("transparent");break;case"filled":c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("#FFF"),c.push("#FFF");break;case"two-tone":c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("string"==typeof r[1]?r[1]:n.colors.twoTone.twoTone),c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("string"==typeof r[1]?r[1]:n.colors.twoTone.twoTone);break;case"multi-color":c.push("string"==typeof r[0]?r[0]:"currentColor"),c.push("string"==typeof r[1]?r[1]:n.colors.multiColor.outFillColor),c.push("string"==typeof r[2]?r[2]:n.colors.multiColor.innerStrokeColor),c.push("string"==typeof r[3]?r[3]:n.colors.multiColor.innerFillColor)}return{size:e.size||n.size,strokeWidth:o(e.size)||o(n.size),strokeLinecap:e.strokeLinecap||n.strokeLinecap,strokeLinejoin:e.strokeLinejoin||n.strokeLinejoin,colors:c,id:t}}e.DEFAULT_ICON_CONFIGS=r,e.IconConverter=c,e.IconWrapper=function(t,e,n){return{name:"icon-"+t,inject:{ICON_CONFIGS:{default:r}},props:["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","spin"],data:()=>({id:"icon-"+(4294967296*(1+Math.random())|0).toString(16).substring(1)}),inheritAttrs:!1,render(o){const{size:l,strokeWidth:d,strokeLinecap:v,strokeLinejoin:f,theme:h,fill:y,id:m,spin:k,ICON_CONFIGS:O=r}=this,_=c(m,{size:l,strokeWidth:d,strokeLinecap:v,strokeLinejoin:f,theme:h,fill:y},O),j=["i-icon"];return j.push("i-icon-"+t),e&&O.rtl&&j.push("i-icon-rtl"),k&&j.push("i-icon-spin"),o("span",{class:j.join(" ")},[n(o,_)])}}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return j}));n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(131);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).priceMaps={unit:[{propKey:"market_price_text",className:"crossed-price",note:"划线价-旧样式-原页面的市场价"},{propKey:"original_price_text",className:"salling-price",note:"售卖价-旧样式-原页面的售价"},{propKey:"original_selling_price_text",className:"before-discount-price",note:"折扣前的价格-新样式"},{propKey:"selling_price_text",className:"discount-price",note:"折扣价-新样式"},{propKey:"saved_text",className:"saved-price",note:"addon-节省价"}]},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"priceMapList",get:function(){return this.priceMaps[this.priceType]}},{key:"priceList",get:function(){var t=this.orderList,e=this.priceMapList,n=this.priceData||{};return t.filter((function(t){return n[t]})).map((function(t){var r=n[t];return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},e.find((function(e){return e.propKey===t}))||{},{value:r})}))}}]),e}(h.Vue);function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t&&Object(y.cloneDeep)(t),e=e&&Object(y.cloneDeep)(e);var data=Object(y.merge)({_hasDiscount:!1,_openKey:"has_discount",_priceKey:"sku_list",oldPriceShow:{}},n);data._hasDiscount=!!t[data._openKey];var o=data._hasDiscount,r=data._priceKey,c=data.oldPriceShow,l=(e?e[r]:[]).find((function(e){return e.sku_id===t.skuId}));return o&&e?Object(y.merge)({},l):c.original_price_text?Object(y.merge)(l,c):l}k([Object(h.Prop)({default:function(){return{}}})],O.prototype,"priceData",void 0),k([Object(h.Prop)({default:""})],O.prototype,"priceType",void 0),k([Object(h.Prop)({default:""})],O.prototype,"styleType",void 0),k([Object(h.Prop)({default:function(){return[]}})],O.prototype,"orderList",void 0),O=k([h.Component],O),e.a=O;var j={market_price_text:"￥280.6",original_price_text:"￥260.6",original_selling_price_text:"was ￥40",selling_price_text:"￥200.2"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));n(70);var o={klook_insider:1,reopen:1,address_image:1,address_title:1,activity_package_promotion:1,activity_custom_config_hide_credit:0,activity_custom_config_hide_price_guarantee:0,fold_switch:0,fold_min_height:"",show_style_version:0},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e="activity.v2.mobile.btn.summary.book_now",n=[{key:1,textId:"73947"}],o=(n.find((function(e){return e.key===t}))||{}).textId||e;return o}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(10),r=n.n(o);function c(t){var e=t||{},n=e.discount_tags,o=void 0===n?[]:n,c=e.attribute_tags,d=void 0===c?[]:c,v=e.campaign_tags;[{key:"Discount",val:o},{key:"Attribute",val:d},{key:"Campaign",val:void 0===v?[]:v}].forEach((function(e){var n;if(null===(n=e.val)||void 0===n?void 0:n.length){var o=e.key,c=function(t){var e,n={keysList:[],idsList:[]};return(null===(e=t)||void 0===e?void 0:e.length)?(t.forEach((function(t){var e,track=(null===(e=t)||void 0===e?void 0:e.track)||{};if(!r()(track)){var o=track.tag_id,c=track.tag_key;o&&n.idsList.push(o),c&&n.keysList.push(c)}})),n):n}(e.val),d=c.keysList,v=void 0===d?[]:d,f=c.idsList;!function(t,e,n,o){var r=l(e,"TagIDList"),c=l(e,"TagKeyList");t[r]=n,t[c]=o}(t,o,void 0===f?[]:f,v)}})),function(t){["attribute_tags","discount_tags","campaign_tags"].forEach((function(e){t[e]&&delete t[e]}))}(t)}function l(t,e){return t+e}},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1100),y=n.n(h),m=n(79),k=n.n(m),O=n(1107),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"transitionend",value:function(){this.$emit("transitionend")}},{key:"getCardType",value:function(){return k()(this.$attrs,"is-big-card",null)}},{key:"isDesktop",get:function(){return"desktop"===this.platform}},{key:"dataList",get:function(){return this.valid?this.isDesktop?y()(this.data,this.perView):void 0:[]}},{key:"valid",get:function(){return this.data&&this.data.length}}]),e}(f.Vue);_([Object(f.State)((function(t){return t.klook.platform}))],j.prototype,"platform",void 0),_([Object(f.Prop)()],j.prototype,"data",void 0),_([Object(f.Prop)()],j.prototype,"swiperBind",void 0),_([Object(f.Prop)({default:4})],j.prototype,"perView",void 0),_([Object(f.Prop)()],j.prototype,"gap",void 0),_([Object(f.Prop)()],j.prototype,"offset",void 0);var w=j=_([Object(f.Component)({components:{CardSwiper:O.a,CardSwiperItem:O.b}})],j),P=(n(1173),n(1174),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({directives:[{name:"show",rawName:"v-show",value:t.valid,expression:"valid"}],class:["rwd-swiper",t.platform]},"div",t.$attrs,!1),[t.isDesktop?n("klk-card-swiper",t._b({staticClass:"rwd-desktop-swiper",on:{transitionend:t.transitionend}},"klk-card-swiper",t.swiperBind,!1),t._l(t.dataList,(function(e,o){return n("klk-card-swiper-item",{key:o,staticClass:"item-container"},t._l(e,(function(e,r){return n("div",{key:e.activity_id+"-"+r,staticClass:"rwd-desktop-swiper-item"},[t._t("default",null,{item:e,slideIndex:o,index:o*t.perView+r})],2)})),0)})),1):n("CardSwiper",{staticClass:"rwd-mobile-swiper"},t._l(t.data,(function(e,o){return n("CardSwiperItem",t._b({key:o,attrs:{"per-view":t.perView,gap:t.gap,offset:t.offset}},"CardSwiperItem",{length:t.data.length,isBigCard:t.getCardType()},!1),[t._t("default",null,{item:e,index:o})],2)})),1)],1)}),[],!1,null,"5383468c",null);e.default=component.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isShowMore=!1,t.isShowMoreBtn=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){var t=this;setTimeout((function(){t.calcHeight()}),50)}},{key:"calcHeight",value:function(){var t=this.$el.querySelector(".header-tips-text");t&&t.scrollHeight>this.limit&&(this.isShowMore=!0,this.isShowMoreBtn=!0)}},{key:"showMore",value:function(){this.isShowMore=!this.isShowMore}},{key:"calcText",get:function(){return this.text||this.tips}},{key:"viewMoreText",get:function(){return this.isShowMore?this.$t("city_page_view_more"):this.$t("collapse_all")}}]),e}(n(1165).a);h([Object(f.Prop)()],y.prototype,"tipsType",void 0),h([Object(f.Prop)()],y.prototype,"styleType",void 0),h([Object(f.Prop)()],y.prototype,"hideIcon",void 0),h([Object(f.Prop)()],y.prototype,"hideMore",void 0),h([Object(f.Prop)()],y.prototype,"text",void 0),h([Object(f.Prop)({type:Boolean,default:!1})],y.prototype,"hideDivider",void 0),h([Object(f.Prop)({type:Number,default:35})],y.prototype,"limit",void 0);var m=y=h([f.Component],y),k=(n(1354),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-tips-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.calcText,expression:"calcText"}],staticClass:"header-tips",class:t.styleType},["poptip-type"===t.tipsType?n("klk-poptip",[n("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.calcText)},slot:"content"}),t._v(" "),n("div",{staticClass:"header-tips-content",class:t.tipsType},[t.hideIcon?t._e():n("SvgIcon",{staticClass:"header-tips-icon",attrs:{size:"big-style"===t.styleType?20:16,color:"#4A4A4A",name:"desktop-common#info-new"}}),t._v(" "),n("div",[n("p",{staticClass:"header-tips-text",domProps:{innerHTML:t._s(t.calcText)}})])],1)]):n("div",{staticClass:"header-tips-content"},[t.hideIcon?t._e():n("SvgIcon",{staticClass:"header-tips-icon",attrs:{size:"big-style"===t.styleType?20:16,color:"#4A4A4A",name:"desktop-common#info-new"}}),t._v(" "),n("div",{on:{click:function(e){return t.showMore()}}},[n("p",{staticClass:"header-tips-text",class:{folded:t.isShowMore},domProps:{innerHTML:t._s(t.calcText)}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideMore&&t.isShowMoreBtn,expression:"!hideMore && isShowMoreBtn"}],staticClass:"more-btn"},[t._v("\n          "+t._s(t.viewMoreText)+"\n        ")])])],1),t._v(" "),t.hideDivider?t._e():n("klk-divider",{staticClass:"header-tips-divider",attrs:{dashed:"","dashed-width":4,"dashed-gap":4}})],1),t._v(" "),t.calcText?t._e():t._t("empty-slot")],2)}),[],!1,null,"3731004c",null);e.a=component.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(895),y=n(987),m=n(955),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).firstInited=!1,t.beforeState="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"stateWatch",value:function(t){!this.firstInited&&["failure","success"].includes(t)&&(this.firstInited=!0),["failure","success"].includes(t)&&(this.beforeState=t)}},{key:"created",value:function(){this.firstInited=this.isInited||!1}},{key:"calcKeepSuceess",get:function(){var t=this.state,e=this.keepState,n=this.beforeState;return"fetching"===t&&e&&"success"===n}},{key:"calcKeepFailure",get:function(){var t,e=this.state,n=this.fetching,o=this.beforeState,r=this.keepFailureState;return this.firstInited&&"fetching"===e&&("overlay"===(null===(t=n)||void 0===t?void 0:t.type)||r)&&"failure"===o}}]),e}(f.Vue);k([Object(f.Prop)({type:String,default:""})],O.prototype,"fetchingSlots",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],O.prototype,"hideIniting",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],O.prototype,"hideFetching",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],O.prototype,"hideFailure",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],O.prototype,"keepState",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],O.prototype,"keepFailureState",void 0),k([Object(f.Prop)({type:String})],O.prototype,"state",void 0),k([Object(f.Prop)({default:!1})],O.prototype,"isInited",void 0),k([Object(f.Prop)({type:Object,default:function(){}})],O.prototype,"fetching",void 0),k([Object(f.Prop)({type:Object,default:function(){}})],O.prototype,"failure",void 0),k([Object(f.Watch)("state",{immediate:!0})],O.prototype,"stateWatch",null);var _=O=k([Object(f.Component)({components:{CommonSkeletonSlots:m.a,CommonContentLoading:h.a,CommonCententReflesh:y.a}})],O),j=(n(1120),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-loading-state"},[t.hideIniting||"initing"!==t.state&&(t.firstInited||"fetching"!==t.state)?t._e():t._t("init",[n("CommonContentLoading",{attrs:{type:"overlay"}})]),t._v(" "),t._t("fetching",[t.hideFetching||"fetching"!==t.state?t._e():[t.fetchingSlots?n("CommonSkeletonSlots",{attrs:{"skeleton-name":t.fetchingSlots}}):n("CommonContentLoading",t._b({},"CommonContentLoading",t.fetching,!1))]]),t._v(" "),t._t("failure",[n("CommonCententReflesh",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:!t.hideFailure&&t.firstInited&&"failure"===t.state||t.calcKeepFailure,expression:"!hideFailure && firstInited && state === 'failure' || calcKeepFailure"}]},"CommonCententReflesh",t.failure,!1),t.$listeners))]),t._v(" "),"success"===t.state||t.calcKeepSuceess?t._t("default"):t._e()],2)}),[],!1,null,"9f8de4f2",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([v.State],h.prototype,"klook",void 0),f([Object(v.Prop)({default:!0})],h.prototype,"priceVisible",void 0);var y=h=f([v.Component],h),m=(n(1294),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tips",class:{"flex-style":!!t.$slots.default}},[n("div",{staticClass:"static-tips-box"},[t.priceVisible?n("div",{staticClass:"tips-item"},[n("SvgIcon",{attrs:{name:"common#icon_shopping_price_xs",size:"16"}}),t._v(" "),n("span",[t._v("\n        "+t._s(t.$t("activity_detail_date_picker_currency_tips",[t.klook.currencySymbol]))+"\n      ")])],1):t._e(),t._v(" "),n("div",{staticClass:"tips-item"},[n("SvgIcon",{attrs:{name:"activity-common#icon_feedback_prohibit_xxs",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("global.sold_out")))])],1)]),t._v(" "),t._t("default")],2)}),[],!1,null,"77c7b715",null);e.a=component.exports},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return y})),n.d(e,"g",(function(){return m})),n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return _})),n.d(e,"f",(function(){return j}));n(37),n(28),n(20),n(27),n(52),n(53),n(8),n(72);var o=n(1),r=n(157),c=n.n(r),l=n(1299),d=n(3),v=n(85),f={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},h=null;var y=function(){var option=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",open:!1,size:"large",scrollable:!0,overlayClosable:!0,closable:!0,escPressClosable:!0,showDefaultFooter:!1};return c()({},t,option)},m=function(t,e,n){if(!h){var r=o.default.extend(l.default);h=new r({el:document.createElement("div")}),document.body.appendChild(h.$el)}h.$scopedSlots=n||{},o.default.nextTick((function(){h.list=t,h.start=e})),o.default.nextTick((function(){return h.isShow=!0}))};function k(t,e){var n=this;this.$axios.post(d.a.postBookingChase,t,{headers:f,loading:!0}).then((function(t){var o=t.data;o.success?"function"==typeof e&&e():n.$alert(o.error&&o.error.message)}))}function O(t){return v.b[t]||t}function _(t){return(t=(t||"0").toString()).includes(".")?(t=t.split("."))[0].toString().replace(/(?=(?!(\b))(\d{3})+$)/g,",")+"."+t[1]:t.replace(/(?=(?!(\b))(\d{3})+$)/g,",")}function j(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null,n=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n},o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desktop";o&&("desktop"===r?window.open(n(o)):window.location.href=n(o))}},function(t,e,n){"use strict";n(47),n(37);var o=n(25),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(79),m=n.n(y),k=(n(22),n(14),n(11),n(8),n(12),n(28),n(13)),O=n(0);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P={functional:!0,props:{imgUrl:{type:String},coverUseImgTag:{type:Boolean},imageAlt:{type:String,default:""}},render:function(t,e){var n=e.props,o=n.imgUrl,r=n.coverUseImgTag,c=n.imageAlt,l=e.slots().default||[];if(r){var img=t("img",{class:{"no-lazy-load-card__img":!0},attrs:j({},e.data.attrs,{alt:c,src:o})});return t("div",{slot:"NoLazyLoad2ImgTag"},[img].concat(Object(k.a)(l)))}return t("div",{slot:"NoLazyLoad2BackgroundImage",attrs:e.data.attrs,style:{backgroundImage:"url(".concat(o,")")}},l)}},C=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"replacedImgUrl",get:function(){var t="desktop"===this.platform?550:700;return this.imgUrl.replace("image/upload/","image/upload/q_85/c_fill,w_".concat(t,"/"))}}]),e}(h.Vue);w([Object(h.State)((function(t){return t.klook.platform}))],C.prototype,"platform",void 0),w([Object(h.Prop)()],C.prototype,"imgUrl",void 0),w([Object(h.Prop)({type:Boolean,default:!1})],C.prototype,"coverUseImgTag",void 0),w([Object(h.Prop)({type:String,default:""})],C.prototype,"imageAlt",void 0);var S=C=w([Object(h.Component)({components:{NoLazyLoadComp:P}})],C),D=(n(1274),n(43)),x=Object(D.a)(S,(function(){var t=this.$createElement;return(this._self._c||t)("NoLazyLoadComp",this._b({attrs:{"img-url":this.replacedImgUrl}},"NoLazyLoadComp",Object.assign({},this.$props,this.$attrs),!1),[this._t("default")],2)}),[],!1,null,"fab39d78",null).exports;function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$={functional:!0,props:{imgUrl:{type:String},imageType:{type:String},ratio:{type:String},coverUseImgTag:{type:Boolean},imageAlt:{type:String,default:""}},render:function(t,e){var n=e.props,o=n.imgUrl,r=n.imageType,c=n.ratio,l=n.coverUseImgTag,d=n.imageAlt,v=e.slots().default||[],f=I({},e.data.attrs,{ratio:c,"data-img-type":r});if(l){var img=t("img",{class:{"lazy-load-card__img":!0},attrs:I({},f,{alt:d}),directives:[{name:"lazy",value:o}]});return t("div",{slot:"LazyLoad2ImgTag"},[img].concat(Object(k.a)(v)))}return t("div",{slot:"LazyLoad2BackgroundImage",attrs:f,directives:[{name:"lazy",value:o,arg:"background-image"}]},v)}},L=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);R([Object(h.Prop)()],L.prototype,"imgUrl",void 0),R([Object(h.Prop)()],L.prototype,"imageType",void 0),R([Object(h.Prop)()],L.prototype,"ratio",void 0),R([Object(h.Prop)({type:Boolean,default:!1})],L.prototype,"coverUseImgTag",void 0),R([Object(h.Prop)({type:String,default:""})],L.prototype,"imageAlt",void 0);var A=L=R([Object(h.Component)({components:{LazyLoadImgTag:$}})],L),E=(n(1275),Object(D.a)(A,(function(){var t=this.$createElement;return(this._self._c||t)("LazyLoadImgTag",this._b({},"LazyLoadImgTag",Object.assign({},this.$props,this.$attrs),!1),[this._t("default")],2)}),[],!1,null,"5096e42c",null).exports),M=n(884),B=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleClick",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null;this.href&&(window.location.href=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n}(this.href))}},{key:"linkStyle",get:function(){var t=this.ratio.split(":"),e=Object(o.a)(t,2),n=e[0],r=e[1],c=Number(n)/Number(r);return{paddingBottom:"".concat(1/c*100,"%")}}},{key:"isDesktop",get:function(){return"desktop"===this.platform}},{key:"newImageType",get:function(){var t=this.imageType||"";this.isDesktop||(t=m()(this.$attrs,"isBigCard",!1)?"experienceMobileActivityCardLarge":"mobileActivityCard");return t}},{key:"noLazyLoad",get:function(){return m()(this.$attrs,"noLazyLoad",!1)}},{key:"component",get:function(){return this.noLazyLoad?"NoLazyLoadCard":"LazyLoadCard"}}]),e}(h.Vue);B([Object(h.State)((function(t){return t.klook.platform}))],N.prototype,"platform",void 0),B([Object(h.Prop)({type:String})],N.prototype,"ratio",void 0),B([Object(h.Prop)()],N.prototype,"image",void 0),B([Object(h.Prop)()],N.prototype,"href",void 0),B([Object(h.Prop)()],N.prototype,"imageType",void 0),B([Object(h.Prop)()],N.prototype,"logoWidth",void 0);var V=N=B([Object(h.Component)({components:{NoLazyLoadCard:x,LazyLoadCard:E,Logo:M.a}})],N),F=(n(1276),Object(D.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"adaptive-card_wrap"},[n(t.component,t._b({tag:"component",staticClass:"adaptive-card_link",style:t.linkStyle,attrs:{ratio:t.ratio,"img-url":t.image,"image-type":t.newImageType},on:{click:t.handleClick}},"component",t.$attrs,!1),[n("div",{staticClass:"adaptive-card_content"},[t.noLazyLoad?t._e():n("Logo",{attrs:{ratio:t.ratio,width:t.logoWidth}}),t._v(" "),t._t("default")],2)])],1)}),[],!1,null,null,null));e.a=F.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(72),n(45),n(86);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(272),y=n(953),m=n(16),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){var t=this,e=this.$refs.markdown.$el;e&&e.querySelectorAll&&Array.from(e.querySelectorAll("a")).forEach((function(element){element.addEventListener("click",(function(){var e=element.getAttribute("href")||"";if(e){var data="Activity Page|Activity Page Content Link Clicked|External";if(Object(m.U)(e)){var n=e.match(/\/activity\/(\d+)/);if(n&&n[1]){var o=n[1];data="Activity Page|Activity Page Content Link Clicked|Internal,".concat(o)}else data="Activity Page|Activity Page Content Link Clicked|Internal"}t.$sendGTMCustomEvent(data)}}))}))}},{key:"renderContent",get:function(){return"string"==typeof this.content?Object(h.c)(this.content):Object(h.b)(this.content)}},{key:"linearGradientStyle",get:function(){var t=this.linearGradient,e="linear-gradient(180deg, rgba(253, 247, 232, 0) 0%, rgba(253, 247, 232, 0.5) 26%, ".concat(t," 50%, ").concat(t," 100%");return t?{background:e}:{}}}]),e}(f.Vue);k([Object(f.Prop)({default:null})],O.prototype,"content",void 0),k([Object(f.Prop)({default:""})],O.prototype,"linearGradient",void 0);var _=O=k([Object(f.Component)({components:{ActMarkdown:y.default}})],O),j=(n(1880),n(43)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"linear-gradient-wrap"},[e("ActMarkdown",{ref:"markdown",attrs:{content:this.renderContent}}),this._v(" "),this.linearGradient?e("div",{staticClass:"linear-gradient-box",style:this.linearGradientStyle}):this._e()],1)}),[],!1,null,"4af2d658",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1042),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getStartTime",value:function(t){return{today:this.$t("book.same.day"),tomorrow:this.$t("book.tomorrow"),soldOut:this.$t("book.time.soldout")}[t]||this.$t("book.time.text",[t])}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"startTime",void 0);var k=m=y([Object(f.Component)({components:{BookingStartDate:h.a}})],m),O=(n(1045),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("BookingStartDate",{staticClass:"activity-booking-start-date",attrs:{"start-time":t.startTime},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n    "+t._s(t.getStartTime(e.date))+"\n  ")]}}])})}),[],!1,null,"5b50e922",null);e.a=component.exports},,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleScroll",value:function(){this.$emit("scroll-once")}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(1325),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-swiper-wrap"},[n("div",{staticClass:"card-swiper",on:{"~scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)])}),[],!1,null,"2ed4ab9a",null).exports,_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleScroll",value:function(){this.$emit("scroll-once")}}]),e}(f.Vue),w=j=_([f.Component],j),P=(n(1326),Object(k.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-card-swiper-wrap"},[n("div",{staticClass:"new-card-swiper",on:{"~scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)])}),[],!1,null,"3324d2d7",null).exports,n(47),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),C=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"wrapStyle",get:function(){return 0===this.perView?{width:"100%"}:{width:"calc(".concat(89.6/this.perView,"% + ").concat(this.offset/2*.896/this.perView,"px)"),paddingRight:"".concat(this.gap,"px")}}}]),e}(f.Vue);P([Object(f.Prop)({type:Number,default:1})],C.prototype,"perView",void 0),P([Object(f.Prop)({type:Number,default:10})],C.prototype,"gap",void 0),P([Object(f.Prop)({type:Number,default:32})],C.prototype,"offset",void 0),P([Object(f.State)((function(t){return t.klook.platform}))],C.prototype,"platform",void 0);var S=C=P([f.Component],C),D=(n(1327),Object(k.a)(S,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._b({staticClass:"card-swiper-item_wrap",style:this.wrapStyle},"div",this.$attrs,!1),[this._t("default")],2)}),[],!1,null,null,null).exports),x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null;this.href&&(window.location.href=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n}(this.href))}},{key:"linkStyle",get:function(){return{paddingBottom:"".concat(1/this.ratio*100,"%")}}}]),e}(f.Vue);x([Object(f.Prop)({type:Number,default:.75})],T.prototype,"ratio",void 0),x([Object(f.Prop)()],T.prototype,"image",void 0),x([Object(f.Prop)()],T.prototype,"href",void 0),x([Object(f.Prop)()],T.prototype,"imageType",void 0);var I=T=x([f.Component],T),R=(n(1328),Object(k.a)(I,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"adaptive-card_wrap"},[e("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:this.image,expression:"image",arg:"background-image"}],staticClass:"adaptive-card_link",style:this.linkStyle,attrs:{"data-img-type":this.imageType},on:{click:this.handleClick}},[e("div",{staticClass:"adaptive-card_content"},[this._t("default")],2)])])}),[],!1,null,null,null).exports),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);$([Object(f.Prop)({type:Number,default:.75})],L.prototype,"ratio",void 0),$([Object(f.Prop)({type:Number,default:1})],L.prototype,"perView",void 0),$([Object(f.Prop)()],L.prototype,"image",void 0),$([Object(f.Prop)()],L.prototype,"href",void 0),$([Object(f.Prop)({type:Number,default:12})],L.prototype,"gap",void 0),$([Object(f.Prop)()],L.prototype,"imageType",void 0);var A=L=$([Object(f.Component)({components:{AdaptiveCard:R,CardSwiperItem:D}})],L);Object(k.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("CardSwiperItem",{attrs:{"per-view":this.perView,gap:this.gap}},[e("AdaptiveCard",{attrs:{ratio:this.ratio,image:this.image,href:this.href,"image-type":this.imageType}},[this._t("default")],2)],1)}),[],!1,null,null,null).exports;n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return D}))},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).shouldInit=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){(t||"text"===this.type)&&(this.shouldInit=!0)}},{key:"componentName",get:function(){return"publish-ai-".concat(this.type)}},{key:"trackInfo",get:function(){return{ext:{ClickType:this.isSourceText?"Translate":"SwitchBack"}}}}]),e}(f.Vue);h([Object(f.Prop)({default:!1})],y.prototype,"visible",void 0),h([Object(f.Prop)({default:"text"})],y.prototype,"type",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"isSourceText",void 0),h([Object(f.Watch)("visible",{immediate:!0})],y.prototype,"visibleChange",null);var m=y=h([Object(f.Component)({components:{PublishAiText:function(){return n.e(255).then(n.bind(null,4102))},PublishAiBall:function(){return n.e(253).then(n.bind(null,4103))},PublishAiButton:function(){return n.e(254).then(n.bind(null,4104))}}})],y),k=n(43),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shouldInit?n(t.componentName,t._g(t._b({tag:"component",attrs:{"is-source-text":t.isSourceText,"track-info":t.trackInfo}},"component",t.$attrs,!1),t.$listeners)):t._e()}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(7),h=n.n(f),y=n(116),m=n.n(y),k=n(21),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};h.a.extend(m.a);var _=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isWarming",get:function(){var t;return!this.isActivityPublishInfo&&3===(null===(t=this.publishInfo)||void 0===t?void 0:t.publish_status)}},{key:"warmingText",get:function(){var t;return this.isWarming&&(null===(t=this.publishInfo)||void 0===t?void 0:t.publish_status_desc)||""}},{key:"publishedTime",get:function(){var t,time=null===(t=this.publishInfo)||void 0===t?void 0:t.published_time_utc;return this.isWarming&&time&&h.a.utc(time).isAfter(h.a.utc())?time:""}},{key:"isSuspended",get:function(){var t,e;return this.isActivityPublishInfo?5===(null===(t=this.publishInfo)||void 0===t?void 0:t.publish_status):2===(null===(e=this.publishInfo)||void 0===e?void 0:e.publish_status)}},{key:"suspendedText",get:function(){var t;return this.isSuspended&&(null===(t=this.publishInfo)||void 0===t?void 0:t.publish_status_desc)||""}}]),e}(k.Vue);O([Object(k.Prop)({default:!1})],_.prototype,"isActivityPublishInfo",void 0),O([Object(k.Prop)()],_.prototype,"publishInfo",void 0),_=O([k.Component],_),e.a=_},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(881),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return h.a.apply(void 0,arguments)}},{key:"tips",get:function(){return this.$attrs.tips||{}}},{key:"calcTrack",get:function(){return{type:"module",spm:"Buy_More"}}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)()],m.prototype,"styleType",void 0);var k=m=y([f.Component],m),O=(n(1970),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({staticClass:"discount-tips",class:[t.klook.platform,t.styleType]},"div",t.bindIHTrack(t.calcTrack),!1),[n("div",{staticClass:"discount-tips-box"},[n("span",{staticClass:"left-icon"},[n("svg-icon",{attrs:{name:"common#icon_shopping_discount_label_xs",size:"20"}})],1),t._v(" "),n("span",{staticClass:"discount-tips-content"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.tips.prefix_text,expression:"tips.prefix_text"}],staticClass:"sku-wrap"},[t._v(t._s(t.tips.prefix_text))]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.tips.prefix_text&&t.tips.text,expression:"tips.prefix_text && tips.text"}],staticClass:"link-wrap"},[t._v(":")]),t._v(" "),t.tips.text?[t._v(t._s(t.tips.text))]:t._e()],2)])])}),[],!1,null,"191a2c72",null);e.a=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"cssClass",get:function(){return this.klook.utilConfig.whiteLabelUtilConfig?"white-label-links":""}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"content",void 0);var m=y=h([f.Component],y),k=(n(1447),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activity-klk-markdown"},[this.content?e("klk-markdown",{ref:"markdown",class:this.cssClass,attrs:{content:this.content}}):this._e()],1)}),[],!1,null,"87a71e24",null);e.default=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcNames",get:function(){var t=this.skeletonName;return Array.isArray(t)?t:"string"==typeof t?[t]:void 0}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"skeletonName",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"animate",void 0);var m=y=h([f.Component],y),k=(n(1102),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-skeleton-slots"},[t.calcNames.includes("act-date-skeleton")?n("div",{staticClass:"act-date-skeleton"},[n("klk-skeleton",{staticClass:"skeleton-box",attrs:{animate:t.animate}},[n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"})],1)],1):t._e(),t._v(" "),t.calcNames.includes("pkg-skeleton")?n("div",{staticClass:"pkg-skeleton"},[n("klk-skeleton",{staticClass:"skeleton-box",attrs:{animate:t.animate}},[n("klk-skeleton-block",{staticClass:"skeleton-box__block"})],1)],1):t._e(),t._v(" "),t.calcNames.includes("pkg-details-skeleton")?n("div",{staticClass:"pkg-details-skeleton"},[n("klk-skeleton",{staticClass:"skeleton-box",attrs:{animate:t.animate}},[n("div",{staticClass:"inline-wrap"},[n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"})],1),t._v(" "),n("div",{staticClass:"block-wrap"},[n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-box__block"})],1)])],1):t._e()])}),[],!1,null,"60640ae8",null);e.a=component.exports},function(t,e,n){"use strict";n(20),n(27),n(1953);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1443),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).fixScrollY=0,t.transfered=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){this.notFixed||(t?"fixed"!==document.body.style.position&&(this.fixScrollY=window.pageYOffset,document.body.style.position="fixed",document.body.style.top=-this.fixScrollY+"px"):(document.body.style.position="static",document.body.scrollTop=this.fixScrollY,document.documentElement.scrollTop=this.fixScrollY))}},{key:"clickMask",value:function(){this.overlayClosable&&this.$emit("close")}},{key:"close",value:function(){this.$emit("close")}},{key:"mounted",value:function(){this.transfer&&!this.transfered&&(document.body.appendChild(this.$el),this.transfered=!0)}},{key:"beforeDestroy",value:function(){this.transfer&&this.transfered&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},{key:"contentStyle",get:function(){var style={};return this.height&&(style.height=this.height),this.color&&(style.backgroundColor=this.color),style}},{key:"headerStyle",get:function(){if(!this.fixed)return{};var t=parseFloat(this.height);return{top:/%/.test(this.height)?"".concat(100-t,"%"):"calc(100% - ".concat(t,"px)")}}}]),e}(f.Vue);y([Object(f.Prop)({type:String,default:"100%"})],m.prototype,"height",void 0),y([Object(f.Prop)()],m.prototype,"headerVisible",void 0),y([Object(f.Prop)({type:String,default:"slide-up",validator:function(t){return["slide-up","slide-right","fade"].includes(t)}})],m.prototype,"transition",void 0),y([Object(f.Prop)()],m.prototype,"visible",void 0),y([Object(f.Prop)()],m.prototype,"overlayClosable",void 0),y([Object(f.Prop)()],m.prototype,"title",void 0),y([Object(f.Prop)()],m.prototype,"icon",void 0),y([Object(f.Prop)()],m.prototype,"fixed",void 0),y([Object(f.Prop)()],m.prototype,"color",void 0),y([Object(f.Prop)()],m.prototype,"transfer",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"notFixed",void 0),y([Object(f.Watch)("visible")],m.prototype,"visibleChange",null);var k=m=y([Object(f.Component)({components:{LayerHeader:h.a}})],m),O=(n(1955),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"activity-layer"},[n("div",{staticClass:"activity-layer_mask",on:{click:t.clickMask}}),t._v(" "),n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"content",staticClass:"activity-layer_content",style:t.contentStyle},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["activity-layer-header_wrap",{fixed:t.fixed}]},[n("div",{staticClass:"activity-layer-header",style:t.headerStyle},[t._t("title",[t.headerVisible||t.title?n("LayerHeader",{attrs:{title:t.title,icon:t.icon},on:{close:t.close}}):t._e()])],2)]),t._v(" "),t.visible?t._t("default"):t._e(),t._v(" "),t._t("firstRenderContent")],2)])],1)])}),[],!1,null,"a729d27c",null);e.a=component.exports},function(t,e,n){"use strict";n(20);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),title=n(1041),h=n(985),y=n(1117),m=n(1023),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=Object(f.namespace)("traveller/activity"),_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).detailShow=!1,t.title="",t.detailElem=null,t.subCategoryId="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setDetailElem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.detailElem=t}},{key:"showPackageDetail",value:function(){this.useNewVersion?this.detailElem.showItineraryDetail():this.detailShow=!0}},{key:"getSubCategoryId",value:function(){var t,e,n,o,r,c,l,base="function"==typeof this.getBasicData?this.getBasicData():{},d=null!=(e=null===(t=this.packageData)||void 0===t?void 0:t.sub_category_id)?e:"",v=null!=(o=null===(n=base)||void 0===n?void 0:n.sub_category_id)?o:"",f=null!=(l=null===(c=null===(r=this.activityDetail)||void 0===r?void 0:r.basic_data)||void 0===c?void 0:c.sub_category_id)?l:"";this.subCategoryId=d||f||v}},{key:"mounted",value:function(){this.getSubCategoryId()}},{key:"getDetailsBtnTrackInfo",value:function(){return this.isTrackItem?{"data-spm-module":"PackageDetailsBtn?trg=manual","data-spm-virtual-item":"__virtual"}:{"data-spm-module":"PackageType_LIST?oid=package_".concat(this.packageData.package_id,"&idx=0&len=1"),"data-spm-virtual-item":"__virtual"}}},{key:"packageSpecChange",value:function(t,e){t!==e&&this.setTitle(t)}},{key:"setTitle",value:function(t){var e;this.isPassActivity?this.title=(null===(e=t)||void 0===e?void 0:e.length)?t:this.packageData.package_name:this.title=this.packageData.package_name}},{key:"useNewVersion",get:function(){return[2,15].includes(this.subCategoryId)}}]),e}(f.Vue);k([f.State],_.prototype,"klook",void 0),k([Object(f.Prop)({default:null})],_.prototype,"packageData",void 0),k([Object(f.Prop)({type:Boolean,default:!1})],_.prototype,"isPassActivity",void 0),k([Object(f.Prop)({default:""})],_.prototype,"packageSpec",void 0),k([Object(f.Prop)({default:!0})],_.prototype,"isTrackItem",void 0),k([O.State],_.prototype,"activityDetail",void 0),k([Object(f.Inject)("getBasicData")],_.prototype,"getBasicData",void 0),k([Object(f.Prop)({default:""})],_.prototype,"groupPackName",void 0),k([Object(f.Provide)()],_.prototype,"setDetailElem",null),k([Object(f.Watch)("packageSpec",{deep:!0,immediate:!0})],_.prototype,"packageSpecChange",null);var j=_=k([Object(f.Component)({components:{PackageCardTitle:title.a,MobilePackageDetailButton:h.a,ExperiencePackageDetailModule:y.a,ExperienceActivityPackageDetail:m.a}})],_),w=(n(1365),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.packageData?n("div",{staticClass:"card-header"},[n("div",{staticClass:"card-header-title"},[n("PackageCardTitle",{staticClass:"card-header-text",attrs:{title:t.groupPackName||t.title,"package-sub-name":t.packageData.sub_name,"activity-name":t.packageData.activity_name,"is-pass-activity":t.isPassActivity},nativeOn:{click:function(e){return t.showPackageDetail(e)}}},[n("MobilePackageDetailButton",t._b({staticClass:"card-header-btn",attrs:{"custom-type":"desktop"}},"MobilePackageDetailButton",t.getDetailsBtnTrackInfo(),!1))],1)],1),t._v(" "),t.detailShow?n("ExperiencePackageDetailModule",{staticClass:"card-header-detail",attrs:{"group-pack-name":t.groupPackName,"expand-itinerary-section":!0,"package-data":Object.assign({},t.packageData||{},{isPassActivity:t.isPassActivity}),"data-spm-module":"PackageDetailsPopups?oid=package_"+t.packageData.package_id},on:{close:function(e){t.detailShow=!1}}}):t._e(),t._v(" "),t.useNewVersion?[n("ExperienceActivityPackageDetail",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"package-id":t.packageData.package_id}})]:t._e()],2):t._e()}),[],!1,null,"ffb947ee",null);e.a=component.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(887),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).endTime="",t.timeStr="",t.interval=null,t.show=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onTimeListChange",value:function(t){var e;if(null===(e=t)||void 0===e?void 0:e.length)if(1===t.length){Object(h.c)(t[0])&&(this.endTime=t[0])}else{var n=this.bubbleSort(t);this.endTime=n.find((function(t){return Object(h.c)(t)}))}else this.clear();this.getTime(),this.countDown()}},{key:"onTimeStrChange",value:function(t){t||this.$emit("reload")}},{key:"getTime",value:function(){if(this.endTime){this.show||(this.show=!0);var t=Object(h.a)(this.endTime),e=t.days,n=t.hours,o=t.minutes,r=t.seconds;"0"===e&&"00"===n&&"00"===o&&"00"===r?(this.timeStr="",this.show=!1):this.timeStr="0"===e?this.$t("80660",{hh_mm_ss:" ".concat(n,":").concat(o,":").concat(r)}):this.$t("80659",{num:" ".concat(e),hh_mm_ss:"".concat(n,":").concat(o,":").concat(r)})}else this.clear()}},{key:"bubbleSort",value:function(t){for(var e=t.length,n=!1,i=0;i<e-1;i++){for(var o=0;o<e-1-i;o++)if(Object(h.b)(t[o+1])<Object(h.b)(t[o])){var r=t[o+1];t[o+1]=t[o],t[o]=r,n=!0}if(!n)break}return t}},{key:"clear",value:function(){this.cleanup(),this.timeStr="",this.interval=null,this.endTime=""}},{key:"countDown",value:function(){this.interval=setInterval(this.getTime,1e3)}},{key:"cleanup",value:function(){this.interval&&clearInterval&&clearInterval(this.interval)}},{key:"beforeDestroy",value:function(){this.cleanup()}}]),e}(f.Vue);y([Object(f.Prop)({type:Array,default:function(){return[]}})],m.prototype,"timeList",void 0),y([Object(f.Prop)({type:String,default:"normal"})],m.prototype,"size",void 0),y([Object(f.Watch)("timeList",{immediate:!0})],m.prototype,"onTimeListChange",null),y([Object(f.Watch)("show")],m.prototype,"onTimeStrChange",null);var k=m=y([f.Component],m),O=(n(1197),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show&&t.timeStr?n("div",{staticClass:"cut-down-wrapper",class:[t.size]},[n("div",{staticClass:"cut-down-wrapper__content"},[t._t("default",[n("SvgIcon",{attrs:{name:"common#activity-alarm",size:"normal"===t.size?20:16}}),t._v(" "),n("span",{staticClass:"cut-time"},[t._v(t._s(t.timeStr))])],{timeStr:t.timeStr})],2)]):t._e()}),[],!1,null,"1ddef6be",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(52),n(53),n(8);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2190),y=n(882),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).alertVisible=!1,t.nav=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"beforeEnter",value:function(t){var e=this.getPostion(),n=e.x,o=e.y,r=e.width,c=e.height;t.style.left=n+r/2-10+"px",t.style.top=o+c/2-10+"px",this.nav=document.querySelector(".page-activity-top-nav-sections")}},{key:"enter",value:function(t,e){var n=this;t.offsetWidth;var o=this.getTargetPosition(),r=o.x,c=o.y;t.style.left=r+"px",t.style.top=c+"px",t.style.opacity="0",this.isDesktop&&this.nav&&(this.nav.style.zIndex="100"),t.addEventListener("transitionend",(function(){e(),n.alertVisible=!0}))}},{key:"afterEnter",value:function(t){var e=this;this.$emit("update:visible",!1),t.style.display="none",y.a.$emit("refresh-shopping-cart");var n=setTimeout((function(){e.alertVisible=!1,clearTimeout(n),e.isDesktop&&e.nav&&(e.nav.style.zIndex="999")}),2e3)}},{key:"getTargetPosition",value:function(){var t=this.target?this.target:document.querySelector(this.cClass);return this.getRectInfo(t)}},{key:"getRectInfo",value:function(t){return t.getBoundingClientRect&&t.getBoundingClientRect()}},{key:"getPostion",value:function(){return this.position||this.isDesktop?"[object DOMRect]"===Object.prototype.toString.call(this.position)?this.position:this.getRectInfo(this.position):{x:0,y:document.documentElement.clientHeight,width:30,height:15}}},{key:"cClass",get:function(){return this.isDesktop?".experience-layout-header .default-header_shopping-cart .default-header_entry":".experience-layout-header .shopcart .default-header_icon"}},{key:"isDesktop",get:function(){return"desktop"===this.platform}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.Prop)({type:Object,default:function(){return{}}})],k.prototype,"customStyle",void 0),m([Object(f.Prop)()],k.prototype,"target",void 0),m([Object(f.Prop)()],k.prototype,"visible",void 0),m([Object(f.Prop)()],k.prototype,"position",void 0);var O=k=m([Object(f.Component)({components:{AlertComponent:h.a}})],k),_=(n(2430),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["cart",t.platform],style:t.customStyle,attrs:{name:"common#activity-shopping-cart"}})],1),t._v(" "),n("AlertComponent",{attrs:{visible:t.alertVisible}})],1)}),[],!1,null,"06a45e8e",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(16),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"width",get:function(){return this.score/this.total*100+"%"}},{key:"starAppraise",get:function(){return Object(h.lb)(this.$t.bind(this),this.score,80)}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)({default:5})],m.prototype,"score",void 0),y([Object(f.Prop)({default:14})],m.prototype,"size",void 0),y([Object(f.Prop)({default:5})],m.prototype,"total",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"starShow",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"hideAppraise",void 0);var k=m=y([f.Component],m),O=(n(1448),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"score-stars",class:["score-stars-"+t.klook.platform]},[n("div",{staticClass:"score-stars-content"},[n("span",{staticClass:"score-stars-light",style:{width:t.width}},t._l(5,(function(i,e){return n("SvgIcon",{key:e,staticClass:"score-stars-star-icon",attrs:{name:"mobile-activity#icon_operational_review_xxs",size:t.size}})})),1),t._v(" "),n("span",{staticClass:"score-stars-dark"},t._l(5,(function(i,e){return n("SvgIcon",{key:e,staticClass:"score-stars-star-icon",attrs:{name:"mobile-activity#icon_operational_review_xxs",size:t.size,color:"#E0E0E0"}})})),1)]),t._v(" "),t.starShow&&t.starAppraise&&!t.hideAppraise?n("span",{staticClass:"star-appraise"},[t._v("\n    "+t._s(t.starAppraise())+"\n  ")]):t._e()])}),[],!1,null,"536ac808",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)()],h.prototype,"customType",void 0),f([Object(v.Prop)()],h.prototype,"text",void 0);var y=h=f([v.Component],h),m=(n(1292),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-detail-btn",class:"desktop"===this.customType&&"desktop-style"},[e("span",[this._v(this._s(this.text||this.$t("12686")))]),this._v(" "),e("SvgIcon",{staticClass:"icon",attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",size:"desktop"===this.customType?16:12}})],1)}),[],!1,null,"63bad71f",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"subtitleVisible",get:function(){return this.subtitle||this.$slots.subtitle}},{key:"isDesktop",get:function(){return"desktop"===this.platform}},{key:"target",get:function(){return this.isDesktop?{target:"__blank"}:{}}},{key:"link",get:function(){return this.cornerButtonLink?this.$href(this.cornerButtonLink):"javascript:void(0);"}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"title",void 0),h([Object(f.Prop)()],y.prototype,"subtitle",void 0),h([Object(f.Prop)()],y.prototype,"cornerButtonTitle",void 0),h([Object(f.Prop)()],y.prototype,"cornerButtonLink",void 0),h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0);var m=y=h([f.Component],y),k=(n(1169),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.title?n("div",{class:["section-header",t.platform]},[n("div",{staticClass:"section-header_top"},[n("h2",{staticClass:"section-title"},[t._v(t._s(t.title))]),t._v(" "),t.cornerButtonTitle?n("a",t._b({staticClass:"section-corner-button",attrs:{href:t.link,"data-spm-item":"__default"}},"a",t.target,!1),[t._t("default",[t._v(t._s(t.cornerButtonTitle))])],2):t._e()]),t._v(" "),t.subtitleVisible?n("p",{staticClass:"section-header_subtitle"},[t._t("subtitle",[n("span",[t._v("\n        "+t._s(t.subtitle)+"\n      ")])])],2):t._e()]):t._e()}),[],!1,null,"43d17206",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getTypeConfig",value:function(t){return{part:{size:100,title:"",content:this.$t("loading_failed")},page:{size:200,title:"textid: Now where did we put that page?",content:this.$t("loading_failed")}}[t]||{}}},{key:"calcObj",get:function(){var t=this.type,e=this.size,title=this.title,content=this.content,n=this.getTypeConfig(t);return Object(h.merge)({},n,{size:e,title:title,content:content})}}]),e}(f.Vue);y([Object(f.Prop)({type:String,default:"part"})],m.prototype,"type",void 0),y([Object(f.Prop)({type:String,default:void 0})],m.prototype,"size",void 0),y([Object(f.Prop)({type:String,default:void 0})],m.prototype,"title",void 0),y([Object(f.Prop)({type:String,default:void 0})],m.prototype,"content",void 0);var k=m=y([f.Component],m),O=(n(1048),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-content-reflesh"},[n("div",{staticClass:"common-content-reflesh-box"},[n("div",{staticClass:"reflesh-icon"},[n("SvgIcon",{attrs:{name:"common#ill_spot_loading_failed",size:t.calcObj.size}})],1),t._v(" "),n("div",{staticClass:"reflesh-title"},[t._v(t._s(t.calcObj.title))]),t._v(" "),n("div",{staticClass:"reflesh-content"},[t._v(t._s(t.calcObj.content))]),t._v(" "),n("div",{staticClass:"reflesh-btns"},[n("klk-button",{attrs:{size:"small"},on:{click:function(e){return t.$emit("refresh")}}},[t._v(t._s(t.$t("refresh")))])],1)])])}),[],!1,null,"7d66487a",null);e.a=component.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=n(881),m=n(908),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return y.a.apply(void 0,arguments)}},{key:"calcPlatform",get:function(){return this.customPlatform||this.klook.platform}},{key:"calcTrack",get:function(){return Object(h.merge)({action:!1,type:"module",spm:"OpenDateReminder"},this.$attrs.track||{})}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"customPlatform",void 0);var _=O=k([Object(f.Component)({components:{HeaderTips:m.a}})],O),j=(n(1355),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({staticClass:"has-open-date-tips"},"div",t.bindIHTrack(t.calcTrack),!1),["desktop"===t.calcPlatform?n("klk-alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n    "+t._s(t.$t("49418"))+"\n  ")]):n("div",{staticClass:"mobile-tips-box"},[n("HeaderTips",{attrs:{text:t.$t("49418"),"hide-divider":!0}})],1)],1)}),[],!1,null,"244b0af6",null);e.a=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(881),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).title="",t.content="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){this.title=this.$t("49407"),this.content=this.$t("49414")}},{key:"clickTips",value:function(){this.$alert(this.content,{okLabel:this.$t("49415")})}},{key:"bindIHTrack",value:function(){return h.a.apply(void 0,arguments)}},{key:"track",get:function(){return{type:"module",spm:"OpenDateIntro",exposure:!1,query:{evt:"desktop"===this.klook.platform?"mouseenter":"click"}}}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0);var k=m=y([f.Component],m),O=(n(2468),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"open-date-tips",class:t.klook.platform},[n("div",{staticClass:"open-date-tips-box"},[n("span",{staticClass:"tips-text"},[t._v(t._s(t.title))]),t._v(" "),n("span",t._b({staticClass:"tips-icon-box"},"span",t.bindIHTrack(t.track),!1),["desktop"===t.klook.platform?n("klk-poptip",{staticStyle:{"max-height":"20px"},attrs:{content:t.content}},[n("klk-icon",{staticClass:"tips-icon",attrs:{size:20,type:"icon_tips_question_s"}})],1):n("klk-icon",{staticClass:"tips-icon",attrs:{size:20,type:"icon_tips_question_s"},on:{click:t.clickTips}})],1)])])}),[],!1,null,"a1eafa2e",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(889),y=n(881),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).poptipDef={width:480,maxWidth:480,maxHeight:0},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return y.a.apply(void 0,arguments)}},{key:"calcTrack",get:function(){return{type:"module",action:!1,spm:"Savings_Detail_Pop_Up"}}}]),e}(f.Vue);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)({default:!1})],k.prototype,"hideDashed",void 0),m([Object(f.Prop)({default:function(){return{}}})],k.prototype,"poptipData",void 0),m([Object(f.Prop)({default:function(){return{}}})],k.prototype,"priceSummary",void 0);var O=k=m([Object(f.Component)({components:{SavingPriceDetails:h.default}})],k),_=(n(1213),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-poptip"},[n("klk-poptip",t._b({},"klk-poptip",Object.assign({},t.poptipDef,t.poptipData),!1),[n("SavingPriceDetails",t._b({attrs:{slot:"content","hide-dashed":t.hideDashed,"price-summary":t.priceSummary},slot:"content"},"SavingPriceDetails",t.bindIHTrack(t.calcTrack),!1)),t._v(" "),n("span",{staticClass:"price-poptip__text"},[t._t("default"),t._v(" "),t._t("right-icon",[n("span",{staticClass:"hover-icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-standard-down-new",size:"12"}})],1)])],2)],1)],1)}),[],!1,null,"1f34b872",null);e.a=component.exports},,,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"type",get:function(){var t;return null===(t=this.item)||void 0===t?void 0:t.type}},{key:"content",get:function(){var t;return null===(t=this.item)||void 0===t?void 0:t.content}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"item",void 0);var m=y=h([f.Component],y),k=(n(2002),n(43)),O=Object(k.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("p",{class:"act-validity_"+this.type},[this._v(this._s(this.content))])}),[],!1,null,"3af60dac",null).exports,_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).styles={paddingBottom:"28px",maxHeight:"none",overflow:"hidden"},t.status="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){parseFloat(this.maxHeight)>0&&this.initStatus()}},{key:"initStatus",value:function(){var t=this;this.$nextTick((function(){var e=t.actValidityRef;if(e){var n=t.styles,o=t.maxHeight,r=o?parseFloat(o):0;r&&e.offsetHeight>r&&(t.status="more",n.maxHeight=o)}}))}},{key:"clickBtn",value:function(){var t=this.status,e=this.styles,n=this.maxHeight;t&&(this.status="more"===t?"less":"more",e.maxHeight="more"===t?"none":n)}},{key:"valid",get:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.length}},{key:"isMobile",get:function(){return"mobile"===this.platform}},{key:"content",get:function(){return this.data.filter((function(t){return"sub_title"!==t.type}))}},{key:"calcText",get:function(){var t=this.status,text="";return"more"===t?text=this.$t("see_more"):"less"===t&&(text=this.$t("17843")),text}}]),e}(f.Vue);_([Object(f.State)((function(t){return t.klook.platform}))],j.prototype,"platform",void 0),_([Object(f.Ref)()],j.prototype,"actValidityRef",void 0),_([Object(f.Prop)({type:String,default:"none"})],j.prototype,"maxHeight",void 0),_([Object(f.Prop)({type:Array,default:function(){return[]}})],j.prototype,"data",void 0);var w=j=_([Object(f.Component)({components:{ActivityValidityItem:O}})],j),P=(n(2003),Object(k.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"activity-validity-box",class:[t.platform]},[n("div",{ref:"actValidityRef",staticClass:"activity-validity-item-wrap",style:t.isMobile&&t.status&&t.styles},t._l(t.content,(function(t,e){return n("ActivityValidityItem",{key:e,attrs:{item:t}})})),1),t._v(" "),t.isMobile?t._t("btn",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"common-more-box",class:t.status,on:{click:t.clickBtn}},[n("span",{staticClass:"common-more-btn"},[t._v("\n        "+t._s(t.calcText)+"\n      ")])])]):t._e()],2):t._e()}),[],!1,null,"0bffc506",null));e.a=P.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(934),y=n(887),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).timeStr="",t.interval=null,t.styleObj=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isWarmingChange",value:function(t){t&&this.publishedTime&&!this.interval&&(this.getTime(),this.countDown(),this.$nextTick(this.adjustPosition))}},{key:"publishedTimeChange",value:function(){this.$nextTick(this.adjustPosition)}},{key:"adjustPosition",value:function(){var t;if(this.isAbsolute){var e=(null===(t=this.$el)||void 0===t?void 0:t.offsetHeight)||0;e>1&&(this.styleObj={top:"".concat(1-e,"px")})}}},{key:"getTime",value:function(){if(!this.publishedTime)return this.cleanup(),this.timeStr="",void(this.interval=null);var t=Object(y.a)(this.publishedTime),e=t.days,n=t.hours,o=t.minutes,r=t.seconds;this.timeStr="0"===e&&"00"===n&&"00"===o&&"00"===r?"":"0"===e?this.$t("79655",{hh_mm_ss:" ".concat(n,":").concat(o,":").concat(r)}):this.$t("79654",{num:" ".concat(e),hh_mm_ss:"".concat(n,":").concat(o,":").concat(r)})}},{key:"countDown",value:function(){this.interval=setInterval(this.getTime,1e3)}},{key:"cleanup",value:function(){this.interval&&clearInterval&&clearInterval(this.interval)}},{key:"beforeDestroy",value:function(){this.cleanup()}}]),e}(h.a);m([Object(f.Prop)({default:!1})],k.prototype,"showArrow",void 0),m([Object(f.Prop)({default:!1})],k.prototype,"isAbsolute",void 0),m([Object(f.Watch)("isWarming",{immediate:!0})],k.prototype,"isWarmingChange",null),m([Object(f.Watch)("publishedTime",{immediate:!0})],k.prototype,"publishedTimeChange",null);var O=k=m([f.Component],k),_=(n(1899),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.timeStr||t.$scopedSlots.default?n("div",{style:t.styleObj},[t._t("default",null,{text:t.timeStr}),t._v(" "),t.$scopedSlots.default?t._e():n("div",{staticClass:"warming-slogan",class:{"show-arrow":t.showArrow}},[n("SvgIcon",{staticClass:"warming-slogan-icon",attrs:{name:"common#icon_warm_time_xxs",width:"20",height:"20"}}),t._v(" "),n("span",{staticClass:"warming-slogan-text"},[t._v(t._s(t.timeStr))])],1)],2):t._e()}),[],!1,null,"c364733e",null);e.a=component.exports},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(10),m=n.n(y),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue),_=O=k([h.Component],O),j=(n(1220),n(43)),w=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-detail-empty"},[e("SvgIcon",{attrs:{name:"mobile-activity#icon-bookings",size:"72",color:"rgba(0, 0, 0, 0.38)"}}),this._v(" "),e("div",{staticClass:"package-detail-empty-tip"},[this._v(this._s(this.$t("13778")))])],1)}),[],!1,null,"20734215",null).exports,P=n(987),C=n(895),S=(n(30),n(70),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),D=Object(h.namespace)("traveller/activity"),x=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showPackageDetail",value:function(t){this.$emit("show-package-detail",t)}}]),e}(h.Vue);S([D.State],x.prototype,"fastEntryList",void 0);var T=x=S([h.Component],x),I=(n(1221),Object(j.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-detail-entry-list"},t._l(t.fastEntryList,(function(e,o){return n("div",{key:e.entryType,staticClass:"entry-list_item",on:{click:function(e){return t.showPackageDetail(o)}}},[n("SvgIcon",{staticClass:"item_icon-avatar",attrs:{name:"mobile-activity#icon-package-details-title-green",size:"28"}}),t._v(" "),n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-content-title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"item-content-subtitle"},[t._v(t._s(e.subTitle))])]),t._v(" "),n("SvgIcon",{staticClass:"item_icon-arrow",attrs:{name:"mobile-activity#arrow-right",size:"24"}})],1)})),0)}),[],!1,null,null,null).exports),R=n(883),$=n(1106),L=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.index=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.packageDetail)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"activityValidity",get:function(){var t=this.packageDetail.usageValidity||[];return{title:(t.find((function(t){return"title"===t.type}))||{}).content,rules:t.filter((function(t){return"item"===t.type})).map((function(t){return t.content}))}}},{key:"isPassActivity",get:function(){var t;return(null===(t=this.packageDetail)||void 0===t?void 0:t.isPassActivity)||!1}},{key:"specInfo",get:function(){var t,e,n=(null===(t=this.packageDetail)||void 0===t?void 0:t.spec)||[];return(null===(e=n)||void 0===e?void 0:e.length)?n.map((function(t){var e;return((null===(e=t)||void 0===e?void 0:e.attr)||[]).map((function(t){var e;return(null===(e=t)||void 0===e?void 0:e.name)||""}))})).flat():[]}}]),e}(h.Vue);L([Object(h.Prop)()],A.prototype,"packageDetail",void 0),L([Object(h.Prop)({type:Boolean,default:!1})],A.prototype,"hideTitle",void 0),L([Object(h.Prop)({default:!0})],A.prototype,"expandAll",void 0),L([Object(h.Prop)({default:!1})],A.prototype,"expandItinerarySection",void 0),L([Object(h.Prop)({default:!0})],A.prototype,"hasBottomButton",void 0);var E=A=L([Object(h.Component)({components:{ExpTagging:R.default,EntryList:I,PackageDetailUnoinComponent:$.default}})],A),M=(n(1222),Object(j.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-detail-main"},[t._t("title-slot",[n("div",{staticClass:"activity-package-detail-title-desc"},[t.isPassActivity?[n("p",{staticClass:"activity-name"},[t._v(t._s(t.packageDetail.activityName))]),t._v(" "),n("p",{staticClass:"package-name"},t._l(t.specInfo,(function(e,o){return n("span",{key:o},[n("span",{staticClass:"attr"},[t._v(t._s(e))])])})),0)]:[n("p",{staticClass:"activity-name"},[t._v(t._s(t.packageDetail.packageName))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.packageDetail.packageSubName))])]],2)],{packageDetail:t.packageDetail}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"0 0 16px 0"},attrs:{list:t.calcTags2attribute,pkg:t.packageDetail,track:{spm:"Package_Product_Tag"}}}),t._v(" "),n("PackageDetailUnoinComponent",{attrs:{"package-detail":t.packageDetail,"expand-all":t.expandAll,"expand-itinerary-section":t.expandItinerarySection}})],2)}),[],!1,null,"7d2d3184",null).exports),B=n(3),N=n(924),V=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},F=Object(h.namespace)("traveller/activity"),W=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).fetchPackageDetailStatus="fetching",t.packageDetail=null,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"translateAction",value:function(){this.getPackageDetail(!this.isTranslated)}},{key:"getPackageDetail",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.formatDetail({status:"fetching"}),o=this.$route.params.preview?1:0,null!=(r=this.packageId)){t.next=5;break}return t.abrupt("return",null);case 5:if(c=this.isLinePage,l=null,t.prev=7,!o){t.next=14;break}return t.next=11,this.$axios.$get(B.a.activityPackageDetail,{params:{preview:o,translation:!!e,package_id_list:r,publish_status:"all",is_line_page:!1}});case 11:l=t.sent,t.next=17;break;case 14:return t.next=16,this.$axios.$get(B.a.activityPackageDetail,{params:{preview:o,translation:!!e,publish_status:"viewable",package_id_list:r,is_line_page:c}});case 16:l=t.sent;case 17:t.next=23;break;case 19:return t.prev=19,t.t0=t.catch(7),this.formatDetail({status:"failure"}),t.abrupt("return");case 23:d=l.result,(null===(n=l)||void 0===n?void 0:n.success)&&!m()(d)?this.formatDetail({status:"success",detail:d[0]}):this.formatDetail({status:"failure"});case 25:case"end":return t.stop()}}),t,this,[[7,19]])}))),function(t){return n.apply(this,arguments)})},{key:"formatDetail",value:function(data){var t=data.status,e=data.detail;t&&(this.fetchPackageDetailStatus=t),e&&(e.use_section=!0,this.packageDetail={activityName:e.activity_name,isPassActivity:this.isPassActivity,price_show:e.price_show,has_discount:e.has_discount,redeem_status:e.redeem_status,product_tags:e.product_tags,useSection:e.use_section,sectionContent:e.section_content,usageValidity:e.usage_validity_render_obj,enableTranslationButton:e.enable_translation_button,translationButtonStatus:e.translation_status,packageName:this.groupPackName||e.package_name,packageSubName:e.package_sub_name,packageId:e.id,activityId:e.activity_id,passStandardActivityInfo:e.pass_standard_activity_info,spec:e.spec,sub_category_id:e.sub_category_id})}},{key:"mounted",value:function(){var t;this.getPackageDetail("1"===(null===(t=this.$route.query)||void 0===t?void 0:t.translation))}},{key:"componentName",get:function(){var t={success:"PackageDetailMain",failure:"CommonContentRefresh",fetching:"CommonContentLoading"}[this.fetchPackageDetailStatus];return this.packageId&&t?t:"PackageDetailEmpty"}},{key:"translateButtonVisible",get:function(){var t;return!!(null===(t=this.packageDetail)||void 0===t?void 0:t.enableTranslationButton)}},{key:"isTranslated",get:function(){var t;return!(null===(t=this.packageDetail)||void 0===t?void 0:t.translationButtonStatus)}},{key:"isAiTranslation",get:function(){return this.translateButtonVisible&&this.isTranslated}},{key:"isLinePage",get:function(){var t,e;return(null!=(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)?e:{}).is_line_page||!1}}]),e}(h.Vue);V([h.State],W.prototype,"klook",void 0),V([F.State],W.prototype,"activityDetail",void 0),V([Object(h.Prop)()],W.prototype,"packageId",void 0),V([Object(h.Prop)({type:Boolean,default:!1})],W.prototype,"isPassActivity",void 0),V([Object(h.Prop)({default:!0})],W.prototype,"expandAll",void 0),V([Object(h.Prop)({default:!1})],W.prototype,"expandItinerarySection",void 0),V([Object(h.Prop)({default:!0})],W.prototype,"hasBottomButton",void 0),V([Object(h.Prop)({default:""})],W.prototype,"groupPackName",void 0);var H=W=V([Object(h.Component)({components:{PackageDetailEmpty:w,CommonContentRefresh:P.a,CommonContentLoading:C.a,PackageDetailMain:M,PublishAi:N.a}})],W),U=(n(1223),Object(j.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["activity-package-detail",!t.hasBottomButton&&"publish-ai-low"]},[t.isAiTranslation?n("PublishAi",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"text"}}):t._e(),t._v(" "),n(t.componentName,{tag:"component",attrs:{"expand-all":t.expandAll,"expand-itinerary-section":t.expandItinerarySection,"package-detail":Object.assign({},t.packageDetail||{},{packageId:t.packageId})},on:{refresh:t.getPackageDetail,"fetch-detail":t.getPackageDetail},scopedSlots:t._u([{key:"title-slot",fn:function(e){var n=e.packageDetail;return[t._t("title-slot",null,{packageDetail:n})]}}],null,!0)})],1)}),[],!1,null,"45d8ac3f",null));e.a=U.exports},function(t,e,n){"use strict";n(30),n(20),n(27),n(37);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1163),y=n.n(h),m=n(278),k=n.n(m),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);O([Object(f.Prop)({default:"success"})],_.prototype,"state",void 0);var j=_=O([f.Component],_),w=(n(1189),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{attrs:{tag:"div",name:"fade"}},["loading.success".includes(t.state)?n("div",{key:"loading"},["loading"===t.state?t._t("loading"):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"success"===t.state,expression:"state === 'success'"}],key:"success"},[t._t("default")],2)],2):t._e(),t._v(" "),"failure"===t.state?n("div",{key:"failure"},[t._t("failure")],2):t._e()])}),[],!1,null,"257ac1f6",null).exports,C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleRefresh",value:function(){this.refresh&&this.refresh()}}]),e}(f.Vue);C([Object(f.Prop)()],S.prototype,"refresh",void 0);var D=S=C([f.Component],S),x=(n(1190),Object(w.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-failure"},[n("p",{staticClass:"title"},[t._v("connect failure, please try out again")]),t._v(" "),n("klk-button",{attrs:{type:"outlined",size:"small"},nativeOn:{click:function(e){return t.handleRefresh(e)}}},[t._v("\n    "+t._s(t.$t("refresh"))+"\n    "),n("klk-icon",{staticClass:"refresh",staticStyle:{"margin-left":"2px"},attrs:{type:"icon_edit_update",size:"16"}})],1)],1)}),[],!1,null,"73a03e26",null).exports),T=n(1035),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleHideSection",value:function(){this.hideSection&&this.hideSection()}},{key:"changeSectionState",value:function(t){this.setSectionState&&this.setSectionState(t)}},{key:"created",value:function(){var t=this.sectionContent,e=t.load_type,n=void 0===e?"":e,data=t.data,o=t.src,r=void 0===o?"":o;"async"===n&&this.changeSectionState("loading");var c="sync"===n&&!data,l="async"===n&&!r;(!this.sectionContent||c||l)&&this.handleHideSection()}},{key:"componentName",get:function(){var t,e=this.sectionContent,n=e.handler,o=e.data_type,r=(void 0===o?"":o).split(":").map(k.a).join("_"),c=k()(y()(n))+r,component="desktop"===this.klook.platform?"Desktop".concat(c):"Mobile".concat(c);return["PoiDetail","PoiList"].includes((null===(t=this.$route)||void 0===t?void 0:t.name)||"")&&(component="Mobile".concat(c)),f.Vue.component(component)?component:f.Vue.component(c)?c:(this.handleHideSection(),null)}},{key:"componentNameList",get:function(){var t,e;if(!this.componentName)return[];var n=[{name:this.componentName,slot:"default"}],o=null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.placeholder,r=this.componentName+"Loading";!1===o?r="":this.$options.components[r]||(r="Loading");var c=this.componentName+"Failure";return this.$options.components[c]||(c="SectionFailure"),n.concat([{name:r,slot:"loading"},{name:c,slot:"failure"}])}},{key:"loadingState",get:function(){return this.state||(this.isAsync?"loading":"success")}}]),e}(n(893).a),$=R=I([Object(f.Component)({components:{SwitchLoadState:P,SectionFailure:x,Loading:T.a}})],R),L=Object(w.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.componentName?n("SwitchLoadState",{attrs:{state:t.loadingState}},t._l(t.componentNameList,(function(e){return n(e.name,t._g(t._b({key:e.name,tag:"component",attrs:{slot:e.slot,state:t.state,"hide-section":t.hideSection,"set-section-state":t.setSectionState,section:t.section},on:{"hide-section":t.hideSection},slot:e.slot},"component",t.$attrs,!1),t.$listeners))})),1):t._e()}),[],!1,null,null,null);e.a=L.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).labelObj={type:"secondary",size:"small","bg-color":"#E6F7F2","text-color":"#0B9E65"},t}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:function(){return{}}})],h.prototype,"labelBind",void 0);var y=h=f([v.Component],h),m=(n(1074),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tag-credits-box"},[e("klk-label",this._b({},"klk-label",Object.assign({},this.labelObj,this.labelBind||{}),!1),[this._t("default")],2)],1)}),[],!1,null,"7d49a077",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"link",get:function(){return this.moreDeepLink?this.$href(this.moreDeepLink):"javascript:void(0);"}},{key:"target",get:function(){return"desktop"===this.klook.platform?{target:"__blank"}:{}}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"moreTitle",void 0),h([Object(f.Prop)()],y.prototype,"moreDeepLink",void 0);var m=y=h([f.Component],y),k=(n(1191),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.moreTitle?n("div",{staticClass:"section-footer"},[n("a",t._b({attrs:{href:t.link,"data-spm-item":"More"}},"a",t.target,!1),[n("klk-button",{staticClass:"footer-button",attrs:{type:"outlined"}},[t._v("\n      "+t._s(t.moreTitle)+"\n    ")])],1)]):t._e()}),[],!1,null,"9920d704",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"active",void 0),h([Object(f.Prop)()],y.prototype,"disable",void 0);var m=y=h([f.Component],y),k=(n(1291),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"date-button",class:{active:this.active,disable:this.disable}},[this._t("default")],2)}),[],!1,null,"4fc7638e",null);e.a=component.exports},function(t,e,n){"use strict";e.a=["040015","040016","040017","040018","040019","040020","040022","040023","040024","040025","040026","040028","040031","040032","040033","040038","040039","040040","5013","5044","5045","6007","6008","6009","6010","6011","6012","6013"]},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).elementObserver=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.createObserver()}},{key:"beforeDestroy",value:function(){this.destroyObserver()}},{key:"createObserver",value:function(){var t=this;"IntersectionObserver"in window&&(this.elementObserver=new IntersectionObserver((function(e){return e.forEach((function(e){e.target.classList.toggle("is-pinned",e.intersectionRatio<1),t.$emit("change",e.intersectionRatio<1)}))}),{threshold:[1]}),this.elementObserver.observe(this.$el))}},{key:"destroyObserver",value:function(){this.elementObserver&&this.$el&&this.elementObserver.unobserve(this.$el)}}]),e}(f.Vue);h([Object(f.Prop)({default:"-1px"})],y.prototype,"top",void 0);var m=y=h([f.Component],y),k=(n(1142),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"base-sticky",style:{top:this.top}},[this._t("default")],2)}),[],!1,null,"3043110f",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2780),y=(n(2290),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getTranslateFunc",value:function(){return this.$t.bind(this)}},{key:"getAxiosFunc",value:function(){return this.$axios}},{key:"inhouseTrack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.$inhouse.track(t,e,n)}},{key:"grounpTitleClick",value:function(data){this.$emit("grounpTitleClick",data)}},{key:"handlePickUpClick",value:function(){this.$emit("pickUpClick")}},{key:"render",value:function(){var t=arguments[0];return t(h.a,{attrs:{hackCloseBtn:this.hackCloseBtn,showImageFn:this.showImageFn,itineraryData:this.itineraryData,getTranslateFunc:this.getTranslateFunc,getAxiosFunc:this.getAxiosFunc,platform:this.platform,size:this.size,useItineraryMap:this.useItineraryMap,mapType:this.mapType,simplified:this.simplified,componentType:this.componentType,grounpTitleClick:this.grounpTitleClick,inhouseTrack:this.inhouseTrack},on:{pickUpClick:this.handlePickUpClick}})}},{key:"useItineraryMap",get:function(){var t,e,n,o=null!=(n=null===(e=null===(t=this.itineraryData)||void 0===t?void 0:t.pois)||void 0===e?void 0:e.poi_data)?n:[];return"mobile"===this.platform&&Array.isArray(o)&&o.length>0}}]),e}(f.Vue);y([Object(f.State)((function(t){return t.klook.platform}))],m.prototype,"platform",void 0),y([Object(f.State)((function(t){return"CN"===t.klook.ipCountry?"mapbox":"google"}))],m.prototype,"mapType",void 0),y([Object(f.Prop)()],m.prototype,"itineraryData",void 0),y([Object(f.Prop)()],m.prototype,"size",void 0),y([Object(f.Prop)()],m.prototype,"showImageFn",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"simplified",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"hackCloseBtn",void 0),y([Object(f.Prop)({type:String,default:""})],m.prototype,"componentType",void 0),m=y([f.Component],m),e.a=m},,,function(t,e,n){"use strict";n(416);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcArr",get:function(){return new Array(3).fill(0).map((function(t,i){return i}))}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"hideDate",void 0),h([Object(f.Prop)()],y.prototype,"hideUnit",void 0);var m=y=h([f.Component],y),k=(n(1356),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-option-skeleton"},[t.hideDate?t._e():n("klk-skeleton",{staticClass:"booking-option-skeleton-box",attrs:{animate:""}},[n("div",{staticClass:"first"},[n("klk-skeleton-block",{attrs:{width:140}})],1),t._v(" "),n("div",{staticClass:"child"},[n("klk-skeleton-block",{attrs:{width:70}})],1),t._v(" "),n("div",{staticClass:"child"},[n("klk-skeleton-block")],1)]),t._v(" "),t.hideUnit?t._e():n("klk-skeleton",{staticClass:"booking-option-skeleton-box",attrs:{animate:""}},[n("div",{staticClass:"first"},[n("klk-skeleton-block",{attrs:{width:140}})],1),t._v(" "),t._l(t.calcArr,(function(e,i){return n("div",{key:"unit-"+i,staticClass:"unit-skeleton-box child"},[n("span",[n("klk-skeleton-block",{attrs:{width:70}})],1),t._v(" "),n("span",[n("klk-skeleton-block",{attrs:{width:100}})],1)])}))],2)],1)}),[],!1,null,"d854860e",null);e.a=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"clickBtn",value:function(){var t=this.status;t&&this.$emit("click","more"===t?"less":"more")}},{key:"calcIconName",get:function(){var t=this.status,e="";return t&&(e="more"===t?"common#icon_navigation_chevron_down_xxs":"common#icon_navigation_chevron_up_xxs"),e}},{key:"calcText",get:function(){var t=this.status,e=this.moreText,n=this.lessText,text="";return"more"===t?text=e||this.$t("see_more"):"less"===t&&(text=n||this.$t("17843")),text}}]),e}(f.Vue);h([Object(f.Prop)({default:""})],y.prototype,"status",void 0),h([Object(f.Prop)({default:""})],y.prototype,"moreText",void 0),h([Object(f.Prop)({default:""})],y.prototype,"lessText",void 0),h([Object(f.Prop)({default:""})],y.prototype,"moreStyle",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"hideIcon",void 0);var m=y=h([f.Component],y),k=(n(1900),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"show-more-wrap"},[n("div",{staticClass:"show-more-box"},[t._t("default"),t._v(" "),t._t("btn",[t.status?n("div",{staticClass:"common-more-box",style:t.moreStyle,on:{click:t.clickBtn}},[n("span",{staticClass:"common-more-btn"},[t._v("\n          "+t._s(t.calcText)+"\n        ")]),t._v(" "),!t.hideIcon&&t.calcIconName?n("SvgIcon",{staticClass:"common-more-icon",attrs:{name:t.calcIconName,color:"$color-text-link",size:"14"}}):t._e()],1):t._e()],{calcText:t.calcText,clickBtn:t.clickBtn,status:t.status})],2)])}),[],!1,null,"015b650d",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:1})],h.prototype,"xNumber",void 0),f([Object(v.Prop)({default:1})],h.prototype,"yNumber",void 0);var y=h=f([v.Component],h),m=(n(1099),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading"},[n("div",{staticClass:"title"}),t._v(" "),t._l(t.yNumber,(function(e){return n("div",{key:e,staticClass:"item-list"},t._l(t.xNumber,(function(e){return n("div",{key:e,staticClass:"item"},[n("div",{staticClass:"skeleton-main"}),t._v(" "),n("div",{staticClass:"skeleton-long-footer"}),t._v(" "),n("div",{staticClass:"skeleton-footer"}),t._v(" "),n("div",{staticClass:"skeleton-footer"})])})),0)}))],2)}),[],!1,null,"48f42130",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(281),f=n(40),h=n(5),y=n(21),m=n(71),k=n.n(m),O=n(1030),_=n(918),j=n(1297),w=n(1466),P=n(16);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).active=[],t.cloneActive=[],t.imageGalleryObj={title:"",dontGetImages:!0,showGallery:!1,currentIndex:0,bannerList:[],ons:{close:function(){var e=Object(v.a)(t).imageGalleryObj;e.itineraryImages=[],e.currentIndex=0,e.showGallery=!1}}},t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"setValue",value:function(){this.defaltValue&&(this.active=this.defaltValue)}},{key:"initPickUp",value:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=data.pick_up_meet_up,e=t.departure_return,n=void 0===e?[]:e,o=t.pois,r=void 0===o?[]:o,c=t.package_id,l=void 0===c?0:c,d=t.departure_more,v=void 0===d?"":d;return{package_id:l,days:n,departure_more:v,pois:{poi_data:r}}}},{key:"getOfficialImages",value:function(t){return(t||[]).map((function(t,e){var n=t.src;return{image_id:e,img_resize_url:n,img_url:n}}))}},{key:"showImageFnHandler",value:function(t,title,e){var n=this.imageGalleryObj;n.bannerList=this.getOfficialImages(t),n.showGallery=!0,n.title=title,n.currentIndex=e||0}},{key:"sectionsChange",value:function(t){var e,n=this;(null===(e=t)||void 0===e?void 0:e.length)&&(t.forEach((function(section,t){var e;n.expandAll?n.active.push(t):(null===(e=section)||void 0===e?void 0:e.is_fold)||n.active.push(t)})),this.cloneActive=k()(this.active),this.handleChange(k()(this.active)))}},{key:"handleChange",value:function(t){this.$emit("change",t)}},{key:"trackInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=S({SectionType:t.section_name_en},e)||{};return"SectionCollapse?trg=manual&ext=".concat(encodeURIComponent(JSON.stringify(n)))}},{key:"handleItemClickEvent",value:function(t,e,n){var o,r,c=this,l=(null===(o=this.active)||void 0===o?void 0:o.length)<(null===(r=this.cloneActive)||void 0===r?void 0:r.length),d=t.target.closest(".klk-collapse-item-header");if(this.cloneActive=k()(this.active),d){var v=this.$refs.collapseItem[n],f={CollapseType:l?"Fold":"Unfold"};Object(P.nb)("data-spm-module",v.$el,this.trackInfo(e,f)),setTimeout((function(){c.$inhouse.track("action",v.$el)}),10)}}},{key:"calcAid",get:function(){var t;return(null===(t=this.packateDetail)||void 0===t?void 0:t.activityId)||0}},{key:"spm",get:function(){return"SeeItineraryDetails?oid=package_".concat(this.packateDetail.packageId)}}]),e}(y.Vue);D([y.State],x.prototype,"klook",void 0),D([Object(y.State)((function(t){return t.klook.platform}))],x.prototype,"platform",void 0),D([Object(y.Prop)()],x.prototype,"sections",void 0),D([Object(y.Prop)({default:"slideDetail"})],x.prototype,"type",void 0),D([Object(y.Prop)()],x.prototype,"size",void 0),D([Object(y.Prop)({default:!0})],x.prototype,"expandAll",void 0),D([Object(y.Prop)({default:function(){return{}}})],x.prototype,"packateDetail",void 0),D([Object(y.Prop)({default:!1})],x.prototype,"expandItinerarySection",void 0),D([Object(y.Prop)({default:!1})],x.prototype,"simplifiedPickUp",void 0),D([Object(y.Prop)()],x.prototype,"defaltValue",void 0),D([Object(y.Watch)("defaltValue")],x.prototype,"setValue",null),D([Object(y.Watch)("sections",{immediate:!0})],x.prototype,"sectionsChange",null);var T=x=D([Object(y.Component)({components:{ActivityMarkdown:_.a,PackageDetailContentImages:j.a,KlkExperienceItinerary:O.a,SeeMoreWithPop:w.a}})],x),I=(n(1886),n(1887),n(43)),component=Object(I.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-collapse",{staticClass:"package-detail-collapse",attrs:{size:"small"},on:{change:t.handleChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.sections,(function(e,o){return n("klk-collapse-item",{key:o,ref:"collapseItem",refInFor:!0,attrs:{id:e.id||o,title:e.title,name:o,"data-spm-module":t.trackInfo(e),"data-spm-virtual-item":"__virtual?trg=manual"},nativeOn:{click:function(n){return function(n){return t.handleItemClickEvent(n,e,o)}(n)}}},[n("div",{staticClass:"package-detail-collapse-content"},t._l(e.components,(function(component,e){return n("div",{key:e},["markdown"===component.type?n("ActivityMarkdown",{staticClass:"activity-package-detail-markdown",attrs:{content:component.data.render_obj}}):t._e(),t._v(" "),"image"===component.type?n("PackageDetailContentImages",{attrs:{images:component.data.images,type:t.type}}):t._e(),t._v(" "),"pick_up_meet_up"===component.type?n("KlkExperienceItinerary",{attrs:{"itinerary-data":t.initPickUp(component.data),size:t.size,"component-type":component.type}}):t._e(),t._v(" "),"itinerary"===component.type?n("SeeMoreWithPop",{attrs:{"observe-target":".exp-itinerary",spm:t.spm,"expand-itinerary-section":t.expandItinerarySection}},[n("KlkExperienceItinerary",{attrs:{"itinerary-data":component.data.itinerary,size:t.size,"component-type":component.type,simplified:t.simplifiedPickUp},on:{pickUpClick:function(e){return t.$emit("pickUpClick")}}})],1):t._e()],1)})),0)])})),1)}),[],!1,null,"7f36a202",null);e.a=component.exports},function(t,e,n){"use strict";n(28),n(20),n(27),n(47),n(37);var o=n(25),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(884),m=n(271),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).logoWidth=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getLogoProps",value:function(){var t=0;t=this.width?this.width:this.$el.getBoundingClientRect().width,"16:9"===this.ratio?this.logoWidth=3*t/16:this.logoWidth=t/3}},{key:"mounted",value:function(){this.getLogoProps()}},{key:"cardImgStyle",get:function(){var t=this||{},e=t.width,n=t.height;return{width:e?e+"px":"auto",height:n?n+"px":"auto"}}},{key:"replacedImgSrc",get:function(){var t=this.ratio.split(":"),e=Object(o.a)(t,2),n=e[0],r=e[1],c=Number(n)/Number(r),l=Math.floor(this.height*c),d=this.src,v="w_".concat(2*l,",h_").concat(2*this.height);return d.includes("c_fill")?Object(m.h)({url:d,width:2*l,height:2*this.height}):d.replace("image/upload/","image/upload/q_85/c_fill,".concat(v,"/"))}}]),e}(h.Vue);k([Object(h.Prop)()],O.prototype,"src",void 0),k([Object(h.Prop)()],O.prototype,"height",void 0),k([Object(h.Prop)()],O.prototype,"width",void 0),k([Object(h.Prop)({default:"1:1"})],O.prototype,"ratio",void 0);var _=O=k([Object(h.Component)({components:{Logo:y.a}})],O),j=(n(1140),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner-box"},[n("div",{staticClass:"banner-box-content"},[t._t("content")],2),t._v(" "),n("div",t._b({directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.replacedImgSrc,expression:"replacedImgSrc",arg:"background-image"}],staticClass:"banner-img",style:t.cardImgStyle,attrs:{ratio:t.ratio}},"div",t.$attrs,!1),[n("Logo",{attrs:{ratio:t.ratio,width:t.logoWidth}})],1)])}),[],!1,null,"2ba4dfb6",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.State)((function(t){return t.klook.platform}))],h.prototype,"platform",void 0),f([Object(v.Prop)({default:""})],h.prototype,"title",void 0),f([Object(v.Prop)()],h.prototype,"btnTitle",void 0);var y=h=f([v.Component],h),m=(n(2406),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"none-filter-result",class:[t.platform]},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:"https://res.klook.com/image/upload/q_80/v1652777018/web3.0/Empty_State_Experience_v2.png",expression:"'https://res.klook.com/image/upload/q_80/v1652777018/web3.0/Empty_State_Experience_v2.png'",arg:"background-image",modifiers:{container:!0}}],staticClass:"no-result-img"}),t._v(" "),n("p",{staticClass:"no-result-title"},[t._v(t._s(t.title||t.$t("76900")))]),t._v(" "),t.btnTitle?n("klk-button",{staticClass:"custom-btn-style",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("btnClick")}}},[t._v("\n    "+t._s(t.btnTitle)+"\n  ")]):t._e()],1)}),[],!1,null,"4e0f9aad",null);e.a=component.exports},,function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(85),y=n(16),m=n(899),k=n(885),O=n(883),_=n(1007),j=n(1025),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isCreditsLeft=!1,t.isSpaceForCredits=!0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"sellPriceChange",value:function(){this.priceChange()}},{key:"minSellPriceChange",value:function(){this.priceChange()}},{key:"promotionPriceChange",value:function(){this.priceChange()}},{key:"priceChange",value:function(){this.isSpaceForCredits=!0}},{key:"mounted",value:function(){this.priceChange()}},{key:"minSellPriceText",get:function(){var t="".concat(h.b[this.klook.currency]," ").concat(Object(y.y)(this.minSellPrice));return this.$t("activity_detail_from_price",[12,t])}},{key:"showCredits",get:function(){return this.isSpaceForCredits&&this.credits&&this.creditsVisible}},{key:"completeOptionViewPriceVisible",get:function(){return"-"===this.sellPrice&&!this.minSellPrice&&!this.isInPromotion}}]),e}(f.Vue);w([f.State],P.prototype,"klook",void 0),w([Object(f.Inject)({from:"fieldsConfig2section",default:function(){return m.a}})],P.prototype,"fieldsConfig2section",void 0),w([Object(f.Prop)()],P.prototype,"isSavingPoptip",void 0),w([Object(f.Prop)()],P.prototype,"vip",void 0),w([Object(f.Prop)()],P.prototype,"preTotalPrice",void 0),w([Object(f.Prop)()],P.prototype,"isInPromotion",void 0),w([Object(f.Prop)()],P.prototype,"promotionDiscountText",void 0),w([Object(f.Prop)()],P.prototype,"marketPrice",void 0),w([Object(f.Prop)()],P.prototype,"sellPrice",void 0),w([Object(f.Prop)()],P.prototype,"promotionPrice",void 0),w([Object(f.Prop)()],P.prototype,"originalPrice",void 0),w([Object(f.Prop)()],P.prototype,"minSellPrice",void 0),w([Object(f.Prop)()],P.prototype,"discount",void 0),w([Object(f.Prop)()],P.prototype,"credits",void 0),w([Object(f.Prop)({type:[Boolean,Number],default:!0})],P.prototype,"creditsVisible",void 0),w([Object(f.Prop)({default:!1})],P.prototype,"isOnlyOneLine",void 0),w([Object(f.Watch)("sellPrice",{immediate:!0})],P.prototype,"sellPriceChange",null),w([Object(f.Watch)("minSellPrice",{immediate:!0})],P.prototype,"minSellPriceChange",null),w([Object(f.Watch)("promotionPrice",{immediate:!0})],P.prototype,"promotionPriceChange",null);var C=P=w([Object(f.Component)({components:{ExpTagCredits:j.default,SavingPriceDetailsPoptip:_.a,ExpTagging:O.default,TotalSlot:k.a}})],P),S=(n(1224),n(43)),component=Object(S.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"settlement",staticClass:"activity-settlement",class:{"only-one-line":t.isOnlyOneLine}},[n("span",{staticClass:"activity-settlement_sell-price"},[t.minSellPrice?[n("span",{domProps:{innerHTML:t._s(t.minSellPriceText)}})]:[n("TotalSlot",t._g({attrs:{"price-data":t.preTotalPrice,"style-type":"flex-center flex-wrap"}},t.$listeners),[t.isSavingPoptip&&t.preTotalPrice&&!t.preTotalPrice.save_price&&t.preTotalPrice.price_summary?n("SavingPriceDetailsPoptip",{staticClass:"inline-block price-details ",attrs:{slot:"price-details-value","price-summary":t.preTotalPrice.price_summary,"hide-dashed":!0},slot:"price-details-value"},[t._v("\n          "+t._s(t.$t("activity.new.amount_details"))+"\n        ")]):t._e()],1)]],2),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.completeOptionViewPriceVisible,expression:"completeOptionViewPriceVisible"}],staticClass:"select-package-tips"},[t._v(t._s(t.$t("activity_page.complete_option_view_price")))]),t._v(" "),t.promotionDiscountText?n("div",{ref:"promotionDiscount",staticClass:"activity-settlement_promotion-discount"},[t._v("\n    "+t._s(t.promotionDiscountText)+"\n  ")]):t._e(),t._v(" "),n("div",{ref:"creditsWrap",staticClass:"activity-settlement_credits-wrap",class:{"is-left":t.isCreditsLeft&&!t.isOnlyOneLine}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fieldsConfig2section.activity_custom_config_hide_credit&&t.showCredits,expression:"!fieldsConfig2section.activity_custom_config_hide_credit && showCredits"}],ref:"credits",staticClass:"activity-settlement_credits"},[t.vip?[n("ExpTagging",{staticClass:"one-tag",attrs:{list:[t.vip]}})]:[n("ExpTagCredits",{attrs:{"label-bind":"desktop"===t.klook.platform?{size:"normal"}:{}}},[t._v(t._s(t.$t("activity.new.credits",{account:Math.floor(t.credits)})))])]],2)])])}),[],!1,null,"7fb94d21",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(985),h=n(920),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);y([v.State],m.prototype,"klook",void 0),y([Object(v.Prop)({default:""})],m.prototype,"title",void 0),y([Object(v.Prop)({default:""})],m.prototype,"packageSubName",void 0),y([Object(v.Prop)({default:""})],m.prototype,"activityName",void 0),y([Object(v.Prop)({type:Boolean,default:!1})],m.prototype,"isPassActivity",void 0),y([Object(v.Prop)({type:Boolean,default:!1})],m.prototype,"hideEntry",void 0);var k=m=y([Object(v.Component)({components:{ActivityBookingStartDate:h.a,MobilePackageDetailButton:f.a}})],m),O=(n(1293),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"package-name-box"},[n("div",[n("h3",[t.isPassActivity?n("span",[t._v(t._s(t.activityName))]):n("span",[t._v(t._s(t.title))])])]),t._v(" "),t.hideEntry?t._e():n("div",{staticClass:"package-detail-entry"},[t._t("default",[n("MobilePackageDetailButton",{staticClass:"package-detail-entry-button",attrs:{"custom-type":"desktop"}})])],2)]),t._v(" "),t.isPassActivity?n("div",{staticClass:"package-name"},[Array.isArray(t.title)?t._l(t.title,(function(e,o){return n("span",{key:o,staticClass:"attr-name"},[n("span",[t._v(t._s(e))])])})):n("span",[t._v(t._s(t.title))])],2):n("div",{staticClass:"pass-time"},[t._v(t._s(t.packageSubName))])])}),[],!1,null,"467c40c0",null);e.a=component.exports},function(t,e,n){"use strict";n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=n(211),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"recently",get:function(){return["today","tomorrow"].includes(this.date)}},{key:"date",get:function(){if(!this.startTime)return"soldOut";var t=y()(this.startTime).format("YYYY-MM-DD");return t===y()().format("YYYY-MM-DD")?"today":t===y()().add(1,"day").format("YYYY-MM-DD")?"tomorrow":Object(m.e)(t,this.$t.bind(this),this.klook.language)}}]),e}(f.Vue);k([Object(f.Prop)()],O.prototype,"startTime",void 0),k([f.State],O.prototype,"klook",void 0);var _=O=k([f.Component],O),j=n(43),component=Object(j.a)(_,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["booking-start-date",{recently:this.recently}]},[this._t("default",null,{date:this.date})],2)}),[],!1,null,null,null);e.a=component.exports},,function(t,e,n){},function(t,e,n){"use strict";var o=n(902);n.n(o).a},function(t,e,n){"use strict";var o=n(903);n.n(o).a},function(t,e,n){"use strict";var o=n(904);n.n(o).a},function(t,e,n){"use strict";var o=n(905);n.n(o).a},,function(t,e,n){},,,function(t,e,n){"use strict";var o=n(906);n.n(o).a},,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){"use strict";var o=n(907);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(22),n(14),n(11),n(8),n(12),n(0)),y=n(131),m=n(892),k=n(900);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getBindObj",value:function(t){var e=_({},this.$attrs);return e.isBigCard=!!this.isBigCard,this.getDataNosnippet&&t.activity_id&&(e["data-nosnippet"]=this.getDataNosnippet(t.activity_id)),e}},{key:"getSpmExt",value:function(t){var e,n,o=t||{},r=o.brand_info,c=void 0===r?{}:r,l=o.product_tags,d=void 0===l?{}:l,v={};return!Object(y.isEmpty)(c)&&(null===(n=null===(e=c)||void 0===e?void 0:e.tags)||void 0===n?void 0:n.length)&&(v={campaign_tags:c.tags}),Object(y.isEmpty)(d)||(v=_({},v,{},d)),Object(k.a)(v),v}},{key:"defaultPerView",get:function(){return this.isBigCard?"mobile"===this.klook.platform?1:2:"mobile"===this.klook.platform?2:3}},{key:"currentPerView",get:function(){return this.perView||this.defaultPerView}}]),e}(f.Vue);j([f.State],w.prototype,"klook",void 0),j([Object(f.Prop)({default:function(){return[]}})],w.prototype,"data",void 0),j([Object(f.Prop)({default:0})],w.prototype,"perView",void 0),j([Object(f.Prop)()],w.prototype,"logoWidth",void 0),j([Object(f.Prop)({default:!1})],w.prototype,"isBigCard",void 0),j([Object(f.Prop)({default:null})],w.prototype,"getDataNosnippet",void 0);var P=w=j([Object(f.Component)({components:{RwdActivityCard:m.default}})],w),C=(n(1986),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"base-cards-list",class:[t.klook.platform,{"perview-1":1===t.currentPerView},{"perview-2":2===t.currentPerView},{"perview-3":3===t.currentPerView},{"perview-4":4===t.currentPerView}]},t._l(t.data,(function(e,o){return n("RwdActivityCard",t._b({directives:[{name:"track",rawName:"v-track:module:Activity_LIST",value:{oid:"activity_"+e.activity_id,idx:o,len:t.data.length,inject:"section",ext:t.getSpmExt(e)},expression:"{\n      oid: `activity_${item.activity_id}`,\n      idx: index,\n      len: data.length,\n      inject: 'section',\n      ext: getSpmExt(item),\n    }",arg:"module:Activity_LIST"}],key:e.activity_id+"-"+o,staticClass:"base-cards-list-item",attrs:{"card-data":e,"logo-width":t.logoWidth}},"RwdActivityCard",t.getBindObj(e),!1))})),1)}),[],!1,null,"fe506564",null).exports,D=n(901);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).swiperOption={freeMode:!0,spaceBetween:20,width:148,slidesOffsetAfter:148-document.body.offsetWidth+32},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getBindObj",value:function(t){var e=T({},this.$attrs);return e.isBigCard=!!this.isBigCard,this.getDataNosnippet&&t.activity_id&&(e["data-nosnippet"]=this.getDataNosnippet(t.activity_id)),e}},{key:"getSpmExt",value:function(t){var e,n,o=t||{},r=o.brand_info,c=void 0===r?{}:r,l=o.product_tags,d=void 0===l?{}:l,v={};return!Object(y.isEmpty)(c)&&(null===(n=null===(e=c)||void 0===e?void 0:e.tags)||void 0===n?void 0:n.length)&&(v={campaign_tags:c.tags}),Object(y.isEmpty)(d)||(v=T({},v,{},d)),Object(k.a)(v),v}},{key:"defaultPerView",get:function(){return this.isBigCard?"mobile"===this.klook.platform?1:2:"mobile"===this.klook.platform?2:3}},{key:"currentPerView",get:function(){return this.perView||this.defaultPerView}}]),e}(f.Vue);I([f.State],R.prototype,"klook",void 0),I([Object(f.Prop)()],R.prototype,"swiperBind",void 0),I([Object(f.Prop)({default:function(){return[]}})],R.prototype,"data",void 0),I([Object(f.Prop)({default:0})],R.prototype,"perView",void 0),I([Object(f.Prop)()],R.prototype,"logoWidth",void 0),I([Object(f.Prop)({default:!1})],R.prototype,"isBigCard",void 0),I([Object(f.Prop)({default:null})],R.prototype,"getDataNosnippet",void 0);var $=R=I([Object(f.Component)({components:{RwdSwiper:D.default,RwdActivityCard:m.default}})],R),L=(n(1987),Object(C.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RwdSwiper",{staticClass:"base-cards-swiper",class:[t.klook.platform,{"perview-2":2===t.currentPerView},{"perview-3":3===t.currentPerView},{"perview-4":4===t.currentPerView}],attrs:{"swiper-bind":t.swiperBind,"per-view":t.currentPerView,data:t.data,"is-big-card":t.isBigCard},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item,r=e.index;return[t._t("card-item-slot",[n("RwdActivityCard",t._b({directives:[{name:"track",rawName:"v-track:module:Activity_LIST",value:{oid:"activity_"+o.activity_id,idx:r,len:t.data.length,inject:"section",ext:t.getSpmExt(o)},expression:"{\n          oid: `activity_${item.activity_id}`,\n          idx: index,\n          len: data.length,\n          inject: 'section',\n          ext: getSpmExt(item),\n        }",arg:"module:Activity_LIST"}],staticClass:"base-recommend-card",attrs:{"card-data":o,"logo-width":t.logoWidth}},"RwdActivityCard",t.getBindObj(o),!1))],{item:o,index:r})]}}],null,!0)})}),[],!1,null,"46e1507a",null).exports),A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"customRatio",get:function(){var t;return this.ratio||(null===(t=this.data)||void 0===t?void 0:t.banner_scale)}},{key:"cardType",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.card_type)||-1}},{key:"cardData",get:function(){var t;return(Array.isArray(this.data)?this.data:null===(t=this.data)||void 0===t?void 0:t.items)||[]}},{key:"isBigCard",get:function(){return[3,4].includes(this.cardType)}},{key:"useNewCard",get:function(){return this.cardType>0}},{key:"component",get:function(){return[1,3].includes(this.cardType)?"BaseCardsList":"BaseCardsSwiper"}}]),e}(f.Vue);A([Object(f.Prop)({default:null})],E.prototype,"data",void 0),A([f.State],E.prototype,"klook",void 0),A([Object(f.Prop)()],E.prototype,"logoWidth",void 0),A([Object(f.Prop)()],E.prototype,"ratio",void 0);var M=E=A([Object(f.Component)({components:{BaseCardsList:S,BaseCardsSwiper:L}})],E),B=Object(C.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cardData.length>0?n(t.component,t._g(t._b({tag:"component",attrs:{"is-big-card":t.isBigCard,"use-new-card":t.useNewCard,ratio:t.customRatio,"logo-width":t.logoWidth,data:t.cardData},scopedSlots:t._u([{key:"card-item-slot",fn:function(e){return[t._t("card-item-slot",null,null,e)]}}],null,!0)},"component",t.$attrs,!1),t.$listeners)):t._e()}),[],!1,null,null,null);e.a=B.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(70),n(47),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(10),m=n.n(y),k=n(957),O=n(1424),_=n(882),j=n(883),w=n(1187),P=n(16),C=n(881);function S(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=Object(h.namespace)("traveller/activity"),I=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).counterValue=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"unitCountChange",value:function(t){this.counterValue=t}},{key:"bindIHTrack",value:function(){return C.a.apply(void 0,arguments)}},{key:"getCalcTags2sku",value:function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[]}},{key:"disabledClick",value:function(t){var e;this.disabled||"increase"!==t?_.a.$emit("checkSelectDateAndTime2bus",{message:this.customToastMessage}):this.alert(this.$t("activity.error.price_max_v2",[null===(e=this.unit)||void 0===e?void 0:e.maxCount]))}},{key:"hackIncrease",value:function(){var t=this;this.counterValue+=1,this.$nextTick((function(){t.counterValue-=1,t.handlePlus()}))}},{key:"hackDecrease",value:function(){var t=this;this.counterValue-=1,this.$nextTick((function(){t.counterValue+=1,t.handleMinus()}))}},{key:"handlePlus",value:function(){var t,e;if(!this.disabled){var n=this.unit,o=this.inventories,r=this.currentSelectedPackage.max_pax,c=this.unit,l=c.priceMaxPax,d=c.maxCount,v=c.inventoryId,f=Math.min(d,Number(o[v]));if(this.preview)if(!((null===(t=this.unitsMap)||void 0===t?void 0:t[this.arrangementId])||(null===(e=this.unitList)||void 0===e?void 0:e.length)))return this.alert("Cannot add units in unpublished status");this.totalUnitCount>=Number(this.currentSelectedPackage.max_pax)?this.alert(this.$t("activity.v2.error.package_max",[r])):n.count>=n.priceMaxPax?this.alert(this.$t("activity.error.price_max_v2",[n.maxCount])):n.count>=f||0===n.count&&n.count+n.priceMinPax>f?this.alert(this.$t("activity.v2.unit_out_of_inventory")):n.count<n.priceMaxPax?this.changeUnitCount("add",n.priceId):this.alert(this.$t("activity.error.price_max_v2",[l]))}}},{key:"handleMinus",value:function(){var t=this.unit;if(!this.disabled&&0!==t.count){this.changeUnitCount("minus",t.priceId);var e=t.priceMinPax;t.required&&t.count===e&&this.alert(this.$t("activity.error.required_buy_min",[e]))}}},{key:"hackChangeUnitCount",value:function(t,e){var n=this;this.unit.count+="add"===t?1:-1,this.$nextTick((function(){n.unit.count+="add"===t?-1:1,n.changeUnitCount(t,e)}))}},{key:"changeUnitCount",value:function(t,e){this.$emit("changeUnitCount",{priceId:e,type:t}),this.inhouseTrack("add"===t?"Add":"Cut")}},{key:"alert",value:function(text){this.$emit("alert",text)}},{key:"inhouseTrack",value:function(t){var e=this;this.unitCounterRef&&(this.$inhouse.updateBinding(this.unitCounterRef.$el,{oid:"sku_".concat(this.unit.skuId),ext:JSON.stringify({Type:t})}),setTimeout((function(){e.$inhouse.track("action",e.unitCounterRef.$el)}),20))}},{key:"maxUnit",get:function(){var t,e,n,o=(null===(e=null===(t=this.pkgsAddonSchedulesAndUnits[this.packageId])||void 0===t?void 0:t.result)||void 0===e?void 0:e.units)||[],r=this.unit||{},c=r.skuId,l=r.priceMaxPax;if(null===(n=o)||void 0===n?void 0:n.length){var d=o.find((function(t){return t.sku_id===c}));if(d&&!m()(d)){var v=d||{},f=v.is_limited,h=void 0!==f&&f,y=v.limited_count,k=void 0===y?0:y;h&&k>0&&(l=k)}}return this.minStock?Math.min(this.minStock,l):l}},{key:"calcTrackInfo",get:function(){var t={"data-spm-item":"SelectSkuQuantity?trg=manual"};return this.isTrackModule&&(t={"data-spm-module":"SelectSkuQuantity","data-spm-virtual-item":"__virtual?trg=manual"}),t}},{key:"calcPreUnitPrice",get:function(){var t,e,n=this,o=this.pkgsPrePriceApiData,r=this.packageId,c=this.pkgPreData,l=this.currentSelectedPackage.has_discount;if("addon-pre-type"===this.customPreType){var d=c;return function(t){return Object(w.getPreUnitPriceData)(D({},t,{has_discount:l}),d)}}var v="unfold-pre-type"===this.customPreType?null===(t=o[r])||void 0===t?void 0:t.result:null===(e=this.preSettlementApiData)||void 0===e?void 0:e.result;return function(t){var e=t.marketPrice||"",o=e&&Number(t.sellingPrice)<Number(e);return Object(w.getPreUnitPriceData)(D({},t,{has_discount:l}),v,{oldPriceShow:{market_price_text:o?Object(P.v)(n.klook.currency,e):"",original_price_text:Object(P.v)(n.klook.currency,t.sellingPrice)}})}}},{key:"arrangementId",get:function(){var t;return null===(t=null===this||void 0===this?void 0:this.selectedTime)||void 0===t?void 0:t.arrangementId}}]),e}(h.Vue);x([T.State],I.prototype,"preSettlementApiData",void 0),x([T.State],I.prototype,"pkgsPrePriceApiData",void 0),x([T.State],I.prototype,"pkgsAddonSchedulesAndUnits",void 0),x([h.State],I.prototype,"klook",void 0),x([Object(h.Prop)({default:0})],I.prototype,"minStock",void 0),x([Object(h.Prop)()],I.prototype,"pkgPreData",void 0),x([Object(h.Prop)()],I.prototype,"customPreType",void 0),x([Object(h.Prop)({type:Boolean,default:!1})],I.prototype,"isTrackModule",void 0),x([Object(h.Prop)()],I.prototype,"packageId",void 0),x([Object(h.Prop)()],I.prototype,"styleType",void 0),x([Object(h.Prop)()],I.prototype,"selectedTime",void 0),x([Object(h.Prop)()],I.prototype,"unitsMap",void 0),x([Object(h.Prop)()],I.prototype,"unitList",void 0),x([Object(h.Prop)()],I.prototype,"preview",void 0),x([Object(h.Prop)()],I.prototype,"currentSelectedPackage",void 0),x([Object(h.Prop)()],I.prototype,"inventories",void 0),x([Object(h.Prop)()],I.prototype,"totalUnitCount",void 0),x([Object(h.Prop)({default:!0})],I.prototype,"priceVisible",void 0),x([Object(h.Prop)({default:!1})],I.prototype,"disabled",void 0),x([Object(h.Prop)({default:""})],I.prototype,"customToastMessage",void 0),x([Object(h.Prop)({default:function(){return{}}})],I.prototype,"unit",void 0),x([Object(h.Ref)()],I.prototype,"unitCounterRef",void 0),x([Object(h.Watch)("unit.count",{immediate:!0})],I.prototype,"unitCountChange",null);var R=I=x([Object(h.Component)({components:{MobilePriceSlot:w.default,ExpTagging:j.default,CardHeader:k.a,UnitPrice:O.a}})],I),$=(n(1581),n(43)),component=Object($.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-unit"},[n("div",{staticClass:"booking-unit-content"},[n("div",{staticClass:"booking-unit-left",class:{"sold-out-color":t.unit.isSoldOut}},[n("span",{staticClass:"price-name",class:t.styleType},[t._v(t._s(t.unit.priceName))]),t._v(" "),t.unit.requireBuy?n("span",{staticClass:"booking-unit-left-tips"},[t._v("\n        "+t._s(t.$t("wifi_sim.must_buy"))+"\n      ")]):t._e(),t._v(" "),t.unit.requireMinPax?n("span",{staticClass:"booking-unit-left-tips"},[t._v("\n        "+t._s(t.$t("activity.error.required_buy_min",[t.unit.priceMinPax]))+"\n      ")]):t._e()]),t._v(" "),n("div",{staticClass:"booking-unit-right"},[t.priceVisible&&t.arrangementId&&!t.unit.isDefault&&!t.unit.isSoldOut?n("UnitPrice",{attrs:{unit:t.unit}},[n("MobilePriceSlot",{class:[t.styleType,t.customPreType],attrs:{slot:"price-slot","price-data":t.calcPreUnitPrice(t.unit),"style-type":"up-right"},slot:"price-slot"})],1):t._e(),t._v(" "),t.unit.isSoldOut?n("div",{staticClass:"sold-out-txt"},[t._v("\n        "+t._s(t.$t("global.sold_out"))+"\n      ")]):n("klk-counter",t._b({ref:"unitCounterRef",staticClass:"booking-unit-counter",attrs:{readonly:"",value:t.counterValue,disabled:t.disabled,max:t.maxUnit,size:"desktop-type"===t.styleType?void 0:"small"},on:{increase:t.hackIncrease,decrease:t.hackDecrease,"disabled-click":t.disabledClick}},"klk-counter",t.calcTrackInfo,!1))],1)]),t._v(" "),n("ExpTagging",{staticClass:"tagging-sku-tag-style ta-right",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.getCalcTags2sku(t.unit),track:{spm:"SKU_Tag"},line:1}}),t._v(" "),t.unit.srvSkuInfo&&t.unit.srvSkuInfo.tips?n("div",{staticClass:"srv-tip"},[t._v("\n    "+t._s(t.unit.srvSkuInfo.tips)+"\n  ")]):t._e()],1)}),[],!1,null,"7eed694c",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.text="",t.timeout=3e3,t.timer=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"open",value:function(text){this.$toast(text)}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"packageId",void 0);var m=y=h([f.Component],y),k=(n(1367),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("klk-slide-top-transition",[this.visible?e("div",{staticClass:"header-alert"},[e("SvgIcon",{staticClass:"header-alert-icon",attrs:{name:"common#icon_feedback_warning_fill_s",size:"20"}}),this._v(" "),e("span",{attrs:{"data-spm-module":"WrongMessage?oid=package_"+this.packageId}},[this._v("\n      "+this._s(this.text)+"\n    ")])],1):this._e()])}),[],!1,null,"1f2ec269",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:""})],h.prototype,"desc",void 0),f([Object(v.Prop)({default:""})],h.prototype,"title",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"visible",void 0);var y=h=f([v.Component],h),m=(n(1361),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-bottom-sheet",{staticClass:"custom-legends-pop",attrs:{visible:t.visible,title:t.title,transfer:"","show-close":""},on:{close:function(e){return t.$emit("update:visible",!1)}}},[n("div",{staticClass:"custom-legends-pop_content"},[t._t("default",[n("p",[t._v(t._s(t.desc))])],{desc:t.desc})],2)])}),[],!1,null,"8c21d980",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"target",get:function(){return"desktop"===this.klook.platform?"_blank":"_self"}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"title",void 0),h([Object(f.Prop)()],y.prototype,"href",void 0),h([Object(f.Prop)({type:Boolean,default:!0})],y.prototype,"isLargeCard",void 0);var m=y=h([f.Component],y),k=(n(1868),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"activity-card-title",class:[this.klook.platform,{"large-card":this.isLargeCard}]},[e("a",{attrs:{href:this.href,target:this.target},on:{click:function(t){t.stopPropagation()}}},[this._v(this._s(this.title))])])}),[],!1,null,"1df70ddd",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(909);n.n(o).a},,,function(t,e,n){"use strict";var o=n(910);n.n(o).a},function(t,e,n){"use strict";function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"smooth";try{var r=t.scrollLeft,c=t.scrollWidth,l=t.getBoundingClientRect(),d=l.width,v=l.left,f=e.getBoundingClientRect(),h=f.width,y=f.left-v+h/2-d/2+r+n;t.scrollTo({left:Math.min(Math.max(0,y),c-d),behavior:o})}catch(t){console.error("scrollToCenterHorizontal",t)}}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(23);var o=n(4),r=n(0),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(3);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=Object(y.namespace)("traveller/activity"),w=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).unitsState="",t.date="",t.schedulesState="fetching",t.isSchedulesNoData=!1,t.schedulesUnitsState="fetching",t.schedules=[],t.schedule=null,t.packageSchedulesUnitsMap={},t}var n,r;return Object(f.a)(e,t),Object(l.a)(e,[{key:"dateChange",value:function(t,e){this.schedule=this.getStocks(t,e)}},{key:"getStocks",value:function(t,e){return O({},e||{},{},this.schedules.filter((function(e){return e.date===t}))[0])}},{key:"updateSchedulesUnitsState",value:function(t){this.schedulesUnitsState=t,this.$emit("updateSchedulesUnitsState",t)}},{key:"getPackageSchedulesUnits",value:(r=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(this.updateSchedulesUnitsState("fetching"),c="1"===(null===(n=this.$route.query)||void 0===n?void 0:n.translation),l="".concat(e,"-").concat(c),!(d=this.packageSchedulesUnitsMap[l])){t.next=9;break}return this.updateSchedulesUnitsState("success"),t.abrupt("return",d);case 9:return this.updateSchedulesUnitsState("fetching"),v=null,t.prev=11,t.next=14,this.$axios.$get(m.a.getPackagePriceSchedulesAndUnits,{params:{translation:c,package_id:e,preview:this.preview}});case 14:v=t.sent,t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(11),this.updateSchedulesUnitsState("failure"),t.abrupt("return");case 21:if(f=v.result,!((null===(o=v)||void 0===o?void 0:o.success)&&f)){t.next=28;break}return h=f.schedules,y=O({},f,{schedules:null===(r=h)||void 0===r?void 0:r.map((function(t){var e=t.time_slots.reduce((function(t,e){return t+e.stock}),0);return O({},t,{stock:e,soldout:!e})}))}),this.packageSchedulesUnitsMap[l]=y,this.updateSchedulesUnitsState("success"),t.abrupt("return",y);case 28:this.updateSchedulesUnitsState("failure");case 29:case"end":return t.stop()}}),t,this,[[11,17]])}))),function(t){return r.apply(this,arguments)})},{key:"getSchedules",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(o=null===(n=null===(e=this.activityDetail)||void 0===e?void 0:e.basic_data)||void 0===n?void 0:n.is_line_page)||!o){t.next=3;break}return t.abrupt("return");case 3:return this.schedulesState="fetching",this.isSchedulesNoData=!1,t.next=7,this.$axios.$get(m.a.activityPriceSchedules,{params:{activity_id:this.activityId,preview:this.preview}});case 7:if(r=t.sent,c=r.success,l=r.result,!c||!l){t.next=19;break}if(!(d=l.schedules)){t.next=18;break}return this.schedules=d.map((function(t){var e,n;return O({},t,{soldout:!(null===(n=(e=t.stocks).reduce)||void 0===n?void 0:n.call(e,(function(t,e){return t+e.stock}),0))})})),this.schedulesState="success",t.abrupt("return");case 18:this.isSchedulesNoData=!0;case 19:this.schedulesState="failure";case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(y.Vue);_([j.State],w.prototype,"activityDetail",void 0),_([Object(y.Prop)({default:0})],w.prototype,"preview",void 0),w=_([y.Component],w),e.a=w},,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(70);var o=n(0),r=(n(20),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(10),m=n.n(y),k=n(71),O=n.n(k),_=(n(27),n(45),n(99),n(13)),j=(n(273),n(213)),w=n.n(j),P=n(1036),C=n(1030),S=n(881);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},I=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.active="itinerary",t.currentExpands=[],t.currentExpandIndex=-1,t.animate="itinerary",t.onScroll=w()(t.handleScroll,350),t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"visibleChange",value:function(t){t&&this.$inhouse.track("pageview","#page-view-spm-wrap",{force:!0})}},{key:"handleBeforeEnter",value:function(t){t.style.position="absolute",t.style.top="0"}},{key:"handleAfterEnter",value:function(t){t.style.position="relative"}},{key:"handleBeforeLeave",value:function(t){t.style.position="relative"}},{key:"handleAfterLeave",value:function(t){t.style.position="absolute",t.style.top="0"}},{key:"getListTrack",value:function(data){var t=JSON.stringify({SectionType:data.section_name_en||""});return this.bindIHTrack({type:"module",spm:"PackageDetailSection",query:{oid:"package_".concat(this.packageId),ext:encodeURIComponent(t)}})}},{key:"getTabsTrack",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=JSON.stringify({TabType:t}),r=this.itinerarySections.length?2:1;return this.bindIHTrack({type:"module",spm:"Tab_LIST",exposure:n,query:{ext:o,idx:e,len:r}})}},{key:"bindIHTrack",value:function(){return S.a.apply(void 0,arguments)}},{key:"grounpTitleClick",value:function(data){var t=data.group_key,e=data.group_id;["itinerary_return","itinerary_departure"].includes(t)&&(this.active="details",this.currentExpandIndex=this.detailSections.findIndex((function(t){return"pick_up_meet_up"===t.section_type})),this.setCollapseActive(),this.handleScrollTo("#group_".concat(e)))}},{key:"setAnimate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.animate=t}},{key:"showDetail",value:function(t,e){this.visible=!this.visible,this.setAnimate(),this.currentExpandIndex=this.detailSections.findIndex((function(e){return e.itemKey===t})),this.active="itinerary"===e?"itinerary":"details",this.setCollapseActive(),this.handleScrollTo()}},{key:"setCollapseActive",value:function(){this.PackageDetailCollapse.active=Object(_.a)(new Set([].concat(Object(_.a)(this.currentExpands),[this.currentExpandIndex])))}},{key:"handleExpand",value:function(){var t=this.currentExpandIndex,e=this.currentExpands,n=[];n=e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(_.a)(e),[t]),this.PackageDetailCollapse.active=n,this.currentExpands=n,this.handleScrollTo()}},{key:"handleScrollTo",value:function(){var t=this,element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;setTimeout((function(){var e,n,o=t.currentExpandIndex,main=t.$refs.details,r=0;if(element?(n=null===(e=document.querySelector(element))||void 0===e?void 0:e.parentNode,r=16):(n=document.querySelector("#collapse-item-id_".concat(o)),r=0),n){var c=n.offsetTop-r;main.scrollTo({top:c,behavior:"smooth"})}}),400)}},{key:"handleChange",value:function(t){this.currentExpands=t}},{key:"handleScroll",value:function(){if(this.isDetails){for(var main=this.$refs.details,t=this.detailSections,e=-1,i=0;i<t.length;i++){var n=document.querySelector("#collapse-item-id_".concat(i)),o=0===i?0:48;n&&n.offsetTop-main.scrollTop-o<main.offsetTop&&(e=i)}this.currentExpandIndex=e}}},{key:"showItineraryDetail",value:function(){this.visible=!0}},{key:"mounted",value:function(){var t=this.itinerarySections.length>0;this.active=t?"itinerary":"details"}},{key:"beforeDestory",value:function(){}},{key:"tabsList",get:function(){return[{name:"itinerary",label:this.$t("98295"),track:"Itinerary"},{name:"details",label:this.$t("98296"),track:"MoreDetails"}]}},{key:"packageId",get:function(){var t,e;return null!=(e=null===(t=this.packageDetail)||void 0===t?void 0:t.packageId)?e:""}},{key:"pageSpm",get:function(){return"TNA_PackageDetails?trg=manual&oid=package_".concat(this.packageId)}},{key:"isDetails",get:function(){return"details"===this.active}},{key:"currentExpand",get:function(){var t=this.currentExpandIndex;return this.detailSections[t]||{}}},{key:"itinerarySections",get:function(){return this.sectionsList.filter((function(t){return"itinerary"===t.section_type}))}},{key:"detailSections",get:function(){return this.sectionsList.filter((function(t){return"itinerary"!==t.section_type})).map((function(t,e){return x({},t,{id:"collapse-item-id_".concat(e)})}))}},{key:"currentIcon",get:function(){var t=this.currentExpandIndex;return this.currentExpands.includes(t)?"icon_navigation_chevron_up":"icon_navigation_chevron_down"}},{key:"renderList",get:function(){var t=["whats_included","itinerary"];return this.sectionsList.filter((function(e){return!t.includes(e.section_type)}))}},{key:"sectionsList",get:function(){return this.sections.map((function(t,e){return x({},t,{itemKey:e})}))}}]),e}(h.Vue);T([Object(h.Prop)()],I.prototype,"sections",void 0),T([Object(h.Prop)()],I.prototype,"size",void 0),T([Object(h.Prop)()],I.prototype,"packageDetail",void 0),T([Object(h.Prop)({default:!0})],I.prototype,"expandAll",void 0),T([Object(h.Prop)({default:!0})],I.prototype,"expandItinerarySection",void 0),T([Object(h.Ref)()],I.prototype,"PackageDetailCollapse",void 0),T([Object(h.Watch)("visible")],I.prototype,"visibleChange",null);var R=I=T([Object(h.Component)({components:{PackageDetailCollapse:P.a,KlkExperienceItinerary:C.a}})],I),$=(n(1564),n(43)),L=Object($.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-wrap"},[t._l(t.renderList,(function(e,o){return n("div",t._b({key:o,staticClass:"list-item",on:{click:function(n){return t.showDetail(e.itemKey,e.section_type)}}},"div",t.getListTrack(e),!1),[n("div",{staticClass:"list-item-title"},[t._v(t._s(e.title))]),t._v(" "),n("klk-icon",{staticClass:"list-item-icon",attrs:{type:"icon_navigation_chevron_right_xs",size:"16"}})],1)})),t._v(" "),n("klk-bottom-sheet",{staticClass:"itinerary-bottom-sheet",attrs:{id:"page-view-spm-wrap",visible:t.visible,title:t.$t("1603"),"show-close":"",transfer:"","header-divider":"","can-pull-close":!0,"z-index":2010,height:"90vh","data-spm-page":t.pageSpm},on:{"update:visible":function(e){t.visible=e}}},[t.itinerarySections.length?n("klk-tabs",{on:{change:t.setAnimate},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabsList,(function(e,o){return n("klk-tab-pane",t._b({key:o,attrs:{label:e.label,width:"50%","max-width":"50%",name:e.name}},"klk-tab-pane",t.getTabsTrack(e.track,o,!1),!1))})),1):t._e(),t._v(" "),n("div",{staticClass:"content-wrapper",on:{touchmove:function(t){t.stopPropagation()}}},[t.itinerarySections.length?t._l(t.tabsList,(function(e,o){return n("div",t._b({key:o},"div",t.getTabsTrack(e.track,o),!1))})):t._e(),t._v(" "),n("transition",{attrs:{name:"swiper-fade-"+t.animate},on:{"before-enter":t.handleBeforeEnter,"after-enter":t.handleAfterEnter,"before-leave":t.handleBeforeLeave,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isDetails,expression:"isDetails"}],key:"details",ref:"details",staticClass:"tabs-content details"},[n("PackageDetailCollapse",{ref:"PackageDetailCollapse",staticClass:"package-detail-list-collapase",attrs:{sections:t.detailSections,"expand-all":t.expandAll,"expand-itinerary-section":t.expandItinerarySection,"packate-detail":t.packageDetail},on:{change:t.handleChange}})],1)]),t._v(" "),n("transition",{attrs:{name:"swiper-fade-"+t.animate},on:{"before-enter":t.handleBeforeEnter,"after-enter":t.handleAfterEnter,"before-leave":t.handleBeforeLeave,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDetails,expression:"!isDetails"}],key:"itinerary",staticClass:"tabs-content itinerary"},t._l(t.itinerarySections,(function(e,o){return n("div",{key:o},[t._l(e.components,(function(component,e){return[n("KlkExperienceItinerary",{key:e,attrs:{"itinerary-data":component.data.itinerary,size:t.size},on:{grounpTitleClick:t.grounpTitleClick}})]}))],2)})),0)])],2)],1)],2)}),[],!1,null,"6c58725a",null).exports,A=n(1418),E=n(953),M=n(16),B=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).maxLength=6,t.formatContent=[],t.isFold=!0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"created",value:function(){this.formatContent=this.showSeeMoreBtn?this.contents.slice(0,this.maxLength):this.contents}},{key:"handleClickEvent",value:function(){var t=this.contents,e=this.maxLength;this.formatContent=this.isFold?t:t.slice(0,e),this.isFold=!this.isFold,this.updateSpm()}},{key:"updateSpm",value:function(){var t=this,e=this.$el.querySelector(".see-more-wrapper_footer");e&&(Object(M.nb)("data-spm-module",e,this.trackInfo),setTimeout((function(){t.$inhouse.track("action",e)}),10))}},{key:"trackInfo",get:function(){return"".concat(this.spm,"&trg=manual&ext=").concat(JSON.stringify({ClickType:this.isFold?"ShowLess":"ShowMore"}))}},{key:"valid",get:function(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.length)}},{key:"showSeeMoreBtn",get:function(){var t;return this.valid&&(null===(t=this.contents)||void 0===t?void 0:t.length)>this.maxLength}},{key:"viewMoreText",get:function(){var t=this.isFold?"city_page_view_more":"collapse_all";return this.$t(t)}}]),e}(h.Vue);B([Object(h.Prop)()],N.prototype,"contents",void 0),B([Object(h.Prop)({default:function(){return{}}})],N.prototype,"spm",void 0);var V=N=B([h.Component],N),F=(n(1571),Object($.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"see-more-wrapper"},[n("div",{staticClass:"see-more-wrapper_content"},t._l(t.formatContent,(function(e,o){return n("p",{key:o,staticClass:"text-box"},[n("span",{staticClass:"text"},[t._v(t._s(e))])])})),0),t._v(" "),t.showSeeMoreBtn?n("div",{staticClass:"see-more-wrapper_footer",attrs:{"data-spm-module":t.trackInfo,"data-spm-virtual-item":"__virtual?trg=manual"},on:{click:function(e){return e.stopPropagation(),t.handleClickEvent(e)}}},[n("span",[t._v(t._s(t.viewMoreText))])]):t._e()]):t._e()}),[],!1,null,"53c9b6fe",null).exports),W=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},H=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"valid",get:function(){return"mobile"===this.platform&&this.data}},{key:"components",get:function(){var t,e,n,o;return this.data?null===(o=null===(n=null===(e=null===(t=this.data)||void 0===t?void 0:t.components)||void 0===e?void 0:e[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.components:[]}},{key:"spm",get:function(){return"SeeMorePOI?oid=package_".concat(this.packageDetail.packageId)}}]),e}(h.Vue);W([Object(h.Prop)()],H.prototype,"data",void 0),W([Object(h.Prop)()],H.prototype,"packageDetail",void 0),W([Object(h.State)((function(t){return t.klook.platform}))],H.prototype,"platform",void 0);var U=H=W([Object(h.Component)({components:{SeeMore:F}})],H),z=(n(1572),Object($.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"itineray-reminder-wrapper"},[n("div",{staticClass:"itineray-reminder-content"},t._l(t.components,(function(e,o){return n("div",{key:o,staticClass:"itineray-reminder-content_wrapper"},[n("div",{staticClass:"header"},[n("img",{attrs:{src:e.icon,alt:"icon"}}),t._v(" "),n("span",{staticClass:"title",attrs:{title:e.text}},[t._v(t._s(e.text))])]),t._v(" "),n("div",{staticClass:"body"},[n("SeeMore",{attrs:{contents:e.contents,spm:t.spm}})],1)])})),0)]):t._e()}),[],!1,null,null,null).exports),G=(n(47),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),Y=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).formatContent=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"created",value:function(){this.formatContent=this.showSeeMoreBtn?this.contents.slice(0,this.maxLength):this.contents}},{key:"handleClickEvent",value:function(){var t=this.contents,e=this.maxLength;this.formatContent=this.isFold?t:t.slice(0,e),this.isFold=!this.isFold,this.updateSpm()}},{key:"updateSpm",value:function(){var t=this,e=this.$el.querySelector(".see-more-wrapper_footer");e&&(Object(M.nb)("data-spm-module",e,this.trackInfo),setTimeout((function(){t.$inhouse.track("action",e)}),10))}},{key:"trackInfo",get:function(){return"".concat(this.spm,"&trg=manual&ext=").concat(JSON.stringify({ClickType:this.isFold?"ShowLess":"ShowMore"}))}},{key:"valid",get:function(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.length)}},{key:"showSeeMoreBtn",get:function(){var t;return this.valid&&(null===(t=this.contents)||void 0===t?void 0:t.length)>this.maxLength}},{key:"viewMoreText",get:function(){var t=this.isFold?"city_page_view_more":"collapse_all";return this.$t(t)}}]),e}(h.Vue);G([Object(h.Prop)()],Y.prototype,"contents",void 0),G([Object(h.Prop)({default:function(){return{}}})],Y.prototype,"spm",void 0),G([Object(h.Prop)({type:Number,default:6})],Y.prototype,"maxLength",void 0),G([Object(h.Prop)({type:Boolean,default:!0})],Y.prototype,"isFold",void 0);var K=Y=G([h.Component],Y),J=(n(1573),Object($.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"see-more-wrapper"},[n("div",{staticClass:"see-more-wrapper_content"},t._l(t.formatContent,(function(e,o){return n("p",{key:o,staticClass:"text-box"},[n("span",{staticClass:"text"},[t._v(t._s(e))])])})),0),t._v(" "),t.showSeeMoreBtn?n("div",{staticClass:"see-more-wrapper_footer",attrs:{"data-spm-module":t.trackInfo,"data-spm-virtual-item":"__virtual?trg=manual"},on:{click:function(e){return e.stopPropagation(),t.handleClickEvent(e)}}},[n("span",[t._v(t._s(t.viewMoreText))])]):t._e()]):t._e()}),[],!1,null,"698c5824",null).exports),X=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Q=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showItinerary",value:function(){this.$emit("showItinerary")}},{key:"valid",get:function(){return"mobile"===this.platform&&this.data}},{key:"components",get:function(){var t,e,n,o;return this.data?null===(o=null===(n=null===(e=null===(t=this.data)||void 0===t?void 0:t.components)||void 0===e?void 0:e[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.components:[]}},{key:"spm",get:function(){return"SeeMorePOI?oid=package_".concat(this.packageDetail.packageId)}},{key:"itinerarySpm",get:function(){return Object(S.a)({type:"module",spm:"SeeItineraryDetails",query:{oid:"package_".concat(this.packageDetail.packageId)}})}}]),e}(h.Vue);X([Object(h.Prop)()],Q.prototype,"data",void 0),X([Object(h.Prop)()],Q.prototype,"packageDetail",void 0),X([Object(h.State)((function(t){return t.klook.platform}))],Q.prototype,"platform",void 0);var Z=Q=X([Object(h.Component)({components:{SeeMore:J}})],Q),tt=(n(1574),Object($.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"itineray-reminder-wrapper"},[n("div",{staticClass:"itineray-reminder-content"},[t._l(t.components,(function(e,o){return n("div",{key:o,staticClass:"itineray-reminder-content_wrapper"},[e.text?n("div",{staticClass:"header"},[n("img",{attrs:{src:e.icon,alt:"icon"}}),t._v(" "),n("span",{staticClass:"title",attrs:{title:e.text}},[t._v(t._s(e.text))])]):t._e(),t._v(" "),n("div",{staticClass:"body"},[e.text?t._e():n("img",{staticClass:"body-icon",attrs:{src:e.icon,alt:"icon"}}),t._v(" "),n("SeeMore",{attrs:{contents:e.contents,spm:t.spm,"max-length":5}})],1)])})),t._v(" "),n("klk-button",t._b({staticClass:"itineray-reminder-button",attrs:{type:"outlined",block:""},on:{click:t.showItinerary}},"klk-button",t.itinerarySpm,!1),[n("div",{staticClass:"button-inner"},[n("svg-icon",{attrs:{name:"common#icon_itinerary_detail",size:"20"}}),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(t.$t("81605")))])],1)])],2)]):t._e()}),[],!1,null,"2ffefda8",null).exports),et=n(918),it=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},nt=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);it([Object(h.Prop)({type:Array,default:function(){return[]}})],nt.prototype,"sections",void 0);var at=nt=it([Object(h.Component)({components:{ActivityMarkdown:et.a}})],nt),ot=(n(1575),Object($.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.sections,(function(e,o){return n("div",{key:o},[n("div",{staticClass:"section-title"},[t._v(t._s(e.title))]),t._v(" "),t._l(e.components,(function(component,t){return n("ActivityMarkdown",{key:t,staticClass:"activity-package-detail-markdown",attrs:{content:component.data.render_obj}})}))],2)})),0)}),[],!1,null,"dc14075e",null).exports),ct=n(272);function st(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var lt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ut=Object(h.namespace)("traveller/activity"),pt=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).reminderSectionData=null,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showItinerary",value:function(){this.PackageDetailList.showItineraryDetail()}},{key:"mounted",value:function(){"function"==typeof this.setDetailElem&&this.setDetailElem(this.PackageDetailList,this.subCategoryId)}},{key:"valid",get:function(){return!m()(this.packageDetail)}},{key:"subCategoryId",get:function(){var t,e;return null!=(e=null===(t=this.packageDetail)||void 0===t?void 0:t.sub_category_id)?e:""}},{key:"useNewVersion",get:function(){return[2,15].includes(this.subCategoryId)}},{key:"formatPackageDetail",get:function(){if(this.valid){var t=this.packageDetail,e=t.usage_validity_render_obj,n=t.pass_standard_activity_info,r=t.usageValidity,c=t.passStandardActivityInfo,l=t.sectionContent,d=t.section_content,v=t.activity_id,f=t.activityId,h=t.package_id,y=t.packageId;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?st(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):st(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.packageDetail,{passStandardActivityInfo:n||c,usageValidity:r||e,sectionContent:l||d,activityId:v||f,packageId:h||y})}return{}}},{key:"renderContent",get:function(){var t,content=(null===(t=this.formatPackageDetail)||void 0===t?void 0:t.usageValidity)||[];return Object(ct.b)(content)}},{key:"sections",get:function(){var t,e;return O()(null===(e=null===(t=this.formatPackageDetail)||void 0===t?void 0:t.sectionContent)||void 0===e?void 0:e.sections)}},{key:"includedSections",get:function(){var t;return(null===(t=this.sections)||void 0===t?void 0:t.length)?this.sections.filter((function(section){return"whats_included"===section.section_type})):[]}},{key:"filterSections",get:function(){var t;return(null===(t=this.sections)||void 0===t?void 0:t.length)?this.sections.filter((function(section){return"itinerary_reminder"!==section.section_type})):[]}},{key:"hasReminderSection",get:function(){var t;if(null===(t=this.sections)||void 0===t?void 0:t.length){var data=this.sections.find((function(t){return"itinerary_reminder"===t.section_type}));return data&&(this.reminderSectionData=data),!!data}return!1}}]),e}(h.Vue);lt([Object(h.Prop)()],pt.prototype,"packageDetail",void 0),lt([Object(h.Prop)({default:!0})],pt.prototype,"expandAll",void 0),lt([Object(h.Prop)({default:!1})],pt.prototype,"expandItinerarySection",void 0),lt([ut.State],pt.prototype,"activityDetail",void 0),lt([Object(h.Ref)()],pt.prototype,"PackageDetailList",void 0),lt([Object(h.Inject)({from:"setDetailElem",default:function(){}})],pt.prototype,"setDetailElem",void 0);var vt=pt=lt([Object(h.Component)({components:{AttractionIncluded:A.default,ActMarkdown:E.default,PackageDetailCollapse:P.a,PackageDetailList:L,KlkItineraryReminder:z,KlkItineraryReminderV2:tt,PackageIncluded:ot}})],pt),ft=(n(1576),Object($.a)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"package-detail-union-wrapper"},[t.useNewVersion?[t.hasReminderSection?n("KlkItineraryReminderV2",{staticClass:"klk-reminder-v2",attrs:{data:t.reminderSectionData,"package-detail":t.formatPackageDetail},on:{showItinerary:t.showItinerary}}):t._e(),t._v(" "),t.includedSections.length?n("PackageIncluded",{attrs:{sections:t.includedSections}}):t._e(),t._v(" "),n("PackageDetailList",{ref:"PackageDetailList",attrs:{sections:t.filterSections,"expand-all":!0,"expand-itinerary-section":!0,"package-detail":t.formatPackageDetail}})]:[t.formatPackageDetail.passStandardActivityInfo?n("AttractionIncluded",{attrs:{"activity-id":t.formatPackageDetail.activityId,"package-id":t.formatPackageDetail.packageId,info:t.formatPackageDetail.passStandardActivityInfo}}):t._e(),t._v(" "),t.formatPackageDetail.usageValidity&&t.formatPackageDetail.usageValidity.length?n("ActMarkdown",{attrs:{content:t.renderContent}}):t._e(),t._v(" "),t.hasReminderSection?n("KlkItineraryReminder",{staticClass:"klk-reminder",attrs:{data:t.reminderSectionData,"package-detail":t.formatPackageDetail}}):t._e(),t._v(" "),t.filterSections?n("PackageDetailCollapse",{staticClass:"activity-package-detail_list",attrs:{sections:t.filterSections,"expand-all":t.expandAll,"expand-itinerary-section":t.expandItinerarySection,"packate-detail":t.formatPackageDetail}}):t._e()]],2):t._e()}),[],!1,null,"2f7341a9",null));e.default=ft.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleScroll",value:function(){this.$emit("scroll-once")}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(1171),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-swiper-wrap"},[n("div",{staticClass:"card-swiper",on:{"~scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)])}),[],!1,null,"5c7aaaaa",null).exports,_=(n(47),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"wrapStyle",get:function(){if(0===this.perView)return{width:"100%"};var t=this.$attrs.length,e=Number(t),n=this.perView;return e<3&&(n-=1,2===e&&1===this.perView&&(n=1)),{width:"calc((100% - ".concat(n*this.gap+20,"px) / ").concat(this.perView,")"),marginRight:"".concat(this.gap,"px")}}}]),e}(f.Vue);_([Object(f.Prop)({type:Number,default:1})],j.prototype,"perView",void 0),_([Object(f.Prop)({type:Number,default:12})],j.prototype,"gap",void 0),_([Object(f.Prop)({type:Number,default:32})],j.prototype,"offset",void 0),_([Object(f.State)((function(t){return t.klook.platform}))],j.prototype,"platform",void 0);var w=j=_([f.Component],j),P=(n(1172),Object(k.a)(w,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._b({staticClass:"card-swiper-item_wrap",style:this.wrapStyle},"div",this.$attrs,!1),[this._t("default")],2)}),[],!1,null,null,null).exports),C=n(914),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);S([Object(f.Prop)({type:Number,default:.75})],D.prototype,"ratio",void 0),S([Object(f.Prop)({type:Number,default:1})],D.prototype,"perView",void 0),S([Object(f.Prop)()],D.prototype,"image",void 0),S([Object(f.Prop)()],D.prototype,"href",void 0),S([Object(f.Prop)({type:Number,default:12})],D.prototype,"gap",void 0),S([Object(f.Prop)()],D.prototype,"imageType",void 0);var x=D=S([Object(f.Component)({components:{AdaptiveCard:C.a,CardSwiperItem:P}})],D);Object(k.a)(x,(function(){var t=this.$createElement,e=this._self._c||t;return e("CardSwiperItem",{attrs:{"per-view":this.perView,gap:this.gap}},[e("AdaptiveCard",{attrs:{ratio:this.ratio,image:this.image,href:this.href,"image-type":this.imageType}},[this._t("default")],2)],1)}),[],!1,null,null,null).exports;n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return P}))},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcCity",get:function(){var t=this.list||[];if(!t.length)return"";var e=t.map((function(t){return'<span class="exp-departure__city">'.concat(t,"</span>")})).join(", ");return this.$t("101040",{city:e})}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"list",void 0);var m=y=h([Object(f.Component)({components:{}})],y),k=(n(1281),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return this.calcCity?e("div",{staticClass:"exp-departure"},[e("span",{staticClass:"exp-departure__content",domProps:{innerHTML:this._s(this.calcCity)}})]):this._e()}),[],!1,null,"9629f3ac",null);e.a=component.exports},,,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"loadingError",get:function(){var t;return(null===(t=this.scrollProps)||void 0===t?void 0:t.loadingError)||!1}},{key:"useInfiniteScroll",get:function(){return!!this.scrollProps}},{key:"currentModalProps",get:function(){return m({height:"90%"},this.$attrs)}},{key:"currentScrollProps",get:function(){return m({doneText:this.$t("16268")},this.scrollProps||{})}}]),e}(h.Vue);k([Object(h.Prop)({default:!0})],O.prototype,"transfer",void 0),k([Object(h.Prop)({default:!1})],O.prototype,"hideInfiniteScrollBottom",void 0),k([Object(h.Prop)({default:null})],O.prototype,"scrollProps",void 0);var _=O=k([h.Component],O),j=(n(1568),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-bottom-sheet",t._g(t._b({staticClass:"experience-modal",attrs:{transfer:t.transfer}},"klk-bottom-sheet",t.currentModalProps,!1),t.$listeners),[t._l(t.$slots,(function(e,slot){return["default"===slot&&t.useInfiniteScroll?t._e():n("template",{slot:slot},[t._t(slot)],2)]})),t._v(" "),t.useInfiniteScroll?n("klk-infinite-scroll",t._b({staticClass:"experience-modal-scroll",class:{"hide-infinite-scroll-bottom":t.hideInfiniteScrollBottom}},"klk-infinite-scroll",t.currentScrollProps,!1),[t._t("default"),t._v(" "),t.loadingError?n("div",{staticClass:"experience-modal-loading-error"},[n("span",[t._v(t._s(t.$t("78605")))])]):n("template",{slot:"loading"},[n("div",{staticClass:"experience-modal-loading"},[n("div",{staticClass:"experience-modal-loading-wrapper"},[n("klk-loading")],1),t._v(" "),n("span",{staticClass:"experience-modal-loading-text"},[t._v("\n          "+t._s(t.$t("car_rental_home_loading"))+"\n        ")])])])],2):t._e()],2)}),[],!1,null,"07e25bc8",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleScroll",value:function(){this.$emit("scroll-once")}},{key:"handleTouchStart",value:function(){this.$emit("touchstart")}},{key:"handleTouchMove",value:function(){this.$emit("touchmove")}},{key:"handleTouchEnd",value:function(){this.$emit("touchend")}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(1357),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-swiper-wrap"},[n("div",{staticClass:"card-swiper",on:{"~scroll":function(e){return t.handleScroll(e)},touchstart:function(e){return e.stopPropagation(),t.handleTouchStart(e)},touchmove:function(e){return e.stopPropagation(),t.handleTouchMove(e)},touchend:function(e){return e.stopPropagation(),t.handleTouchEnd(e)}}},[t._t("default")],2)])}),[],!1,null,"9fcf9414",null);e.a=component.exports},,,,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1023),y=n(1040),m=n(890),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bsObj=Object(m.getBottomSheetConfig)("package-details-config"),t.visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"close",value:function(){var t=this;this.visible=!1;var a=setTimeout((function(){t.$emit("close"),clearTimeout(a)}),200)}},{key:"onConfirm",value:function(){var t=this;setTimeout((function(){t.$emit("confirm")}),200)}},{key:"mounted",value:function(){this.visible=!0}},{key:"creditsVisible",get:function(){return this.useCredits&&!this.isGuestCheckout}},{key:"isInPromotion",get:function(){var t;return!!(null===(t=this.event)||void 0===t?void 0:t.status)}},{key:"event",get:function(){var t,e;return null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)({default:""})],O.prototype,"confirmText",void 0),k([Object(f.Prop)()],O.prototype,"packageData",void 0),k([f.Getter],O.prototype,"useCredits",void 0),k([f.Getter],O.prototype,"isGuestCheckout",void 0),k([Object(f.Prop)({default:!1})],O.prototype,"expandItinerarySection",void 0),k([Object(f.Prop)({default:""})],O.prototype,"groupPackName",void 0);var _=O=k([Object(f.Component)({components:{ExperienceActivityPackageDetail:h.a,BottomBarSettlement:y.a}})],O),j=n(43),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-bottom-sheet",t._b({attrs:{visible:t.visible,title:t.$t("activity.v2.label.pkg_info")},on:{"update:visible":function(e){t.visible=e},close:t.close}},"klk-bottom-sheet",t.bsObj,!1),[n("ExperienceActivityPackageDetail",{attrs:{"package-id":t.packageData.package_id,"is-pass-activity":t.packageData.isPassActivity,"expand-itinerary-section":t.expandItinerarySection,"has-bottom-button":!!t.confirmText,"group-pack-name":t.groupPackName}}),t._v(" "),t.confirmText?n("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[n("BottomBarSettlement",{attrs:{"is-only-one-line":!0,"is-in-promotion":t.isInPromotion,"market-price":t.packageData.market_price,"promotion-price":t.packageData.sell_price,"sell-price":t.packageData.sell_price,"original-price":t.packageData.original_selling_price,credits:t.packageData.credits,"credits-visible":t.creditsVisible}}),t._v(" "),n("klk-button",{attrs:{"data-spm-item":"BookBtn?typ=entry",color:"primary",block:""},nativeOn:{click:function(e){return e.stopPropagation(),t.onConfirm(e)}}},[t._v("\n      "+t._s(t.confirmText||t.$t("11888"))+"\n    ")])],1):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"style",get:function(){if(!this.attr)return{};var t=this.attr,e=t.height,n=t.color;return e=this.attr.height>.5?this.attr.height:.5,n=this.attr.color||"#eee",{borderTop:"".concat(e,"px solid ").concat(n)}}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"attr",void 0);var m=y=h([f.Component],y),k=n(43),component=Object(k.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._b({staticClass:"divider-line"},"div",{style:this.style},!1))}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){},function(t,e,n){"use strict";var o=n(915);n.n(o).a},,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(916);n.n(o).a},function(t,e,n){},function(t,e,n){"use strict";var o=n(917);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(28),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleShowPacakgePrice",value:function(t){return(this.$t("88601")||"").replace("{price}",'<span class="package-num">'.concat(t,"</span>"))}}]),e}(f.Vue);h([Object(f.Prop)({default:!1})],y.prototype,"list",void 0),h([Object(f.Prop)({default:"desktop"})],y.prototype,"platform",void 0),h([Object(f.Prop)({default:"desktop"})],y.prototype,"title",void 0),h([Object(f.Prop)({default:"desktop"})],y.prototype,"note",void 0),h([Object(f.Prop)()],y.prototype,"handleShowProductNote",void 0),h([Object(f.Prop)()],y.prototype,"slogan",void 0);var m=y=h([f.Component],y),k=(n(1565),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"product-info"},[n("div",{staticClass:"product-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("klk-icon",{staticClass:"product-title-icon",attrs:{type:"icon_tips_question_s"},on:{click:function(e){return e.stopPropagation(),t.handleShowProductNote(t.note)}}})],1),t._v(" "),t._l(t.list,(function(e){return n("div",{key:e.package_id,staticClass:"package-item"},[n("p",{staticClass:"package-title"},[t._v("\n        "+t._s(e.package_name)+"\n      ")]),t._v(" "),n("p",{staticClass:"package-price",domProps:{innerHTML:t._s(t.handleShowPacakgePrice(e.max_price))}})])}))],2)])}),[],!1,null,"0fbf1d2b",null).exports,_=n(1037),j=n(1159),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activitBanner",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_banner)||""}},{key:"activityId",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_id)||0}},{key:"slogan",get:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.inclusive}},{key:"tags",get:function(){var t,e;return(null===(e=null===(t=this.data)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"priceList",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.package_list)||[]}},{key:"activityName",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_name)||""}},{key:"passTypeName",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.pass_type_name)||""}},{key:"title",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.product_title)||""}},{key:"note",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.product_title_note)||""}}]),e}(f.Vue);w([Object(f.Prop)({default:{}})],P.prototype,"data",void 0),w([Object(f.Prop)()],P.prototype,"handleToDetail",void 0),w([Object(f.Prop)()],P.prototype,"handleShowProductNote",void 0);var C=P=w([Object(f.Component)({components:{CardBanner:_.a,AttractionPreviewTag:j.a,AttractionPreviewPrice:O}})],P),S=(n(1566),Object(k.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview-card",on:{click:function(e){return t.handleToDetail(t.activityId)}}},[n("CardBanner",{staticClass:"preview-card-banner",attrs:{src:t.activitBanner,height:196,ratio:"16:9"}}),t._v(" "),n("div",{staticClass:"preview-card-content"},[n("p",{staticClass:"preview-card-int"},[t._v(t._s(t.passTypeName))]),t._v(" "),n("h3",{staticClass:"preview-card-name"},[t._v("\n      "+t._s(t.activityName)+"\n    ")]),t._v(" "),n("AttractionPreviewTag",{staticClass:"preview-card-tags",attrs:{"tag-list":t.tags}}),t._v(" "),t.priceList.length>0?n("AttractionPreviewPrice",{attrs:{list:t.priceList,title:t.title,note:t.note,"handle-show-product-note":t.handleShowProductNote}}):t._e()],1)],1)}),[],!1,null,"6e14246f",null).exports),D=n(1435),x=n(1029),T=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},I=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.note="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleShowProductNote",value:function(t){this.visible=!0,this.note=t}}]),e}(D.a);T([Object(f.Prop)()],I.prototype,"handleToDetail",void 0),T([Object(f.Prop)({default:!1})],I.prototype,"isBook",void 0);var R=I=T([Object(f.Component)({components:{AttractionIncludedCard:S,BaseSticky:x.a}})],I),$=(n(1567),Object(k.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attraction-preview-container attraction-preview"},[n("BaseSticky",{staticClass:"attraction-preview-pin",attrs:{top:"-1px"}},[n("div",{staticClass:"attraction-preview-search"},[n("klk-input",{class:[{"attraction-preview-border":t.isFocus}],attrs:{size:"small","data-spm-module":"SearchInput","data-spm-virtual-item":"__virtual?&mod=stop",placeholder:t.$t("76897"),clearable:"","prepend-icon":"icon_edit_search_s"},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1)]),t._v(" "),t.showTabs?n("div",{staticClass:"attraction-preview-tabs"},[n("klk-tag-select",{attrs:{"hide-toggle":"",size:"large"},on:{change:t.onTabChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(e,i){return n("klk-tag-select-item",{key:i,attrs:{name:e.label,"data-spm-module":t.getSpm(e),"data-spm-virtual-item":"__virtual"}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),1)],1):t._e(),t._v(" "),t.showSearchLoading?n("klk-loading"):t._e(),t._v(" "),t.showNoneSearch?n("NoneSearchResult"):n("div",{staticClass:"attraction-preview-warp"},[n("div",{staticClass:"attraction-preview-cardList"},t._l(t.activityList,(function(e,o){return n("AttractionIncludedCard",{key:o,attrs:{data:e,"data-spm-module":"ActivityCard_LIST?oid=activity_"+e.activity_id+"&idx="+o+"&len="+t.activityList.length,"data-spm-virtual-item":"__virtual","handle-to-detail":t.handleToDetail,"handle-show-product-note":t.handleShowProductNote}})})),1),t._v(" "),t.isBook?n("div",{staticClass:"attraction-preview-footer"},[n("klk-button",{attrs:{block:""},on:{click:t.handleBook}},[t._v("\n        "+t._s(t.$t("76905"))+"\n      ")])],1):t._e()]),t._v(" "),n("klk-bottom-sheet",{attrs:{visible:t.visible,"show-close":!0,title:t.$t("88596")},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"demo-content"},[t._v(t._s(t.note))])])],1)}),[],!1,null,"3a901d5c",null).exports),L=n(1429),A=n(1111),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).shouldInit=!1,t.showType=!0,t.currentPassPackageId=0,t.openDetail=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){t&&(this.shouldInit=!0,this.sendPageView())}},{key:"headerLeftClick",value:function(){this.close()}},{key:"close",value:function(){this.$emit("closeModal")}},{key:"sendPageView",value:function(){var t=this;setTimeout((function(){return t.$inhouse.track("pageview",t.$el,{force:!0})}),100)}},{key:"setShowType",value:function(t){this.showType=t}},{key:"closeDetialModal",value:function(){this.openDetail=!1,this.currentPassPackageId=0}},{key:"handleToDetail",value:function(t){this.openDetail=!0,this.currentPassPackageId=t}},{key:"showInfo",get:function(){return this.currentPassPackageId>0}},{key:"selfTitle",get:function(){return this.title||this.$t("76895",{num:this.total})}},{key:"displayDetialTitle",get:function(){return this.$t("76898")}}]),e}(f.Vue);E([Object(f.State)((function(t){return t.klook}))],M.prototype,"klook",void 0),E([Object(f.Prop)({default:!1})],M.prototype,"visible",void 0),E([Object(f.Prop)({default:!1})],M.prototype,"isBook",void 0),E([Object(f.Prop)()],M.prototype,"activityId",void 0),E([Object(f.Prop)()],M.prototype,"packageId",void 0),E([Object(f.Prop)()],M.prototype,"total",void 0),E([Object(f.Prop)()],M.prototype,"title",void 0),E([Object(f.Prop)({default:""})],M.prototype,"deepLink",void 0),E([Object(f.Watch)("visible")],M.prototype,"visibleChange",null);var B=M=E([Object(f.Component)({components:{ExperienceModal:A.a,AttractionPreviewList:$,AttractionPreview:L.a}})],M),N=(n(1570),Object(k.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shouldInit?n("ExperienceModal",{staticClass:"attraction-preview-pop",attrs:{visible:t.visible,title:t.selfTitle,"show-close":"","can-pull-close":!1,"header-divider":"","data-spm-page":"AttractionsIncluded?trg=manual&oid=activity_"+t.activityId},on:{"update:visible":function(e){t.visible=e},close:t.close}},[n("div",{staticClass:"modal-content"},[n("AttractionPreviewList",{attrs:{"is-book":t.isBook,"activity-id":t.activityId,"package-id":t.packageId,"handle-to-detail":t.handleToDetail,"deep-link":t.deepLink},on:{setShowType:t.setShowType}})],1),t._v(" "),n("AttractionPreview",{attrs:{title:t.displayDetialTitle,visible:t.openDetail,"activity-id":t.activityId,"standard-activity-id":t.currentPassPackageId,"show-type":t.showType,"package-id":t.packageId},on:{"update:visible":function(e){t.openDetail=e},closeModal:t.closeDetialModal}})],1):t._e()}),[],!1,null,"275ca8da",null));e.default=N.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(28);var o=n(13),r=(n(47),n(70),n(25)),c=n(0),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(7),k=n.n(m),O=n(1226),_=n.n(O),j=n(1227),w=n.n(j),P=n(21),C=n(131),S=n(908),D=n(1182),x=n(912),T=n(1422),I=n(1419),R=n(1157),$=n(1423),L=n(1183),A=n(886),E=n(882),M=n(1096),B=n(890),N=n(211),V=n(1364);function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function W(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};k.a.extend(_.a),k.a.extend(w.a);var U=Object(P.namespace)("experience"),z=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).dateLimit=7,t.timeLimit=9,t.calendarPopupVisible=!1,t.timePopupVisible=!1,t.pickupTimePopupVisible=!1,t.showStatementVisible=!1,t.legendsInfo={title:"",desc:""},t.bsObjSelectTime=Object(B.getBottomSheetConfig)("pickup-return-config"),t.dateObj={cacheData:{},days:0,minStock:0,stocks:[],list:[]},t.timeObj={cacheData:{},key:"",in:{},out:{}},t.rangeDateList=[],t.initObjCache=null,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"initTimeObj",value:function(t){var e,n,o,r,c=this.calcTimeExtra;if(1===(null===(n=null===(e=c)||void 0===e?void 0:e.in)||void 0===n?void 0:n.length)){var l=c.in[0];t.in=W({},l,{startEndFormatStr:this.getStartEndFormatStr(l)})}if(1===(null===(r=null===(o=c)||void 0===o?void 0:o.out)||void 0===r?void 0:r.length)){var d=c.out[0];t.out=W({},d,{startEndFormatStr:this.getStartEndFormatStr(d)})}return t}},{key:"hookUpdatedHandler",value:function(){var t=this;this.$nextTick((function(){var e,n,o=t.$refs.wifiSimFooterRef;if(o){var r=(null===(e=o)||void 0===e?void 0:e.offsetHeight)||0;(null===(n=o)||void 0===n?void 0:n.parentElement)&&(o.parentElement.style.minHeight=r&&"".concat(r+2,"px"))}}))}},{key:"showDatePopup",value:function(){var t=this.dateObj,e=this.timeObj;this.$set(t,"cacheData",Object(C.cloneDeep)(t)),this.$set(e,"cacheData",this.initTimeObj(Object(C.cloneDeep)(e))),this.calendarPopupVisible=!0}},{key:"handleSelectPickupTime",value:function(data){this.timeObj.in=data,this.$emit("rangeConfirm",this.getSimCardParams({startDate:this.value}))}},{key:"formatStandardDate",value:function(t){return t?Object(N.e)(t,this.$t.bind(this),this.klook.language,1):""}},{key:"checkRangeDateValidate",value:function(t){var e=this.dateObj,n=this.calcTimeExtra,o=t||e.list||[];if(!(2===o.length&&o.every((function(t){return t}))))return this.$t(n?"88950":"13187")}},{key:"checkConfirm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,n=this.checkRangeDateValidate(e);return n?(this.$toast(n),!1):!!this.checkRangeTimeValidate()||(this.$toast(this.$t("88950")),!1)}},{key:"updateRangeDate",value:function(t){var e=this.dateObj,n=t||[],o=Object(r.a)(n,2),c=o[0],l=o[1],d=this.getArrangementIdsAndStocks(c,l);e.list=t,e.minStock=d.minStock,e.days=d.days,e.stocks=d.stocks}},{key:"getWifiParams",value:function(){var t,e,n,o,c=this.dateObj,l=this.timeObj,d=c.list||[],v=Object(r.a)(d,2),f=v[0],h=v[1];return{days:this.getTotalBookingDays(),date:f||"",start_date:f?"".concat(f," 00:00:00"):"",end_date:h?"".concat(h," 00:00:00"):"",start_time_type_id:(null===(e=null===(t=l)||void 0===t?void 0:t.in)||void 0===e?void 0:e.id)||0,end_time_type_id:(null===(o=null===(n=l)||void 0===n?void 0:n.out)||void 0===o?void 0:o.id)||0,minStock:c.minStock}}},{key:"validateSimCardParams",value:function(){var t,e,n=this.timeObj;return this.calcTimeExtra&&!(null===(e=null===(t=n)||void 0===t?void 0:t.in)||void 0===e?void 0:e.id)&&this.$t("88950")}},{key:"getSimCardParams",value:function(t){var e,n,o=t.startDate,r=this.timeObj;return{date:o||"",start_date:o?"".concat(o," 00:00:00"):"",start_time_type_id:(null===(n=null===(e=r)||void 0===e?void 0:e.in)||void 0===n?void 0:n.id)||0,end_date:"",end_time_type_id:0,validateFn:this.validateSimCardParams}}},{key:"clickDateTimeConfirm",value:function(){var t=this.dateObj.cacheData.list;this.checkConfirm({date:t})&&(this.updateRangeDate(t),this.timeObj=Object(C.cloneDeep)(this.calcCacheTimeObj),this.$emit("rangeConfirm",this.getWifiParams()),this.calendarPopupVisible=!1)}},{key:"checkRangeTimeValidate",value:function(){var t=this.$refs.rangeTimeRef;return!t||t.checkValidate&&t.checkValidate()}},{key:"hideRangeTimeValidate",value:function(){this.bsObjSelectTime.visible=!1,this.checkRangeTimeValidate()}},{key:"clickSelectTimeHandler",value:function(t){var e=this.calcCacheTimeObj;e.key===t?this.hideRangeTimeValidate():this.$set(e,"key",t)}},{key:"selectRangeTime",value:function(t,e){var n,o,r,c,l,d,v,f,h=this.calcCacheTimeObj,y=this.calcTimeExtra;this.$set(h,t,Object(C.cloneDeep)(e)),"in"===t&&!(null===(o=null===(n=h)||void 0===n?void 0:n.out)||void 0===o?void 0:o.id)&&(null===(c=null===(r=y)||void 0===r?void 0:r.out)||void 0===c?void 0:c.length)?this.$set(h,"key","out"):"out"===t&&!(null===(d=null===(l=h)||void 0===l?void 0:l.in)||void 0===d?void 0:d.id)&&(null===(f=null===(v=y)||void 0===v?void 0:v.in)||void 0===f?void 0:f.length)?this.$set(h,"key","in"):this.hideRangeTimeValidate()}},{key:"getTotalBookingDays",value:function(){var t,e,n,o,r=this.dateObj,c=this.timeObj;if(!r.days)return 0;var l=(null===(e=null===(t=c)||void 0===t?void 0:t.in)||void 0===e?void 0:e.increase)||0,d=(null===(o=null===(n=c)||void 0===n?void 0:n.out)||void 0===o?void 0:o.increase)||0;return Math.max(r.days+l+d,1)}},{key:"clickRangeTimeHandler",value:function(t){var e=this.bsObjSelectTime,n=this.calcCacheTimeObj;this.$set(n,"key",t),e.visible=!0}},{key:"handleShowStatement",value:function(t){this.legendsInfo=t,this.showStatementVisible=!0}},{key:"checkAutoTimeSlot",value:function(){var t,e=this.autoTimeSlot,n=this.selectedTime;return e&&(null===(t=n)||void 0===t?void 0:t.time_slot)}},{key:"timeListChange",value:function(){var t=this,e=this.timeList,n=this.isNewOpenTicket;e&&e.length>0&&this.$nextTick((function(){if(1!==e.length)if(n){var o=e.find((function(t){return!t.disabled}));t.handleSelectTime(o)}else if(t.checkAutoTimeSlot()){var r=e.find((function(e){var n;return e.date===(null===(n=t.selectedTime)||void 0===n?void 0:n.date)}));t.handleSelectTime(r)}else t.handleSelectTime(null);else t.handleSelectTime(e[0])}))}},{key:"getStartEndFormatStr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" - ";return"".concat(t.start).concat(e).concat(t.end)}},{key:"getAvailabilityTrackInfo",value:function(){return this.isTrackItem?{"data-spm-item":"CheckAvailability"}:{"data-spm-module":"CheckAvailability","data-spm-virtual-item":"__virtual"}}},{key:"clickPickupTimeHandler",value:function(){if(this.calcHidePickupTimeIcon)return!1;this.pickupTimePopupVisible=!0}},{key:"clickTimeHandler",value:function(){if(this.calcHideTimeIcon)return!1;this.timePopupVisible=!0}},{key:"created",value:function(){E.a.$off("checkSelectDateAndTime2bus").$on("checkSelectDateAndTime2bus",this.checkSelectDateAndTime2bus),this.bsObjSelectTime.title=this.$t("88950")}},{key:"calcSchedulesWatch",value:function(){this.initData()}},{key:"shouldDateDisabledFn",value:function(t){var e,n,o=this.calcSchedules,r=this.rangeDateList,c=this.maxDate,l=this.currentSelectedPackage,d=l.min_pax,v=l.min_trip,f=l.max_trip,h=Object(V.c)(t);return(null===(e=r)||void 0===e?void 0:e.length)&&2!==(null===(n=r)||void 0===n?void 0:n.length)?this.isInvalidDate(t,{schedules:o,rangeDateList:r,minPax:d,minDays:v,maxDays:f,maxDate:c}):this.initObjCache[h]}},{key:"isInvalidDate",value:function(t,e){var n=Object(V.c)(t);return!!this.isSoldout(n)||Object(V.e)(t,e)}},{key:"isSoldout",value:function(t){var e=Object(V.c)(t),n=this.schedulesMap[e];if(n)return n.soldout}},{key:"initData",value:function(){var t=this,e=this.calcSchedules,n=this.maxDate,o=this.currentSelectedPackage,r={schedules:e,rangeDateList:[],minPax:o.min_pax,minDays:o.min_trip,maxDays:o.max_trip,maxDate:n},c=Object(V.a)(V.f);c.onmessage=function(e){t.initObjCache=t.initDateDisabledCacheData(e.data).initedObj,c.terminate(),c=null},c.postMessage(r)}},{key:"initDateDisabledCacheData",value:function(t){var e,n=this,o=null===(e=t)||void 0===e?void 0:e.schedules;return o.length?{initedObj:o.reduce((function(e,o){var r=new Date(o.date);return e[o.date]=n.isInvalidDate(r,t),e}),{})}:{}}},{key:"checkSelectDateAndTime2bus",value:function(){var t,e=this.value,n=this.showTime,o=this.selectedTime;e?n&&!(null===(t=o)||void 0===t?void 0:t.time_slot)&&this.$toast(this.$t("activity.booking.options.select.time")):this.$toast(this.$t("activity.booking.options.select.date"))}},{key:"isTimeDisabled",value:function(time){var t,e=time.stock;return!e||e<Number((null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.min_pax)||0)}},{key:"limitDays",value:function(t,e){var n,o,r=null===(n=e.find((function(t){return!t.soldout})))||void 0===n?void 0:n.date,c=null===(o=e[this.schedules.length-1])||void 0===o?void 0:o.date,l=[];if(r)for(var i=0;i<t;i++){var d=k()(r).add(i,"day");d.isAfter(c,"day")||l.push(d.format("YYYY-MM-DD"))}else for(var v=0;v<t;v++)l.push(k()().add(v,"day").format("YYYY-MM-DD"));return l}},{key:"getArrangementIdsAndStocks",value:function(t,e){var n,r=null===(n=this.schedules)||void 0===n?void 0:n.filter((function(n){var o=k()(n.date);return o.isSameOrAfter(k()(t),"day")&&o.isSameOrBefore(k()(e),"day")})),c=r.length,l=r.map((function(t){return t.stock}));return{days:c,stocks:l,minStock:Math.min.apply(Math,Object(o.a)(l))}}},{key:"closeDateHandler",value:function(){}},{key:"clearHandler",value:function(){this.handleDateChange([])}},{key:"handleDateEveryChange",value:function(t){this.sectionActData.isWifi&&1===t.length&&this.handleDateChange(t)}},{key:"handleDateChange",value:function(t){var e=this;if(this.sectionActData.isWifiSimCard)if(this.sectionActData.isWifi){if(this.$set(this.dateObj.cacheData,"list",t),setTimeout((function(){e.$nextTick((function(){e.rangeDateList=t}))}),1),!this.calcTimeExtra){if(this.checkRangeDateValidate(t))return;this.updateRangeDate(t),this.$emit("rangeConfirm",this.getWifiParams()),this.calendarPopupVisible=!1}}else this.$emit("rangeConfirm",this.getSimCardParams({startDate:t}));else this.$emit("input",t),this.handleScrollToAnchor()}},{key:"handleSelectTime",value:function(data){var t;if(data){var e=W({},data,{arrangementId:data.arrangement_id||data.arrangementId,stock:data.stock,date:data.date,maxPurchased:Math.min(data.stock,Number(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.max_pax))});this.$emit("setTime",e)}else this.$emit("setTime",null)}},{key:"handleScrollToAnchor",value:function(){var t=this;setTimeout((function(){var e,n=null===(e=t.$el)||void 0===e?void 0:e.querySelector(".js-scroll-anchor");n&&n.scrollIntoView({behavior:"smooth",block:"start"})}),160)}},{key:"calcSelectDateTime",get:function(){var t,e,n,o,c=this.timeObj,l=this.dateObj,d=this.formatStandardDate,v=l.list||[],f=Object(r.a)(v,2),h=f[0],y=f[1],m=((null===(e=null===(t=c)||void 0===t?void 0:t.in)||void 0===e?void 0:e.startEndFormatStr)||"").replace(/\s/g,""),k=((null===(o=null===(n=c)||void 0===n?void 0:n.out)||void 0===o?void 0:o.startEndFormatStr)||"").replace(/\s/g,"");return{in:{startEndFormatStr:h?"".concat(d(h)).concat(m?", "+m:""):""},out:{startEndFormatStr:y?"".concat(d(y)).concat(k?", "+k:""):""}}}},{key:"pickupTimeList",get:function(){var t;return((null===(t=this.calcTimeExtra)||void 0===t?void 0:t.in)||[]).map((function(t){return W({},t,{disabled:!1,date:t.id})}))}},{key:"validPickupTimeList",get:function(){return this.pickupTimeList.slice(0,this.timeLimit)}},{key:"calcCacheDateObj",get:function(){return this.dateObj.cacheData||{}}},{key:"calcCacheTimeObj",get:function(){return this.timeObj.cacheData||{}}},{key:"calcTimeExtra",get:function(){var t;return(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.time_extra)||null}},{key:"calcFormattedPriceDays",get:function(){var t=this.getTotalBookingDays();return this.$t("3397",{0:t})}},{key:"calcHeaderText",get:function(){return this.dateObj.days?this.calcFormattedPriceDays:this.$t("activity.new.check_availability")}},{key:"calcDateTitle",get:function(){var t,e=this.calcTimeExtra;return this.$t((null===(t=e)||void 0===t?void 0:t.in)?"88950":"13187")}},{key:"calcHidePickupTimeIcon",get:function(){var t=this.pickupTimeList,e=this.timeLimit;return t.length<=e}},{key:"calcHideTimeIcon",get:function(){var t=this.timeList,e=this.timeLimit;return t.length<=e}},{key:"calcTimeActive",get:function(){var t=this;return function(e){var n,o,r=t.calcCacheTimeObj;return e.id&&e.id===(null===(o=null===(n=r)||void 0===n?void 0:n[r.key])||void 0===o?void 0:o.id)?"time-active":""}}},{key:"calcTimeExtraList",get:function(){var t,e=this,n=this.calcCacheTimeObj,o=(null===(t=this.calcTimeExtra)||void 0===t?void 0:t[n.key])||[];return o.forEach((function(t){e.$set(t,"startEndFormatStr","".concat(t.start," - ").concat(t.end))})),o}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.length;return 0===o?null:Object(V.d)(null===(n=null===(e=this.schedules)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}},{key:"calcSchedules",get:function(){return Object(V.b)(this.schedules)}},{key:"schedulesMap",get:function(){var t;return null===(t=this.schedules)||void 0===t?void 0:t.reduce((function(t,e){return W({},t,Object(c.a)({},e.date,e))}),{})}},{key:"calcStockSchedules",get:function(){return this.schedules.filter((function(t){var e,n;return null===(n=null===(e=t)||void 0===e?void 0:e.time_slots)||void 0===n?void 0:n.some((function(t){var e;return null===(e=t)||void 0===e?void 0:e.stock}))}))||[]}},{key:"filterValidDates",get:function(){return this.calcStockSchedules.slice(0,this.dateLimit)}},{key:"hasLegends",get:function(){return this.schedules.some((function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)>0}))}},{key:"timeList",get:function(){var t=this,e=this.schedules.find((function(e){return e.date===t.value}));return(e&&e.time_slots||[]).reduce((function(e,n){return t.isTimeDisabled(n)?e:[].concat(Object(o.a)(e),[W({},n,{disabled:t.isTimeDisabled(n),date:"".concat(t.value," ").concat(n.time_slot)})])}),[])}},{key:"validTimeList",get:function(){return this.timeList.slice(0,this.timeLimit)}},{key:"showTime",get:function(){var t,e;if(this.isNewOpenTicket)return!1;if(1===(null===(t=this.timeList)||void 0===t?void 0:t.length)){var time=Object(r.a)(this.timeList,1)[0],n=k()(time.date,"YYYY-MM-DD hh:mm:ss");return!(0===n.hour()&&0===n.minute()&&0===n.second())}return(null===(e=this.timeList)||void 0===e?void 0:e.length)>0}}]),e}(P.Vue);H([P.State],z.prototype,"klook",void 0),H([U.State],z.prototype,"sectionActData",void 0),H([Object(P.Prop)({default:!0})],z.prototype,"verticalScroll",void 0),H([Object(P.Prop)()],z.prototype,"templateId",void 0),H([Object(P.Prop)()],z.prototype,"packageId",void 0),H([Object(P.Prop)()],z.prototype,"currentSelectedPackage",void 0),H([Object(P.Prop)()],z.prototype,"isNewOpenTicket",void 0),H([Object(P.Prop)()],z.prototype,"schedules",void 0),H([Object(P.Prop)()],z.prototype,"selectedTime",void 0),H([Object(P.Prop)()],z.prototype,"value",void 0),H([Object(P.Prop)()],z.prototype,"rangeDate",void 0),H([Object(P.Prop)()],z.prototype,"warn",void 0),H([Object(P.Prop)({default:!0})],z.prototype,"priceVisible",void 0),H([Object(P.Prop)({default:!0})],z.prototype,"isTrackItem",void 0),H([Object(P.Prop)({default:function(){return[]}})],z.prototype,"legends",void 0),H([Object(P.Prop)()],z.prototype,"autoTimeSlot",void 0),H([Object(P.Watch)("timeList",{immediate:!0})],z.prototype,"timeListChange",null),H([Object(P.Watch)("calcSchedules",{deep:!0})],z.prototype,"calcSchedulesWatch",null);var G=z=H([Object(P.Component)({components:{RangeDateTime:I.default,HeaderTips:S.a,CalendarHeader:D.a,MiniCalendar:T.a,CalendarPopup:R.a,MiniTime:L.a,TimePopup:$.a,CalendarLengends:A.a,CalenderTips:x.a,StatementModal:M.a}})],z),Y=(n(1579),n(43)),component=Object(Y.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-calendar"},[n("HeaderTips",{staticClass:"booking-calendar-tips",attrs:{text:t.warn}}),t._v(" "),n("div",{staticClass:"booking-calendar-calendar",class:t.sectionActData.isWifi&&"spec-wifi-style"},[t.sectionActData.isWifi?n("div",{staticClass:"wifi-sim-box",on:{click:t.showDatePopup}},[n("CalendarHeader",t._b({attrs:{"title-bold":t.sectionActData.isWifi,schedules:t.schedules,"header-text":t.calcHeaderText,"hide-duration":!0}},"CalendarHeader",t.getAvailabilityTrackInfo(),!1)),t._v(" "),n("div",{staticClass:"range-date-time"},[n("RangeDateTime",{attrs:{"is-date":!0,"time-data":t.calcSelectDateTime,"time-extra":t.calcTimeExtra,"flex-type":t.calcTimeExtra&&"flex-column"}})],1)],1):[n("div",[n("CalendarHeader",t._b({attrs:{schedules:t.schedules,"header-text":t.sectionActData.isSimCard?t.$t("13541"):t.$t("13779")},nativeOn:{click:function(e){return t.showDatePopup(e)}}},"CalendarHeader",t.getAvailabilityTrackInfo(),!1)),t._v(" "),n("MiniCalendar",t._g({attrs:{"original-schedules":t.schedules,schedules:t.filterValidDates,value:t.value,"price-visible":!1,"is-track-item":t.isTrackItem,legends:t.legends},on:{input:t.handleDateChange,change:t.handleScrollToAnchor}},t.$listeners))],1),t._v(" "),t.value&&t.sectionActData.isSimCard&&t.calcTimeExtra?n("div",{staticClass:"pickup-time-box"},[n("CalendarHeader",{style:{margin:"0 0 12px 0"},attrs:{"hide-icon":t.calcHidePickupTimeIcon,"header-text":t.$t("88952"),"duration-text":t.$t("47795")},nativeOn:{click:function(e){return t.clickPickupTimeHandler(e)}}}),t._v(" "),n("MiniTime",{ref:"timeRef",staticClass:"swiper-column",attrs:{"original-time-list":t.pickupTimeList,"time-list":t.validPickupTimeList,"selected-time":t.timeObj.in,"price-visible":!1},on:{selectTime:t.handleSelectPickupTime},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.slotScope.item;return n("span",{},[t._v(t._s(o.start+"-"+o.end))])}}],null,!1,727918947)}),t._v(" "),n("TimePopup",{attrs:{visible:t.pickupTimePopupVisible,"time-list":t.pickupTimeList,"selected-time":t.timeObj.in,"package-id":t.packageId,"price-visible":!1},on:{"update:visible":function(e){t.pickupTimePopupVisible=e},selectTime:t.handleSelectPickupTime},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.slotScope.item;return n("span",{},[t._v(t._s(o.start+"-"+o.end))])}}],null,!1,727918947)})],1):t._e()],t._v(" "),t.calendarPopupVisible?n("CalendarPopup",{attrs:{visible:t.calendarPopupVisible,date:t.sectionActData.isWifi?t.calcCacheDateObj.list:t.value,legends:t.legends,schedules:t.schedules,"package-id":t.packageId,"price-visible":t.priceVisible,title:t.calcDateTitle,"template-id":t.templateId,"vertical-scroll":t.verticalScroll,"min-pax":t.currentSelectedPackage.min_pax,"min-days":t.currentSelectedPackage.min_trip,"max-days":t.currentSelectedPackage.max_trip,"disabled-fn":t.sectionActData.isWifi&&t.shouldDateDisabledFn},on:{"update:visible":function(e){t.calendarPopupVisible=e},change:t.handleDateChange,everyChange:t.handleDateEveryChange,close:t.closeDateHandler}},[n("template",{slot:"tips"},[n("div",{staticClass:"common-block"},[n("CalenderTips",{attrs:{"price-visible":t.priceVisible}},[n("CalendarLengends",{attrs:{legends:t.legends,"show-statement":!0,"show-text":!0},on:{showStatement:t.handleShowStatement}})],1),t._v(" "),t.sectionActData.isWifi&&t.calcTimeExtra?[n("div",{staticClass:"wifi-sim-footer-wrap"},[n("div",{ref:"wifiSimFooterRef",staticClass:"wifi-sim-footer"},[t.calcTimeExtra?n("div",{staticClass:"range-time-box"},[n("RangeDateTime",{ref:"rangeTimeRef",attrs:{"auto-hide-extra":!0,"time-extra":t.calcTimeExtra,"show-right":!0,"time-data":t.calcCacheTimeObj},on:{clickTime:t.clickRangeTimeHandler,"hook:mounted":t.hookUpdatedHandler,"hook:updated":t.hookUpdatedHandler}})],1):t._e(),t._v(" "),n("div",{staticClass:"range-confirm-box"},[n("span",{staticClass:"clear-btn",on:{click:t.clearHandler}},[t._v(t._s(t.$t("clear")))]),t._v(" "),n("klk-button",{attrs:{type:"primary",block:""},on:{click:t.clickDateTimeConfirm}},[t._v(t._s(t.$t("confirm")))])],1)])]),t._v(" "),t.bsObjSelectTime.visible&&t.calcCacheTimeObj.key?n("klk-bottom-sheet",t._b({attrs:{visible:t.bsObjSelectTime.visible},on:{"update:visible":function(e){return t.$set(t.bsObjSelectTime,"visible",e)},close:t.hideRangeTimeValidate}},"klk-bottom-sheet",t.bsObjSelectTime,!1),[n("div",{staticClass:"range-time-bs-wrap"},[n("div",[n("RangeDateTime",{attrs:{"auto-hide-extra":!0,"time-extra":t.calcTimeExtra,"show-right":!0,"style-type":"select-time-type","time-data":t.calcCacheTimeObj},on:{clickTime:t.clickSelectTimeHandler}})],1),t._v(" "),t.calcTimeExtraList.length?n("div",{staticClass:"range-time-list"},t._l(t.calcTimeExtraList,(function(e,i){return n("div",{key:t.calcCacheTimeObj.key+"-"+i,staticClass:"range-time-list__item",class:t.calcTimeActive(e),on:{click:function(n){return n.stopPropagation(),t.selectRangeTime(t.calcCacheTimeObj.key,e)}}},[t._v("\n                    "+t._s(e.startEndFormatStr)+"\n                  ")])})),0):t._e()])]):t._e()]:t._e()],2)])],2):t._e()],2),t._v(" "),n("div",{staticClass:"js-scroll-anchor"}),t._v(" "),t.showTime?n("div",{staticClass:"booking-calendar-time"},[n("CalendarHeader",{attrs:{"hide-icon":t.calcHideTimeIcon,"header-text":t.$t("15208"),"duration-text":t.$t("47795"),"data-spm-module":"CheckTimeslot?trg=manual","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.clickTimeHandler(e)}}}),t._v(" "),n("MiniTime",{attrs:{"original-time-list":t.timeList,"time-list":t.validTimeList,"selected-time":t.selectedTime,"price-visible":!1,"is-track-item":t.isTrackItem,legends:t.legends},on:{selectTime:t.handleSelectTime}}),t._v(" "),n("TimePopup",{attrs:{visible:t.timePopupVisible,"time-list":t.timeList,"selected-time":t.selectedTime,"package-id":t.packageId,"price-visible":t.priceVisible,"is-track-item":t.isTrackItem,legends:t.legends},on:{"update:visible":function(e){t.timePopupVisible=e},selectTime:t.handleSelectTime}})],1):t._e(),t._v(" "),t.hasLegends?n("CalendarLengends",{staticStyle:{"margin-top":"12px",display:"inline-block"},attrs:{legends:t.legends,"show-statement":!0,"show-text":!0},on:{showStatement:t.handleShowStatement}}):t._e(),t._v(" "),n("StatementModal",t._b({attrs:{visible:t.showStatementVisible},on:{"update:visible":function(e){t.showStatementVisible=e}}},"StatementModal",t.legendsInfo,!1))],1)}),[],!1,null,"0d480cc3",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(12),n(52),n(53),n(8);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(7),y=n.n(h),m=n(21),k=n(886),O=n(912),_=n(890);function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=Object(m.namespace)("experience"),S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).bsObjSavePrice={},t.copyValue="",t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"created",value:function(){this.$set(this,"bsObjSavePrice",Object(_.getBottomSheetConfig)("fixed-height-config",w({"header-divider":!0,"can-pull-close":!1,class:""},this.spmPage||{})))}},{key:"visibleChange",value:function(t){var e=this;if(t){if(!this.verticalScroll&&this.sectionActData.isWifi)return;this.$nextTick((function(){var t,n,o,r,c=null===(n=null===(t=e)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.querySelector(".klk-date-picker-date.klk-date-picker-date-selected");if(e.scrollIntoView(c),!c){var l=null===(r=null===(o=e)||void 0===o?void 0:o.$el)||void 0===r?void 0:r.querySelector(".klk-date-picker-date:not(.klk-date-picker-date-disabled):not(.klk-date-picker-date-empty)");e.scrollIntoView(l)}}))}}},{key:"scrollIntoView",value:function(t){t&&t.scrollIntoView({block:"start",inline:"start",behavior:"smooth"})}},{key:"getLocalDate",value:function(t){if(Array.isArray(t))return t.map((function(t){var e=y()(t||void 0).toString();return new Date(e)}));var e=y()(t||void 0).toString();return new Date(e)}},{key:"close",value:function(){this.sectionActData.isWifi&&this.$emit("close"),this.$emit("update:visible",!1)}},{key:"everyChangeHandler",value:function(t){var e=this;if(Array.isArray(t)){1===this.minDays&&1===this.maxDays&&1===t.length&&t.push(t[0]);var n=t.map((function(t){return e.getFormatDate(t)}));this.$emit("everyChange",n)}}},{key:"handleDateChange",value:function(t){var e=this;if(Array.isArray(t)){var n=t.map((function(t){return e.getFormatDate(t)}));this.$emit("change",n)}else{var o=t?this.getFormatDate(t):"";this.inhouseTrack(o),this.$emit("change",o),setTimeout((function(){e.close()}),100)}}},{key:"showItemLegend",value:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)}},{key:"getPrice",value:function(t){var e;return null===(e=this.getSchedule(t))||void 0===e?void 0:e.selling_price}},{key:"getSchedule",value:function(t){var e=this.getFormatDate(t);return this.schedulesMap[e]}},{key:"getFormatDate",value:function(t,e){return y()(t).format(e||"YYYY-MM-DD")}},{key:"shouldDateDisabled",value:function(t){if(this.disabledFn)return this.disabledFn(t);var e=this.getFormatDate(t);return!this.getSchedule(t)||this.isSoldout(e)}},{key:"formatDay",value:function(t){return y()(t).format("D")}},{key:"isSoldout",value:function(t){var e=this.getFormatDate(t),n=this.schedulesMap[e];if(n)return n.soldout}},{key:"inhouseTrack",value:function(t){var e,n=this;this.$inhouse.updateBinding(null===(e=this.datePickerRef)||void 0===e?void 0:e.$el,{ext:JSON.stringify({Date:t})}),setTimeout((function(){var t;n.$inhouse.track("action",null===(t=n.datePickerRef)||void 0===t?void 0:t.$el)}),20)}},{key:"calcMinMaxTips",get:function(){var t=this.minDays,e=this.maxDays,n=t<=1?1:t,o=e<=1?1:e;return"date-range"!==this.calcPicker.type?"":n===o&&1===n?this.$t("89656"):1===n?this.$t("89263",{X:o}):this.$t("89152",{min:n,max:o})}},{key:"calcPicker",get:function(){return this.sectionActData.isWifi?{"min-range-gap":86400*(this.minDays>=1?this.minDays-1:0),type:"date-range"}:{}}},{key:"calendarDate",get:function(){return this.date?this.getLocalDate(this.date):null}},{key:"schedulesMap",get:function(){var t;return null===(t=this.schedules)||void 0===t?void 0:t.reduce((function(t,e){return w({},t,Object(o.a)({},e.date,e))}),{})}},{key:"defaultViewDate",get:function(){return this.getLocalDate()}},{key:"minDate",get:function(){var t,e;return this.getLocalDate(null===(e=null===(t=this.schedules)||void 0===t?void 0:t[0])||void 0===e?void 0:e.date)}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.length;return 0===o?null:this.getLocalDate(null===(n=null===(e=this.schedules)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}}]),e}(m.Vue);P([C.State],S.prototype,"sectionActData",void 0),P([m.State],S.prototype,"klook",void 0),P([Object(m.Prop)({default:!0})],S.prototype,"verticalScroll",void 0),P([Object(m.Prop)({default:0})],S.prototype,"minPax",void 0),P([Object(m.Prop)({default:0})],S.prototype,"minDays",void 0),P([Object(m.Prop)({default:0})],S.prototype,"maxDays",void 0),P([Object(m.Prop)()],S.prototype,"templateId",void 0),P([Object(m.Prop)()],S.prototype,"packageId",void 0),P([Object(m.Prop)()],S.prototype,"title",void 0),P([Object(m.Prop)()],S.prototype,"visible",void 0),P([Object(m.Prop)()],S.prototype,"date",void 0),P([Object(m.Prop)()],S.prototype,"schedules",void 0),P([Object(m.Prop)({default:!0})],S.prototype,"priceVisible",void 0),P([Object(m.Ref)()],S.prototype,"datePickerRef",void 0),P([Object(m.Prop)()],S.prototype,"spmPage",void 0),P([Object(m.Prop)({default:function(){return[]}})],S.prototype,"legends",void 0),P([Object(m.Prop)({default:null})],S.prototype,"disabledFn",void 0),P([Object(m.Watch)("visible",{immediate:!0})],S.prototype,"visibleChange",null);var D=S=P([Object(m.Component)({components:{CalendarLengends:k.a,CalenderTips:O.a}})],S),x=(n(1359),n(1360),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("klk-bottom-sheet",t._b({staticClass:"calendar-popup hack-comp-style",attrs:{visible:t.visible,title:t.title||t.$t("car_rental_home_select_date")},on:{close:t.close}},"klk-bottom-sheet",t.bsObjSavePrice,!1),[t.visible?n("div",{staticClass:"calendar-popup-content",class:t.verticalScroll||"y-scroll",attrs:{"data-spm-module":"CheckAvailability?oid=package_"+t.packageId}},[t.calcMinMaxTips?n("div",{staticClass:"min-days-box"},[n("klk-alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n        "+t._s(t.calcMinMaxTips)+"\n      ")])],1):t._e(),t._v(" "),n("klk-date-picker",t._b({ref:"datePickerRef",staticClass:"calendar-popup-date-picker",attrs:{width:"auto",date:t.calendarDate,"min-date":t.minDate,"max-date":t.maxDate,"default-view-date":t.defaultViewDate,"should-disable-date":t.shouldDateDisabled,"vertical-scroll":t.verticalScroll,"data-spm-item":"SelectDate?trg=manual"},on:{change:t.handleDateChange,everyChange:t.everyChangeHandler},scopedSlots:t._u([{key:"day",fn:function(e){return[t._t("day",[t.isSoldout(e.date)?n("div",{staticClass:"klk-date-picker-date-inner"},[n("div",{staticClass:"inner-content klk-date-picker-sold-out"},[t._v("\n              "+t._s(t.formatDay(e.date))+"\n            ")])]):t._e()],{date:e})]}},{key:"date-append",fn:function(e){var o=e.date;return[t.priceVisible?n("span",[t._v(t._s(t.getPrice(o)))]):t._e(),t._v(" "),t.showItemLegend(t.getSchedule(o))?n("CalendarLengends",{attrs:{legends:t.legends,item:t.getSchedule(o)}}):t._e()]}}],null,!0)},"klk-date-picker",t.calcPicker,!1),[t._v(" "),t._v(" "),n("template",{slot:"tip"},[t.$slots.tips?t._t("tips"):[n("CalenderTips",{attrs:{"price-visible":t.priceVisible}})]],2)],2)],1):t._e()]):t._e()}),[],!1,null,"687a9c3e",null);e.a=component.exports},function(t,e,n){"use strict";n(30);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),header=n(986),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"title",get:function(){var t,e,n,o,r="";r=(null===(t=this.businessData)||void 0===t?void 0:t.title)?null===(e=this.businessData)||void 0===e?void 0:e.title:null===(o=null===(n=this.sectionData)||void 0===n?void 0:n.data)||void 0===o?void 0:o.title;var title=[].concat(r);return this.$t.apply(this,title)}},{key:"inhouseModule",get:function(){var t,e=(null===(t=this.sectionData)||void 0===t?void 0:t.meta)||{},n=e.name,o=void 0===n?"":n,r=e.type,c=void 0===r?"":r;return"".concat(o,":").concat(c,":::RightCornerButton")}}]),e}(n(893).a),m=y=h([Object(f.Component)({components:{Header:header.a}})],y),k=n(43),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return this.sectionVisible?e("Header",{attrs:{title:this.title,subtitle:this.businessData.subtitle,"corner-button-title":this.businessData.cornerButtonTitle,"corner-button-link":this.businessData.cornerButtonLink,"data-spm-module":this.inhouseModule+"?trg=manual"}}):this._e()}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:[]})],h.prototype,"tagList",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"gray",void 0);var y=h=f([v.Component],h),m=(n(1890),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"preview-detail-taglist"},t._l(t.tagList,(function(e){return n("klk-label",{key:e.text,style:e,attrs:{"bg-color":"#F6F5FC","text-color":"#6056D6",type:"secondary"}},[t._v("\n    "+t._s(e.text)+"\n  ")])})),1)}),[],!1,null,"469caf16",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activitiesChange",value:function(){"success"!==this.state||this.valid||this.hideSection()}},{key:"hideSection",value:function(){var t=this.$parent;t&&t.hideSection&&t.hideSection()}},{key:"valid",get:function(){var t,e;return(null===(e=((Array.isArray(this.activities)?this.activities:null===(t=this.activities)||void 0===t?void 0:t.items)||[]).filter((function(t){return!t.sold_out})))||void 0===e?void 0:e.length)>0}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"activities",void 0),h([Object(f.Prop)()],y.prototype,"state",void 0),h([Object(f.Watch)("state",{immediate:!0})],y.prototype,"activitiesChange",null);var m=y=h([f.Component],y),k=n(43),component=Object(k.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"activity-cards-list-base"},[this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(211),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getTimeText",value:function(t){return Object(h.d)(t,this.$t.bind(this),this.klook.language)}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)()],m.prototype,"avatar",void 0),y([Object(f.Prop)()],m.prototype,"name",void 0),y([Object(f.Prop)()],m.prototype,"date",void 0);var k=m=y([f.Component],m),O=(n(2385),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"review-user"},[n("div",{staticClass:"review-user-avatar"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"avatar"}]})]),t._v(" "),n("div",{staticClass:"review-user-wrapper"},[n("div",{staticClass:"review-user-name"},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),n("div",{staticClass:"review-user-time"},[t._v("\n      "+t._s(t.getTimeText(t.date))+"\n    ")])])])}),[],!1,null,"58df0629",null);e.a=component.exports},,,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(28),n(30);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};e.a=function(t){var e=t.experimentName,n=t.groupComponents,f=t.autoDataSend,y=void 0===f||f,O=t.isCrossPageForGA,_=void 0!==O&&O,j=function(t){function f(){return Object(r.a)(this,f),Object(l.a)(this,Object(d.a)(f).apply(this,arguments))}return Object(v.a)(f,t),Object(c.a)(f,[{key:"mounted",value:function(){y&&this.customTrack(),this.$emit("hitExperiment",this.hitExperiment)}},{key:"customTrack",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hitExperiment&&(this.$sendMixpanel({name:e,sprops:m(Object(o.a)({},e,this.hitExperiment.groupName?this.hitExperiment.groupName:"control"),t)}),_?this.$sendGTM({growthExperimentS:e,growthExperimentGroupS:this.hitExperiment.groupName}):this.$sendGTM({growthExperimentH:e,growthExperimentGroupH:this.hitExperiment.groupName}))}},{key:"render",value:function(t){return this.hitExperiment&&!this.isShowSlot?t(this.hitExperiment.component,{props:{hitExperimentName:e,hitGroupName:this.hitExperiment.groupName,hitExperimentId:this.hitExperiment.id,hitGroupId:this.hitExperiment.groupId,customTrack:this.customTrack},attrs:this.$attrs,on:m({},this.$listeners)}):this.$slots.default?t("div",this.$slots.default):null}},{key:"hitExperiment",get:function(){var t=this.$store.state.common.kepler.experimentsGroup[e];if(t){var o=t.group.name;return{component:n[o]||(n.control?n.control:void 0),name:e,groupName:t.group.name,id:t.id,groupId:t.id}}return null}}]),f}(h.Vue);return k([Object(h.Prop)({default:function(){return{}}})],j.prototype,"extraData",void 0),k([Object(h.Prop)({default:!1})],j.prototype,"isShowSlot",void 0),j=k([Object(h.Component)({name:"AB-".concat(e.replace(/\s+/g,"-"))})],j)}},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"tips",get:function(){return this.minPax>1&&9999===this.maxPax?this.$t("19390-activity.v2.error.package_min_pax",{min_pax:'<span class="min_pax">'+this.minPax+"</span>"}):1===this.minPax&&this.maxPax<9999?this.$t("activity.v2.error.package_max_pax",[this.maxPax]):this.minPax===this.maxPax&&this.minPax>=0?this.$t("78960",{number:this.maxPax}):this.minPax>1&&this.maxPax<9999?this.$t("activity.v2.error.package_min_to_max",[this.minPax,this.maxPax]):void 0}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"minPax",void 0),h([Object(f.Prop)()],y.prototype,"maxPax",void 0),y=h([f.Component],y),e.a=y},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(3),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).loading=!1,t.data=null,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"activityIdChange",value:function(){this.getActivityInfo()}},{key:"scrollTop",value:function(){var t;if(this.loading&&"desktop"===this.platform){var e=null===(t=document.getElementsByClassName("attraction-preview-right"))||void 0===t?void 0:t[0];e&&e.scrollTo({top:0,left:0,behavior:"smooth"})}}},{key:"getActivityInfo",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.$get(y.a.getPassStandardActivityDetailNew,{params:{pass_activity_id:this.activityId,standard_activity_id:this.standardActivityId,pass_package_id:this.packageId}});case 3:e=t.sent,this.loading=!1,e.success&&(this.data=e.result);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(h.Vue);m([Object(h.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(h.Prop)()],k.prototype,"activityId",void 0),m([Object(h.Prop)()],k.prototype,"standardActivityId",void 0),m([Object(h.Prop)()],k.prototype,"packageId",void 0),m([Object(h.Watch)("standardActivityId",{immediate:!0})],k.prototype,"activityIdChange",null),m([Object(h.Watch)("loading")],k.prototype,"scrollTop",null);var O=k=m([h.Component],k),_=(n(1891),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["attraction-included-info",t.platform]},[t.loading?n("klk-skeleton",{attrs:{animate:""}},[n("klk-skeleton-block",{attrs:{height:318}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block",{attrs:{inline:"",width:126}}),t._v(" "),n("klk-skeleton-block",{attrs:{inline:"",width:126}}),t._v(" "),n("klk-skeleton-block",{attrs:{inline:"",width:126}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block",{attrs:{width:320}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block",{attrs:{width:320}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block",{attrs:{width:320}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block",{attrs:{width:320}})],1):t._t("default",null,{data:t.data,loading:t.loading})],2)}),[],!1,null,"7b1b1a09",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){this.$emit("fetch-detail")}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(1451),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package_detail_failure"},[n("div",{staticClass:"package_detail_failure-tip"},[t._v(t._s(t.$t("client_network_failure")))]),t._v(" "),n("div",{staticClass:"package_detail_failure-button",on:{click:t.handleClick}},[t._v(t._s(t.$t("global.reload")))])])}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(132),y=n.n(h),m=n(21),k=n(3),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=Object(m.namespace)("auth"),j=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).commitAction=0,t.debounceCommitAction=y()(t.commitReviewsLike,400),t}var n,f;return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleNoLogin",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$loginSDK({purpose:"CommentLike",success:function(){e.clickLike()}});case 2:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"clickLike",value:function(){if(!this.isLoggedIn)return this.handleNoLogin(),null;this.hasLiked?(this.likeRemove(),this.commitAction-=1):(this.likeAdd(),this.commitAction+=1),this.debounceCommitAction(),this.$sendGTMCustomEvent("Activity Page|Helpful Button Clicked")}},{key:"maybeSet",value:function(t,e,n){void 0!==t[e]&&this.$set(t,e,n)}},{key:"likeAdd",value:function(){var t=this.comment,e=this.likeCount;this.maybeSet(t,"has_liked",!0),this.maybeSet(t,"hasLiked",!0),this.maybeSet(t,"like_count",e+1),this.maybeSet(t,"likeCount",e+1)}},{key:"likeRemove",value:function(){var t=this.comment,e=this.likeCount;this.maybeSet(t,"has_liked",!1),this.maybeSet(t,"hasLiked",!1),this.maybeSet(t,"like_count",e-1),this.maybeSet(t,"likeCount",e-1)}},{key:"commitReviewsLike",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.commitAction,r=null,!(o>0)){t.next=8;break}return t.next=5,this.$axios.$post(k.a.activityReviewsLikeAdd,"review_id=".concat(this.reviewId));case 5:r=t.sent,t.next=12;break;case 8:if(!(o<0)){t.next=12;break}return t.next=11,this.$axios.$post(k.a.activityReviewsLikeRemove,{review_id:this.reviewId});case 11:r=t.sent;case 12:if(this.commitAction=0,"4001"!==(null===(n=null===(e=r)||void 0===e?void 0:e.error)||void 0===n?void 0:n.code)){t.next=17;break}return o>0?this.likeRemove():o<0&&this.likeAdd(),t.next=17,this.handleNoLogin();case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"hasLiked",get:function(){var t=this.comment;return void 0!==t.has_liked?t.has_liked:t.hasLiked}},{key:"likeCount",get:function(){var t=this.comment;return void 0!==t.like_count?t.like_count:t.likeCount}},{key:"reviewId",get:function(){var t=this.comment;return void 0!==t.id?t.id:t.review_id}}]),e}(m.Vue);O([m.State],j.prototype,"klook",void 0),O([_.State],j.prototype,"isLoggedIn",void 0),O([m.State],j.prototype,"User",void 0),O([Object(m.Prop)({default:function(){}})],j.prototype,"comment",void 0),O([Object(m.Prop)({default:16})],j.prototype,"likeIconWidth",void 0);var w=j=O([Object(m.Component)({components:{}})],j),P=(n(2114),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-activity-reviews-helpful",class:[t.klook.platform],on:{click:t.clickLike}},[n("div",{staticClass:"icon-wrap"},[n("SvgIcon",{class:{"review-liked":t.hasLiked,"review-like":!t.hasLiked},attrs:{name:"activity-common#review-like-new",size:t.likeIconWidth}})],1),t._v(" "),Number(t.likeCount)>0||t.hasLiked?t._t("likeCount",[n("div",{staticClass:"page-activity-reviews-helpful-like"},[n("div",{domProps:{innerHTML:t._s(t.$t("my_reviews.helpful_with_num",[t.likeCount]))}})])],{likeCount:t.likeCount}):n("div",{attrs:{"data-review-id":t.comment.id}},[t._t("likeButton",[n("div",{staticClass:"page-activity-reviews-helpful-btn"},[t._v("\n        "+t._s(t.$t("my_reviews.helpful_text"))+"\n      ")])])],2)],2)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(925);n.n(o).a},function(t,e,n){"use strict";var o=n(926);n.n(o).a},function(t,e,n){"use strict";var o=n(927);n.n(o).a},function(t,e,n){"use strict";var o=n(928);n.n(o).a},function(t,e,n){"use strict";var o=n(929);n.n(o).a},function(t,e,n){"use strict";var o=n(930);n.n(o).a},function(t,e,n){"use strict";var o=n(931);n.n(o).a},function(t,e,n){"use strict";var o=n(932);n.n(o).a},function(t,e,n){t.exports=function(){"use strict";var t,s,e=36e5,n=864e5,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,r=2592e6,a=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,c={years:u,months:r,days:n,hours:e,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},l=function(t){return t instanceof p},d=function(t,s,e){return new p(t,e,s.$l)},v=function(t){return s.p(t)+"s"},f=function(t){return t<0},h=function(t){return f(t)?Math.ceil(t):Math.floor(t)},y=function(t){return Math.abs(t)},g=function(t,s){return t?f(t)?{negative:!0,format:""+y(t)+s}:{negative:!1,format:""+t+s}:{negative:!1,format:""}},p=function(){function f(t,s,e){var i=this;if(this.$d={},this.$l=e,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),s)return d(t*c[v(s)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(s){i.$d[v(s)]=t[s]})),this.calMilliseconds(),this;if("string"==typeof t){var n=t.match(a);if(n){var o=n.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var y=f.prototype;return y.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(s,e){return s+(t.$d[e]||0)*c[e]}),0)},y.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=h(t/u),t%=u,this.$d.months=h(t/r),t%=r,this.$d.days=h(t/n),t%=n,this.$d.hours=h(t/e),t%=e,this.$d.minutes=h(t/6e4),t%=6e4,this.$d.seconds=h(t/1e3),t%=1e3,this.$d.milliseconds=t},y.toISOString=function(){var t=g(this.$d.years,"Y"),s=g(this.$d.months,"M"),e=+this.$d.days||0;this.$d.weeks&&(e+=7*this.$d.weeks);var i=g(e,"D"),n=g(this.$d.hours,"H"),o=g(this.$d.minutes,"M"),r=this.$d.seconds||0;this.$d.milliseconds&&(r+=this.$d.milliseconds/1e3);var u=g(r,"S"),c=t.negative||s.negative||i.negative||n.negative||o.negative||u.negative,a=n.format||o.format||u.format?"T":"",l=(c?"-":"")+"P"+t.format+s.format+i.format+a+n.format+o.format+u.format;return"P"===l||"-P"===l?"P0D":l},y.toJSON=function(){return this.toISOString()},y.format=function(t){var e=t||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return e.replace(o,(function(t,s){return s||String(i[t])}))},y.as=function(t){return this.$ms/c[v(t)]},y.get=function(t){var s=this.$ms,e=v(t);return"milliseconds"===e?s%=1e3:s="weeks"===e?h(s/c[e]):this.$d[e],0===s?0:s},y.add=function(t,s,e){var i;return i=s?t*c[v(s)]:l(t)?t.$ms:d(t,this).$ms,d(this.$ms+i*(e?-1:1),this)},y.subtract=function(t,s){return this.add(t,s,!0)},y.locale=function(t){var s=this.clone();return s.$l=t,s},y.clone=function(){return d(this.$ms,this)},y.humanize=function(s){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},f}();return function(e,i,n){t=n,s=n().$utils(),n.duration=function(t,s){var e=n.locale();return d(t,{$l:e},s)},n.isDuration=l;var o=i.prototype.add,r=i.prototype.subtract;i.prototype.add=function(t,s){return l(t)&&(t=t.asMilliseconds()),o.bind(this)(t,s)},i.prototype.subtract=function(t,s){return l(t)&&(t=t.asMilliseconds()),r.bind(this)(t,s)}}}()},,function(t,e,n){"use strict";var o=n(933);n.n(o).a},function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return f}));n(275);var o=n(13),r=(n(11),n(8),n(12),n(37),n(25),n(20),n(27),n(28),n(158),n(279)),c=n.n(r),l=n(64);n(216);var d={desktop:function(t){return{meta:[t.$setMeta({name:"X-UA-Compatible",content:"IE=edge,chrome=1"}),t.$setMeta({name:"renderer",content:"webkit"}),t.$setMeta({name:"viewport",content:"width=device-width, initial-scale=1"})],link:[],script:[]}},mobile:function(t){return{meta:[t.$setMeta({name:"viewport",content:"initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover"}),t.$setMeta({name:"apple-mobile-web-app-capable",content:"yes"}),t.$setMeta({name:"apple-touch-fullscreen",content:"yes"}),t.$setMeta({name:"format-detection",content:"telephone=no,email=no"})],link:[],script:[]}}};function v(t){var e=t.$i18n.locale,n=t.$store.state.klook.platform,r=t.$store.state.klook.platformMp,v=d[n](t),f=function(t){var e=t.$route.meta,meta=void 0===e?{}:e,n=t.$store.state.klook,o=n.currency,r=n.ipCountry,l=n.backendLanguage,d=c.a.inHTMLData(t.$cookies.get("device_id_new")),data={};return meta.gaPageName&&Object.assign(data,{Currency:o,IPLocationCity:void 0,IPLocationCountry:r,Language:l,Page:meta.gaPageName}),d&&(data.DeviceId=d),data}(t);return{htmlAttrs:{lang:l.g[e]||e},bodyAttrs:{"data-spm-page":t.$route.meta.trackedPageName,class:r?"klook-platform-mp "+(t.$route.meta.bodyClass||""):t.$route.meta.bodyClass},title:t.$t("global.seo.title"),meta:[{charset:"utf-8"},t.$setMeta({name:"keywords",content:t.$t("global.seo.keywords")}),t.$setMeta({name:"description",content:t.$t("global.seo.description")}),t.$setMeta({name:"msvalidate.01",content:"F9AF19DB43086103E6C6EF03373C2EEF"}),t.$setMeta({name:"author",content:t.$t("global.seo.author")}),t.$setMeta({name:"google-site-verification",content:"m-vUVyQRvMiIbMOyDm-13PmkhgZHQ0O3JqRVkfSB7uw"}),t.$setMeta({name:"yandex-verification",content:"794dfaf8476c38c4"}),t.$setMeta({property:"fb:pages",content:"1437638383172374"})].concat(Object(o.a)(v.meta)),link:[{rel:"dns-prefetch",href:"https://res.klook.com"},{rel:"dns-prefetch",href:"https://cdn.klook.com"},{rel:"icon",type:"image/png",href:"https://cdn.klook.com/s/dist_web/favicons/favicon-32x32.png"}].concat(Object(o.a)(v.link)),script:[t.$insetDataLayer(f)].concat(Object(o.a)(v.script),Object(o.a)([{innerHTML:'!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";window.precolletion=[],["error","unhandledrejection"].forEach((e=>{window.addEventListener(e,(function(n){window.precolletion.push({eventName:e,event:n})}))}))}));',type:"text/javascript",pbody:!0},{innerHTML:'!function(a,b,c,d,e,f){a.ddjskey=e;a.ddoptions=f||null;var m=b.createElement(c),n=b.getElementsByTagName(c)[0];m.async=1,m.src=d,n.parentNode.insertBefore(m,n)}(window,document,"script","https://js.datadome.co/tags.js","1A2CDFCDF412CD9D3C93BB2E078906", { ajaxListenerPath: true });',type:"text/javascript","data-dome":1,pbody:!0}])),__dangerouslyDisableSanitizers:["script","noscript"]}}function f(t){return"www.klook.cn"===t.$store.state.klook.host?{}:{script:[]}}},,function(t,e,n){"use strict";var o=n(25),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(211),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"formatDate",value:function(t){return Object(y.e)(t,this.$t.bind(this),this.language,3)}},{key:"duration",get:function(){var t,e;if(!this.schedules||!this.schedules.length)return"";var n=Object(o.a)(this.schedules,1)[0],r=this.schedules[this.schedules.length-1];return"".concat(this.formatDate(null===(t=n)||void 0===t?void 0:t.date)," - ").concat(this.formatDate(null===(e=r)||void 0===e?void 0:e.date))}}]),e}(h.Vue);m([Object(h.State)((function(t){return t.klook.language}))],k.prototype,"language",void 0),m([Object(h.Prop)({default:!1})],k.prototype,"titleBold",void 0),m([Object(h.Prop)({default:!1})],k.prototype,"hideDuration",void 0),m([Object(h.Prop)({default:!1})],k.prototype,"hideIcon",void 0),m([Object(h.Prop)()],k.prototype,"schedules",void 0),m([Object(h.Prop)()],k.prototype,"headerText",void 0),m([Object(h.Prop)()],k.prototype,"durationText",void 0);var O=k=m([h.Component],k),_=(n(1290),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-calendar_header"},[n("div",{staticClass:"activity-calendar_head-title"},[n("span",{staticClass:"activity-calendar_head-text",class:t.titleBold&&"fw-bold"},[t._v("\n      "+t._s(t.headerText||t.$t("activity.new.check_availability"))+"\n    ")])]),t._v(" "),t.hideIcon?t._e():n("div",{staticClass:"activity-calendar_head-date"},[t.hideDuration?t._e():n("span",{staticClass:"activity-calendar_head-date-text"},[t._v(t._s(t.duration||t.durationText))]),t._v(" "),n("SvgIcon",{staticClass:"icon",attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",size:"16",color:"#4A4A4A"}})],1)])}),[],!1,null,"3e0ce210",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(13),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(7),m=n.n(y),k=n(1112),O=n(1027),_=n(886),j=n(16),w=n(85),P=n(1103),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).tempTime="",t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getTrack",value:function(t){return this.customSpm?{}:this.getTrackInfo(t)}},{key:"selectedTimeChange",value:function(t){t&&t.date&&t.date!==this.tempTime&&(this.slide(t.date,this.smooth),this.tempTime=t.date)}},{key:"getTrackInfo",value:function(t){return this.isTrackItem?{"data-spm-item":"SelectTime?ext=".concat(JSON.stringify({time:this.formatTime(t)}))}:{"data-spm-module":"SelectTime?ext=".concat(JSON.stringify({time:this.formatTime(t)})),"data-spm-virtual-item":"__virtual"}}},{key:"slide",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];setTimeout((function(){var o=e.getItem(t);o&&(e.useNewScroll?Object(P.a)(e.getWrapper(),o):o.scrollIntoView({behavior:n?"smooth":"auto",inline:"center",block:"nearest"}))}),160)}},{key:"setTimeFormat",value:function(t){return m()(t).format(this.timeFormatString)}},{key:"formatTime",value:function(time){if(!time||!time.date)return"";var t=this.setTimeFormat(time.date),e=" ".concat(w.b[this.klook.currency]," ").concat(Object(j.y)(time.selling_price));return time.disabled?" ".concat(t," ").concat(this.$t("global.sold_out")):"".concat(t).concat(this.priceVisible?e:"")}},{key:"select",value:function(t){if(t.disable)return null;this.tempTime=t.date,this.slide(t.date),this.$emit("selectTime",t)}},{key:"getWrapper",value:function(){var t;return null===(t=this.$el)||void 0===t?void 0:t.querySelector(".card-swiper")}},{key:"getItem",value:function(t){var e;return null===(e=this.$el)||void 0===e?void 0:e.querySelector('[data-date="'.concat(t,'"]'))}},{key:"hasLegend",get:function(){return this.myTimeList.some((function(t){var e;return(null===(e=t.legend_keys)||void 0===e?void 0:e.length)>0}))}},{key:"isOverLimit",get:function(){var t,e,n=this;return!!((null===(t=this.selectedTime)||void 0===t?void 0:t.date)&&(null===(e=this.timeList)||void 0===e?void 0:e.length))&&!this.timeList.some((function(t){return t.date===n.selectedTime.date}))}},{key:"myTimeList",get:function(){return this.isOverLimit&&this.selectedTime?[].concat(Object(o.a)(this.timeList),[this.selectedTime]):this.timeList}}]),e}(h.Vue);C([h.State],S.prototype,"klook",void 0),C([Object(h.Prop)()],S.prototype,"customSpm",void 0),C([Object(h.Prop)()],S.prototype,"originalTimeList",void 0),C([Object(h.Prop)()],S.prototype,"timeList",void 0),C([Object(h.Prop)()],S.prototype,"selectedTime",void 0),C([Object(h.Prop)({default:!1})],S.prototype,"smooth",void 0),C([Object(h.Prop)({default:!0})],S.prototype,"priceVisible",void 0),C([Object(h.Prop)({default:!0})],S.prototype,"isTrackItem",void 0),C([Object(h.Prop)({default:function(){return[]}})],S.prototype,"legends",void 0),C([Object(h.Prop)({default:!1})],S.prototype,"useNewScroll",void 0),C([h.Getter],S.prototype,"timeFormatString",void 0),C([Object(h.Watch)("selectedTime",{immediate:!0})],S.prototype,"selectedTimeChange",null);var D=S=C([Object(h.Component)({components:{CardSwiper:k.a,MiniDateButton:O.a,CalendarLengends:_.a}})],S),x=(n(1363),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-mini-time"},[n("CardSwiper",{staticClass:"mini-time"},t._l(t.myTimeList,(function(e){return n("div",{key:e.date,staticClass:"mini-time_item"},[n("MiniDateButton",t._b({staticClass:"mini-time_item-btn j-mini-time_item",class:{"big-mini-time_item-btn":t.hasLegend},attrs:{disable:e.disable,active:t.selectedTime&&t.selectedTime.date===e.date,"data-date":e.date},nativeOn:{click:function(n){return t.select(e)}}},"MiniDateButton",t.getTrack(e),!1),[t._t("default",[n("div",{staticClass:"date"},[t._v(t._s(t.formatTime(e)))]),t._v(" "),n("CalendarLengends",{attrs:{legends:t.legends,item:e}})],{slotScope:{item:e}})],2)],1)})),0)],1)}),[],!1,null,"37450d22",null);e.a=component.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(30),n(20),n(27),n(11),n(8);var o=n(21);function r(t,e){t.keys().reduce((function(n,o){var r,c,l,d=t(o),v=(null===(c=null===(r=d)||void 0===r?void 0:r.default)||void 0===c?void 0:c.displayName)||(null===(l=d)||void 0===l?void 0:l.displayName);if(!v)return n;var f=v.toLocaleLowerCase();return!/mobile|desktop/.test(f)||!e||f.includes(e)?n.concat({name:v,content:d.default||d}):n}),[]).forEach((function(t){o.Vue.component(t.name,t.content)}))}},,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(13),c=(n(20),n(27),n(30),n(47),n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(3),O=n(159),_=n(1028),j=n(899),w=n(16);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=Object(m.namespace)("auth"),x=Object(m.namespace)("experience"),T=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).role="bookNow",t}var n,o,y;return Object(h.a)(e,t),Object(d.a)(e,[{key:"getSessionData",value:function(t){var e=O.b(this.preOrderKey);if(!e)return null;try{var data=JSON.parse(e);return data&&data[t]}catch(t){return null}}},{key:"saveBookingOptions",value:function(){O.d(this.preOrderKey,JSON.stringify({params:this.getParams()}))}},{key:"toastHandler",value:function(t){var content=t.content;this.$toast(content),this.$businessLog({type:"FECheckFail",tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",reason:content})}},{key:"handleNoLogin",value:(y=Object(c.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sendData(),this.$cookies.set("reg_form_buy_btn",1,{path:"/"}),t.next=4,this.$loginSDK({purpose:"addToCart"===this.role?"Cart":"Booking",success:function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.bookRequest();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fallback:function(){e.saveBookingOptions()}});case 4:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"handleClick",value:(o=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.toastHandler,this.msgFn&&(o=this.msgFn),this.packageSelectedDate){t.next=4;break}return t.abrupt("return",o({content:this.$t("activity.booking.options.select.date")}));case 4:if(!this.sectionActData.isWifiSimCard||"function"!=typeof(null===(e=this.wifiSimParams)||void 0===e?void 0:e.validateFn)){t.next=8;break}if(!(r=this.wifiSimParams.validateFn())){t.next=8;break}return t.abrupt("return",o({content:r}));case 8:if(this.selectedTime&&this.selectedTime.arrangementId){t.next=10;break}return t.abrupt("return",o({content:this.$t("activity.booking.options.select.time")}));case 10:if(this.totalUnitCount){t.next=12;break}return t.abrupt("return",o({content:this.$t("activity.booking.options.select.quantity")}));case 12:if(c=this.currentSelectedPackage.min_pax,!(this.totalUnitCount<Number(c))){t.next=15;break}return t.abrupt("return",o({content:this.$t("activity.error.price_min",[c])}));case 15:if(!this.isGuestCheckout){t.next=22;break}return l=(null===(n=this.klook.utilConfig)||void 0===n?void 0:n.f_source_type)||"",t.next=19,this.$axios.$post(k.a.registerGuest,{partner_channel:l});case 19:return t.sent.success&&this.bookRequest(),t.abrupt("return");case 22:if(this.isLoggedIn){t.next=26;break}return t.next=25,this.handleNoLogin();case 25:return t.abrupt("return");case 26:this.$emit("next-btn-complete",JSON.stringify({CompletedInfo:!0})),this.bookRequest();case 28:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"bookRequest",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y,m,O,_,j,P,C,S,D,x,option,T,I=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.passCustomFn){t.next=3;break}return this.passCustomFn(this.getParams()),t.abrupt("return");case 3:return j=-1===this.shoppingCartId?"addToCart"===this.role?k.a.bookingNow:k.a.expPostPreOrderServiceNew:"addToCart"===this.role?k.a.addToShoppingCard:k.a.postExpEditeShoppingCartAndnew,P=this.getParams(),-1===this.shoppingCartId&&"addToCart"!==this.role&&(S=(C=P).arrangement_id,D=C.price_items,P=Object(w.B)(S,D,{wifiSimParams:this.getWifiSimParams()})),this.$showLoading({overlayColor:"rgba(255, 255, 255, 0.7)"}),t.prev=7,t.next=10,this.$axios.$post(j,P);case 10:if(x=t.sent,this.$hideLoading(),!x.success){t.next=17;break}return this.getSessionData("params")||this.sendData(),"addToCart"===this.role&&this.$inhouse.track("custom","body",{spm:"AddToCartSuccessLoad",shoppingcart_id:null===(e=x.result)||void 0===e?void 0:e.shoppingcart_id}),setTimeout((function(){var t,e,n,o,r,c=+new Date,l="undefined"!=typeof _args3?_args3:null,d=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var e=+new Date-c;t=__in_house.get_spm_info(t,{duration:e,args:l})}catch(t){console.warn("Get spm info error",t)}return t};"bookNow"===I.role?Object(w.kb)(I,{name:"ExperiencePay",query:{settlement_type:"1",shoppingcart_guid:null===(t=x.result)||void 0===t?void 0:t.pre_order_id,travel_pass_unit_no:null===(n=null===(e=I.$route)||void 0===e?void 0:e.query)||void 0===n?void 0:n.travel_pass_unit_no,travel_pass_url:null===(r=null===(o=I.$route)||void 0===o?void 0:o.query)||void 0===r?void 0:r.travel_pass_url}}):-1===I.shoppingCartId?I.$emit("closeModal"):window.location.href=d(d(I.$href("/shoppingcart")))})),t.abrupt("return");case 17:if("4001"!==(null===(o=null===(n=x)||void 0===n?void 0:n.error)||void 0===o?void 0:o.code)){t.next=21;break}return t.next=20,this.handleNoLogin();case 20:return t.abrupt("return");case 21:if("01001007027"!==x.error.code){t.next=26;break}return option={content:this.$t("16995-price_change_tips"),btnYes:this.$t("global.tips.okTxt")},this.$alert(option.content,{okLable:option.btnYes}).then((function(){I.refreshWithUnits()})),this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"ApiError",reason:"价格改变了",code:null===(c=null===(r=x)||void 0===r?void 0:r.error)||void 0===c?void 0:c.code,message:null===(d=null===(l=x)||void 0===l?void 0:l.error)||void 0===d?void 0:d.message}),t.abrupt("return");case 26:this.handleError(x.error),this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"ApiError",code:null===(f=null===(v=x)||void 0===v?void 0:v.error)||void 0===f?void 0:f.code,message:null===(y=null===(h=x)||void 0===h?void 0:h.error)||void 0===y?void 0:y.message}),t.next=36;break;case 30:t.prev=30,t.t0=t.catch(7),T=t.t0,this.$hideLoading(),this.handleError(T),this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"JsError",name:null===(m=T)||void 0===m?void 0:m.name,stack:null===(O=T)||void 0===O?void 0:O.stack,message:null===(_=T)||void 0===_?void 0:_.message});case 36:case"end":return t.stop()}}),t,this,[[7,30]])}))),function(){return n.apply(this,arguments)})},{key:"refreshWithUnits",value:function(){window.location.reload()}},{key:"handleError",value:function(t){var e=t.code;_.a.includes(e)?this.$confirm(t.message,{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(t){t.result&&window.location.reload()})):this.$confirm(t.message,{okLabel:this.$t("global.confirm")})}},{key:"getWifiSimParams",value:function(){var t={};if(this.sectionActData.isWifiSimCard){var e=this.wifiSimParams||{};t={start_date:e.start_date||"",end_date:e.end_date||"",start_time_type_id:e.start_time_type_id||0,end_time_type_id:e.end_time_type_id||0}}return t}},{key:"getParams",value:function(){var t=this.getSessionData("params");if(t)return t;var e=this.selectedTime.arrangementId,n=this.units.reduce((function(t,e){return e.count>0?[].concat(Object(r.a)(t),[{sku_id:e.skuId,price_id:e.priceId,count:e.count,event_id:e.isInPromotion?e.eventId:0}]):t}),[]),o=this.getWifiSimParams(),c=C({arrangement_id:e,package_id:this.currentSelectedPackage.package_id,template_id:this.templateId,is_open_ticket:this.isOpenTicket,price_items:n,shoppingcart_type:"bookNow"===this.role?1:0},o);return-1!==this.shoppingCartId?C({},c,{shoppingcart_id:this.shoppingCartId}):c}},{key:"sendData",value:function(){this.$tracker.$emit("activity.sendMixpanel","addToCart"===this.role?"AddToCart_Confirmed":"BookNow_Confirmed"),this.$sendGTMCustomEvent("Booking Options Page|".concat("addToCart"===this.role?"Booking Options Page Add To Cart Button Clicked":"Booking Options Page Next Button Clicked"))}},{key:"created",value:function(){this.type?this.role=this.type:this.role="book"===this.$route.query.type?"bookNow":"addToCart"}},{key:"calcBookButtonText",get:function(){var t;return this.$t(Object(j.b)(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.redeem_status))}},{key:"shoppingCartId",get:function(){var t=this.$route.query,e=t.shoppingcart_id,n=t.shop_id;return parseInt(e||n)||-1}},{key:"content",get:function(){var t={bookNow:this.calcBookButtonText,addToCart:this.$t("activity.label.add_to_cart")};return this.btnContent||t[this.role]}},{key:"preOrderKey",get:function(){return"activity_pre_order_".concat(this.activityId)}}]),e}(m.Vue);S([x.State],T.prototype,"sectionActData",void 0),S([m.State],T.prototype,"klook",void 0),S([m.Getter],T.prototype,"isGuestCheckout",void 0),S([D.State],T.prototype,"isLoggedIn",void 0),S([Object(m.Prop)({default:null})],T.prototype,"wifiSimParams",void 0),S([Object(m.Prop)()],T.prototype,"msgFn",void 0),S([Object(m.Prop)()],T.prototype,"spmItem",void 0),S([Object(m.Prop)()],T.prototype,"type",void 0),S([Object(m.Prop)({default:""})],T.prototype,"btnContent",void 0),S([Object(m.Prop)()],T.prototype,"selectedTime",void 0),S([Object(m.Prop)()],T.prototype,"currentSelectedPackage",void 0),S([Object(m.Prop)()],T.prototype,"templateId",void 0),S([Object(m.Prop)()],T.prototype,"units",void 0),S([Object(m.Prop)()],T.prototype,"totalUnitCount",void 0),S([Object(m.Prop)()],T.prototype,"packageSelectedDate",void 0),S([Object(m.Prop)()],T.prototype,"activityId",void 0),S([Object(m.Prop)()],T.prototype,"isSoldOut",void 0),S([Object(m.Prop)()],T.prototype,"isOpenTicket",void 0),S([Object(m.Prop)({default:!1})],T.prototype,"isJumpOldSettlement",void 0),S([Object(m.Prop)()],T.prototype,"passCustomFn",void 0);var I=T=S([m.Component],T),R=(n(1971),n(43)),component=Object(R.a)(I,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"booking-option-bottom-module"},[e("klk-button",{staticClass:"booking-option-bottom-button",attrs:{"data-spm-item":this.spmItem,type:"primary"},on:{click:this.handleClick}},[this._v("\n    "+this._s(this.content)+"\n  ")])],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(898),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(f.a);h([Object(v.Prop)({default:""})],y.prototype,"styleType",void 0),h([Object(v.Prop)({default:"unit"})],y.prototype,"priceType",void 0),h([Object(v.Prop)({default:function(){return["selling_price_text","original_price_text","original_selling_price_text","market_price_text","saved_text"]}})],y.prototype,"orderList",void 0);var m=y=h([v.Component],y),k=(n(1201),n(43));n.d(e,"getPreUnitPriceData",(function(){return f.b})),n.d(e,"testPriceData",(function(){return f.c}));var component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-slot",class:t.styleType},[n("span",{staticClass:"price-slot-wrap"},[t._l(t.priceList,(function(e){return t._t(e.propKey,[n("span",{key:e.propKey,class:["price-box",e.className]},[t._t(e.propKey+"-value",[t._v(t._s(e.value))],{slotScope:e})],2)],{slotScope:e})}))],2)])}),[],!1,null,"17527bd0",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).styles={paddingBottom:"28px",maxHeight:"none"},t.status="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){parseFloat(this.maxHeight)>0&&this.initStatus()}},{key:"initStatus",value:function(){var t=this;this.$nextTick((function(){var e=t.actValidityRef;if(!e)return!1;var n=t.styles,o=t.maxHeight,r=o?parseFloat(o):0;r&&e.offsetHeight>r&&(t.status="more",n.maxHeight=o)}))}},{key:"clickBtn",value:function(){var t=this.status,e=this.styles,n=this.maxHeight;t&&(this.status="more"===t?"less":"more",e.maxHeight="more"===t?"none":n)}},{key:"calcText",get:function(){var t=this.status,text="";return"more"===t?text=this.$t("see_more"):"less"===t&&(text=this.$t("17843")),text}}]),e}(f.Vue);h([Object(f.Ref)()],y.prototype,"actValidityRef",void 0),h([Object(f.Prop)()],y.prototype,"title",void 0),h([Object(f.Prop)()],y.prototype,"subTitle",void 0),h([Object(f.Prop)({type:String,default:"none"})],y.prototype,"maxHeight",void 0),h([Object(f.Prop)({type:Array,default:function(){return[]}})],y.prototype,"rules",void 0);var m=y=h([f.Component],y),k=(n(1452),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.title||t.subTitle||t.rules&&t.rules.length?n("div",{ref:"actValidityRef",staticClass:"act-validity",style:t.status&&t.styles},[n("div",{staticClass:"act-validity-box"},[t.title?n("p",{staticClass:"act-validity-box_title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.subTitle?n("p",{staticClass:"act-validity-box_sub-title"},[t._v(t._s(t.subTitle))]):t._e(),t._v(" "),t.rules&&t.rules.length?n("div",{staticClass:"act-validity-box_rules"},t._l(t.rules,(function(e,i){return n("p",{key:i,staticClass:"rules-text"},[t._v(t._s(e))])})),0):t._e()]),t._v(" "),t._t("btn",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"common-more-box",class:t.status,on:{click:t.clickBtn}},[n("span",{staticClass:"common-more-btn"},[t._v("\n        "+t._s(t.calcText)+"\n      ")])])])],2):t._e()}),[],!1,null,"0f5ed99e",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(935);n.n(o).a},function(t,e,n){"use strict";var o=n(936);n.n(o).a},function(t,e,n){"use strict";var o=n(937);n.n(o).a},function(t,e,n){"use strict";var o=n(938);n.n(o).a},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));n(22),n(14),n(11),n(8),n(12),n(70);var o=n(0),r=(n(20),n(27),n(30),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(986),m=n(1026),k=n(1024),O=n(1118);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};function P(t){var e=t.SectionHeader,n=void 0===e?y.a:e,o=t.SectionBody,f=void 0===o?k.a:o,_=t.SectionFooter,P=void 0===_?m.a:_,C=t.SectionDivider,S=void 0===C?O.a:C,D=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!0,t.state="",t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"stateChange",value:function(t){this.state=t}},{key:"hideSection",value:function(){var t,e;this.visible=!1,this.$emit("hide",null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.name)}},{key:"setSectionState",value:function(t){"success,failure,loading".includes(t)&&(this.state=t)}},{key:"refresh",value:function(t){this.state="loading",this.$emit("refresh",t)}},{key:"getComponents",value:function(){var t=this,e=this.$createElement;return this.sectionComponents.map((function(n,o){return e(n,{key:o,attrs:j({section:t.section,state:t.state,setSectionState:t.setSectionState,hideSection:t.hideSection,refresh:t.refresh},t.$attrs),on:j({},t.$listeners)})}))}},{key:"render",value:function(){var t=arguments[0];if(!this.visible)return null;var section=this.section.fields||[],e=section.find((function(t){return"auto_width_section"===t.key})),n=e&&1===e.value?"auto-width-section-class":"",o="k-section ".concat(this.id," ").concat(n);return t("div",{class:o,key:this.id},[this.getComponents()])}},{key:"sectionConfig",get:function(){return{any:["SectionBody"],common:["SectionHeader","SectionBody","SectionFooter"],tab:["SectionHeader","SectionBody","SectionFooter"],divider:["SectionDivider"]}}},{key:"sectionType",get:function(){var t,e;return(null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.type)||this.type}},{key:"sectionComponents",get:function(){return this.sectionConfig[this.sectionType]||[]}},{key:"id",get:function(){var t,e,n;return(null===(n=null===(e=null===(t=this.section)||void 0===t?void 0:t.body)||void 0===e?void 0:e.content)||void 0===n?void 0:n.data_type)||""}}]),e}(h.Vue);return w([Object(h.Prop)()],D.prototype,"section",void 0),w([Object(h.Prop)()],D.prototype,"sectionState",void 0),w([Object(h.Prop)({default:"any"})],D.prototype,"type",void 0),w([Object(h.Watch)("sectionState")],D.prototype,"stateChange",null),D=w([Object(h.Component)({components:{SectionHeader:n,SectionBody:f,SectionFooter:P,SectionDivider:S}})],D)}},,,,function(t,e,n){"use strict";var o=n(939);n.n(o).a},,,,function(t,e,n){"use strict";var o=n(940);n.n(o).a},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-next",!0,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M17 8L35 24L26 32L17 40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}})]));e.default=o},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(942);n.n(o).a},function(t,e,n){"use strict";var o=n(943);n.n(o).a},function(t,e,n){"use strict";var o=n(944);n.n(o).a},function(t,e,n){"use strict";var o=n(945);n.n(o).a},function(t,e,n){"use strict";var o=n(946);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(947);n.n(o).a},function(t,e,n){"use strict";var o=n(948);n.n(o).a},function(t,e,n){"use strict";var o=n(949);n.n(o).a},function(t,e,n){"use strict";var o=n(950);n.n(o).a},function(t,e,n){"use strict";var o=n(951);n.n(o).a},function(t,e,n){},function(t,e,n){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)}}}()},function(t,e,n){t.exports=function(){"use strict";return function(t,i){i.prototype.isSameOrBefore=function(t,i){return this.isSame(t,i)||this.isBefore(t,i)}}}()},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1159),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isOverflow=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.isOverflow=this.checkOverflow()}},{key:"checkOverflow",value:function(){var t=document.getElementById("$product-info");if(t&&t.clientWidth>0){var e=t.clientWidth,text=(this.packageItem.sku_name||"")+(this.packageItem.sku_price||""),n=document.createElement("span");n.style.visibility="hidden",n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.fontWeight="600",n.style.lineHeight="1.5",n.style.fontSize="16px",n.textContent=text,document.body.appendChild(n);var o=n.offsetWidth;if(document.body.removeChild(n),o>e-15-24-32-30)return!0}return!1}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"packageItem",void 0);var k=m=y([f.Component],m),O=(n(1892),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"box",staticClass:"product-info"},[t.isOverflow?n("div",{staticClass:"overflow-item"},[n("p",{staticClass:"package-title"},[t._v("\n        "+t._s(t.packageItem.sku_name)+"\n      ")]),t._v(" "),n("div",{staticClass:"overflow"},[t._m(0),t._v(" "),n("div",{staticClass:"overflow-price"},[t._v(t._s(t.packageItem.sku_price))])])]):n("div",{staticClass:"package-item"},[n("p",{staticClass:"package-title"},[n("span",[t._v(t._s(t.packageItem.sku_name))])]),t._v(" "),t._m(1),t._v(" "),n("p",{staticClass:"package-price"},[t._v("\n        "+t._s(t.packageItem.sku_price)+"\n      ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"overflow-line"},[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"package-line"},[e("span")])}],!1,null,"595115c0",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.clientWidth=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleShowProductNote",value:function(){this.visible=!0}}]),e}(f.Vue);j([Object(f.Prop)({default:!1})],w.prototype,"list",void 0),j([Object(f.Prop)({default:"desktop"})],w.prototype,"platform",void 0),j([Object(f.Prop)({default:""})],w.prototype,"slogan",void 0),j([Object(f.Prop)({default:""})],w.prototype,"note",void 0);var P=w=j([Object(f.Component)({components:{AttractionPreviewLine:_}})],w),C=(n(1893),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"product-info",attrs:{id:"$product-info"}},[t._l(t.list,(function(t){return n("div",{key:t.sku_id},[n("AttractionPreviewLine",{attrs:{"package-item":t}})],1)})),t._v(" "),t.slogan?n("div",{staticClass:"product-foorer"},[n("span",[t._v(t._s(t.slogan))]),t._v(" "),"desktop"===t.platform?n("klk-poptip",{attrs:{content:t.note,dark:!0,placement:"bottom-start","max-width":220,trigger:"hover"}},[n("klk-icon",{staticClass:"product-title-icon",attrs:{type:"icon_tips_question_s",size:"18"}})],1):n("klk-icon",{staticClass:"product-title-icon",attrs:{type:"icon_tips_question_s",size:"18"},on:{click:function(e){return e.stopPropagation(),t.handleShowProductNote(t.note)}}})],1):t._e()],2),t._v(" "),"desktop"!==t.platform?n("klk-bottom-sheet",{attrs:{visible:t.visible,"show-close":!0,title:t.$t("88596")},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"demo-content"},[t._v(t._s(t.note))])]):t._e()],1)}),[],!1,null,"1a352094",null).exports),S=n(1166),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).contentHeight="560px",t.isOverflow=!1,t.isExpanded=!1,t.style={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.checkOverflow()}},{key:"change",value:function(){this.checkOverflow()}},{key:"toggleContent",value:function(){this.isExpanded=!this.isExpanded,this.contentHeight=this.isExpanded?"auto":"560px",this.style={height:this.isExpanded?"auto":"560px"}}},{key:"checkOverflow",value:function(){this.contentRef&&(this.auto?this.style={height:"auto",paddingBottom:"12px"}:(this.isOverflow=this.contentRef.scrollHeight>560,this.isOverflow?this.style={height:this.contentHeight,overflow:"hidden"}:this.style={height:"auto",paddingBottom:"12px"}))}}]),e}(f.Vue);D([Object(f.State)((function(t){return t.klook.platform}))],x.prototype,"platform",void 0),D([Object(f.Prop)()],x.prototype,"activityId",void 0),D([Object(f.Prop)({default:!1})],x.prototype,"auto",void 0),D([Object(f.Ref)("contentRef")],x.prototype,"contentRef",void 0),D([Object(f.Prop)({default:!1})],x.prototype,"loading",void 0),D([Object(f.Prop)()],x.prototype,"title",void 0),D([Object(f.Watch)("isExpanded")],x.prototype,"change",null);var T=x=D([f.Component],x),I=(n(1894),Object(O.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"preview-box-title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{ref:"contentRef",class:["preview-box",t.platform],style:t.style},[t._t("default"),t._v(" "),t.isOverflow?n("div",{staticClass:"preview-box-button",attrs:{"data-spm-module":"DetailsViewMore?oid=activity_"+t.activityId,"data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.toggleContent(e)}}},[t.isExpanded?t._e():n("div",{staticClass:"preview-box-shaow"}),t._v("\n      "+t._s(t.isExpanded?t.$t("88587"):t.$t("88586"))+"\n    ")]):t._e()],2)])}),[],!1,null,"1d142193",null).exports),R=n(924),$=n(1037),L=n(272),A=n(953),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"renderMarkDownHtml",value:function(content){return content?Object(L.b)(content):""}},{key:"activityId",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_id)||0}},{key:"activityName",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_name)||""}},{key:"activityBanner",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.activity_banner)||""}},{key:"passTypeName",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.pass_type_name)||""}},{key:"packageList",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.package_list)||[]}},{key:"tags",get:function(){var t,e;return(null===(e=null===(t=this.data)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"isAiTranslation",get:function(){var t;return!!(null===(t=this.data)||void 0===t?void 0:t.is_ai_translation)}},{key:"slogan",get:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.inclusive}}]),e}(f.Vue);E([Object(f.Prop)({default:{}})],M.prototype,"data",void 0),E([Object(f.Prop)()],M.prototype,"loading",void 0),E([Object(f.Prop)({default:!0})],M.prototype,"showType",void 0),E([Object(f.State)((function(t){return t.klook.platform}))],M.prototype,"platform",void 0);var B=M=E([Object(f.Component)({components:{CardBanner:$.a,PublishAi:R.a,DataLoader:S.a,AttractionPrevieBox:I,AttractionPreviewPrice:C,ActMarkdown:A.default,AttractionPreviewTag:h.a}})],M),N=(n(1895),Object(O.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["preview-detail",t.platform]},[t.isAiTranslation?n("PublishAi",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"text"}}):t._e(),t._v(" "),n("CardBanner",{class:["preview-detail-banner",t.platform],attrs:{src:t.activityBanner,height:"mobile"===t.platform?196:318,ratio:"16:9"}}),t._v(" "),t.showType?n("p",{staticClass:"preview-detail-int"},[t._v(t._s(t.passTypeName))]):t._e(),t._v(" "),n("h3",{staticClass:"preview-detail-name"},[t._v("\n    "+t._s(t.activityName)+"\n  ")]),t._v(" "),t.tags.length>0?n("AttractionPreviewTag",{staticClass:"preview-detail-taglist",attrs:{"tag-list":t.tags}}):t._e(),t._v(" "),t._l(t.packageList,(function(e){return n("div",{key:e.package_id,staticClass:"preview-detail-previeBox"},[n("AttractionPrevieBox",{attrs:{auto:1===t.packageList.length,title:e.package_name,loading:t.loading,"activity-id":t.activityId}},[n("AttractionPreviewPrice",{attrs:{list:e.sku_list,slogan:e.sku_remind,note:e.sku_remind_note,platform:t.platform}}),t._v(" "),e.render_object?n("div",[n("ActMarkdown",{staticClass:"preview-detail-markdown",attrs:{content:t.renderMarkDownHtml(e.render_object)}})],1):t._e()],1)],1)}))],2)}),[],!1,null,"e6f45a70",null));e.default=N.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1260),y=(n(30),n(70),n(7)),m=n.n(y),k=n(1157),O=n(923),_=n(211),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.calendarDate=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"valueWatch",value:function(t){t||this.handleCalendarDateCancel()}},{key:"showDatePicker",value:function(){this.visible=!0}},{key:"handleClick",value:function(t){var e=t&&t!==this.value?t:null;this.handleDateChange(e)}},{key:"handleCalendarDateCancel",value:function(){this.calendarDate=null,this.$emit("input",null)}},{key:"handleDateChange",value:function(t){var e=this.cellDateList.find((function(e){return e.date===t}));e?this.calendarDate=null:!e&&t&&(this.calendarDate=t),this.$emit("input",t)}},{key:"formatDate",value:function(t){return Object(_.e)(t,this.$t.bind(this),this.klook.language,3)}},{key:"cellDateList",get:function(){return this.availableDateList.filter((function(t,i){return i<3}))}},{key:"availableDateList",get:function(){var t=this,e=[{name:this.$t("today"),date:m()().format("YYYY-MM-DD")},{name:this.$t("search_tomorrow"),date:m()().add(1,"day").format("YYYY-MM-DD")}],n=(this.schedules||[]).filter((function(e){return e.name=t.formatDate(e.date),!e.soldout&&!e.disable}));return e.forEach((function(t){var e=n.find((function(e){return e.date===t.date}));e&&(e.name=t.name)})),n||[]}}]),e}(f.Vue);j([f.State],w.prototype,"klook",void 0),j([Object(f.Prop)()],w.prototype,"schedules",void 0),j([Object(f.Prop)()],w.prototype,"value",void 0),j([Object(f.Prop)()],w.prototype,"warn",void 0),j([Object(f.Watch)("value")],w.prototype,"valueWatch",null);var P=w=j([Object(f.Component)({components:{CalendarPopup:k.a,CardSwiper:O.a}})],w),C=(n(2487),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CardSwiper",{staticClass:"experience-activity-calendar"},[n("div",{staticClass:"cell-wrap",attrs:{"data-spm-module":"SelectDate","data-spm-virtual-item":"__virtual"}},[t._l(t.cellDateList,(function(e){return n("div",{key:e.name,staticClass:"cell",class:{on:e.date===t.value},on:{click:function(n){return t.handleClick(e.date)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),t._v(" "),t.calendarDate?n("div",{staticClass:"cell",class:{on:t.calendarDate===t.value},on:{click:t.handleCalendarDateCancel}},[n("span",[t._v(t._s(t.formatDate(t.calendarDate)))]),t._v(" "),t.calendarDate===t.value?n("div",{staticClass:"close-wrap",on:{click:function(e){return e.stopPropagation(),t.handleCalendarDateCancel(e)}}},[n("SvgIcon",{staticClass:"suffix",attrs:{name:"common#icon_navigation_close_xxxs",size:"12"}})],1):t._e()]):t._e()],2),t._v(" "),t.availableDateList&&t.availableDateList.length>3?n("div",{staticClass:"cell",attrs:{"data-spm-module":"CheckAvailabilityBtn","data-spm-virtual-item":"__virtual"},on:{click:t.showDatePicker}},[n("SvgIcon",{staticClass:"prefix",attrs:{name:"desktop-common#calendar-new-sku",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("14111")))])],1):t._e(),t._v(" "),n("CalendarPopup",{staticClass:"calender",attrs:{visible:t.visible,date:t.value,schedules:t.schedules},on:{"update:visible":function(e){t.visible=e},change:t.handleDateChange}})],1)}),[],!1,null,"5752282a",null).exports,D=n(1992),x=n.n(D),T=n(132),I=n.n(T),R=n(2064),$=n(2065),L=n(16),A=n(1413),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};m.a.extend(x.a);var M=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).dateShow=!1,t.handleScroll=I()((function(e){var n,o=t.$refs.activityDatePicker,r=t.$refs.showDatePickerButton,c=e.target;t.dateShow&&!(c===o||o.contains(c)||(null===(n=r)||void 0===n?void 0:n.contains(c)))&&t.hideDatePicker()})),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"changePackageType",value:function(data){this.$emit("changePackageType",data)}},{key:"handleDateChange",value:function(t){if(t!==this.value){this.$emit("input",t);var e=Object(L.p)(new Date,new Date(t));this.$sendGTMCustomEvent("Activity Page|Calendar Date Clicked|".concat(this.activityId,",").concat(this.templateId,"|").concat(e)),this.hideDatePicker(),this.changeDate(t)}}},{key:"changeDate",value:function(t){var e=new Date(t).getTime()-(new Date).getTime(),n=Math.ceil(e/864e5);this.$logquery.service({timestamp:Date.now(),level:"I",message:JSON.stringify({package_id:this.packageId,activity_id:this.activityId,tag_name:"desktop_activity_date_difference_select_date",date_diff:n}),tag:"desktop-activity-date-difference"},{headers:{"X-Platform":this.klook.platform}})}},{key:"cleanDate",value:function(){this.$emit("input","")}},{key:"hideDatePicker",value:function(){this.dateShow=!1}},{key:"showDatePicker",value:function(){this.dateShow=!0,this.datePickerSpmTrack()}},{key:"datePickerSpmTrack",value:function(){var t=this,e=document.querySelector(".js-spm-package-date-picker");this.$inhouse.updateBinding(e,{ext:{SelectType:"User"}});var dd=setTimeout((function(){t.$inhouse.track("action","#desktop-package-date-picker"),clearTimeout(dd)}),500)}},{key:"selectDateInOutSideDate",value:function(){return""===this.value}},{key:"formatDay",value:function(t){return Object(_.e)(t,this.$t.bind(this),this.klook.language,1)}},{key:"watchDatePickerOutsideClick",value:function(){document.addEventListener("click",this.handleScroll)}},{key:"clickOutSideDatePicker",value:function(t){var e;this.dateShow&&this.$refs.activityDatePicker&&(this.$refs.activityDatePicker.contains(t.target)||(null===(e=this.$refs.showDatePickerButton)||void 0===e?void 0:e.contains(t.target))||this.hideDatePicker())}},{key:"mounted",value:function(){this.watchDatePickerOutsideClick(),document.addEventListener("click",this.clickOutSideDatePicker)}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll),document.removeEventListener("click",this.clickOutSideDatePicker)}},{key:"datePickerButtonContent",get:function(){return""===this.value||this.selectDateInOutSideDate()?this.$t("activity.new.check_availability"):this.formatDay(this.value)}}]),e}(f.Vue);E([f.State],M.prototype,"klook",void 0),E([Object(f.Prop)()],M.prototype,"styleType",void 0),E([Object(f.Prop)()],M.prototype,"schedules",void 0),E([Object(f.Prop)()],M.prototype,"packageSchedules",void 0),E([Object(f.Prop)()],M.prototype,"value",void 0),E([Object(f.Prop)()],M.prototype,"packageId",void 0),E([Object(f.Prop)()],M.prototype,"activityId",void 0),E([Object(f.Prop)()],M.prototype,"templateId",void 0),E([Object(f.Prop)({default:!0})],M.prototype,"allowTracker",void 0);var B=M=E([Object(f.Component)({components:{ActivityPackageDatePicker:R.a,ActivityCalenderSwitch:$.a,SwitchableCalendar:A.a}})],M),N=(n(2488),Object(C.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-date js-spm-package-date-picker",attrs:{"data-spm-module":"CheckAvailabilityBtn"}},["all-date-btn"===t.styleType?n("div",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Check Availability Clicked",expression:"'Activity Page|Check Availability Clicked'",arg:"click"}],ref:"showDatePickerButton",staticClass:"all-date-btn",attrs:{id:"desktop-package-date-picker","data-spm-item":"__default?trg=manual"},on:{click:t.showDatePicker}},[n("klk-button",{attrs:{type:"outlined",size:"small",round:""}},[n("span",{staticClass:"flex-center"},[n("SvgIcon",{attrs:{name:"desktop-common#calendar-new-sku",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("14111")))])],1)])],1):t._e(),t._v(" "),t.dateShow?n("div",{ref:"activityDatePicker",staticClass:"activity-package-date-picker"},[n("SwitchableCalendar",t._g({attrs:{value:t.value,schedules:t.schedules,"package-schedules":t.packageSchedules,"package-id":t.packageId,"allow-tracker":t.allowTracker},on:{input:t.handleDateChange,changePackageType:t.changePackageType}},t.$listeners))],1):t._e()])}),[],!1,null,"48fd3cb3",null).exports),V=n(881),F=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},W=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.calendarDate=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return V.a.apply(void 0,arguments)}},{key:"showDatePicker",value:function(){this.visible=!0}},{key:"handleClick",value:function(t){var e=t&&t!==this.value?t:null;this.handleDateChange(e)}},{key:"handleCalendarDateCancel",value:function(){this.calendarDate=null,this.$emit("input",null)}},{key:"handleDateChange",value:function(t){var e=this.cellDateList.find((function(e){return e.date===t}));e?this.calendarDate=null:!e&&t&&(this.calendarDate=t),this.$emit("input",t)}},{key:"formatDate",value:function(t){return Object(_.e)(t,this.$t.bind(this),this.klook.language,3)}},{key:"cellDateList",get:function(){return this.availableDateList.filter((function(t,i){return i<3}))}},{key:"availableDateList",get:function(){var t=this,e=[{name:this.$t("today"),date:m()().format("YYYY-MM-DD")},{name:this.$t("search_tomorrow"),date:m()().add(1,"day").format("YYYY-MM-DD")}],n=(this.schedules||[]).filter((function(e){return e.name=t.formatDate(e.date),!e.soldout&&!e.disable}));return e.forEach((function(t){var e=n.find((function(e){return e.date===t.date}));e&&(e.name=t.name)})),n||[]}}]),e}(f.Vue);F([f.State],W.prototype,"klook",void 0),F([Object(f.Prop)()],W.prototype,"schedules",void 0),F([Object(f.Prop)()],W.prototype,"value",void 0),F([Object(f.Prop)()],W.prototype,"warn",void 0);var H=W=F([Object(f.Component)({components:{DesktopCalendar:N,CalendarPopup:k.a,CardSwiper:O.a}})],W),U=(n(2489),Object(C.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-calendar"},[n("div",{staticClass:"cell-wrap"},[t._l(t.cellDateList,(function(e){return n("klk-button",t._b({key:e.name,staticClass:"cell-btn",attrs:{size:"small",round:"",type:e.date===t.value?"primary":"outlined"},on:{click:function(n){return t.handleClick(e.date)}}},"klk-button",t.bindIHTrack({type:"module",spm:"SelectDate",query:{ext:JSON.stringify({Date:e.date})}}),!1),[t._v("\n      "+t._s(e.name)+"\n    ")])})),t._v(" "),t.calendarDate?n("klk-button",t._b({staticClass:"cell-btn",attrs:{size:"small",round:"",type:t.calendarDate===t.value?"primary":"outlined"},on:{click:t.handleCalendarDateCancel}},"klk-button",t.bindIHTrack({exposure:!1,type:"module",spm:"SelectDate",query:{ext:JSON.stringify({Date:t.calendarDate})}}),!1),[n("span",{staticClass:"flex-center"},[n("span",[t._v(t._s(t.formatDate(t.calendarDate)))]),t._v(" "),t.calendarDate===t.value?n("span",{staticClass:"flex-center",on:{click:function(e){return e.stopPropagation(),t.handleCalendarDateCancel(e)}}},[n("SvgIcon",{staticClass:"suffix",attrs:{name:"common#icon_navigation_close_xxxs",size:"14"}})],1):t._e()])]):t._e()],2),t._v(" "),t.availableDateList&&t.availableDateList.length>3?n("DesktopCalendar",{ref:"allDateRef",staticClass:"all-date-box",attrs:{"style-type":"all-date-btn",value:t.value,schedules:t.schedules},on:{change:t.handleDateChange}}):t._e()],1)}),[],!1,null,"f93f1314",null).exports),z=n(955),G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleReload",value:function(){this.$emit("reload")}}]),e}(f.Vue);G([Object(f.Prop)()],Y.prototype,"styleType",void 0),G([Object(f.Prop)({default:"fetching"})],Y.prototype,"state",void 0),G([Object(f.Prop)({default:!1})],Y.prototype,"hideDateFilter",void 0);var K=Y=G([Object(f.Component)({inheritAttrs:!1,components:{CommonSkeletonSlots:z.a,DesktopFilterCalendar:U,PackageDetailFailure:h.a,PackageOptionsCalendar:S}})],Y),J=(n(2490),Object(C.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-calendar-wrap"},["loading"===t.state||"fetching"===t.state?[n("CommonSkeletonSlots",{attrs:{"skeleton-name":"act-date-skeleton"}})]:"failure"===t.state?n("PackageDetailFailure",{staticClass:"calendar-failure",on:{"fetch-detail":t.handleReload}}):t.hideDateFilter?t._e():["desktop-type"===t.styleType?n("DesktopFilterCalendar",t._g(t._b({},"DesktopFilterCalendar",t.$attrs,!1),t.$listeners)):n("PackageOptionsCalendar",t._g(t._b({},"PackageOptionsCalendar",t.$attrs,!1),t.$listeners))]],2)}),[],!1,null,"d2ae4486",null));e.default=J.exports},function(t,e,n){"use strict";n(70),n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(891),m=(n(22),n(14),n(12),n(47),n(11),n(8),n(45),n(99),n(0));function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(m.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"updateExpPackageId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$emit("update:packageId",t)}},{key:"calcReopenObj",get:function(){return this.reopen}},{key:"calcExtraSpecList",get:function(){var t;return null===(t=this.specList)||void 0===t?void 0:t.map((function(t){return O({},t,{attrs:t.attr,attrSet:new Set((t.attr||[]).map((function(t){return t.id})))})}))}},{key:"calcExtraPkgList",get:function(){return this.packageList.map((function(t){var e;return O({},t,{specAttrIds:(null===(e=t)||void 0===e?void 0:e.spec_attr_id)||[]})}))}},{key:"calcPreview",get:function(){return Number(this.isPreview)||0}},{key:"calcActValidPkgList",get:function(){return y.a.getActValidPackages(this.packageList)}},{key:"calcActSomeOpenTicket",get:function(){return y.a.getActSomeOpenTicket(this.packageList)}},{key:"calcActSomeDiscount",get:function(){return y.a.getActSomeDiscount(this.packageList)}},{key:"calcSpecIdList",get:function(){var t;return(null===(t=this.specList)||void 0===t?void 0:t.map((function(t){return t.id})))||[]}},{key:"calcActIsMultiSpec",get:function(){return y.a.getActIsMultiSpec(this.specList)}},{key:"calcActIsMultiSpecWithDiscount",get:function(){return this.calcActIsMultiSpec&&this.calcActSomeDiscount}},{key:"calcActIsSingleSpec",get:function(){return!this.calcActIsMultiSpec}},{key:"calcActIsSingleSpecWithDiscount",get:function(){return this.calcActIsSingleSpec&&this.calcActSomeDiscount}},{key:"calcActIsNewOpenTicket",get:function(){return y.a.getActIsNewOpenTicket(this.activityTicketType)}},{key:"calcActIsHeroPage",get:function(){return y.a.getActIsHeroPage(this.actProductType)}},{key:"calcPkgSelectedObj",get:function(){return y.a.getPkgSelectedData(this.packageList,this.packageId)}},{key:"calcPkgIsNewOpenTicket",get:function(){var t;return y.a.getPkgIsNewOpenTicket(null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.package_ticket_type)}},{key:"calcPkgIsWarmingOrSuspended",get:function(){return y.a.getPkgIsWarmingOrSuspended(this.calcPkgSelectedObj)}},{key:"calcPkgShowBookingAction",get:function(){return!this.isLinePage&&!this.calcPkgIsWarmingOrSuspended}}]),e}(h.Vue);_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isPreview",void 0),_([Object(h.Prop)({type:Number,default:0})],j.prototype,"activityId",void 0),_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isTranslation",void 0),_([Object(h.Prop)({type:Object,default:function(){return{}}})],j.prototype,"publishInfo",void 0),_([Object(h.Prop)({type:Array,default:function(){return[]}})],j.prototype,"specList",void 0),_([Object(h.Prop)({type:String,default:""})],j.prototype,"actProductType",void 0),_([Object(h.Prop)({type:Number,default:0})],j.prototype,"activityTicketType",void 0),_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isLinePage",void 0),_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isInFlashSale",void 0),_([Object(h.Prop)({type:Number,default:0})],j.prototype,"activityPageTemplateId",void 0),_([Object(h.Prop)({type:Number,default:0})],j.prototype,"packageId",void 0),_([Object(h.Prop)({type:Array,default:function(){return[]}})],j.prototype,"packageList",void 0),_([Object(h.Prop)({type:Number,default:0})],j.prototype,"templateId",void 0),_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isSupportShoppingCart",void 0),_([Object(h.Prop)({type:Boolean,default:!1})],j.prototype,"isNswActivity",void 0),_([Object(h.Prop)({type:String,default:""})],j.prototype,"dateDescription",void 0),_([Object(h.Prop)({type:Object})],j.prototype,"heroFilterObj",void 0),_([Object(h.Prop)({type:Array,default:function(){return[]}})],j.prototype,"packageFilterTagList",void 0),_([Object(h.Prop)({type:Object,default:function(){return{}}})],j.prototype,"membershipInfo",void 0),_([Object(h.Prop)({type:Array,default:function(){return[]}})],j.prototype,"packageDetailList",void 0),_([Object(h.Prop)({type:Array,default:function(){return[]}})],j.prototype,"packagesWithSku",void 0),_([Object(h.Prop)({type:Object,default:function(){return{}}})],j.prototype,"activityCloserPrice",void 0),_([Object(h.Prop)({type:Object})],j.prototype,"reopen",void 0);var base=j=_([Object(h.Component)({components:{}})],j),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).isPackageSchedule=!0,t.preSelectedSkuId=0,t.pkgSelectedDate="",t.pkgSelectedTime={},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"setExpPkgScheduleType",value:function(t){this.isPackageSchedule="packageSchedules"===t}},{key:"setExpPkgSelectedTime",value:function(data){this.$set(this,"pkgSelectedTime",data||{})}},{key:"calcArrangementId",get:function(){var t,e;return(null===(t=this.pkgSelectedTime)||void 0===t?void 0:t.arrangement_id)||(null===(e=this.pkgSelectedTime)||void 0===e?void 0:e.arrangementId)}},{key:"calcMaxPurchased",get:function(){var t;return null===(t=this.pkgSelectedTime)||void 0===t?void 0:t.maxPurchased}}]),e}(h.Vue),C=P=w([Object(h.Component)({components:{}})],P),S=(n(20),n(27),n(13)),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).chosenAttrIds=[],t.userSelectedSpec=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleSelectSpec",value:function(t){this.userSelectedSpec=Object(S.a)(t||[])}},{key:"handleDeleteAttrs",value:function(t,e){var n,o;this.chosenAttrIds=this.chosenAttrIds.filter((function(e){return!t.includes(e)})),(null===(n=this.chosenAttrIds)||void 0===n?void 0:n.length)!==(null===(o=e)||void 0===o?void 0:o.length)&&this.$emit("update:packageId",0)}}]),e}(h.Vue),T=x=D([Object(h.Component)({components:{}})],x),I=n(2001),R=n(131),$=n(3),L=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).packageDetailApiDefined={isCache:!0,state:"",reloadConfig:{isReady:!0,delay:240,state:""},url:$.a.activityPackageDetail,params:{is_line_page:!1,translation:!1,package_id:0,preview:0},apiData:null},t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getPackageDetailApiData",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e||{}).package_id_list){t.next=3;break}return t.abrupt("return");case 3:return(o=this.packageDetailApiDefined).params=e,Object(R.merge)(o,n||{}),t.next=8,y.a.getApiDataHandler(this,o);case 8:return r=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"calcPkgDetailObj",get:function(){var t,e,n=null===(e=null===(t=this.packageDetailApiDefined.apiData)||void 0===t?void 0:t.result)||void 0===e?void 0:e[0];return n?(n.use_section=!0,{product_tags:n.product_tags,useSection:n.use_section,sectionContent:n.section_content,usageValidity:n.usage_validity_render_obj,enableTranslationButton:n.enable_translation_button,translationButtonStatus:n.translation_status,packageName:n.package_name,packageId:n.id,activityId:n.activity_id,packageSubName:n.package_sub_name,passStandardActivityInfo:n.pass_standard_activity_info,spec:n.spec}):{}}}]),e}(h.Vue),E=A=L([Object(h.Component)({components:{}})],A),M=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},B=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"calcFirstUnselectedSpecId",get:function(){var t,e=this,n=this.calcExtraSpecList.find((function(t){var n;return!(null===(n=e.chosenAttrIds)||void 0===n?void 0:n.find((function(e){return t.attrSet.has(e)})))}));return(null===(t=n)||void 0===t?void 0:t.id)||0}},{key:"calcActSchedulesParams",get:function(){return{activity_id:this.activityId,preview:this.calcPreview,isLinePage:this.isLinePage}}},{key:"calcPkgSchedulesAndUnitsParams",get:function(){return{pkgSelectedTime:this.pkgSelectedTime,translation:this.isTranslation,package_id:this.packageId,preview:this.calcPreview}}},{key:"calcPkgUnitsParams",get:function(){var t=this.pkgSelectedTime,e=this.isTranslation,n=this.calcPreview;return{pkgSelectedTime:t,arrangement_id:this.calcArrangementId,translation:e,preview:n}}},{key:"calcPkgDetailParams",get:function(){var t=this.isTranslation,e=this.calcPreview,n=this.packageId,o=this.isLinePage;return e?{preview:e,translation:!!t,package_id_list:n,publish_status:"all",is_line_page:!1}:{preview:e,translation:!!t,publish_status:"viewable",package_id_list:n,is_line_page:o}}}]),e}(Object(h.mixins)(base,C,T,I.a,E));M([h.State],B.prototype,"klook",void 0);var N=B=M([Object(h.Component)({components:{}})],B),V=n(16);function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function W(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(m.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},U=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).activitySchedulesApiDefined={state:"",url:$.a.activityPriceSchedules,params:{activity_id:0,preview:0},apiData:null},t.packageSchedulesAndUnitsApiDefined={isCache:!0,getCacheKey:function(t){var e,n;return null===(n=null===(e=t)||void 0===e?void 0:e.params)||void 0===n?void 0:n.package_id},state:"",reloadConfig:{isReady:!0,delay:240,state:""},url:$.a.getPackagePriceSchedulesAndUnits,params:{translation:!1,package_id:0,preview:0},apiData:null},t.packageUnitsApiDefined={cancelTokenConfig:{cancelToken:null,regularUrl:"/v1/usrcsrv/arrangements/{*}/units"},isCache:!1,state:"",url:$.a.getPackageUnits,params:{translation:!1,package_id:0,preview:0},apiData:null},t.activitySkuInfoApiDefined={state:"",url:$.a.activityPackageSkuInfoList,params:{date:"",preview:0,items:[]},apiData:null},t}var n,f,h,m;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getActivitySchedulesApiData",value:(m=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(R.cloneDeep)(e),(null===(o=c)||void 0===o?void 0:o.activity_id)&&(null===(r=c)||void 0===r||!r.isLinePage)){t.next=3;break}return t.abrupt("return");case 3:return(l=this.activitySchedulesApiDefined).params=W({},c,{isLinePage:void 0}),Object(R.merge)(l,n||{}),t.next=8,y.a.getApiDataHandler(this,l);case 8:return d=t.sent,t.abrupt("return",d);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},{key:"getPackageSchedulesAndUnitsApiData",value:(h=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c,l,d,v,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=Object(R.cloneDeep)(e)).package_id){t.next=3;break}return t.abrupt("return");case 3:return(c=this.packageSchedulesAndUnitsApiDefined).params=W({},r,{pkgSelectedTime:void 0}),Object(R.merge)(c,n||{}),t.next=8,y.a.getApiDataHandler(this,c);case 8:return l=t.sent,v=(d=l||{}).success,f=d.result,v&&!Object(R.isEmpty)(null===(o=f)||void 0===o?void 0:o.units)&&this.$set(f,"unitList",y.a.getExpExtraUnitList(r.pkgSelectedTime,{prices:f.units})),t.abrupt("return",l);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"getPackageUnitsApiData",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c,l,d,v,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(R.cloneDeep)(e),null===(o=r)||void 0===o?void 0:o.arrangement_id){t.next=3;break}return t.abrupt("return");case 3:return(c=this.packageUnitsApiDefined).params=W({},r,{pkgSelectedTime:void 0,arrangement_id:void 0}),c.url=Object(V.ob)($.a.getPackageUnits,{arrangementId:r.arrangement_id}),Object(R.merge)(c,n||{}),t.next=9,y.a.getApiDataHandler(this,c);case 9:return l=t.sent,v=(d=l||{}).success,f=d.result,!v||Object(R.isEmpty)(f)||Object(R.isEmpty)(f.prices)||Object(R.isEmpty)(f.inventories)||this.$set(f,"unitList",y.a.getExpExtraUnitList(r.pkgSelectedTime,f)),t.abrupt("return",l);case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)})},{key:"getActivitySkuInfoApiData",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.items)||void 0===n?void 0:n.length){t.next=2;break}return t.abrupt("return");case 2:return(o=this.activitySkuInfoApiDefined).params=e,t.next=6,y.a.getApiDataHandler(this,o);case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getIsLoadingForApiDefined",value:function(t){return y.a.getIsLoadingForApiState(t.state)}},{key:"calcActScheduleList",get:function(){var t,e,n,o=null===(e=null===(t=this.activitySchedulesApiDefined.apiData)||void 0===t?void 0:t.result)||void 0===e?void 0:e.schedules;return(null===(n=o)||void 0===n?void 0:n.length)?o.map((function(t){var e,n;return W({},t,{soldout:!(null===(n=(e=t.stocks).reduce)||void 0===n?void 0:n.call(e,(function(t,e){return t+e.stock}),0))})})):[]}},{key:"calcPkgLegendList",get:function(){var t,e;return(null===(e=null===(t=this.packageSchedulesAndUnitsApiDefined.apiData)||void 0===t?void 0:t.result)||void 0===e?void 0:e.legend)||[]}},{key:"calcPkgSchedulesUnitsObj",get:function(){var t,e=this.packageSchedulesAndUnitsApiDefined.apiData||{},n=e.success,o=e.result;return n&&o?W({},o,{schedules:null===(t=o.schedules)||void 0===t?void 0:t.map((function(t){var e=t.time_slots.reduce((function(t,e){return t+e.stock}),0);return W({},t,{stock:e,soldout:!e})}))}):{}}},{key:"calcPkgScheduleList",get:function(){var t;return(null===(t=this.calcPkgSchedulesUnitsObj)||void 0===t?void 0:t.schedules)||[]}}]),e}(h.Vue),z=U=H([Object(h.Component)({components:{}})],U),G=(n(37),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),Y=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).tagFilterList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getTagFilterSpecTitle",value:function(t){var e,n,o=(null===(e=this.getIncludedTagPackages(t))||void 0===e?void 0:e.length)||0;return(null===(n=this.tagFilterList)||void 0===n?void 0:n.length)?this.$t("98470",{num:o}):this.$t("98480",{num:o})}},{key:"getIncludedTagPackages",value:function(t){return this.computeIncludedTagPackages(this.tagFilterList,t)}},{key:"getTagPkgNum",value:function(t,e){return this.computeIncludedTagPackages(t,e).length}},{key:"getPackageTagSetList",value:function(t){return(t||[]).map((function(t){var e,n;return{pkg:t,tagSet:new Set((null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.filter_tag_list)||[])}}))}},{key:"computeIncludedTagPackages",value:function(t,e){var n;if(!(null===(n=t)||void 0===n?void 0:n.length))return e||[];var o=t.map((function(t){var e,n,o,r;return null===(r=null===(o=null===(e=t)||void 0===e?void 0:(n=e).split)||void 0===o?void 0:o.call(n,"::"))||void 0===r?void 0:r[1]})).filter(Boolean);return this.getPackageTagSetList(e).filter((function(t){var e=t.tagSet;return o.every((function(t){return e.has(t)}))})).map((function(t){return t.pkg}))}}]),e}(h.Vue),K=Y=G([Object(h.Component)({components:{}})],Y),J=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},X=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"autoSelectFirstAttr",value:function(t){var e,n,o=t||(null===(e=null===this||void 0===this?void 0:this.$refs)||void 0===e?void 0:e.attrWrap);(null===(n=o)||void 0===n?void 0:n.autoSelectFirstAttr)&&o.autoSelectFirstAttr()}},{key:"setExpAutoSelectSkuHandler",value:function(data){return y.a.setExpAutoSelectSku(data)||""}},{key:"getExpAutoSetFeasibleDate",value:function(t){var e=t.isFirstDate,n=t.packageSchedules,o=t.currentSelectedPackage;return y.a.getExpAutoSetDate({isFirstDate:e,packageSchedules:n,currentSelectedPackage:o})}}]),e}(h.Vue),Q=X=J([Object(h.Component)({components:{}})],X),Z=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},tt=Object(h.namespace)("traveller/activity"),et=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showFilterNone=!1,t.showTagFilterNone=!1,t.currentUnits=[],t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"toggleFilterNone",value:function(t){var e;this.showFilterNone=!1,this.showTagFilterNone=!!t&&(null===(e=this.tagFilterList)||void 0===e?void 0:e.length)>0}},{key:"changeExpUnitCount",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y,m,k,O,_,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.priceId,o=e.type,r=e.currentSelectedPackage,c=e.hideLoading,l=e.passPreSettlementApi,d=e.closeAttractionPop,v=e.unitList,y=this.calcArrangementId,null===(f=v)||void 0===f?void 0:f.length){t.next=4;break}return t.abrupt("return");case 4:if(m=v.find((function(t){return t.priceId===n}))){t.next=7;break}return t.abrupt("return");case 7:if("function"==typeof d&&d(),k=m.count,O=m.priceMinPax,_=m.required,"add"!==o){t.next=13;break}0===k?m.count+=Math.max(O,1):m.count++,t.next=16;break;case 13:if(0!==k){t.next=15;break}return t.abrupt("return");case 15:k>O?m.count--:_||(m.count-=O);case 16:if(v.forEach((function(t){t.requireMinPax=!t.required&&t.count>=t.priceMinPax&&t.priceMinPax>1})),l||null===(h=r)||void 0===h||!h.has_discount){t.next=21;break}return j={hideLoading:c,page_from:2,arrangement_id:y,sku_list:v.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}})),pid:r.package_id},t.next=21,this.getPreSettlementApiData(j);case 21:return t.abrupt("return",!0);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"calcActInDatePacakges",get:function(){return y.a.getActInDatePackages(this.calcActScheduleObj,this.calcActValidPkgList)}},{key:"calcActScheduleObj",get:function(){var t=this.pkgSelectedDate,e=this.calcActScheduleList;return t?e.find((function(e){return e.date===t})):null}},{key:"calcScheduleList",get:function(){var t=this.calcArrangementId,e=this.calcPkgScheduleList,n=this.calcActScheduleList;return t?e:n}},{key:"calcPkgUnitsObj",get:function(){var t,e;return this.calcArrangementId?(null===(t=this.packageUnitsApiDefined.apiData)||void 0===t?void 0:t.result)||{}:(null===(e=this.packageSchedulesAndUnitsApiDefined.apiData)||void 0===e?void 0:e.result)||{}}},{key:"calcTotalUnitCount",get:function(){return y.a.getExpTotalUnitCount(this.currentUnits)}},{key:"calcUnitInventorieObj",get:function(){var t;return(null===(t=this.calcPkgUnitsObj)||void 0===t?void 0:t.inventories)||{}}}]),e}(Object(h.mixins)(N,Q,z,K));Z([tt.Getter],et.prototype,"preSettlementTips2getters",void 0),Z([tt.Action],et.prototype,"getPreSettlementApiData",void 0),et=Z([Object(h.Component)({components:{}})],et);e.a=et},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=(n(30),n(20),n(27),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(131),m=n(1929),k=(n(1930),n(16)),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=Object(h.namespace)("experience"),j=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n,f;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getParams",value:function(){var t=this.countryId,e=this.cityId,n=this.frontendId;return["ExperienceAroundTheWorld"].includes(this.$route.name)?{}:{category_id:n,country_id:t,city_id:e}}},{key:"initData",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.moduleData){t.next=2;break}return t.abrupt("return");case 2:return n=this.$axios,t.next=5,Object(k.q)(this.getParams(),n);case 5:o=t.sent,this.$store.commit("experience/SET_EXP_INTERNAL_LINK_OBJ",null===(e=o)||void 0===e?void 0:e.result);case 7:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initData();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcModuleData",get:function(){var t=this.moduleData||this.expInternalLinkObj2state||{};return Object(y.cloneDeep)(t)}}]),e}(h.Vue);O([h.State],j.prototype,"klook",void 0),O([_.State],j.prototype,"expInternalLinkObj2state",void 0),O([_.State],j.prototype,"countryId",void 0),O([_.State],j.prototype,"cityId",void 0),O([_.State],j.prototype,"frontendId",void 0),O([Object(h.Prop)()],j.prototype,"moduleData",void 0);var w=j=O([Object(h.Component)({components:{KlkInternalLinking:m.a}})],j),P=(n(1273),n(43)),component=Object(P.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return this.calcModuleData.seo_static_link&&this.calcModuleData.seo_static_link.length?e("klk-internal-linking",{staticClass:"exp-common-reset-internal-linking",attrs:{"module-data":this.calcModuleData,platform:this.klook.platform,language:this.klook.language}}):this._e()}),[],!1,null,"2b094af5",null);e.default=component.exports},,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1443),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"close",value:function(){this.$emit("close"),this.$emit("update:visible",!1)}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"title",void 0),y([Object(f.Prop)()],m.prototype,"visible",void 0);var k=m=y([Object(f.Component)({components:{LayerHeader:h.a}})],m),O=(n(2397),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-modal",t._b({staticClass:"activity-modal-wrap",attrs:{transition:"slide-bottom",fullscreen:"",open:t.visible,scrollable:"","show-default-footer":!1}},"klk-modal",t.$attrs,!1),[n("div",{staticClass:"activity-modal_head",attrs:{slot:"header"},slot:"header"},[n("LayerHeader",{attrs:{title:t.title},on:{close:t.close}}),t._v(" "),t._t("header")],2),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n(30);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),footer=n(1026),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"valid",get:function(){return this.moreTitle&&"success"===this.state&&!this.sectionVisible}},{key:"moreTitle",get:function(){var t,e,n,o,r="";return r=(null===(t=this.businessData)||void 0===t?void 0:t.bottom_button_title)?null===(e=this.businessData)||void 0===e?void 0:e.bottom_button_title:null===(o=null===(n=this.sectionData)||void 0===n?void 0:n.data)||void 0===o?void 0:o.bottom_button_title,this.$t.apply(this,[].concat(r))}},{key:"moreDeepLink",get:function(){var t,e,n,o;return(null===(t=this.businessData)||void 0===t?void 0:t.bottom_button_deep_link)?null===(e=this.businessData)||void 0===e?void 0:e.bottom_button_deep_link:null===(o=null===(n=this.sectionData)||void 0===n?void 0:n.data)||void 0===o?void 0:o.bottom_button_deep_link}},{key:"link",get:function(){return this.moreDeepLink?this.$href(this.moreDeepLink):"javascript:void(0);"}},{key:"name",get:function(){var t,e;return(null===(e=null===(t=this.sectionData)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.name)||""}},{key:"inhouseModule",get:function(){var t,e=((null===(t=this.sectionData)||void 0===t?void 0:t.meta)||{}).type,n=void 0===e?"":e;return"".concat(this.name,":").concat(n,":::BottomButton")}}]),e}(n(893).a),m=y=h([Object(f.Component)({components:{Footer:footer.a}})],y),k=(n(1192),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return this.valid?e("Footer",{staticClass:"j-section-footer",attrs:{"data-spm-module":this.inhouseModule+"?trg=manual","data-business-name":this.name,"more-title":this.moreTitle,"more-deep-link":this.link}}):this._e()}),[],!1,null,"7fcab07e",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){this.$emit("fetch-detail")}},{key:"mounted",value:function(){var t=this.$el;this.$emit("mounted",t.offsetHeight)}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(1962),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package_detail_failure"},[n("div",{staticClass:"package_detail_failure-tip"},[t._v(t._s(t.$t("client_network_failure")))]),t._v(" "),n("div",{staticClass:"package_detail_failure-button",on:{click:t.handleClick}},[t._v(t._s(t.$t("global.reload")))])])}),[],!1,null,null,null);e.a=component.exports},,,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isSmall",get:function(){return"small"===this.size||"mobile"===this.platform}}]),e}(f.Vue);h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0),h([Object(f.Prop)({default:""})],y.prototype,"text",void 0),h([Object(f.Prop)({default:""})],y.prototype,"size",void 0);var m=y=h([f.Component],y),k=(n(1179),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"none-search-result",class:{"is-small":this.isSmall}},[e("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:"https://res.klook.com/image/upload/q_80/v1652777018/web3.0/Empty_State_Experience_v2.png",expression:"'https://res.klook.com/image/upload/q_80/v1652777018/web3.0/Empty_State_Experience_v2.png'",arg:"background-image",modifiers:{container:!0}}],staticClass:"no-result-img"}),this._v(" "),e("p",{staticClass:"no-result-title"},[this._v(this._s(this.text||this.$t("76901")))])])}),[],!1,null,"094a7dcf",null);e.a=component.exports},,,,,,,,,function(t,e,n){"use strict";var o=n(958);n.n(o).a},function(t,e,n){"use strict";var o=n(959);n.n(o).a},function(t,e,n){"use strict";var o=n(960);n.n(o).a},function(t,e,n){"use strict";var o=n(961);n.n(o).a},function(t,e,n){"use strict";var o=n(962);n.n(o).a},function(t,e,n){"use strict";var o=n(963);n.n(o).a},function(t,e,n){"use strict";var o=n(964);n.n(o).a},function(t,e,n){"use strict";var o=n(965);n.n(o).a},function(t,e,n){"use strict";var o=n(966);n.n(o).a},function(t,e,n){"use strict";var o=n(967);n.n(o).a},function(t,e,n){"use strict";var o=n(968);n.n(o).a},function(t,e,n){"use strict";var o=n(969);n.n(o).a},function(t,e,n){"use strict";var o=n(970);n.n(o).a},function(t,e,n){"use strict";var o=n(971);n.n(o).a},function(t,e,n){"use strict";var o=n(972);n.n(o).a},function(t,e,n){"use strict";var o=n(973);n.n(o).a},function(t,e,n){"use strict";var o=n(974);n.n(o).a},function(t,e,n){"use strict";var o=n(975);n.n(o).a},function(t,e,n){"use strict";var o=n(976);n.n(o).a},function(t,e,n){"use strict";var o=n(977);n.n(o).a},function(t,e,n){"use strict";var o=n(978);n.n(o).a},function(t,e,n){"use strict";var o=n(979);n.n(o).a},function(t,e,n){"use strict";var o=n(980);n.n(o).a},function(t,e,n){"use strict";n(22),n(14),n(11),n(12),n(47),n(52),n(53),n(8),n(37),n(70);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(10),m=n.n(y),k=n(131),O=n(85),_=n(16),j=n(1040);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=arguments[0],e=P({},this.$listeners);return t(j.a,{attrs:{isSavingPoptip:this.isSavingPoptip,preTotalPrice:this.preTotalPrice,promotionDiscountText:this.promotionDiscountText,sellPrice:this.price,credits:this.credits,creditsVisible:this.useCredits&&!this.isGuestCheckout,vip:this.calcVip},on:P({},e)})}},{key:"calcVip",get:function(){var t,e,n,o=null===(t=this.preTotalPrice)||void 0===t?void 0:t.credits_tag;if(o)return Object(k.cloneDeep)(o);var r=null===(n=null===(e=this.units)||void 0===e?void 0:e.find((function(t){var e;return null===(e=t)||void 0===e?void 0:e.credits_tag})))||void 0===n?void 0:n.credits_tag;return!!r&&Object(k.cloneDeep)(P({},r,{text:"".concat(r.text).concat(this.credits)}))}},{key:"price",get:function(){if(m()(this.units))return 0;var t=(this.units[0].sellingPrice||"").toString().split(".")[1]||"",e=this.units.reduce((function(t,e){return t+e.sellingPrice*e.count}),0);return this.bookingDays?(e*this.bookingDays).toFixed(Number(t.length)):e.toFixed(Number(t.length))}},{key:"credits",get:function(){var t,e=parseInt(null===(t=this.preTotalPrice)||void 0===t?void 0:t.credits);if(e>=0)return e;if(m()(this.units))return 0;var n=this.units.reduce((function(t,e){return t+parseFloat((e.credits||0).toString())*e.count}),0);return this.bookingDays?parseInt((n*this.bookingDays).toString()):parseInt(n.toString())}},{key:"promotionDiscountText",get:function(){if(!this.isInPromotion||m()(this.units))return"";var t=this.units.reduce((function(t,e){return t+e.sellingPrice*e.count}),0),e=this.units.reduce((function(t,e){return t+e.originalPrice*e.count}),0),n=Number(e-t);if(n>0){var o=(this.units[0].sellingPrice||"").toString().split(".")[1]||"";return this.$t("16579",{0:Object(_.y)(n.toFixed(Number(o.length))),currency:O.b[this.klook.currency]})}return""}}]),e}(h.Vue);C([h.State],S.prototype,"klook",void 0),C([Object(h.Prop)({default:0})],S.prototype,"bookingDays",void 0),C([Object(h.Prop)()],S.prototype,"isSavingPoptip",void 0),C([Object(h.Prop)()],S.prototype,"preTotalPrice",void 0),C([Object(h.Prop)()],S.prototype,"units",void 0),C([Object(h.Prop)()],S.prototype,"isInPromotion",void 0),C([Object(h.Prop)()],S.prototype,"promotionDetail",void 0),C([h.Getter],S.prototype,"useCredits",void 0),C([h.Getter],S.prototype,"isGuestCheckout",void 0),S=C([Object(h.Component)({components:{BottomBarSettlement:j.a}})],S),e.a=S},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y={"max-width":"960px",width:"auto",height:"auto",position:"static",transform:"none"},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!0,t.currentIdx=0,t.canMove=!1,t.imgLeft=0,t.imgTop=0,t.imageSize=0,t.imageStyle={"max-width":"960px",height:"auto"},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onImageSizeChange",value:function(t){if(t){var e=this.$refs.bigImage.naturalWidth,n=this.$refs.bigImage.naturalHeight;this.imageStyle=e>n?{width:"auto",height:"100%"}:{height:"auto",width:"100%"}}else this.initSize()}},{key:"changeIdx",value:function(t){if(this.imageSize=0,"add"===t){var a=this.currentIdx+=1;this.currentIdx=a>=this.images.length?0:a}else{var e=this.currentIdx-=1;this.currentIdx=e<0?this.images.length-1:e}this.initSize()}},{key:"initSize",value:function(){this.$refs.bigImage.naturalWidth>960?this.checkSize():this.imageStyle={"max-width":"960px",width:"auto",height:"auto",left:"50%",top:"50%"}}},{key:"mouseDown",value:function(t){this.canMove=!0;var e=t.target.getBoundingClientRect();this.imgLeft=t.clientX-e.left,this.imgTop=t.clientY-e.top}},{key:"mouseUp",value:function(){this.canMove=!1}},{key:"moveImage",value:function(t){if(this.canMove){var e=this.$refs.bigImage,n=t.clientX-this.imgLeft,o=t.clientY-this.imgTop;e.style.left=n+Math.round(e.offsetWidth/2)-25+"px",e.style.top=o+Math.round(e.offsetHeight/2)-25+"px"}t.cancelBubble=!0,t.returnValue=!1}},{key:"hideElement",value:function(){this.$nextTick((function(){document.querySelector(".activity-package-detail-big-images .footer .klk-counter-input").style.display="none"}))}},{key:"close",value:function(){this.visible=!1,this.$emit("close")}},{key:"checkSize",value:function(){this.images[this.currentIdx].width>960&&(this.imageStyle=y)}},{key:"mounted",value:function(){this.visible=!0,this.currentIdx=this.index,this.hideElement(),this.checkSize()}}]),e}(f.Vue);h([f.State],m.prototype,"klook",void 0),h([Object(f.Prop)()],m.prototype,"images",void 0),h([Object(f.Prop)({default:0})],m.prototype,"index",void 0),h([Object(f.Watch)("imageSize")],m.prototype,"onImageSizeChange",null);var k=m=h([Object(f.Component)({components:{}})],m),O=(n(1882),n(1883),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-modal",{attrs:{"modal-class":"activity-package-detail-big-images",transition:"slide-bottom",fullscreen:"","overlay-closable":!0,"esc-press-closable":!0,closable:!0,open:t.visible,"show-default-footer":!1},on:{"update:open":function(e){t.visible=e},"on-close":t.close,close:t.close}},[n("p",{staticClass:"image-desc"},[t._v(t._s(t.images[t.currentIdx].desc))]),t._v(" "),n("div",{staticClass:"activity-package-detail-big-images-body",on:{mousemove:t.moveImage}},[n("SvgIcon",{staticClass:"close",attrs:{name:"desktop-common#icon-close",size:"24"},nativeOn:{click:function(e){return t.close(e)}}}),t._v(" "),n("div",{staticClass:"image-container"},[n("img",{ref:"bigImage",style:t.imageStyle,attrs:{src:t.images[t.currentIdx].url||t.images[t.currentIdx].image_url,alt:""},on:{mousedown:t.mouseDown,mouseup:t.mouseUp}}),t._v(" "),t.images.length>1?n("div",{staticClass:"control-btn prev"},[n("button",{staticClass:"ctrl-btn",attrs:{slot:"prev"},on:{click:function(e){return t.changeIdx("sub")}},slot:"prev"},[n("klk-icon",{attrs:{type:"icon_navigation_chevron_left_xs",size:20}})],1)]):t._e(),t._v(" "),t.images.length>1?n("div",{staticClass:"control-btn next"},[n("button",{staticClass:"ctrl-btn",attrs:{slot:"next"},on:{click:function(e){return t.changeIdx("add")}},slot:"next"},[n("klk-icon",{attrs:{type:"icon_navigation_chevron_right_xs",size:20}})],1)]):t._e()]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"index"},[t._v(t._s(t.currentIdx+1)+" / "+t._s(t.images.length))]),t._v(" "),n("div",{staticClass:"scale"},[n("klk-counter",{attrs:{readonly:"",min:0,max:1},model:{value:t.imageSize,callback:function(e){t.imageSize=e},expression:"imageSize"}})],1)])],1)])}),[],!1,null,"55baf4ea",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bigImageVisible=!1,t.bigImageIndex=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showBigImgModule",value:function(t){this.bigImageVisible=!0,this.bigImageIndex=t}},{key:"closeBigImage",value:function(){var t=this;this.$nextTick((function(){t.bigImageVisible=!1}))}},{key:"imagesStyle",get:function(){return this.specStyle?this.specStyle:"slideDetail"===this.type?{width:"220px"}:{width:"800px"}}}]),e}(f.Vue);j([f.State],w.prototype,"klook",void 0),j([Object(f.Prop)()],w.prototype,"specStyle",void 0),j([Object(f.Prop)({default:"slideDetail"})],w.prototype,"type",void 0),j([Object(f.Prop)({default:[]})],w.prototype,"images",void 0);var P=w=j([Object(f.Component)({components:{ActivityPackageDetailBigImages:_}})],w),C=(n(1884),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.images&&t.images.length>0?n("div",{staticClass:"detail-images",style:t.imagesStyle},[n("klk-card-swiper",{attrs:{"item-gap":"slideDetail"===t.type?0:12,"item-width":220}},t._l(t.images,(function(e,o){return n("klk-card-swiper-item",{key:o},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:e.url||e.image_url,expression:"item.url || item.image_url",arg:"background-image",modifiers:{container:!0}}],staticClass:"detail-image-item",attrs:{"data-img-type":"desktopActivityDetailImages"},on:{click:function(e){return t.showBigImgModule(o)}}})])})),1)],1):t._e(),t._v(" "),t.bigImageVisible?n("ActivityPackageDetailBigImages",{attrs:{images:t.images,index:t.bigImageIndex},on:{close:t.closeBigImage}}):t._e()],1)}),[],!1,null,"44edf9a0",null));e.a=C.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(956),y=n(1936),base=n(1898),m=n(1911),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isLayerVisible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleLayerShow",value:function(){this.promotionFilteredNone||(this.getActivityPromotion(),this.isLayerVisible=!0,this.$sendGTMCustomEvent("Activity Page|ViewPackageWithPromotion_Click|".concat(this.activityId,"|").concat(this.templateId)))}},{key:"handleLayerHide",value:function(){this.isLayerVisible=!1}},{key:"mounted",value:function(){this.$sendGTMCustomEvent("Activity Page|ViewPackageWithPromotion_Appear|".concat(this.activityId,"|").concat(this.templateId))}}]),e}(base.a),_=O=k([Object(f.Component)({components:{ActivityLayer:h.a,PackagePromotionContent:m.a,HomeCardSkeleton:y.a}})],O),j=(n(2136),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-promotion-wrapper-mobile"},[n("div",{staticClass:"activity-package-promotion_head",on:{click:t.handleLayerShow}},[n("span",{staticClass:"package-promotion-tag"},[t._v("\n      "+t._s(t.$t("16563"))+"\n    ")]),t._v(" "),n("div",{staticClass:"package-promotion-wrapper"},[n("span",{staticClass:"package-promotion-text"},[t._v("\n        "+t._s(t.promotionFilteredNone?t.$t("78197"):t.$t("16575"))+"\n      ")])]),t._v(" "),n("div",{staticClass:"package-promotion-icon"},[t.promotionFilteredNone?t._e():n("SvgIcon",{staticStyle:{"margin-left":"16px"},attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",height:"18",width:"18",color:"#4A4A4A"}})],1)]),t._v(" "),n("klk-bottom-sheet",{staticClass:"coupon-list-bottom-sheet",attrs:{"show-close":"",visible:t.isLayerVisible,title:t.$t("12861-select_package")},on:{"update:visible":function(e){t.isLayerVisible=e},close:t.handleLayerHide}},[n("PackagePromotionContent",t._g({ref:"promotionContent",attrs:{type:"mobile","promotion-list":t.promotionList,status:t.fetchStatus,"package-id":t.packageId,"template-id":t.templateId,"activity-id":t.activityId,"package-selected-date":t.packageSelectedDate,"valid-packages":t.validPackages,"included-packages":t.includedPackages,"packages-in-date":t.packagesInDate},on:{close:t.handleLayerHide,refresh:t.getActivityPromotion}},t.$listeners))],1)],1)}),[],!1,null,"0ef1b008",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(47);var o=n(1471),r={name:"ImageViewer",props:{list:{type:Array,default:function(){return[]}},start:{type:Number,default:0}},data:function(){return{isShow:!0,virtualData:{slides:[]},currentIndex:0}},computed:{currentSlide:function(){return this.list[this.currentIndex]}},watch:{list:function(t){this.$swiper?(this.$swiper.virtual.removeAllSlides(),this.$swiper.virtual.appendSlide(t)):this.init()},start:function(t){this.$swiper.slideTo(t)}},methods:{close:function(){this.isShow=!1},init:function(){var t=this.$el.querySelector(".swiper-container"),e=this;this.$swiper=new o.a(t,{virtual:{slides:e.list,renderExternal:function(data){e.virtualData=data,e.currentIndex=this.realIndex||0}},spaceBetween:16,zoom:{maxRatio:2,minRatio:1},initialSlide:this.start,pagination:{el:this.$el.querySelector(".swiper-pagination"),type:"fraction"}})}}},c=(n(1368),n(43)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"image-viewer"},[n("div",{staticClass:"swiper-container"},[n("div",{staticClass:"swiper-wrapper"},t._l(t.virtualData.slides,(function(e,o){return n("div",{key:o,staticClass:"swiper-slide",style:{left:t.virtualData.offset+"px"}},[n("div",{staticClass:"swiper-zoom-container"},[n("img",{staticClass:"swiper-lazy",attrs:{src:e.src||e}})])])})),0)]),t._v(" "),n("div",{staticClass:"image-viewer-top"},[t._t("top",[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},on:{click:t.close}},[n("path",{attrs:{"fill-rule":"evenodd",fill:"currentColor",d:"M12.033 11.33l6.72-6.72a.504.504 0 0 1 .706.001c.196.196.197.51.001.706l-6.72 6.72 6.649 6.648a.504.504 0 0 1-.002.706.498.498 0 0 1-.706.001l-6.648-6.648-6.717 6.718a.504.504 0 0 1-.706-.001.498.498 0 0 1-.001-.706l6.717-6.718-6.789-6.789a.504.504 0 0 1 .001-.706.498.498 0 0 1 .706-.001l6.79 6.79z"}})])],{slide:t.currentSlide,close:t.close}),t._v(" "),n("div",{staticClass:"swiper-pagination"})],2),t._v(" "),n("div",{staticClass:"flex image-viewer-bottom"},[t._t("footer",null,{slide:t.currentSlide})],2)])}),[],!1,null,null,null);e.default=component.exports},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(988);n.n(o).a},function(t,e,n){"use strict";var o=n(989);n.n(o).a},function(t,e,n){"use strict";var o=n(990);n.n(o).a},function(t,e,n){"use strict";var o=n(991);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(992);n.n(o).a},function(t,e,n){"use strict";var o=n(993);n.n(o).a},function(t,e,n){"use strict";var o=n(994);n.n(o).a},function(t,e,n){"use strict";var o=n(995);n.n(o).a},function(t,e,n){"use strict";var o=n(996);n.n(o).a},function(t,e,n){"use strict";var o=n(997);n.n(o).a},function(t,e,n){"use strict";var o=n(998);n.n(o).a},function(t,e,n){"use strict";var o=n(999);n.n(o).a},function(t,e,n){"use strict";var o=n(1e3);n.n(o).a},function(t,e,n){"use strict";var o=n(1001);n.n(o).a},function(t,e,n){"use strict";n.d(e,"f",(function(){return d})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return y})),n.d(e,"e",(function(){return m}));var o=n(25),r=(n(70),n(52),n(53),n(8),n(7)),c=n.n(r),l=n(131);function d(){self.onmessage=function(t){self.postMessage(t.data,void 0)}}function v(t){var e="(".concat(t.toString(),")()"),n=new Blob([e]),o=window.URL.createObjectURL(n);return new Worker(o)}function f(t){if(Array.isArray(t))return t.map((function(t){var e=c()(t||void 0).toString();return new Date(e)}));var e=c()(t||void 0).toString();return new Date(e)}function h(t){for(var e=Object(l.cloneDeep)(t||[]),i=1;i<e.length;i++){var n=e[i-1].date,o=c()(n).clone().add(1,"days");o.isSame(e[i].date,"day")||e.splice(i,0,{date:o.format("YYYY-MM-DD"),legend_keys:null,selling_price:"0",soldout:!1,stock:0,deleted:!0})}return e}function y(t,e){return c()(t).format(e||"YYYY-MM-DD")}function m(t,e){var n,r=c()(t),l=r.format("YYYY-MM-DD"),d=e.schedules,v=e.rangeDateList,f=e.minPax,h=e.minDays,y=e.maxDays,m=e.maxDate;return!!!(null===(n=d)||void 0===n?void 0:n.find((function(t){return t.date===l})))||!!d.find((function(t){var e=t.date,n=Object(o.a)(v,2),l=n[0],d=n[1],k=l?c()(l).clone():"",O=d?c()(d).clone():"";return k&&!O?!(!r.isAfter(k,"day")||!r.isBefore(k.clone().add(h-1,"days"),"day"))||(t.deleted&&r.isSame(t.date,"day")||r.isAfter(k.clone().add(y-1,"days"),"day")||(t.stock<f||!t.stock||t.deleted)&&(r.isBefore(k,"day")&&r.isBefore(e,"day")&&r.clone().add(h,"days").isAfter(e,"day")||k.isBefore(e,"day")&&r.isAfter(e,"day"))):k&&O?t.deleted&&r.isSame(t.date,"day")||(t.stock<f||!t.stock||t.deleted)&&r.isBefore(e,"day")&&r.clone().add(h,"days").isAfter(e,"day"):t.deleted&&r.isSame(t.date,"day")||(t.stock<f||!t.stock||t.deleted)&&r.isBefore(e,"day")&&r.clone().add(h,"days").isAfter(e,"day")||r.clone().add(h-1,"days").isAfter(m,"day")}))}},function(t,e,n){"use strict";var o=n(1002);n.n(o).a},function(t,e,n){},function(t,e,n){"use strict";var o=n(1003);n.n(o).a},function(t,e,n){"use strict";var o=n(1004);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"promotionDetail",get:function(){return{currency:this.currency,discount:this.discount,is_subscribed:this.is_subscribed,original_selling_price:this.original_selling_price,package_id:this.package_id,selling_price:this.selling_price,market_price:this.market_price,promotion_event:this.promotion_event}}},{key:"isWarmUp",get:function(){var t;return 4===(null===(t=this.promotion_event)||void 0===t?void 0:t.status)}},{key:"isInPromotion",get:function(){var t,e,n="mobile"===this.klook.platform?"mweb":"web",o=(null===(t=this.promotion_event)||void 0===t?void 0:t.platforms)||[];return 5===(null===(e=this.promotion_event)||void 0===e?void 0:e.status)&&o.includes(n)}},{key:"isShowPromotionDetail",get:function(){var t,e;return 4===(null===(t=this.promotion_event)||void 0===t?void 0:t.status)||5===(null===(e=this.promotion_event)||void 0===e?void 0:e.status)}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"currency",void 0),h([Object(f.Prop)()],y.prototype,"discount",void 0),h([Object(f.Prop)()],y.prototype,"is_subscribed",void 0),h([Object(f.Prop)()],y.prototype,"original_selling_price",void 0),h([Object(f.Prop)()],y.prototype,"package_id",void 0),h([Object(f.Prop)()],y.prototype,"selling_price",void 0),h([Object(f.Prop)()],y.prototype,"market_price",void 0),h([Object(f.Prop)()],y.prototype,"promotion_event",void 0),h([f.State],y.prototype,"klook",void 0),y=h([f.Component],y),e.a=y},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(22),n(12);var o=n(0),r=(n(20),n(27),n(70),n(86),n(13)),c=(n(61),n(14),n(11),n(8),n(45),n(99),n(31)),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(16);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).chosenAttrIds=[],t.isPackageNotAvailable=!1,t.isScheduleNotAvailable=!1,t.selectSpecIdSet=new Set,t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"valueChange",value:function(t){t&&t.length>0?this.chosenAttrIds=this.addSingleAttrIds(t):(this.chosenAttrIds="desktop"===this.klook.platform?[]:this.addSingleAttrIds(),this.chosenAttrIds.length>0&&this.packageId&&this.$emit("selectPackage",this.packageId))}},{key:"specListChange",value:function(t,e){if(t){var n=!1,o=!1,r=!0,c=!1,l=void 0;try{for(var d,v=t[Symbol.iterator]();!(r=(d=v.next()).done);r=!0){var f=d.value.attr;n||(n=f.some((function(t){return!t.isPackageMatch&&t.isScheduleMatch}))),o||(o=f.some((function(t){return!t.isScheduleMatch})))}}catch(t){c=!0,l=t}finally{try{r||null==v.return||v.return()}finally{if(c)throw l}}this.isPackageNotAvailable=n,this.isScheduleNotAvailable=o,t&&e&&this.$emit("specFilterNone",0===t.length)}}},{key:"includedAttrIdSetChange",value:function(t){var e=this.chosenAttrIds.filter((function(e){return!t.has(e)}));this.$emit("deleteAttrs",Object(r.a)(e),this.specList)}},{key:"autoSelectFirstAttr",value:function(){var t=this;this.$nextTick((function(){var e,n,o,c,l,d,v=Object(r.a)(t.chosenAttrIds);if(null===(e=t.chosenAttrIds.filter((function(e){return t.includedTagAttrIdSet.has(e)})))||void 0===e?void 0:e.length){var f=t.heroSlideToCenter;"function"==typeof f&&f()}else{t.chosenAttrIds=[];var h=null===(n=t.specList)||void 0===n?void 0:n[0],y=-1,m=!0,k=!1,O=void 0;try{for(var _,j=((null===(o=h)||void 0===o?void 0:o.attr)||[])[Symbol.iterator]();!(m=(_=j.next()).done);m=!0){var w=_.value;if(y+=1,w.isPackageMatch&&w.isScheduleMatch&&w.isIncluded&&w.isTagIncluded)return void t.handleSelect(w,h,{type:"1stSystem",index:y,len:(d=null===(l=null===(c=h)||void 0===c?void 0:c.attr)||void 0===l?void 0:l.length,null!=d?d:-1)})}}catch(t){k=!0,O=t}finally{try{m||null==j.return||j.return()}finally{if(k)throw O}}t.$emit("deleteAttrs",v,t.specList)}}))}},{key:"getAttrKey",value:function(t){return Object(r.a)(t).sort().join(",")}},{key:"addIdToAttrKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.chosenAttrIds;return this.getAttrKey(Array.from(new Set(e).add(t)))}},{key:"getIsScheduleMatch",value:function(t){return!(this.schedule&&!this.isNewOpenTicket)||!!this.packagesInSchedule.find((function(e){var n;return null===(n=e.spec_attr_id)||void 0===n?void 0:n.includes(t.id)}))}},{key:"getIsPackageMatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.chosenAttrIds,n=t.id,o=this.addIdToAttrKey(n,e),c=this.packagesInSchedule.some((function(t){return[].concat(Object(r.a)(e),[n]).every((function(e){var n;return null===(n=t.spec_attr_id)||void 0===n?void 0:n.includes(e)}))}));return!(!this.includedAttrIdGroups.has(o)||!this.isNewOpenTicket&&!c)}},{key:"removeAttrIdInSameSpec",value:function(t){return this.chosenAttrIds.filter((function(e){return!t.attr.find((function(t){return t.id===e}))}))}},{key:"formatAttrIdGroups",value:function(t){var e=this;return(t||[]).reduce((function(t,n){var o=n.spec_attr_id||[];return Object(m.L)(o).reduce((function(t,n){return t.add(e.getAttrKey(n))}),t)}),new Set)}},{key:"addSelectSpecIdSet",value:function(t){this.selectSpecIdSet.delete(t),this.selectSpecIdSet.add(t),this.$emit("selectSpec",Array.from(this.selectSpecIdSet))}},{key:"addSingleAttrIds",value:function(t){if(this.isEnableReverseSelect)return t||[];var e=(t||[]).concat(this.singleAttrIds);return Array.from(new Set(e))}},{key:"isAttrDisabled",value:function(t){return!t.isScheduleMatch||!t.isPackageMatch}},{key:"change",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.id,c=t.isScheduleMatch,l=t.isPackageMatch;if(c||this.$emit("date-change",""),c&&l){var d=this.removeAttrIdInSameSpec(e);this.chosenAttrIds=this.addSingleAttrIds([].concat(Object(r.a)(d),[o]))}else this.chosenAttrIds=this.addSingleAttrIds([o]),this.selectSpecIdSet=new Set(this.singleSpecIds);this.addSelectSpecIdSet(e.id),this.$emit("input",this.chosenAttrIds,this.packageId,t,n),this.$emit("change"),this.$emit("swiper")}},{key:"reverseSelect",value:function(t){this.isEnableReverseSelect&&this.chosenAttrIds.includes(t)&&this.$emit("deleteAttrs",[t],this.specList)}},{key:"handleSelect",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.isActive)this.reverseSelect(t.id);else if(t.isScheduleMatch)t.isPackageMatch||this.$toast(this.$t("activity.new.package_attrs_updated")),this.change(t,e,o);else{if("desktop"===this.klook.platform)return;this.$confirm(this.$t("activity.new.package_attr_date_disabled_tip")).then((function(r){r.result&&n.change(t,e,o)}))}}},{key:"packageId",get:function(){var t,e=this;if(!((null===(t=null===this||void 0===this?void 0:this.spec)||void 0===t?void 0:t.length)===this.chosenAttrIds.length))return null;var n=this.packages.find((function(t){return e.getAttrKey(t.spec_attr_id)===e.getAttrKey(e.chosenAttrIds)}));return n&&n.package_id}},{key:"specList",get:function(){var t,e=this;return null===(t=this.spec)||void 0===t?void 0:t.reduce((function(t,n){var o=n.attr.map((function(t){var o,r,c,l=e.packages.find((function(e){var n;return null===(n=e.spec_attr_id)||void 0===n?void 0:n.includes(t.id)}))||{};if(e.isSingleSpecWithDiscount){var d=((l||{}).product_tags||{}).discount_tags,v=void 0===d?[]:d;c=v?v[0]:""}return O({},t,{openDateTip:null===(o=l)||void 0===o?void 0:o.usage_validity_tips,isPackageMatch:e.getIsPackageMatch(t,e.removeAttrIdInSameSpec(n)),isScheduleMatch:e.getIsScheduleMatch(t),isActive:e.chosenAttrIds.includes(t.id),isIncluded:e.includedAttrIdSet.has(t.id),isTagIncluded:e.includedTagAttrIdSet.has(t.id),singleAttrPackageId:(null===(r=l)||void 0===r?void 0:r.package_id)||null,promoTag:c})})).filter((function(t){return t.isIncluded&&t.isTagIncluded}));return 0===o.length?t:t.concat(O({},n,{attr:o}))}),[])}},{key:"includedAttrIdSet",get:function(){return(this.includedPackages||[]).reduce((function(t,e){var n,o=!0,r=!1,c=void 0;try{for(var l,d=((null===(n=e)||void 0===n?void 0:n.spec_attr_id)||[])[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var v=l.value;t.add(v)}}catch(t){r=!0,c=t}finally{try{o||null==d.return||d.return()}finally{if(r)throw c}}return t}),new Set)}},{key:"includedTagAttrIdSet",get:function(){return(this.includedTagPackages||this.packages||[]).reduce((function(t,e){var n,o=!0,r=!1,c=void 0;try{for(var l,d=((null===(n=e)||void 0===n?void 0:n.spec_attr_id)||[])[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var v=l.value;t.add(v)}}catch(t){r=!0,c=t}finally{try{o||null==d.return||d.return()}finally{if(r)throw c}}return t}),new Set)}},{key:"includedAttrIdGroups",get:function(){return this.formatAttrIdGroups(this.includedPackages||[])}},{key:"singleAttrIds",get:function(){var t;return null===(t=this.spec)||void 0===t?void 0:t.reduce((function(t,e){var n=e.attr;return n&&1===n.length?[].concat(Object(r.a)(t),[n[0].id]):t}),[])}},{key:"singleSpecIds",get:function(){var t;return null===(t=this.spec)||void 0===t?void 0:t.reduce((function(t,e){var n=e.attr;return n&&1===n.length?[].concat(Object(r.a)(t),[e.id]):t}),[])}}]),e}(n(1693).a);_([y.State],j.prototype,"klook",void 0),_([Object(y.Prop)()],j.prototype,"spec",void 0),_([Object(y.Prop)()],j.prototype,"value",void 0),_([Object(y.Prop)()],j.prototype,"isSingleSpecWithDiscount",void 0),_([Object(y.Prop)()],j.prototype,"isSingleSpec",void 0),_([Object(y.Prop)()],j.prototype,"activityId",void 0),_([Object(y.Prop)({default:!1})],j.prototype,"isNewOpenTicket",void 0),_([Object(y.Prop)()],j.prototype,"includedPackages",void 0),_([Object(y.Prop)()],j.prototype,"includedTagPackages",void 0),_([Object(y.Prop)({default:function(){return[]}})],j.prototype,"attractionIncluded",void 0),_([Object(y.Prop)({default:!1})],j.prototype,"isEnableReverseSelect",void 0),_([Object(y.Watch)("value",{immediate:!0})],j.prototype,"valueChange",null),_([Object(y.Watch)("specList",{immediate:!0,deep:!0})],j.prototype,"specListChange",null),_([Object(y.Watch)("includedAttrIdSet")],j.prototype,"includedAttrIdSetChange",null),j=_([y.Component],j),e.a=j},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=n(25),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1843),m=n(1430),k=(n(23),n(4)),O=(n(20),n(27),n(10)),_=n.n(O),j=(n(30),n(2195)),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"content",get:function(){var t,e=this,n=null===(t=this.spec)||void 0===t?void 0:t.reduce((function(t,n){if(n.attr.some((function(t){return e.chosenAttrIds.includes(t.id)})))return t;var o=n.name;return t?"".concat(t," / ").concat(o):o}),"");return this.$t("activity.new.package_spec_not_valid_tip",[n])}}]),e}(h.Vue);w([Object(h.Prop)()],P.prototype,"visible",void 0),w([Object(h.Prop)()],P.prototype,"spec",void 0),w([Object(h.Prop)()],P.prototype,"chosenAttrIds",void 0);var C=P=w([Object(h.Component)({components:{AttrTips:j.a}})],P),S=n(43),D=Object(S.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("AttrTips",{attrs:{visible:this.visible,content:this.content}})}),[],!1,null,null,null).exports,x=n(16),T=n(2138),I=n(212),R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.content="",t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"isBtnVisibleAddtocart",value:function(t){var e="boolean"==typeof this.isSupportShoppingCart?this.isSupportShoppingCart:!this.isNswActivity;return(_()(this.role)||this.roles.includes(t))&&![47631,46820,48639,48789,55826,49807,55724,68784].includes(this.activityId)&&e}},{key:"isBtnVisible",value:function(t){return _()(this.role)||this.roles.includes(t)}},{key:"beforeRoute",value:function(){if(!this.packageId){var t=this;return setTimeout((function(){t.visible=!1}),1e3),this.visible=!0,!1}return!0}},{key:"routeTo",value:function(t){var e=+new Date,n="undefined"!=typeof _args3?_args3:null;if(this.clickCustomFn){this.clickCustomFn({book:"bookNow",addToCard:"addToCart"}[t])}else{var o=this.$href("/experiences/tobook/new/".concat(this.activityId,"/"));window.location.href=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t}(o+"?from_flow_key=from_flow_attr&"+Object(x.eb)({type:t,...this.linkQuery}))}}},{key:"handleAddToCart",value:(n=Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.beforeRoute()){t.next=2;break}return t.abrupt("return");case 2:if(!this.isYiFunVoucher){t.next=8;break}return t.next=5,Object(T.a)(this);case 5:if(!t.sent){t.next=8;break}return this.routeTo("book"),t.abrupt("return",null);case 8:this.routeTo("addToCard");case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleBookNow",value:function(){this.beforeRoute()&&this.routeTo("book")}},{key:"handleCustomButtonClick",value:function(){this.isRoleWarming&&Object(I.g)(this.getScrollElBySectionConfig2provide)}},{key:"linkQuery",get:function(){return{act_date:this.date,packageId:String(this.packageId)}}},{key:"roles",get:function(){return[].concat(this.role)}},{key:"trackInfo",get:function(){return{trg:"manual",oid:"package_".concat(this.packageId),ext:{date:this.date||void 0,CompletedInfo:!!this.packageId}}}},{key:"isRoleWarming",get:function(){return this.roles.includes("warming")}},{key:"isRoleSuspended",get:function(){return this.roles.includes("suspended")}}]),e}(h.Vue);R([Object(h.Prop)()],$.prototype,"activityId",void 0),R([Object(h.Prop)()],$.prototype,"date",void 0),R([Object(h.Prop)()],$.prototype,"packageId",void 0),R([Object(h.Prop)()],$.prototype,"isNswActivity",void 0),R([Object(h.Prop)()],$.prototype,"role",void 0),R([Object(h.Prop)()],$.prototype,"buttonText",void 0),R([Object(h.Prop)({default:!1})],$.prototype,"isYiFunVoucher",void 0),R([Object(h.Prop)()],$.prototype,"clickCustomFn",void 0),R([Object(h.Prop)({default:null})],$.prototype,"isSupportShoppingCart",void 0),R([Object(h.Inject)({default:function(t){return t}})],$.prototype,"getScrollElBySectionConfig2provide",void 0);var L=$=R([Object(h.Component)({components:{AttrsUnselectTips:D}})],$),A=(n(2473),Object(S.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-bottom-btn"},[t.isRoleWarming||t.isRoleSuspended?n("span",{directives:[{name:"track",rawName:"v-track:module:WarmingBtn",value:t.trackInfo,expression:"trackInfo",arg:"module:WarmingBtn"}],staticClass:"activity-bottom-btn_item"},[n("klk-button",{staticClass:"custom-button",attrs:{type:"primary","data-spm-item":"__default?typ=entry",disabled:t.isRoleSuspended},on:{click:t.handleCustomButtonClick}},[t._v("\n      "+t._s(t.buttonText)+"\n    ")])],1):[t.isBtnVisibleAddtocart("addToCart")?n("span",{directives:[{name:"track",rawName:"v-track:module:AddToCartBtn",value:t.trackInfo,expression:"trackInfo",arg:"module:AddToCartBtn"}],staticClass:"activity-bottom-btn_item"},[n("klk-button",{staticClass:"add-to-cart",attrs:{type:"primary","data-spm-item":"__default?typ=entry"},on:{click:t.handleAddToCart}},[t._v("\n        "+t._s(t.$t("activity.label.add_to_cart"))+"\n      ")])],1):t._e(),t._v(" "),t.isBtnVisible("book")?n("span",{directives:[{name:"track",rawName:"v-track:module:BookNowBtn",value:t.trackInfo,expression:"trackInfo",arg:"module:BookNowBtn"}],staticClass:"activity-bottom-btn_item"},[n("klk-button",{staticClass:"book-now",attrs:{type:"primary","data-spm-item":"__default?typ=entry"},on:{click:t.handleBookNow}},[t._v("\n        "+t._s(t.$t("activity.v2.mobile.btn.summary.book_now"))+"\n      ")])],1):t._e()],t._v(" "),n("AttrsUnselectTips",t._b({attrs:{visible:t.visible}},"AttrsUnselectTips",t.$attrs,!1))],2)}),[],!1,null,null,null).exports),E=(n(47),n(22),n(14),n(11),n(8),n(12),n(0)),M=n(85),B=n(899),N=n(885),V=n(883),F=n(1025);function W(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},U=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).isCreditsLeft=!1,t.isSpaceForCredits=!0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"sellPriceChange",value:function(){this.priceChange()}},{key:"minSellPriceChange",value:function(){this.priceChange()}},{key:"promotionPriceChange",value:function(){this.priceChange()}},{key:"priceChange",value:function(){this.isSpaceForCredits=!0}},{key:"mounted",value:function(){this.priceChange()}},{key:"calcPriceShow",get:function(){var t;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(e){Object(E.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},(null===(t=this.selectedPackage)||void 0===t?void 0:t.price_show)||{},{save_price:""})}},{key:"minSellPriceText",get:function(){var t="".concat(M.b[this.klook.currency]," ").concat(Object(x.y)(this.minSellPrice));return this.$t("activity_detail_from_price",[12,t])}},{key:"showCredits",get:function(){return this.isSpaceForCredits&&this.credits&&this.creditsVisible}},{key:"completeOptionViewPriceVisible",get:function(){return"-"===this.sellPrice&&!this.minSellPrice&&!this.isInPromotion&&!this.isActivitySuspended}}]),e}(h.Vue);H([h.State],U.prototype,"klook",void 0),H([Object(h.Prop)()],U.prototype,"vip",void 0),H([Object(h.Prop)()],U.prototype,"selectedPackage",void 0),H([Object(h.Prop)()],U.prototype,"isInPromotion",void 0),H([Object(h.Prop)()],U.prototype,"isActivitySuspended",void 0),H([Object(h.Prop)()],U.prototype,"promotionDiscountText",void 0),H([Object(h.Prop)()],U.prototype,"marketPrice",void 0),H([Object(h.Prop)()],U.prototype,"sellPrice",void 0),H([Object(h.Prop)()],U.prototype,"promotionPrice",void 0),H([Object(h.Prop)()],U.prototype,"originalPrice",void 0),H([Object(h.Prop)()],U.prototype,"minSellPrice",void 0),H([Object(h.Prop)()],U.prototype,"discount",void 0),H([Object(h.Prop)()],U.prototype,"credits",void 0),H([Object(h.Prop)({type:[Boolean,Number],default:!0})],U.prototype,"creditsVisible",void 0),H([Object(h.Prop)({default:!1})],U.prototype,"isOnlyOneLine",void 0),H([Object(h.Inject)({from:"fieldsConfig2section",default:function(){return B.a}})],U.prototype,"fieldsConfig2section",void 0),H([Object(h.Watch)("sellPrice",{immediate:!0})],U.prototype,"sellPriceChange",null),H([Object(h.Watch)("minSellPrice",{immediate:!0})],U.prototype,"minSellPriceChange",null),H([Object(h.Watch)("promotionPrice",{immediate:!0})],U.prototype,"promotionPriceChange",null);var z=U=H([Object(h.Component)({components:{ExpTagCredits:F.default,ExpTagging:V.default,TotalSlot:N.a}})],U),G=(n(2474),Object(S.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"settlement",staticClass:"activity-settlement",class:{"only-one-line":t.isOnlyOneLine}},[n("span",{staticClass:"activity-settlement_sell-price"},[t.minSellPrice?[n("span",{domProps:{innerHTML:t._s(t.minSellPriceText)}})]:[n("TotalSlot",{attrs:{"price-data":t.calcPriceShow,"style-type":"flex-center flex-wrap"}})]],2),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.completeOptionViewPriceVisible,expression:"completeOptionViewPriceVisible"}],staticClass:"select-package-tips"},[t._v(t._s(t.$t("activity_page.complete_option_view_price")))]),t._v(" "),t.promotionDiscountText?n("div",{ref:"promotionDiscount",staticClass:"activity-settlement_promotion-discount"},[t._v("\n    "+t._s(t.promotionDiscountText)+"\n  ")]):t._e(),t._v(" "),n("div",{ref:"creditsWrap",staticClass:"activity-settlement_credits-wrap",class:{"is-left":t.isCreditsLeft&&!t.isOnlyOneLine}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fieldsConfig2section.activity_custom_config_hide_credit&&t.showCredits,expression:"!fieldsConfig2section.activity_custom_config_hide_credit && showCredits"}],ref:"credits",staticClass:"activity-settlement_credits"},[t.vip?[n("ExpTagging",{staticClass:"one-tag",attrs:{list:[t.vip]}})]:[n("ExpTagCredits",[t._v(t._s(t.$t("activity.new.credits",{account:Math.floor(t.credits)})))])]],2)])])}),[],!1,null,"b5a674ae",null).exports),Y=n(1913),K=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},J=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).minSellPrice="",t.sellPrice="-",t.loading=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"stockChange",value:function(){this.getSellPrice()}},{key:"currentSelectedPackageChange",value:function(){this.getSellPrice()}},{key:"promotionDetailChange",value:function(){this.getSellPrice()}},{key:"packageSelectedDateChange",value:function(t){var e=this;t&&(this.loading=!0,setTimeout((function(){e.loading=!1}),500))}},{key:"fetchPromotionDetailStatusChange",value:function(t){this.loading="fetching"===t}},{key:"getSellPrice",value:function(){var t;if(this.isWarmUp)return this.minSellPrice="",void(this.sellPrice=null===(t=this.promotionDetail)||void 0===t?void 0:t.original_selling_price);if(this.stock){var e=this.stock,n=e.from_price;n===e.to_price?(this.sellPrice=n,this.minSellPrice=""):this.minSellPrice=n}else if(_()(this.selectedPackage))this.sellPrice="-";else{var o=this.selectedPackage,r=o.from_price;r===o.to_price?(this.sellPrice=r,this.minSellPrice=""):this.minSellPrice=r}}},{key:"render",value:function(){var t=arguments[0];return this.loading?t(Y.a):t(G,{attrs:{selectedPackage:this.selectedPackage,isOnlyOneLine:!1,isInPromotion:this.isInPromotion,isActivitySuspended:this.isActivitySuspended,marketPrice:this.marketPrice,promotionPrice:this.promotionPrice,sellPrice:this.sellPrice,originalPrice:this.originalPrice,minSellPrice:this.minSellPrice,credits:this.credits,creditsVisible:this.isCreditsVisible,vip:this.vip}})}},{key:"stock",get:function(){var t,e=this,n=null===(t=this.schedule)||void 0===t?void 0:t.stocks;if(n){var o=n.find((function(t){return t.package_id===e.packageId}));if(o)return o}}},{key:"marketPrice",get:function(){if(this.isWarmUp){var t=this.promotionDetail||{},e=t.market_price,n=t.original_selling_price;return Number(e)>Number(n)?e:"0"}if(this.stock)return this.stock.market_price;if(this.selectedPackage){var o=this.selectedPackage,r=o.sell_price,c=o.market_price;return Number(c)>Number(r)?c:"0"}return"0"}},{key:"promotionPrice",get:function(){var t;return(null===(t=this.promotionDetail)||void 0===t?void 0:t.selling_price)||"0"}},{key:"originalPrice",get:function(){var t;return(null===(t=this.promotionDetail)||void 0===t?void 0:t.original_selling_price)||"0"}},{key:"credits",get:function(){return this.isInPromotion||this.isWarmUp?"":this.selectedPackage&&this.selectedPackage.credits?Math.floor(this.selectedPackage.credits):""}},{key:"isCreditsVisible",get:function(){return this.useCredits&&!this.isGuestCheckout}},{key:"vip",get:function(){var t;return null===(t=this.selectedPackage)||void 0===t?void 0:t.credits_tag}}]),e}(n(1378).a);K([Object(h.Prop)()],J.prototype,"schedule",void 0),K([Object(h.Prop)()],J.prototype,"packageId",void 0),K([Object(h.Prop)()],J.prototype,"packageSchedulesState",void 0),K([Object(h.Prop)()],J.prototype,"selectedPackage",void 0),K([Object(h.Prop)()],J.prototype,"isActivitySuspended",void 0),K([h.Getter],J.prototype,"useCredits",void 0),K([h.Getter],J.prototype,"isGuestCheckout",void 0),K([Object(h.Watch)("stock",{immediate:!0})],J.prototype,"stockChange",null),K([Object(h.Watch)("selectedPackage")],J.prototype,"currentSelectedPackageChange",null),K([Object(h.Watch)("promotionDetail")],J.prototype,"promotionDetailChange",null),K([Object(h.Watch)("date")],J.prototype,"packageSelectedDateChange",null),K([Object(h.Watch)("packageSchedulesState")],J.prototype,"fetchPromotionDetailStatusChange",null);var X=J=K([Object(h.Component)({components:{BottomBarSettlement:G}})],J),Q=n(9),Z=n(132),tt=n.n(Z),et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},it=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.isScrolled=!1,t.boundary=0,t.threshold=0,t.footerDom=null,t.handleScroll=tt()(t.checkVisibleScrolling,10),t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"checkVisible",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isScrolled=this.isScrolled||!t,!this.boundary){var e=document.querySelector(".package_option");if(!e)return!1;var n=document.getElementsByClassName("activity-bottom-bar"),o=n.length?n[0].getBoundingClientRect().height:0,r=Object(I.b)()-o;this.boundary=this.threshold+Object(I.c)(e)-r}return Object(I.h)()-this.boundary<0}},{key:"checkVisibleScrolling",value:function(){var t=this.footerDom;this.visible=this.checkVisible(),t||(this.footerDom=document.querySelector(".js-activity-bottom-bar")),t&&(document.body.style.paddingBottom=t.offsetHeight+"px")}},{key:"mounted",value:function(){this.visible=this.checkVisible(!0),document.addEventListener("scroll",this.handleScroll)}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll)}},{key:"guideVisible",get:function(){return this.visible&&this.isScrolled}}]),e}(Q.Vue),nt=it=et([Q.Component],it),at=n(934),ot=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ct=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).noMarginTop=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:function(){this.computeMargin()}},{key:"updated",value:function(){this.computeMargin()}},{key:"computeMargin",value:function(){var t=this;this.$nextTick((function(){t.noMarginTop=!(!t.settlementRef||0!==t.settlementRef.offsetHeight)}))}},{key:"wishButtonVisible",get:function(){var t;return!(null===(t=this.utilConfig)||void 0===t?void 0:t.whiteLabelUtilConfig)&&!this.isGuestCheckout}},{key:"bottomButtonRole",get:function(){return this.isWarming?"warming":this.isSuspended?"suspended":this.isGuestCheckout?"book":null}}]),e}(Object(h.mixins)(nt,at.a));ot([Object(h.State)((function(t){return t.klook.utilConfig}))],ct.prototype,"utilConfig",void 0),ot([h.Getter],ct.prototype,"isGuestCheckout",void 0),ot([Object(h.Ref)()],ct.prototype,"settlementRef",void 0);var st=ct=ot([Object(h.Component)({components:{ActivityWishButton:m.a,ActivityBottomBtn:A,ActivitySettlement:X}})],ct),lt=(n(2475),Object(S.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["activity-bottom-booking",{"activity-bottom-booking--top":t.visible}]},[n("div",{ref:"settlementRef",staticClass:"activity-bottom-booking_package-detail"},[t._t("settlement",[n("ActivitySettlement",t._b({attrs:{"is-activity-suspended":t.isActivityPublishInfo&&t.isSuspended}},"ActivitySettlement",t.$attrs,!1))])],2),t._v(" "),n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.visible,expression:"!visible"}],class:["activity-bottom-booking_operation",t.noMarginTop&&"no-margin-top"]},[t._t("buttons",[t.wishButtonVisible?n("ActivityWishButton",t._b({},"ActivityWishButton",t.$attrs,!1)):t._e(),t._v(" "),n("ActivityBottomBtn",t._b({attrs:{role:t.bottomButtonRole,"button-text":t.warmingText||t.suspendedText}},"ActivityBottomBtn",t.$attrs,!1))])],2)])],1)}),[],!1,null,"9cc96cac",null).exports),ut=n(213),pt=n.n(ut),vt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ft=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);vt([Object(h.Prop)()],ft.prototype,"content",void 0),vt([Object(h.Prop)()],ft.prototype,"visible",void 0);var ht=ft=vt([h.Component],ft),gt=(n(2476),Object(S.a)(ht,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"guide-btn-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"activity-guide-button"},[e("div",{staticClass:"activity-guide-button_main"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.content,expression:"content"}],staticClass:"activity-guide-button_content"},[this._v(this._s(this.content))]),this._v(" "),this._t("default")],2)])])}),[],!1,null,null,null).exports),bt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},yt=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.borderTop=0,t.borderBottom=0,t.viewportHeight=0,t.detailPosition=0,t._navHeight=0,t.handleScroll=pt()(t.checkVisible,500),t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"statusChange",value:function(t){"success"===t&&this.checkVisible()}},{key:"packageIdChange",value:function(){this.checkVisible()}},{key:"checkVisible",value:function(){if(!this.invalid&&this.packageId){var t=document.getElementsByClassName("activity-spec");if(!t.length)return!1;var e=t[0];this.borderTop=Object(I.c)(e)+30;var n=document.getElementsByClassName("activity-package-detail_icons");if(!n.length)return!1;var o=n[0];this.borderBottom=Object(I.c)(o)+o.getBoundingClientRect().height;var r=document.getElementsByClassName("activity-bottom-bar"),c=r.length?r[0].getBoundingClientRect().height:0;this.viewportHeight=Object(I.b)()-c,this.visible=this.borderTop-this.viewportHeight-Object(I.h)()<0&&this.borderBottom-Object(I.h)()-this.viewportHeight>0}else this.visible=!1}},{key:"getNavHeight",value:function(){if(!this._navHeight){var header=document.querySelector(".j-activity-header"),nav=document.querySelector(".j-activity-nav-container");if(!header||!nav)return 0;this._navHeight=header.getBoundingClientRect().height+nav.getBoundingClientRect().height}}},{key:"translateToDetail",value:function(){if(!this.isFetching){if(!this.detailPosition){this.getNavHeight();var t=document.querySelector("#goto-activity-package-detail");if(!t)return;this.detailPosition=Object(I.c)(t)-this._navHeight}Object(I.d)({scrollY:this.detailPosition})}}},{key:"mounted",value:function(){document.addEventListener("scroll",this.handleScroll)}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll)}},{key:"invalid",get:function(){if(_()(this.spec))return!0;if(1===this.spec.length){var t=this.spec[0].attr;return _()(t)||t.length<2}return!1}},{key:"isFetching",get:function(){return"fetching"===this.packageSchedulesState}},{key:"content",get:function(){return this.isFetching?"":this.$t("activity_page.view_package_detail")}}]),e}(h.Vue);bt([Object(h.Prop)()],yt.prototype,"packageSchedulesState",void 0),bt([Object(h.Prop)()],yt.prototype,"spec",void 0),bt([Object(h.Prop)()],yt.prototype,"packageId",void 0),bt([Object(h.Watch)("packageSchedulesState")],yt.prototype,"statusChange",null),bt([Object(h.Watch)("packageId")],yt.prototype,"packageIdChange",null);var mt=yt=bt([Object(h.Component)({components:{GuideButton:gt}})],yt),kt=(n(2477),Object(S.a)(mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GuideButton",{staticClass:"activity-package-detail-guide",attrs:{visible:t.visible,content:t.content},nativeOn:{click:function(e){return t.translateToDetail(e)}}},[n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:!t.isFetching,expression:"!isFetching"}],staticClass:"archer-icon",attrs:{name:"mobile-activity#double-arrow-down",width:"16",height:"16",color:"#16aa77"}}),t._v(" "),n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:t.isFetching,expression:"isFetching"}],staticClass:"archer-loading-icon",attrs:{name:"mobile-activity#icon-loading",width:"24",height:"36",color:"#16aa77"}})],1)}),[],!1,null,null,null).exports),Ot=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_t=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"translateToPackageOptions",value:function(){var t=document.querySelector(".package_option"),header=document.querySelector(".j-activity-header"),nav=document.querySelector(".j-activity-nav-container");if(t&&header&&nav){var e=Object(I.c)(t)-header.getBoundingClientRect().height-nav.getBoundingClientRect().height;Object(I.d)({scrollY:e})}}}]),e}(nt),jt=_t=Ot([Object(h.Component)({components:{GuideButton:gt}})],_t),wt=(n(2478),n(2479),Object(S.a)(jt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GuideButton",{staticClass:"package-options-guide-button",attrs:{visible:t.guideVisible,content:t.$t("activity.select.option")},nativeOn:{click:function(e){return t.translateToPackageOptions(e)}}},[n("SvgIcon",{staticClass:"archer-icon",attrs:{name:"mobile-activity#icon_nav_doubleDown",width:"16",height:"16",color:"#FF5B00"}})],1)}),[],!1,null,"2924392a",null).exports),Pt=n(1012),Ct=n(981),St=n(887),Dt=n(2048),xt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Tt=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showCutDown=!1,t.timeList=[],t.obServer=null,t.showHeroBottom=!1,t.target=".package_options_spec_type_left",t.detailHeight=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"onPackageIdChange",value:function(t){var e,n;if(t){var o=this.packages.find((function(e){return e.package_id===t}));if(o){var r=(null===(n=null===(e=o)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[];this.getCutDownTimeList(r)}}else this.clear()}},{key:"mounted",value:function(){this.createObserver()}},{key:"beforeDestroy",value:function(){this.obServer&&(this.obServer.disconnect(),this.obServer=null)}},{key:"createObserver",value:function(){var t=this;this.isHeroPage&&(this.obServer=new x.a(this.target,(function(e){var n=Object(o.a)(e,1)[0],r=n.isIntersecting,c=n.boundingClientRect.top;t.showHeroBottom=!r&&c>0}),{threshold:0,rootMargin:"-60px"}))}},{key:"getCutDownTimeList",value:function(t){var e;if(null===(e=t)||void 0===e?void 0:e.length){var n=[];t.forEach((function(t){var e,o,r,c=null===(r=null===(o=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===o?void 0:o.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&(Object(St.c)(c)&&n.push(c))})),n.length?(this.showCutDown=!0,this.timeList=n):this.clear()}else this.clear()}},{key:"reload",value:function(){this.showCutDown=!1,window&&window.location.reload()}},{key:"clear",value:function(){this.showCutDown=!1,this.timeList=[]}},{key:"isHeroPage",get:function(){var t,e;return"hero_page"===(null!=(e=null===(t=this.basicData)||void 0===t?void 0:t.act_product_type)?e:"")}},{key:"lowestPricePackage",get:function(){if(!this.isHeroPage)return null;var t=this.packages||[],e=t[0]||null;if(!e)return null;var n=+e.from_price,o=e;return t.forEach((function(t){var e=+(t.from_price||0);e<n&&(o=t,n=e)})),o}},{key:"packageId",get:function(){var t;return null===(t=this.$attrs)||void 0===t?void 0:t["package-id"]}},{key:"lineUp",get:function(){return this.basicData.is_in_flash_sale}},{key:"lineUpBook",get:function(){return this.basicData.is_line_page}},{key:"isActivityPublishInfo",get:function(){var t,e;return!(null===(e=null===(t=this.$attrs)||void 0===t?void 0:t["selected-package"])||void 0===e?void 0:e.package_id)}},{key:"publishInfo",get:function(){var t,e,n;return this.isActivityPublishInfo?null===(t=this.basicData)||void 0===t?void 0:t.publish_info:null===(n=null===(e=this.$attrs)||void 0===e?void 0:e["selected-package"])||void 0===n?void 0:n.publish_info}}]),e}(h.Vue);xt([Object(h.Prop)({default:function(){}})],Tt.prototype,"basicData",void 0),xt([Object(h.Prop)({default:function(){return[]}})],Tt.prototype,"packages",void 0),xt([Object(h.Watch)("packageId",{immediate:!0})],Tt.prototype,"onPackageIdChange",null);var It=Tt=xt([Object(h.Component)({components:{ActivityBottomBooking:lt,ActivityPackageDetailGuideButton:kt,PackageOptionsGuideButton:wt,LineUpBottomBar:y.default,WarmingSlogan:Pt.a,CutDown:Ct.default,HeroPageBottomBar:Dt.default}})],Tt),Rt=(n(2481),Object(S.a)(It,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-bottom-bar js-activity-bottom-bar"},[t.showCutDown?n("div",{staticClass:"activity-bottom_cutdown"},[n("CutDown",{staticClass:"cut-down-box",attrs:{"time-list":t.timeList},on:{reload:t.reload},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.timeStr;return[n("SvgIcon",{attrs:{name:"common#icon_time_alarm_s_color",size:"20"}}),t._v(" "),n("span",{staticClass:"cut-time"},[t._v(t._s(o))])]}}],null,!1,1405175965)})],1):t._e(),t._v(" "),t.lineUpBook&&t.lineUp?t._e():[n("PackageOptionsGuideButton",{staticClass:"activity-bottom_guide"}),t._v(" "),n("ActivityPackageDetailGuideButton",t._b({staticClass:"activity-bottom_guide"},"ActivityPackageDetailGuideButton",t.$attrs,!1)),t._v(" "),n("WarmingSlogan",{staticClass:"activity-bottom_slogan",attrs:{"publish-info":t.publishInfo,"is-activity-publish-info":t.isActivityPublishInfo,"is-absolute":!0}})],t._v(" "),t.lineUp?n("div",{staticClass:"line-up-btm-wrap",class:{sp:!t.lineUpBook}},[n("LineUpBottomBar",{attrs:{"basic-data":t.basicData}})],1):t._e(),t._v(" "),t.lineUpBook&&t.lineUp?t._e():n("ActivityBottomBooking",t._g(t._b({attrs:{"is-activity-publish-info":t.isActivityPublishInfo,"publish-info":t.publishInfo}},"ActivityBottomBooking",t.$attrs,!1),t.$listeners),[t.showHeroBottom?[n("div",{attrs:{slot:"settlement"},slot:"settlement"}),t._v(" "),n("HeroPageBottomBar",{attrs:{slot:"buttons","package-data":t.lowestPricePackage},slot:"buttons"})]:t._e()],2)],2)}),[],!1,null,"d6e8e9c6",null));e.default=Rt.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(20),n(27),n(23),n(4)),y=n(417),m=n(3),k=n(212),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=Object(f.namespace)("traveller/activity"),j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).pkgDetailStyleType="",t.state="none",t.statusMap={success:"PackageDetailSuccess",failure:"PackageDetailFailure",fetching:"PackageDetailLoading",none:"PackageDetailEmpty"},t.packageDetail=null,t.winTop=0,t.scrollStopTimer=null,t}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"packageIdChange",value:function(){this.getPackageDetail()}},{key:"getPackageDetail",value:(n=Object(h.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,O=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.packageId){t.next=2;break}return t.abrupt("return");case 2:if(o=Object(k.h)(),!this.waitTime||this.winTop===o){t.next=8;break}return clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout((function(){O.getPackageDetail()}),this.waitTime),this.winTop=o,t.abrupt("return");case 8:if(this.setStyleType(this.styleType),r="1"===(null===(e=this.$route.query)||void 0===e?void 0:e.translation),c=this.isLinePage||!1,l=null,d=this.packageId,v=this.preview,this.cachePkgDetail&&d&&(f=y.action.get(d,"pkgDetail"),(null===(n=f)||void 0===n?void 0:n.success)&&(l=f)),l){t.next=29;break}if(this.state="fetching",!v){t.next=23;break}return t.next=20,this.$axios.$get(m.a.activityPackageDetail,{params:{preview:v,translation:!!r,package_id_list:d,publish_status:"all",is_line_page:!1}});case 20:l=t.sent,t.next=26;break;case 23:return t.next=25,this.$axios.$get(m.a.activityPackageDetail,{params:{preview:v,translation:!!r,publish_status:"viewable",package_id_list:d,is_line_page:c}});case 25:l=t.sent;case 26:y.action.set(d,"pkgDetail",l),t.next=30;break;case 29:this.isEnableSwiperMode||(this.state="fetching");case 30:if(l.success){t.next=33;break}return this.setState("failure"),t.abrupt("return");case 33:if(h=l.result,!(l.success&&h&&h.length)){t.next=38;break}return this.packageDetail=h[0],this.setState("success"),t.abrupt("return");case 38:this.setState("failure");case 39:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"setState",value:function(t){var e=this;"success|failure".includes(t)&&(this.calcStateTimeout?setTimeout((function(){e.state=t,setTimeout((function(){e.setStyleType()}),0)}),this.calcStateTimeout):(this.state=t,setTimeout((function(){e.setStyleType()}),0))),this.$emit("updateState",t)}},{key:"setStyleType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.pkgDetailStyleType=t}},{key:"calcStateTimeout",get:function(){var t=this.stateTimeout;return t&&parseInt(t)}},{key:"isLinePage",get:function(){var t,e;return(null!=(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)?e:{}).is_line_page||!1}},{key:"status",get:function(){return this.packageId&&this.state||"none"}},{key:"componentName",get:function(){return this.statusMap[this.status]}}]),e}(f.Vue);O([Object(f.Prop)()],j.prototype,"styleType",void 0),O([Object(f.Prop)()],j.prototype,"cachePkgDetail",void 0),O([Object(f.Prop)({default:500})],j.prototype,"stateTimeout",void 0),O([Object(f.Prop)()],j.prototype,"waitTime",void 0),O([Object(f.Prop)()],j.prototype,"packageId",void 0),O([Object(f.Prop)()],j.prototype,"preview",void 0),O([Object(f.Prop)({default:!1})],j.prototype,"isEnableSwiperMode",void 0),O([_.State],j.prototype,"activityDetail",void 0),O([Object(f.Watch)("packageId",{immediate:!0})],j.prototype,"packageIdChange",null);var w=j=O([f.Component],j),P=n(2197),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);C([Object(f.Prop)()],S.prototype,"multiLanguageIcons",void 0),C([Object(f.Prop)()],S.prototype,"instant",void 0),C([Object(f.Prop)()],S.prototype,"isPresale",void 0),C([Object(f.Prop)()],S.prototype,"type",void 0);var D=S=C([Object(f.Component)({components:{ActivityIcons:P.a}})],S),x=(n(2519),n(43)),T=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityIcons",{attrs:{"is-presale":t.isPresale,instant:t.instant,"multi-language-icons":t.multiLanguageIcons},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"activity-icons"},t._l(e.activityIcons,(function(e){return n("div",{key:e.iconKey,staticClass:"activity-icons_item"},[e.iconKey?n("SvgIcon",{class:["activity-icon",{fast:"fast"===e.iconKey}],attrs:{name:"activity-common#"+e.iconKey,width:"20",height:"20"}}):t._e(),t._v(" "),e.iconUrl?n("img",{staticClass:"activity-icon img-icon",attrs:{src:e.iconUrl}}):t._e(),t._v(" "),n("span",{staticClass:"activity-icons_desc"},[t._v("\n          "+t._s(e.iconDesc)+"\n        ")])],1)})),0)]}}])})}),[],!1,null,"c2151ad4",null).exports,I=n(883),R=n(1106),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).elementObserver=null,t.visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.disabled?this.visible=!0:this.createObserver()}},{key:"beforeDestroy",value:function(){this.destroyObserver()}},{key:"createObserver",value:function(){var t=this;"IntersectionObserver"in window&&(this.elementObserver=new IntersectionObserver((function(e){return e.forEach((function(e){e.intersectionRatio>0&&(t.visible=!0,t.destroyObserver())}))})),this.elementObserver.observe(this.$el))}},{key:"destroyObserver",value:function(){this.elementObserver&&this.$el&&this.elementObserver.unobserve(this.$el)}}]),e}(f.Vue);$([Object(f.Prop)({default:"fade-up"})],L.prototype,"transitionName",void 0),$([Object(f.Prop)({default:!1})],L.prototype,"disabled",void 0);var A=L=$([f.Component],L),E=(n(2520),Object(x.a)(A,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:["base-animate-once",!t.disabled&&t.transitionName,t.visible&&"visible"],on:{transitionend:function(e){return t.$emit("end")}}},[t._t("default")],2)}),[],!1,null,"011aa04f",null).exports),M=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},B=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcTags2attribute",get:function(){var t;return(null===(t=this.packageDetail.product_tags)||void 0===t?void 0:t.attribute_tags)||[]}},{key:"sections",get:function(){var t,e;return null===(e=null===(t=this.packageDetail)||void 0===t?void 0:t.section_content)||void 0===e?void 0:e.sections}},{key:"icons",get:function(){var t,e,n;return null===(n=null===(e=null===(t=this.packageDetail)||void 0===t?void 0:t.section_content)||void 0===e?void 0:e.icons)||void 0===n?void 0:n.map((function(t){return{iconUrl:t.icon_url,iconDesc:t.icon_desc}}))}}]),e}(f.Vue);M([Object(f.Prop)()],B.prototype,"packageDetail",void 0),M([Object(f.Prop)()],B.prototype,"isPresale",void 0),M([Object(f.State)((function(t){return t.klook.platform}))],B.prototype,"platform",void 0),M([Object(f.Prop)({default:!0})],B.prototype,"expandAll",void 0),M([Object(f.Prop)({default:!1})],B.prototype,"isEnableFirstFadeIn",void 0);var N=B=M([Object(f.Component)({components:{ExpTagging:I.default,BaseTransitionOnce:E,MActivityPackageIcons:T,PackageDetailUnoinComponent:R.default}})],B),V=(n(2521),Object(x.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-detail-main package-detail-gradient"},[n("div",{staticClass:"package-detail-arrow"}),t._v(" "),n("ExpTagging",{staticClass:"tagging-sku-tag-style",staticStyle:{margin:"0 0 24px 0"},attrs:{list:t.calcTags2attribute,pkg:t.packageDetail,track:{spm:"Package_Product_Tag"}}}),t._v(" "),n("BaseTransitionOnce",{attrs:{disabled:!t.isEnableFirstFadeIn},on:{end:function(e){return t.$emit("fadeInEnd")}}},[n("PackageDetailUnoinComponent",{attrs:{"package-detail":t.packageDetail,"expand-all":t.expandAll}})],1)],1)}),[],!1,null,"271c69fa",null).exports),F=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},W=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){var t=this.$el;this.$emit("mounted",t.offsetHeight)}}]),e}(f.Vue),H=W=F([Object(f.Component)({components:{PackageDetailMain:V}})],W),U=Object(x.a)(H,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-detail-success",attrs:{id:"goto-activity-package-detail"}},[e("PackageDetailMain",this._g(this._b({},"PackageDetailMain",this.$attrs,!1),this.$listeners))],1)}),[],!1,null,null,null).exports,z=n(1260),G=n(955),Y=n(2189),K=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},J=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleBeforeEnter",value:function(t){t.style.position="absolute",t.style.top="0"}},{key:"handleEnter",value:function(){}},{key:"handleAfterEnter",value:function(t){t.style.position="relative",this.$emit("change")}},{key:"handleBeforeLeave",value:function(t){t.style.position="relative"}},{key:"handleLeave",value:function(){}},{key:"handleAfterLeave",value:function(t){t.style.position="absolute",t.style.top="0"}}]),e}(f.Vue);K([Object(f.Prop)({default:"left"})],J.prototype,"direction",void 0),K([Object(f.Prop)({default:"null"})],J.prototype,"swiperKey",void 0),K([Object(f.Prop)({default:!1})],J.prototype,"disabled",void 0);var X=J=K([f.Component],J),Q=(n(2522),Object(x.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"base-horizontal-swiper"},[t.disabled?[t._t("default")]:[n("transition",{attrs:{name:"swiper-fade-"+t.direction},on:{"before-enter":t.handleBeforeEnter,enter:t.handleEnter,"after-enter":t.handleAfterEnter,"before-leave":t.handleBeforeLeave,leave:t.handleLeave,"after-leave":t.handleAfterLeave}},[n("div",{key:t.swiperKey,staticClass:"base-horizontal-swiper-content"},[t._t("default")],2)])]],2)}),[],!1,null,"6218c8b6",null).exports),Z=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},tt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).stopFadedIn=!1,t.elementHeight="unset",t.currentHeight=0,t.tiemer=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleFadeInEnd",value:function(){this.stopFadedIn=!0}},{key:"handleMounted",value:function(t){var e=this;t>this.currentHeight&&(this.elementHeight="".concat(t,"px")),this.currentHeight=t,clearTimeout(this.tiemer),this.tiemer=setTimeout((function(){e.elementHeight="unset"}),500)}},{key:"handleChange",value:function(){var t=this;this.$nextTick((function(){t.elementHeight="unset"}))}},{key:"created",value:function(){var t=this.packageId,e=this.pkgDetail;t&&e&&(this.packageDetail=e,this.state="success"),this.$isServer||(this.winTop=Object(k.h)())}}]),e}(w);Z([Object(f.Prop)({default:!1})],tt.prototype,"isEnableSwiperMode",void 0),Z([Object(f.Prop)({default:!1})],tt.prototype,"isEnableFirstFadeIn",void 0),Z([Object(f.Prop)({default:""})],tt.prototype,"direction",void 0),Z([Object(f.Prop)({type:Object,required:!1})],tt.prototype,"pkgDetail",void 0);var et=tt=Z([Object(f.Component)({components:{BaseHorizontalSwiper:Q,PackageDetailEmpty:Y.a,PackageDetailFailure:z.a,CommonSkeletonSlots:G.a,PackageDetailSuccess:U}})],tt),it=(n(2523),Object(x.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-detail",class:t.pkgDetailStyleType},[n("BaseHorizontalSwiper",{staticClass:"activity-package-detail-content",style:{height:t.elementHeight},attrs:{disabled:!t.isEnableSwiperMode,direction:t.direction,"swiper-key":t.packageId},on:{change:t.handleChange}},["PackageDetailLoading"===t.componentName?n("CommonSkeletonSlots",{staticClass:"pkg-details-skeleton-style",attrs:{"skeleton-name":"pkg-details-skeleton"}}):n(t.componentName,t._g(t._b({tag:"component",attrs:{"package-detail":Object.assign({},t.packageDetail||{},{packageId:t.packageId,package_id:t.packageId}),"is-enable-first-fade-in":t.isEnableFirstFadeIn&&!t.stopFadedIn},on:{"fetch-detail":t.getPackageDetail,fadeInEnd:t.handleFadeInEnd,mounted:t.handleMounted}},"component",t.$attrs,!1),t.$listeners))],1)],1)}),[],!1,null,"5808b98d",null));e.default=it.exports},,function(t,e,n){"use strict";n.r(e);n(273);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1166),y=n(1435),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getsmg",value:function(t,e,n){return"ActivityCard_LIST?oid=activity_".concat(t.activity_id,"&idx=").concat(e,"&len=").concat(n.length,"&mod=stop&evt=click")}},{key:"onclick",value:function(t){this.$emit("activeKeyChange",t)}}]),e}(f.Vue);m([Object(f.Prop)()],k.prototype,"loading",void 0),m([Object(f.Prop)()],k.prototype,"standardActivityId",void 0),m([Object(f.Prop)()],k.prototype,"current",void 0),m([Object(f.Prop)({default:[]})],k.prototype,"activityList",void 0);var O=k=m([Object(f.Component)({})],k),_=(n(2165),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"preview-list attraction-preview-list"},[t._l(t.activityList,(function(e,o){return n("li",{key:e.activity_id,class:{"preview-list-item":!0,"preview-list-active":o==t.current},attrs:{"data-spm-module":t.getsmg(e,o,t.activityList),"data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.onclick(o)}}},[o==t.current?n("div",{staticClass:"triangle"}):t._e(),t._v(" "),n("div",{staticClass:"preview-list-content"},[t._v("\n      "+t._s(e.activity_name)+"\n    ")])])})),t._v(" "),t.loading?n("klk-skeleton",{attrs:{animate:""}},t._l(10,(function(t){return n("klk-skeleton-block",{key:t,attrs:{height:60}})})),1):t._e()],2)}),[],!1,null,"27ab7fee",null).exports,w=n(1252),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).current=0,t.init=!0,t.isFocus=!1,t.height=t.calcHeight(253),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"checkHeight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:45,e=document.querySelector(".attraction-preview-main");e&&(this.height="calc(90vh - ".concat(e.getBoundingClientRect().top+t,"px)"))}},{key:"calcHeight",value:function(t){return this.isBook?"calc(90vh - ".concat(t+64,"px)"):"calc(90vh - ".concat(t,"px)")}},{key:"togglehange",value:function(t){this.height=t?this.calcHeight(303):this.calcHeight(253)}},{key:"showTabsChange",value:function(t){this.height=t?this.calcHeight(253):this.calcHeight(198)}},{key:"activeKeyChange",value:function(t){this.current=t}},{key:"srollToView",value:function(t){var e=document.querySelector(".attraction-preview-left");e&&e.scrollTo({left:0,top:t,behavior:"smooth"})}},{key:"activityListChange",value:function(){var t=this;if(this.standardActivityId&&this.init){var e=this.activityList.findIndex((function(e){return e.activity_id===t.standardActivityId}));this.current=e,this.srollToView(45*e),this.init=!1}else this.current=0,this.srollToView(0);this.$emit("setTotal",this.total)}},{key:"standardId",get:function(){var t;return this.activityList.length>0&&this.activityList[this.current]?null===(t=this.activityList[this.current])||void 0===t?void 0:t.activity_id:0}}]),e}(y.a);P([Object(f.Prop)({default:!1})],C.prototype,"renderTop",void 0),P([Object(f.Prop)({default:!0})],C.prototype,"isScroll",void 0),P([Object(f.Prop)({default:!1})],C.prototype,"isBook",void 0),P([Object(f.Prop)()],C.prototype,"standardActivityId",void 0),P([Object(f.Watch)("showTabs")],C.prototype,"showTabsChange",null),P([Object(f.Watch)("activityList")],C.prototype,"activityListChange",null);var S=C=P([Object(f.Component)({components:{AttractionPreviewlist:j,AttractionPrevieDetail:w.default,DataLoader:h.a}})],C),D=(n(2166),Object(_.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["attraction-preview",{"attraction-preview-height":t.renderTop}]},[t.renderTop?n("div",[n("klk-input",{class:["attraction-preview-search",{"attraction-preview-border":t.isFocus}],attrs:{size:"normal",placeholder:t.$t("76897"),clearable:"","prepend-icon":"icon_edit_search_s","data-spm-module":"SearchInput?mod=stop","data-spm-virtual-item":"__virtual?&mod=stop"},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1):t._e(),t._v(" "),t.showTabs?n("div",{staticClass:"attraction-preview-tabs"},[n("klk-tag-select",{attrs:{size:"large"},on:{change:t.onTabChange,"toggle-wrap":t.togglehange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(e,i){return n("klk-tag-select-item",{key:i,attrs:{name:e.label,"data-spm-module":t.getSpm(e),"data-spm-virtual-item":"__virtual?mod=stop"}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),1)],1):t._e(),t._v(" "),t.showNoneSearch?n("NoneSearchResult",{staticClass:"attraction-preview-none"}):[n("div",{staticClass:"attraction-preview-main",style:{height:t.height}},[n("div",{staticClass:"attraction-preview-left"},[n("AttractionPreviewlist",{attrs:{"activity-list":t.activityList,"standard-activity-id":t.standardActivityId,loading:t.showSearchLoading,current:t.current},on:{activeKeyChange:t.activeKeyChange}})],1),t._v(" "),n("div",{class:{"attraction-preview-right":!0,isScroll:t.isScroll}},[t.standardId>0?n("DataLoader",{attrs:{"activity-id":t.activityId,"standard-activity-id":t.standardId,"package-id":t.packageId},scopedSlots:t._u([{key:"default",fn:function(e){return[e.data?n("AttractionPrevieDetail",{attrs:{data:e.data,loading:e.loading,"show-type":t.showType}}):t._e()]}}],null,!1,4025487150)}):t._e()],1)]),t._v(" "),t.isBook&&!t.loading?n("div",{staticClass:"attraction-preview-footer"},[n("klk-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleBook}},[t._v("\n        "+t._s(t.$t("76905"))+"\n      ")])],1):t._e()]],2)}),[],!1,null,"305be612",null));e.default=D.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(47);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(25),m=n(1843),k=n(16),O=n(85),_=n(212),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).obServer=null,t.visible=!1,t.isIconUp=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:function(){var t=this;this.obServer=new k.a(this.target,(function(e){var n=Object(y.a)(e,1)[0],o=n.isIntersecting,r=n.boundingClientRect;if(t.visible=!o,t.visible){var c=r.top;t.isIconUp=c<0,document.body.style.paddingBottom="60px"}}),{threshold:this.threshold})}},{key:"beforeDestroy",value:function(){this.obServer&&(this.obServer.disconnect(),this.obServer=null)}},{key:"showTarget",value:function(){var t=this;this.$emit("click-btn",this.isIconUp),setTimeout((function(){var e=document.querySelector(t.target),n=Object(_.c)(e);Object(_.d)({scrollY:n-60})}),300)}},{key:"lineUp",get:function(){return this.basicData.is_in_flash_sale}},{key:"lineUpBook",get:function(){return this.basicData.is_line_page}},{key:"displaySellingPrice",get:function(){return this.sellingPrice?isNaN(Number(this.sellingPrice))?this.sellingPrice:"".concat(O.b[this.klook.currency]).concat(Object(k.y)(this.sellingPrice)):""}}]),e}(h.Vue);j([h.State],w.prototype,"klook",void 0),j([Object(h.Prop)()],w.prototype,"target",void 0),j([Object(h.Prop)()],w.prototype,"sellingPrice",void 0),j([Object(h.Prop)()],w.prototype,"marketPrice",void 0),j([Object(h.Prop)()],w.prototype,"content",void 0),j([Object(h.Prop)()],w.prototype,"isInPromotion",void 0),j([Object(h.Prop)({default:0})],w.prototype,"threshold",void 0),j([Object(h.Prop)({default:function(){}})],w.prototype,"basicData",void 0);var P=w=j([Object(h.Component)({components:{LineUpBottomBar:m.default}})],w),C=(n(2482),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible||t.lineUp,expression:"visible || lineUp"}],staticClass:"experience-activity-bottom-bar-wrap"},[t.lineUp?n("LineUpBottomBar",{attrs:{"basic-data":t.basicData}}):t._e(),t._v(" "),t.lineUpBook&&t.lineUp?t._e():n("div",{staticClass:"experience-activity-bottom-bar"},[t._t("total-slot",[n("div",{staticClass:"price"},[t._t("default",[t.isInPromotion?n("span",{staticClass:"promotion-price"},[n("SvgIcon",{attrs:{name:"common#icon_flashsale",width:"20",height:"20"}}),t._v(" "),n("span",{staticClass:"selling-price",domProps:{innerHTML:t._s(t.displaySellingPrice)}})],1):n("span",{staticClass:"selling-price",domProps:{innerHTML:t._s(t.displaySellingPrice)}})]),t._v(" "),t.marketPrice?n("del",{staticClass:"market-price"},[t._v("\n            "+t._s(t._f("currencyToSymbol")(t.klook.currency))+"\n\n            "+t._s(t._f("formatThousands")(t.marketPrice))+"\n          ")]):t._e()],2)]),t._v(" "),n("klk-button",{attrs:{"data-spm-module":"LocateToPackage","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.showTarget(e)}}},[n("span",{staticClass:"content"},[t._v(t._s(t.content||t.$t("73626")))]),t._v(" "),n("SvgIcon",{class:["icon",{up:t.isIconUp}],attrs:{name:"mobile-activity#icon_nav_doubleDown"}})],1)],2)],1)])}),[],!1,null,"0d15f8cd",null).exports,D=n(1378),x=n(885);function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"priceText",value:function(t){return"".concat(this.klook.currencySymbol," ").concat(Object(k.y)(t))}},{key:"activity_price",get:function(){return this.activity_closer_price||{}}},{key:"from_price",get:function(){var t;return null===(t=this.activity_price)||void 0===t?void 0:t.from_price}},{key:"to_price",get:function(){var t;return null===(t=this.activity_price)||void 0===t?void 0:t.to_price}},{key:"sell_price",get:function(){var t;return null===(t=this.activity_price)||void 0===t?void 0:t.selling_price}},{key:"calcPreTotalPrice",get:function(){var t;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},(null===(t=this.activity_price)||void 0===t?void 0:t.price_show)||{},{save_price:""})}},{key:"sellingPrice",get:function(){var t,e;if(this.from_price===this.to_price)return this.from_price;if(this.from_price){var p="".concat(this.priceText(Number(this.from_price)));return this.$t("activity_detail_from_price",[12,p])}return(null===(e=null===(t=this.activity_price)||void 0===t?void 0:t.price_show)||void 0===e?void 0:e.sale_price)||""}},{key:"activityMarketPrice",get:function(){var t,e;if(this.isInPromotion&&this.promotionDetail){var n=this.promotionDetail,o=n.selling_price,r=n.original_selling_price;return Number(o)<Number(r)?r:""}return Number(this.from_price)<Number(null===(t=this.activity_price)||void 0===t?void 0:t.market_price)?null===(e=this.activity_price)||void 0===e?void 0:e.market_price:""}}]),e}(D.a);I([Object(h.Prop)({default:".package_options_card_type"})],R.prototype,"observeTarget",void 0),I([Object(h.Prop)()],R.prototype,"activity_closer_price",void 0),I([Object(h.Prop)({default:function(){}})],R.prototype,"basicData",void 0);var $=R=I([Object(h.Component)({components:{TotalSlot:x.a,BottomBar:S}})],R),L=(n(2483),Object(C.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BottomBar",t._g({staticClass:"experience-activity-bottom-bar-wrap",attrs:{"selling-price":t.sellingPrice,"market-price":t.activityMarketPrice,threshold:.15,target:t.observeTarget,"is-in-promotion":t.isInPromotion,"basic-data":t.basicData}},t.$listeners),[n("TotalSlot",{attrs:{slot:"total-slot","price-data":t.calcPreTotalPrice,"style-type":"flex-center"},slot:"total-slot"})],1)}),[],!1,null,"fa9e8254",null));e.default=L.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0);var m=y=h([f.Component],y),k=(n(1888),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"see-more",class:[t.platform],on:{click:function(e){return t.$emit("open")}}},[n("span",[t._v("\n    "+t._s(t.$t("city_page_view_more"))+"\n  ")]),t._v(" "),n("span",{staticClass:"see-more-icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-standard-right-new",size:"desktop"===t.platform?14:12}})],1)])}),[],!1,null,"7fae2359",null).exports,_=n(16),j=n(271),w=n(884),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getImagesSpmObj",value:function(){return this.isEdit?{}:{"data-spm-module":"PackageDetailsAttractionsImage","data-spm-virtual-item":"__virtual"}}},{key:"getImageSpmObj",value:function(t){var e=this.images.slice(0,5).length,n=5===e?5:e>5?4:e;return this.isEdit?{"data-spm-module":4===t&&this.countText?"AttractionsImageSeeMore":"AttractionsIncludedLIST?oid=activity_".concat(this.activityId,"&idx=").concat(t,"&len=").concat(n),"data-spm-virtual-item":"__virtual"}:{}}},{key:"handleImagesClick",value:function(){this.isEdit||this.$emit("open")}},{key:"handleImageClick",value:function(t){this.isEdit&&(t?this.$emit("toggle",t):this.$emit("open"))}},{key:"formatPicUrl",value:function(t){var e=this.klook.webp;return"small"===this.realSize&&Object(j.j)(t,"image/upload/",120,120,e),Object(j.j)(t,"image/upload/",200,100,e)}},{key:"logoWidth",get:function(){var t="desktop"===this.platform?this.isSmall?50:152:64;return"1:1"===this.ratio?t/3:3*t/16}},{key:"isSmall",get:function(){return"small"===this.size}},{key:"ratio",get:function(){return this.isSmall?"1:1":"16:9"}},{key:"isEdit",get:function(){return"edit"===this.mode}},{key:"filterTitleText",get:function(){var t=this.title||"76895";return this.$t(t,{num:this.total})}},{key:"realSize",get:function(){return this.size?this.size:"desktop"===this.platform?"normal":"small"}},{key:"countText",get:function(){return this.total>5?"".concat(Object(_.e)(this.total-4,!1),"+"):""}}]),e}(f.Vue);P([f.State],C.prototype,"klook",void 0),P([Object(f.State)((function(t){return t.klook.platform}))],C.prototype,"platform",void 0),P([Object(f.Prop)({default:"view"})],C.prototype,"mode",void 0),P([Object(f.Prop)()],C.prototype,"size",void 0),P([Object(f.Prop)()],C.prototype,"images",void 0),P([Object(f.Prop)()],C.prototype,"total",void 0),P([Object(f.Prop)()],C.prototype,"selectedIdList",void 0),P([Object(f.Prop)()],C.prototype,"activityId",void 0),P([Object(f.Prop)({default:""})],C.prototype,"title",void 0);var S=C=P([Object(f.Component)({components:{SeeMore:O,Logo:w.a}})],C),D=(n(1889),Object(k.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attraction-included-filter",class:{small:"small"===t.size}},[n("div",{staticClass:"filter-title"},[n("h4",{staticClass:"filter-title-text"},[t._v("\n      "+t._s(t.filterTitleText)+"\n    ")]),t._v(" "),n("div",{staticClass:"filter-title-more"},[t.isEdit?n("SeeMore",{attrs:{"data-spm-module":t.isEdit?"AttractionsSeeMore":"PackageDetailsAttractionsSeeMore","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.$emit("open")}}}):t._e()],1)]),t._v(" "),n("div",t._b({staticClass:"filter-images",on:{click:t.handleImagesClick}},"div",t.getImagesSpmObj(),!1),t._l(t.images.slice(0,5),(function(image,e){return n("div",t._b({directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.formatPicUrl(image.activity_card_image),expression:"formatPicUrl(image.activity_card_image)",arg:"background-image"}],key:image.activity_id,staticClass:"filter-images-item",class:{"show-count":!!t.countText,selected:t.selectedIdList.includes(image.activity_id)},attrs:{ratio:t.ratio},on:{click:function(n){return t.handleImageClick(4===e&&t.countText?null:image.activity_id)}}},"div",t.getImageSpmObj(e),!1),[n("Logo",{attrs:{ratio:t.ratio,width:t.logoWidth}}),t._v(" "),n("span",{staticClass:"filter-images-count"},[t._v(t._s(t.countText))]),t._v(" "),n("div",{staticClass:"filter-images-bottom"},[n("div",[n("span",{staticClass:"filter-images-name"},[t._v("\n            "+t._s(image.activity_name)+"\n          ")])]),t._v(" "),n("SvgIcon",{staticClass:"filter-images-selected",attrs:{name:"mobile-common#attractions_included_selected",size:"16"}})],1)],1)})),0)])}),[],!1,null,"7ceb972e",null));e.a=D.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1427),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)()],m.prototype,"value",void 0),y([Object(f.Prop)()],m.prototype,"isPackageSchedule",void 0);var k=m=y([f.Component],m),O=(n(1993),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-date-picker-price"},[t.value?t._e():n("p",{staticClass:"activity-date-picker-price-tips"},[t._v("\n    "+t._s(t.$t("activity_detail_available_date_price_for_all"))+"\n  ")]),t._v(" "),n("div",{staticClass:"activity-date-picker-switch"},[t._v("\n    "+t._s(t.isPackageSchedule?t.$t("26080"):t.$t("activity_detail_view_selected_package_only"))+"\n    "),n("klk-switch",t._g({attrs:{value:t.value}},t.$listeners))],1)])}),[],!1,null,null,null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isPackageSchedule=t.packageId>0,t.isLoading=!1,t.isActivitySchedule=!1,t.isMannualChange=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"packageIdChange",value:function(t){this.isMannualChange||!t||this.isPackageSchedule?this.isActivitySchedule=!t:(this.isPackageSchedule=!0,this.isActivitySchedule=!1)}},{key:"isPackageScheduleChange",value:function(t){this.packageSchedules?(this.isActivitySchedule=!1,this.$emit("changePackageType",t?"packageSchedules":"activitySchedules")):this.isPackageSchedule=!1,t||this.$emit("recalcDatePicker"),this.isMannualChange=!0,this.pretendLoading()}},{key:"hasScheduleChange",value:function(t){this.isLoading=!t}},{key:"isEmpty",value:function(t){return!t||!t.length}},{key:"pretendLoading",value:function(){var t=this;if(this.hasSchedule){this.isLoading=!0;var e=setTimeout((function(){t.hasSchedule&&(t.isLoading=!1),clearTimeout(e)}),650)}}},{key:"activitySchedules",get:function(){return this.isPackageSchedule?this.packageSchedules:this.schedules}},{key:"hasSchedule",get:function(){var t=this.isPackageSchedule&&this.isEmpty(this.packageSchedules),e=!this.isPackageSchedule&&this.isEmpty(this.schedules);return!(t||e)}}]),e}(f.Vue);j([f.State],w.prototype,"klook",void 0),j([Object(f.Prop)()],w.prototype,"schedules",void 0),j([Object(f.Prop)()],w.prototype,"packageSchedules",void 0),j([Object(f.Prop)()],w.prototype,"packageId",void 0),j([Object(f.Prop)({default:function(){return[]}})],w.prototype,"legends",void 0),j([Object(f.Watch)("packageId")],w.prototype,"packageIdChange",null),j([Object(f.Watch)("isPackageSchedule")],w.prototype,"isPackageScheduleChange",null),j([Object(f.Watch)("hasSchedule")],w.prototype,"hasScheduleChange",null);var P=w=j([Object(f.Component)({components:{ActivityDatePicker:h.a,CalenderSwitcher:_}})],w),C=(n(1994),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"active-date-picker-wrap",class:[t.klook.platform]},[n("div",{staticClass:"active-header-wrap"},[t.packageId?n("CalenderSwitcher",{staticClass:"active-date-picker-switch",attrs:{"is-package-schedule":t.isPackageSchedule},model:{value:t.isPackageSchedule,callback:function(e){t.isPackageSchedule=e},expression:"isPackageSchedule"}}):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.isEmpty(t.activitySchedules)?t._e():n("ActivityDatePicker",t._g(t._b({attrs:{schedules:t.isActivitySchedule?t.schedules:t.activitySchedules,legends:t.legends}},"ActivityDatePicker",t.$attrs,!1),t.$listeners),[n("template",{slot:"tips"},[t._t("calendar-tips")],2),t._v(" "),n("template",{slot:"bottom"},[t._t("calendar-bottom")],2)],2),t._v(" "),n("klk-loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{"show-overlay":!0,"overlay-color":"#fff"}})],1)}),[],!1,null,"658f2402",null));e.a=C.exports},function(t,e,n){"use strict";n.r(e);n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=n(1186),m=n(1425),k=n(1296),O=n(885),_=n(16),j=n(952),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=Object(f.namespace)("traveller/activity"),C=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).completeInfo=!1,t.throttleGetFixedWrapInfos=Object(h.throttle)(t.getFixedWrapInfos,300),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getCalcPreTotalPrice",value:function(){var t,e,n=Object(_.v)(this.klook.currency,"-");if(!this.calcShowPrice)return{sale_price:n};var o=null===(t=this.preSettlementApiData)||void 0===t?void 0:t.result,r=this.$refs.bookingSettlementRef,c=Object(_.v)(this.klook.currency,null===(e=r)||void 0===e?void 0:e.price);return Object(O.b)(this.currentSelectedPackage,o,{oldPriceShow:{sale_price:c}})}},{key:"clickSavePrice",value:function(t){var e,n,o=null===(n=null===(e=this.bookingSettlementBinds)||void 0===e?void 0:e.preTotalPrice)||void 0===n?void 0:n.price_summary;this.$emit("clickSavePrice",t,{priceSummary:o})}},{key:"updateModuleExtra",value:function(t){this.completeInfo=JSON.parse(t).CompletedInfo}},{key:"handleCloseModalEvent",value:function(){this.showShoppingCart&&this.showShoppingCart()}},{key:"getFixedWrapInfos",value:function(){var t,e,n,o=null===(t=this.$refs)||void 0===t?void 0:t.fixedWrapRef;if(o){var r={height:null===(n=null===(e=o)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.offsetHeight};return this.$emit("updateInfos",r),r}}},{key:"updated",value:function(){this.throttleGetFixedWrapInfos()}},{key:"arrangementId",get:function(){var t;return null===(t=this.selectedTime)||void 0===t?void 0:t.arrangement_id}},{key:"calcShowPrice",get:function(){return!(!this.arrangementId||Object(h.isEmpty)(this.units))&&(this.units||[]).reduce((function(t,e){return t+=e.count||0}),0)>0}},{key:"itemExtra",get:function(){var t=(this.units||[]).filter((function(t){return t.count>0}));return JSON.stringify({CompletedInfo:this.completeInfo,Sku_id:t.map((function(t){return t.skuId})),Sku_num:t.map((function(t){return t.count}))})}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"templateId",get:function(){return this.businessData.template_id}},{key:"isYiFunVoucher",get:function(){var t,e;return!!(null===(e=null===(t=this.businessData)||void 0===t?void 0:t.card_tags)||void 0===e?void 0:e.yifun_voucher)}},{key:"isNswActivity",get:function(){return this.businessData.is_nsw_activity}},{key:"isOpenTicket",get:function(){return 3===this.businessData.activity_ticket_type}},{key:"packages",get:function(){return this.businessData.packages}},{key:"isSoldOut",get:function(){var t=this.packages;return Object(h.isEmpty)(t)||t.every((function(t){return!t.has_stocks}))}},{key:"isBtnVisibleAddtocart",get:function(){var t="boolean"==typeof this.businessData.is_support_shopping_cart?this.businessData.is_support_shopping_cart:!this.isNswActivity;return![47631,46820,48639,48789,55826,49807,55724].includes(this.activityId)&&t&&!this.isGuestCheckout}},{key:"isInPromotion",get:function(){var t,e;return 5===((null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event)||{}).status}},{key:"bookingSettlementBinds",get:function(){var t,e;return{preTotalPrice:this.getCalcPreTotalPrice(),units:this.units,isInPromotion:this.isInPromotion,promotionDetail:null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}}},{key:"bookingBottomBtnsBinds",get:function(){return{selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,templateId:this.templateId,units:this.units,activityId:this.activityId,isSoldOut:this.isSoldOut,isYiFunVoucher:this.isYiFunVoucher,isOpenTicket:this.isOpenTicket,selectedPackagePriceSchedule:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount}}}]),e}(f.Vue);w([f.State],C.prototype,"klook",void 0),w([Object(f.Prop)({type:String,default:""})],C.prototype,"fromType",void 0),w([Object(f.Prop)()],C.prototype,"hideDiscountTips",void 0),w([Object(f.Prop)()],C.prototype,"units",void 0),w([Object(f.Prop)()],C.prototype,"businessData",void 0),w([Object(f.Prop)({default:!1})],C.prototype,"isMultiPass",void 0),w([Object(f.Prop)()],C.prototype,"currentSelectedPackage",void 0),w([Object(f.Prop)()],C.prototype,"selectedTime",void 0),w([Object(f.Prop)()],C.prototype,"packageSchedules",void 0),w([Object(f.Prop)()],C.prototype,"packageSelectedDate",void 0),w([Object(f.Prop)()],C.prototype,"totalUnitCount",void 0),w([f.Getter],C.prototype,"isGuestCheckout",void 0),w([Object(f.Prop)()],C.prototype,"showShoppingCart",void 0),w([P.State],C.prototype,"preSettlementApiData",void 0),w([P.Getter],C.prototype,"preSettlementTips2getters",void 0);var S=C=w([Object(f.Component)({components:{PriceDiscountTips:j.a,TotalSlot:O.a,BookingBarWrap:m.a,ExpBookingSettlement:k.a,BookingBottomBtns:y.a}})],C),D=(n(1973),n(43)),component=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BookingBarWrap",{ref:"fixedWrapRef",staticClass:"js-hack-total-footer booking-bottom-bar",class:t.fromType,attrs:{"price-visible":!t.isMultiPass,"is-sold-out":t.isSoldOut}},[!t.hideDiscountTips&&t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"discount-tips-style",attrs:{slot:"discount-tips",tips:t.preSettlementTips2getters},slot:"discount-tips"}):t._e(),t._v(" "),n("ExpBookingSettlement",t._b({ref:"bookingSettlementRef",attrs:{slot:"settlement"},on:{clickSavePrice:t.clickSavePrice},slot:"settlement"},"ExpBookingSettlement",t.bookingSettlementBinds,!1)),t._v(" "),n("div",{staticClass:"activity-booking-options_bottom-bar-buttons",attrs:{slot:"buttons"},slot:"buttons"},[t._t("slot-booking-bar__buttons",[!t.isBtnVisibleAddtocart||t.fromType&&"addToCart"!==t.fromType?t._e():n("BookingBottomBtns",t._b({staticClass:"add-to-card",attrs:{type:"addToCart","data-spm-module":"AddToCartBtn?ext="+t.itemExtra+"&trg=manual","data-spm-virtual-item":"__virtual"},on:{"next-btn-complete":t.updateModuleExtra,closeModal:t.handleCloseModalEvent}},"BookingBottomBtns",t.bookingBottomBtnsBinds,!1)),t._v(" "),t.fromType&&"bookNow"!==t.fromType?t._e():n("BookingBottomBtns",t._b({attrs:{"data-spm-module":(t.isMultiPass?"NextBtn":"BookNowBtn")+"?ext="+t.itemExtra+"&trg=manual","data-spm-virtual-item":"__virtual","btn-content":t.isMultiPass?this.$t("31062-reserve_slot"):"",type:"bookNow"}},"BookingBottomBtns",t.bookingBottomBtnsBinds,!1))],{slotScope:{params:t.bookingBottomBtnsBinds}})],2)],1)}),[],!1,null,"50878264",null);e.default=component.exports},,,function(t,e,n){"use strict";n.r(e);n(30);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).configObj={mode:"determinate","background-color":"#eee",color:"#f09b0a"},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcList",get:function(){return(this.list||[]).map((function(t){var e,text=t.name,n=t.average_score,o=parseFloat(n)/5*100;return{text:text,value:null===(e=n)||void 0===e?void 0:e.toFixed(1),percent:o}}))}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"list",void 0);var m=y=h([f.Component],y),k=(n(1551),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.calcList.length?n("div",{staticClass:"sub-score",class:t.klook.platform},[n("div",{staticClass:"sub-score-box"},t._l(t.calcList,(function(e,i){return n("div",{key:i,staticClass:"sub-score-box__item"},[n("span",{staticClass:"text-box"},[t._v(t._s(e.text))]),t._v(" "),n("div",{staticClass:"score-wrap"},[n("klk-linear-progress",t._b({staticClass:"custom-progress-style",attrs:{value:e.percent,size:"desktop"===t.klook.platform?8:6}},"klk-linear-progress",t.configObj,!1)),t._v(" "),n("span",{staticClass:"value-box"},[t._v(t._s(e.value))])],1)])})),0)]):t._e()}),[],!1,null,"9f6cbea4",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(13),r=(n(20),n(27),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1412),m=n(1155),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).popVisible=!1,t.selectedIdList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleConfirm",value:function(t){this.selectedIdList=t||[],this.commit()}},{key:"handleToggle",value:function(t){this.selectedIdList.includes(t)?this.selectedIdList=this.selectedIdList.filter((function(e){return e!==t})):this.selectedIdList.push(t),this.commit()}},{key:"commit",value:function(){this.$emit("select",Object(o.a)(this.selectedIdList))}},{key:"totalActivityNum",get:function(){return this.info.activity_total||0}}]),e}(h.Vue);k([Object(h.Prop)({default:"view"})],O.prototype,"mode",void 0),k([Object(h.Prop)({default:"small"})],O.prototype,"size",void 0),k([Object(h.Prop)()],O.prototype,"info",void 0),k([Object(h.Prop)()],O.prototype,"activityId",void 0),k([Object(h.Prop)()],O.prototype,"packageId",void 0),k([Object(h.Prop)()],O.prototype,"title",void 0);var _=O=k([Object(h.Component)({components:{AttractionIncludedFilter:y.a,AttractionIncludedMobile:m.default}})],O),j=n(43),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalActivityNum>0?n("div",{staticClass:"attraction-included"},[n("AttractionIncludedFilter",{attrs:{mode:t.mode,size:t.size,images:t.info.top_activities||[],title:t.title,total:t.totalActivityNum,"selected-id-list":t.selectedIdList,"activity-id":t.activityId},on:{open:function(e){t.popVisible=!0},toggle:t.handleToggle}}),t._v(" "),n("AttractionIncludedMobile",{attrs:{"activity-id":t.activityId,"package-id":t.packageId,total:t.totalActivityNum,title:t.title,visible:t.popVisible},on:{"update:visible":function(e){t.popVisible=e},closeModal:function(e){t.popVisible=!1}}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(11),n(8),n(12);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).rules=t.getRules(),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getRules",value:function(){var t=this;return{in:{hasError:null,validate:function(data,e){var n,o,r;if((!t.autoHideExtra||(null===(n=t.calcInList)||void 0===n?void 0:n.length))&&!(null===(o=data)||void 0===o?void 0:o.id))return e.hasError=new Error(t.$t("global.select.empty_error")),null===(r=e)||void 0===r?void 0:r.hasError;e.hasError=null}},out:{hasError:null,validate:function(data,e){var n,o,r;if((!t.autoHideExtra||(null===(n=t.calcOutList)||void 0===n?void 0:n.length))&&!(null===(o=data)||void 0===o?void 0:o.id))return e.hasError=new Error(t.$t("global.select.empty_error")),null===(r=e)||void 0===r?void 0:r.hasError;e.hasError=null}}}}},{key:"checkValidate",value:function(){var t=this.timeData,e=this.rules;return Object.keys(e).map((function(n){var o=t[n];return!e[n].validate(o,e[n])})).every((function(t){return t}))}},{key:"clickHandler",value:function(t){this.$emit("clickTime",t)}},{key:"calcInList",get:function(){var t;return(null===(t=this.timeExtra)||void 0===t?void 0:t.in)||[]}},{key:"calcOutList",get:function(){var t;return(null===(t=this.timeExtra)||void 0===t?void 0:t.out)||[]}},{key:"calcTimeFormatStr",get:function(){var t=this;return function(e){var n,o;return(null===(o=null===(n=t.timeData)||void 0===n?void 0:n[e])||void 0===o?void 0:o.startEndFormatStr)||""}}},{key:"calcActive",get:function(){var t=this;return function(e){var n,o=t.styleType,r=t.timeData;return"select-time-type"===o&&(null===(n=r)||void 0===n?void 0:n.key)===e?"on":""}}},{key:"calcFirstKey",get:function(){var t,e=this.isDate,n=this.calcInList;return e&&(null===(t=n)||void 0===t?void 0:t.length)?this.$t("88949"):e?this.$t("13541"):this.$t("88952")}},{key:"calcLastKey",get:function(){var t,e=this.isDate,n=this.calcOutList;return e&&(null===(t=n)||void 0===t?void 0:t.length)?this.$t("88951"):e?this.$t("15987"):this.$t("88953")}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"flexType",void 0),h([Object(f.Prop)()],y.prototype,"isDate",void 0),h([Object(f.Prop)()],y.prototype,"showRight",void 0),h([Object(f.Prop)()],y.prototype,"timeData",void 0),h([Object(f.Prop)()],y.prototype,"styleType",void 0),h([Object(f.Prop)()],y.prototype,"autoHideExtra",void 0),h([Object(f.Prop)()],y.prototype,"timeExtra",void 0);var m=y=h([Object(f.Component)({components:{}})],y),k=(n(1578),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"range-date-time",class:t.flexType},[n("div",{staticClass:"range-date-time__box"},[!t.autoHideExtra||t.calcInList.length?n("div",{staticClass:"box-item",class:[t.calcActive("in"),t.rules.in.hasError&&"has-error"],on:{click:function(e){return t.clickHandler("in")}}},[n("span",{staticClass:"box-item__left"},[n("span",{staticClass:"filed-key"},[t._v(t._s(t.calcFirstKey))]),t._v(" "),t.calcTimeFormatStr("in")?n("span",{staticClass:"filed-value"},[t._v(t._s(t.calcTimeFormatStr("in")))]):n("span",{staticClass:"filed-text"},[t._v(t._s(t.$t("14651")))])]),t._v(" "),t.showRight?n("span",{staticClass:"box-item__right"},[n("SvgIcon",{attrs:{name:"common#icon_navigation_chevron_up_xs",size:"16"}})],1):t._e()]):t._e(),t._v(" "),!t.autoHideExtra||t.calcOutList.length?n("div",{staticClass:"box-item",class:[t.calcActive("out"),t.rules.out.hasError&&"has-error"],on:{click:function(e){return t.clickHandler("out")}}},[n("span",{staticClass:"box-item__left"},[n("span",{staticClass:"filed-key"},[t._v(t._s(t.calcLastKey))]),t._v(" "),t.calcTimeFormatStr("out")?n("span",{staticClass:"filed-value"},[t._v(t._s(t.calcTimeFormatStr("out")))]):n("span",{staticClass:"filed-text"},[t._v(t._s(t.$t("14651")))])]),t._v(" "),t.showRight?n("span",{staticClass:"box-item__right"},[n("SvgIcon",{attrs:{name:"common#icon_navigation_chevron_up_xs",size:"16"}})],1):t._e()]):t._e()])])}),[],!1,null,"03f3a3d4",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(13),r=(n(23),n(4)),c=n(0),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(213),O=n.n(k),_=n(162),j=n.n(_),w=n(10),P=n.n(w),C=n(2044),S=n(3),D=n(16),x=n(2060);function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).imageList=[],t.reviews=[],t.page=1,t.pageSize=8,t.total=0,t.currentReview=null,t.throttleGetImages=O()((function(){t.getImages()}),3e3,{trailing:!0}),t.currentTab=0,t}var n,y;return Object(h.a)(e,t),Object(d.a)(e,[{key:"showGalleryChange",value:function(t){t&&(this.currentTab=this.defaultTag||0)}},{key:"overrideImagesChange",value:function(t){t&&this.initImages()}},{key:"mounted",value:function(){this.getImages(!0)}},{key:"initImages",value:function(){var t;(null===(t=this.overrideImages)||void 0===t?void 0:t.length)&&this.overrideReview&&(this.currentTab=this.defaultTag,this.imageList=this.overrideImages.map((function(t){return I({},t,{reviewId:t.review_id})})),this.currentReview=this.overrideReview,this.reviews[this.imageList[0].reviewId]=this.overrideReview,this.total=this.imageList.length)}},{key:"handleBuyNow",value:function(){var t=this;this.$emit("close"),this.$nextTick((function(){t.$emit("buy-now")}))}},{key:"changeCommentLike",value:function(data){var t=this.reviews[data.reviewId];this.$set(t,"like_count",t.like_count+1),this.$set(t,"has_liked",!0)}},{key:"slideChangeTransitionEnd",value:function(){this.throttleGetImages()}},{key:"getImages",value:(y=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]&&l[0],!this.dontGetImages){t.next=3;break}return t.abrupt("return");case 3:if(!(null===(n=this.overrideImages)||void 0===n?void 0:n.length)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.getReviewsImages({page:this.page,pageSize:this.pageSize});case 7:r=t.sent,(null===(o=r)||void 0===o?void 0:o.imageTotalCount)&&(this.total=r.imageTotalCount,c=this.arrayToObj(r.reviewImagesInfo),this.reviews=Object.assign(this.reviews,c),this.imageList=this.imageList.concat(r.imageList),this.page=this.page+1,e&&this.imageList.length&&this.reviews.length&&(this.currentReview=this.reviews[this.imageList[0].reviewId]));case 9:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"arrayToObj",value:function(t){var e={};return t.forEach((function(t){e[t.review_id]=t})),e}},{key:"getReviewsImages",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(data){var e,n,r,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.activityId,t.next=3,this.$axios.$get(Object(D.ob)(S.a.activityReviewGalleryImages,{activityId:e}),{regularUrl:"/v1/usrcsrv/activities/{*}/images/get",params:{page:data.page,limit:data.pageSize}});case 3:if(n=t.sent,r=n.result,!n.success||P()(r)){t.next=11;break}if(l=r.image_total_count,d=r.review_images_info,0!==l&&!P()(d)&&!P()(d)){t.next=9;break}return t.abrupt("return",{});case 9:return v=j()(d,(function(t,e){var n,r;return t.imageList=[].concat(Object(o.a)(t.imageList),Object(o.a)((r=null===(n=e)||void 0===n?void 0:n.images,null!=r?r:[]).map((function(img){return I({},img,{reviewId:e.review_id})})))),t.reviewsMap=I({},t.reviewsMap,Object(c.a)({},e.review_id,e)),t}),{imageList:[],reviewsMap:{}}),t.abrupt("return",{imageTotalCount:r.image_total_count,reviewsCount:r.reviews_count,reviewImagesInfo:r.review_images_info,imageList:v.imageList,reviewsMap:v.reviewsMap});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"BigSwiperSlideChange",value:function(t){var e,n,o=null!=(n=null===(e=this.imageList[t])||void 0===e?void 0:e.reviewId)?n:void 0;this.currentReview=o?this.reviews[o]:void 0}},{key:"closeModal",value:function(){this.$emit("close")}},{key:"switchTabs",value:function(t){var e=this;this.currentTab=t,this.$nextTick((function(){e.$refs["gallery".concat(t)].updateSwiper()}))}},{key:"calcShowNavTag",get:function(){var t=this.bannerList,e=this.total;return t&&t.length&&e}}]),e}(m.Vue);R([Object(m.Prop)({default:!1})],$.prototype,"hackCloseBtn",void 0),R([Object(m.Prop)({default:""})],$.prototype,"title",void 0),R([Object(m.Prop)({default:!1})],$.prototype,"dontGetImages",void 0),R([Object(m.Prop)({default:function(){return[]}})],$.prototype,"bannerList",void 0),R([Object(m.Prop)()],$.prototype,"activityId",void 0),R([Object(m.Prop)()],$.prototype,"showGallery",void 0),R([Object(m.Prop)()],$.prototype,"defaultTag",void 0),R([Object(m.Prop)({default:0})],$.prototype,"currentIndex",void 0),R([Object(m.Prop)({default:null})],$.prototype,"overrideImages",void 0),R([Object(m.Prop)({default:null})],$.prototype,"overrideReview",void 0),R([Object(m.Watch)("showGallery")],$.prototype,"showGalleryChange",null),R([Object(m.Watch)("overrideImages",{immediate:!0})],$.prototype,"overrideImagesChange",null);var L=$=R([Object(m.Component)({components:{ActivityCommentItemInGallery:x.a,ImageSwiper:C.default}})],$),A=(n(2436),n(43)),component=Object(A.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-modal",{staticClass:"page-activity-reviews-gallery-modal",attrs:{open:t.showGallery,scrollable:!1,"overlay-closable":!1,padding:0,closable:!t.hackCloseBtn,"show-default-footer":!1,fullscreen:!0,overlay:!1},on:{"update:open":function(e){t.showGallery=e},close:t.closeModal}},[t.hackCloseBtn?n("div",{staticClass:"hack-close-btn-wrap"},[n("span",{staticClass:"hack-close-btn-wrap__close-btn",on:{click:t.closeModal}},[n("svg",[n("use",{attrs:{"xlink:href":"#klk-icon-icon_navigation_close"}})])])]):t._e(),t._v(" "),n("div",{staticClass:"reviews-container",class:!(t.title||t.calcShowNavTag)&&"hack-hide-nav-tag"},[t.title?n("div",{staticClass:"button-group"},[n("span",{staticClass:"title-text"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.calcShowNavTag?n("div",{staticClass:"button-group"},[n("klk-button",{staticClass:"button-group-item",class:{active:0===t.currentTab},attrs:{type:"outlined","data-spm-module":"OfficialPhoto?oid=activity_"+t.activityId,"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.switchTabs(0)}}},[t._v("\n        "+t._s(t.$t("review.merchant_photo_gallery"))+" ("+t._s(t.bannerList.length)+")\n      ")]),t._v(" "),t.total>0?n("klk-button",{staticClass:"button-group-item",class:{active:1===t.currentTab},attrs:{type:"outlined","data-spm-module":"CustomerPhotos?oid=activity_"+t.activityId,"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.switchTabs(1)}}},[t._v("\n        "+t._s(t.$t("review.customer_photo_gallery"))+" ("+t._s(t.total)+")\n      ")]):t._e()],1):t._e(),t._v(" "),n("div",{staticClass:"image-gallery-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.currentTab,expression:"currentTab === 0"}],staticClass:"reviews-container-left banner-swiper"},[n("ImageSwiper",{ref:"gallery0",staticClass:"banner-swiper__img-content",attrs:{"image-list":t.bannerList,total:t.bannerList.length,"current-index":t.currentIndex,"need-enlarge":!0,name:"banner-swiper"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentTab,expression:"currentTab === 1"}],staticClass:"reviews-container-left reviews-swiper"},[n("ImageSwiper",{ref:"gallery1",attrs:{"image-list":t.imageList,total:t.total,"current-index":t.currentIndex,name:"reviews-swiper"},on:{bigSwiperChange:t.BigSwiperSlideChange,slideToEnd:t.slideChangeTransitionEnd}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentTab,expression:"currentTab === 1"}],staticClass:"reviews-container-right"},[t.currentReview?n("div",[n("ActivityCommentItemInGallery",{attrs:{comment:t.currentReview,spm:"Buy_It_Now?oid=activity_"+t.activityId},on:{changeCommentLike:t.changeCommentLike,"buy-now":t.handleBuyNow}})],1):t._e()])])])])}),[],!1,null,"8a91ef9a",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2066),y=n(2067),m=n(2188),k=n(1401),O=n(1034),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).moreObj={len:8,status:""},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"initStatus",value:function(t,e){var n=this.moreObj;return!t||e&&e.length<=n.len?n.status:(n.status="more",n.status)}},{key:"getStatusList",value:function(t,e){var n=this.moreObj;return"more"===(n.status||this.initStatus(t,e))?e.filter((function(t,i){return i<n.len})):e||[]}},{key:"clickShowMore",value:function(t){this.moreObj.status=t}},{key:"isDisabled",value:function(t){return!this.isAbExperiment&&(!t.isScheduleMatch||!t.isPackageMatch)}},{key:"handleClear",value:function(){this.$emit("clear")}}]),e}(k.a);_([Object(f.Prop)({default:!1})],j.prototype,"isAbExperiment",void 0),_([Object(f.Prop)({default:!1})],j.prototype,"isEnableClear",void 0),_([Object(f.Prop)({default:0})],j.prototype,"firstUnselectedSpecId",void 0);var w=j=_([Object(f.Component)({components:{ShowMoreBox:O.default,SpecTitle:h.a,ActivityPackageBtn:m.a,AttrDetailBtn:y.a}})],j),P=(n(2518),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-spec-wrap"},[n("div",{staticClass:"activity-package-spec-wrap-title"},[n("span",{staticClass:"activity-package-spec-wrap-title-text"},[t._v("\n      "+t._s(t.$t("activity.select.option"))+"\n    ")]),t._v(" "),n("div",[t.isEnableClear?n("span",{staticClass:"activity-package-spec-wrap-title-clear",attrs:{"data-spm-module":"Clear_Btn","data-spm-virtual-item":"__virtual"},on:{click:t.handleClear}},[t._v("\n        "+t._s(t.$t("12443"))+"\n      ")]):t._e()])]),t._v(" "),n("div",t._l(t.specList,(function(e){return n("div",{key:e.id,staticClass:"activity-spec",class:["activity-spec",e.id===t.firstUnselectedSpecId&&"unselected-spec"]},[n("SpecTitle",{attrs:{spec:e},on:{select:t.handleSelect}}),t._v(" "),n("div",{staticClass:"activity-package-attributes-wrap"},[n("div",{ref:"container",refInFor:!0,staticClass:"activity-package-attributes",class:{"single-spec-with-discount":t.isSingleSpecWithDiscount}},[0===e.text_type?[n("ShowMoreBox",{attrs:{status:t.moreObj.status},on:{click:t.clickShowMore},scopedSlots:t._u([{key:"btn",fn:function(e){var o=e.calcText,r=e.clickBtn,c=e.status;return[n("div",{class:["btn-wrap","more"===c&&"show-content"],on:{click:r}},[n("span",{staticClass:"text"},[t._v(t._s(o))]),t._v(" "),n("SvgIcon",{attrs:{name:"mobile-activity#icon_nav_chevron_down_xs",size:"16"}})],1)]}}],null,!0)},t._l(t.getStatusList(t.isSingleSpec,e.attr),(function(o){return n("ActivityPackageBtn",{key:o.id,attrs:{id:"js-ticket-type-"+o.id,active:o.isActive,disabled:t.isDisabled(o),"promo-tag":o.promoTag,icon:o.isScheduleMatch?"":"common#icon_time_calendar_unavailable_xs","icon-size":16,discount:o.discount,content:o.name,"data-id":o.id,"open-date-tip":o.openDateTip},nativeOn:{click:function(n){return t.handleSelect(o,e)}}})})),1)]:t._e(),t._v(" "),1===e.text_type?[n("AttrDetailBtn",{attrs:{spec:e},on:{select:t.handleSelect}})]:t._e()],2)])],1)})),0),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isPackageNotAvailable||t.isScheduleNotAvailable,expression:"isPackageNotAvailable || isScheduleNotAvailable"}],staticClass:"activity-not-available-tips_wrap"},[t.isPackageNotAvailable?n("div",{staticClass:"activity-not-available-tips"},[n("div",{staticClass:"not-match_icon fn"}),t._v(" "),n("span",{staticClass:"not-available-content"},[t._v("\n        "+t._s(t.$t("activity.option.unshot_desc"))+"\n      ")])]):t._e(),t._v(" "),t.isScheduleNotAvailable?n("div",{staticClass:"activity-not-available-tips"},[n("SvgIcon",{staticClass:"fn",attrs:{name:"common#icon_time_calendar_unavailable_xs",size:"16",color:"#b2b2b2"}}),t._v(" "),n("span",{staticClass:"not-available-content"},[t._v("\n        "+t._s(t.$t("activity.date.unavailable"))+"\n      ")])],1):t._e()])])}),[],!1,null,"cad01bf0",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(13),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(7),m=n.n(y),k=n(1112),O=n(211),_=n(1027),j=n(886),w=n(1103),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).selectedDate="",t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"valueChange",value:function(t){t!==this.selectedDate&&(this.slide(t,this.smooth),this.selectedDate=t)}},{key:"getTrackInfo",value:function(t){return this.isTrackItem?{"data-spm-item":"SelectDate?ext=".concat(JSON.stringify({Date:t.date}))}:{"data-spm-module":"SelectDate?ext=".concat(JSON.stringify({Date:t.date})),"data-spm-virtual-item":"__virtual"}}},{key:"getDisplayDate",value:function(t,e){if(e<2){var n=m()().format("YYYY-MM-DD"),o=m()().add(1,"day").format("YYYY-MM-DD");if(t===n)return this.$t("today");if(t===o)return this.$t("search_tomorrow")}return Object(O.e)(t,this.$t.bind(this),this.klook.language,3)}},{key:"slide",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];setTimeout((function(){var o=e.getItem(t);o&&(e.useNewScroll?Object(w.a)(e.getWrapper(),o):o.scrollIntoView({behavior:n?"smooth":"auto",inline:"center",block:"nearest"}))}),160)}},{key:"formatDate",value:function(t){return Object(O.e)(t,this.$t.bind(this),this.klook.language,1)}},{key:"formatPrice",value:function(t){return"".concat(this.klook.currencySymbol," ").concat(t)}},{key:"change",value:function(t){if(t.soldout||t.disable)return null;var e=t.date;this.selectedDate=e,this.slide(e),this.$emit("change",e,t),this.$emit("input",e,t)}},{key:"getWrapper",value:function(){var t;return null===(t=this.$el)||void 0===t?void 0:t.querySelector(".card-swiper")}},{key:"getItem",value:function(t){var e;return null===(e=this.$el)||void 0===e?void 0:e.querySelector('[data-date="'.concat(t,'"]'))}},{key:"mounted",value:function(){var t=this,a=setTimeout((function(){t.slide(t.value,t.smooth),clearTimeout(a)}),500)}},{key:"hasLegend",get:function(){return this.originalSchedules.some((function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)>0}))}},{key:"isOverLimit",get:function(){var t,e=this;return!!this.value&&(!!(null===(t=this.schedules)||void 0===t?void 0:t.length)&&!this.schedules.some((function(t){return m()(e.value).isSame(t.date,"day")})))}},{key:"mySchedule",get:function(){if(this.isOverLimit&&this.value){var t=m()(this.value).format("YYYY-MM-DD"),e=this.originalSchedules.find((function(e){return e.date===t}))||{date:t,selling_price:"",soldout:!1,stocks:[],disable:!0};return[].concat(Object(o.a)(this.schedules),[e])}return this.schedules}}]),e}(h.Vue);P([h.State],C.prototype,"klook",void 0),P([Object(h.Prop)()],C.prototype,"originalSchedules",void 0),P([Object(h.Prop)()],C.prototype,"schedules",void 0),P([Object(h.Prop)()],C.prototype,"value",void 0),P([Object(h.Prop)({default:!1})],C.prototype,"smooth",void 0),P([Object(h.Prop)({default:!0})],C.prototype,"priceVisible",void 0),P([Object(h.Prop)({default:!0})],C.prototype,"isTrackItem",void 0),P([Object(h.Prop)({default:function(){return[]}})],C.prototype,"legends",void 0),P([Object(h.Prop)({default:!1})],C.prototype,"useNewScroll",void 0),P([Object(h.Watch)("value",{immediate:!0})],C.prototype,"valueChange",null);var S=C=P([Object(h.Component)({components:{CardSwiper:k.a,MiniDateButton:_.a,CalendarLengends:j.a}})],C),D=(n(1358),n(43)),component=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-mini-calendar"},[n("CardSwiper",{staticClass:"mini-calendar"},t._l(t.mySchedule,(function(e,o){return n("div",{key:e.date,staticClass:"mini-calendar_item"},[n("MiniDateButton",t._b({staticClass:"mini-calendar_item-btn j-mini-calendar_item",class:{"big-mini-calendar_item-btn":t.hasLegend},attrs:{disable:e.disable||e.soldout,active:e.date===t.value,"data-date":e.date},nativeOn:{click:function(n){return t.change(e)}}},"MiniDateButton",t.getTrackInfo(e),!1),[t._t("default",[n("div",{staticClass:"date"},[t._v(t._s(t.getDisplayDate(e.date,o)))]),t._v(" "),t.priceVisible?n("div",{staticClass:"normal-font"},[e.soldout?n("div",[t._v(t._s(t.$t("sold_out")))]):e.disable?n("div",[t._v(t._s(t.$t("19451")))]):n("div",[t._v(t._s(t.formatPrice(e.selling_price)))])]):t._e(),t._v(" "),n("CalendarLengends",{attrs:{legends:t.legends,item:e}})])],2)],1)})),0)],1)}),[],!1,null,"9c5fb4ba",null);e.a=component.exports},function(t,e,n){"use strict";n(61),n(14),n(11);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(7),h=n.n(f),y=n(21),m=n(16),k=n(85),O=n(1096),_=n(886),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).legendColor="",t.statementVisible=!1,t.legendsInfo={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){var e=this;t&&this.$nextTick((function(){var t,n,o,r,c=null===(n=null===(t=e)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.querySelector(".time-popup-item.selected");if(e.scrollIntoView(c),!c){var l=null===(r=null===(o=e)||void 0===o?void 0:o.$el)||void 0===r?void 0:r.querySelector(".time-popup-item:not(.disabled)");e.scrollIntoView(l)}}))}},{key:"getTrackInfo",value:function(t){return this.isTrackItem?{"data-spm-item":"SelectTime?ext=".concat(JSON.stringify({time:this.formatTime(t)}))}:{"data-spm-module":"SelectTime?ext=".concat(JSON.stringify({time:this.formatTime(t)})),"data-spm-virtual-item":"__virtual"}}},{key:"showStatementModal",value:function(data){this.legendsInfo=data,this.statementVisible=!0}},{key:"scrollIntoView",value:function(t){t&&t.scrollIntoView({block:"start",inline:"start",behavior:"smooth"})}},{key:"setTimeFormat",value:function(t){return h()(t).format(this.timeFormatString)}},{key:"formatTime",value:function(time){var t;return(null===(t=time)||void 0===t?void 0:t.date)?this.setTimeFormat(time.date):""}},{key:"showLegend",value:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)}},{key:"getLegendColor",value:function(t){var e,n,o;if(this.legendColor)return this.legendColor;var r=(null===(e=t)||void 0===e?void 0:e.legend_keys)||[];if((null===(n=r)||void 0===n?void 0:n.length)&&this.LengendsMap){var c=!0,l=!1,d=void 0;try{for(var v,f=r[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var h=v.value;this.LengendsMap[h]&&(this.legendColor=null===(o=this.LengendsMap[h])||void 0===o?void 0:o.color)}}catch(t){l=!0,d=t}finally{try{c||null==f.return||f.return()}finally{if(l)throw d}}}return this.legendColor}},{key:"formatPrice",value:function(time){var t;if(!(null===(t=time)||void 0===t?void 0:t.date))return"";var e="".concat(k.b[this.klook.currency]," ").concat(Object(m.y)(time.selling_price));return time.disabled?"".concat(this.$t("global.sold_out")):"".concat(this.priceVisible?e:"")}},{key:"select",value:function(t){var e=this;if(t.disable)return null;setTimeout((function(){e.$emit("selectTime",t),e.close()}),50)}},{key:"close",value:function(){this.$emit("update:visible",!1)}},{key:"currentSelectedDate",get:function(){var t;return null===(t=this.selectedTime)||void 0===t?void 0:t.date}},{key:"LengendsMap",get:function(){var t;return(null===(t=this.legends)||void 0===t?void 0:t.length)?this.legends.reduce((function(p,t){var e=t.key,n=t.color,desc=t.desc;return p[e]={color:n,key:e,desc:desc},p}),{}):null}},{key:"hasLegends",get:function(){return(this.timeList||[]).some((function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)>0}))}}]),e}(y.Vue);j([y.State],w.prototype,"klook",void 0),j([Object(y.Prop)()],w.prototype,"packageId",void 0),j([Object(y.Prop)()],w.prototype,"title",void 0),j([Object(y.Prop)()],w.prototype,"visible",void 0),j([Object(y.Prop)()],w.prototype,"timeList",void 0),j([Object(y.Prop)()],w.prototype,"selectedTime",void 0),j([Object(y.Prop)({default:!0})],w.prototype,"priceVisible",void 0),j([Object(y.Prop)({default:!0})],w.prototype,"isTrackItem",void 0),j([Object(y.Prop)({default:function(){return[]}})],w.prototype,"legends",void 0),j([y.Getter],w.prototype,"timeFormatString",void 0),j([Object(y.Watch)("visible",{immediate:!0})],w.prototype,"visibleChange",null);var P=w=j([Object(y.Component)({components:{StatementModal:O.a,CalendarLengends:_.a}})],w),C=(n(1362),n(43)),component=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("klk-bottom-sheet",{staticClass:"time-popup",class:{"time-popup-legend-warpper":t.hasLegends},attrs:{"show-close":"",transfer:"",visible:t.visible,title:t.title||t.$t("12281")},on:{close:t.close}},[t.visible?n("div",{staticClass:"time-popup-content",attrs:{"data-spm-module":"CheckTimeslotAll?oid=package_"+t.packageId}},t._l(t.timeList,(function(e){return n("div",t._b({key:e.date,staticClass:"time-popup-item",class:{disabled:e.disable,selected:t.currentSelectedDate===e.date},on:{click:function(n){return t.select(e)}}},"div",t.getTrackInfo(e),!1),[t.currentSelectedDate===e.date?n("SvgIcon",{staticClass:"time-popup-icon",attrs:{name:"common#icon_selected",size:"24"}}):t._e(),t._v(" "),n("div",{staticClass:"time-popup-time"},[n("span",{staticClass:"time"},[t._t("default",[t._v(t._s(t.formatTime(e)))],{slotScope:{item:e}})],2),t._v(" "),t.showLegend(e)?n("i",{staticClass:"dot",style:{backgroundColor:t.getLegendColor(e)}}):t._e()]),t._v(" "),n("div",{staticClass:"time-popup-price"},[t._v("\n        "+t._s(t.formatPrice(e))+"\n      ")])],1)})),0):t._e(),t._v(" "),t.hasLegends?n("div",{staticClass:"time-popup-footer"},[n("CalendarLengends",{attrs:{legends:t.legends,"show-text":!0,"show-statement":!0},on:{showStatement:t.showStatementModal}})],1):t._e(),t._v(" "),n("StatementModal",t._b({attrs:{visible:t.statementVisible},on:{"update:visible":function(e){t.statementVisible=e}}},"StatementModal",t.legendsInfo,!1))],1):t._e()}),[],!1,null,"62c411d2",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(885),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"marketPrice",get:function(){return this.unit.isInPromotion?this.unit.originalPrice:this.unit.marketPrice?this.unit.marketPrice:""}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)({default:function(){return{}}})],m.prototype,"unit",void 0);var k=m=y([Object(f.Component)({components:{TotalSlot:h.a}})],m),O=(n(1580),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-card-price"},[this.unit.isFree?e("div",{staticClass:"package-card-desc"},[e("span",[this._v("\n      "+this._s(this.unit.specPriceDesc||this.$t("15843"))+"\n    ")])]):e("div",{staticClass:"package-card-text"},[this._t("price-slot",[e("TotalSlot",{attrs:{"price-data":this.unit.price_show,"style-type":"flex-column mini-style","hide-summary-price":!0}})])],2)])}),[],!1,null,"11b38bad",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).visible=!1,t}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:!0})],h.prototype,"priceVisible",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"isSoldOut",void 0);var y=h=f([v.Component],h),m=(n(1972),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["booking-bar-wrap",{"booking-bar-wrap--top":t.visible}]},[t._t("discount-tips"),t._v(" "),!t.isSoldOut&&t.priceVisible?n("div",{staticClass:"booking-bar-wrap_package-detail"},[t._t("settlement")],2):t._e(),t._v(" "),n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.visible,expression:"!visible"}],staticClass:"booking-bar-wrap_operation"},[t._t("buttons")],2)])],2)}),[],!1,null,"1259cca5",null);e.a=component.exports},function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1908),y=n(1906),map=n(1909),m=n(1441),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getComponentName",value:function(t){return{icon:"DynamicIcons",markdown:"DynamicMarkdown",address:"DynamicMap",image:"DynamicImage"}[t]||""}},{key:"cClass",get:function(){return["dynamic-component","".concat("dynamic-component","_").concat(this.platform)]}}]),e}(f.Vue);k([Object(f.State)((function(t){return t.klook.platform}))],O.prototype,"platform",void 0),k([Object(f.Prop)()],O.prototype,"components",void 0),k([Object(f.Prop)({type:Number,default:800})],O.prototype,"baseWidth",void 0);var _=O=k([Object(f.Component)({components:{DynamicIcons:h.default,DynamicMarkdown:y.default,DynamicMap:map.default,DynamicImage:m.default}})],O),j=(n(2158),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"dynamic-component",class:t.cClass},t._l(t.components,(function(e,o){return n(t.getComponentName(e.type),t._g({key:o,tag:"component",staticClass:"dynamic-component-section",attrs:{content:e,"base-width":t.baseWidth}},t.$listeners))})),1)}),[],!1,null,"4c420ea8",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(12),n(70);var o=n(0),r=(n(37),n(52),n(53),n(8),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(7),m=n.n(y),k=n(912),O=n(886);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"visibleChange",value:function(t){var e=this;t&&this.$nextTick((function(){var t,n,o,r,c=null===(n=null===(t=e)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.querySelector(".klk-date-picker-date.klk-date-picker-date-selected");if(e.scrollIntoView(c),!c){var l=null===(r=null===(o=e)||void 0===o?void 0:o.$el)||void 0===r?void 0:r.querySelector(".klk-date-picker-date:not(.klk-date-picker-date-disabled):not(.klk-date-picker-date-empty)");e.scrollIntoView(l)}}))}},{key:"onPackageSelectedDateChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.datePicker){var n=t?this.getLocalDate(t):this.minDate;this.setViewDate(n)}t!==e&&this.handleChange(t)}},{key:"minDateChanged",value:function(t){var e=this;this.$nextTick((function(){if(e.datePicker&&!e.value){e.setViewDate(e.defaultViewDate);var t=setTimeout((function(){e.setViewDate(e.defaultViewDate),clearTimeout(t)}),700)}}))}},{key:"setViewDate",value:function(t){this.doublePanel||this.datePicker&&this.datePicker.setViewDate(t)}},{key:"scrollIntoView",value:function(t){t&&t.scrollIntoView({block:"start",inline:"start"})}},{key:"getLocalDate",value:function(t){var e=m()(t||void 0).toString();return new Date(e)}},{key:"isSoldout",value:function(t){var e=this.getFormatDate(t),n=this.schedulesMap[e];if(n)return n.soldout}},{key:"formatDay",value:function(t){return m()(t).format("D")}},{key:"getFormatDate",value:function(t){return m()(t).format("YYYY-MM-DD")}},{key:"getPrice",value:function(t){var e;return null===(e=this.getSchedule(t))||void 0===e?void 0:e.selling_price}},{key:"showItemLegend",value:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)}},{key:"getSchedule",value:function(t){var e=this.getFormatDate(t);return this.schedulesMap[e]}},{key:"shouldDateDisabled",value:function(t){var e=this.getFormatDate(t);return!this.getSchedule(t)||this.isSoldout(e)}},{key:"handleChange",value:function(t){var e=t?this.getFormatDate(t):"",n=this.schedulesMap[e];this.$emit("input",e,n),this.$emit("change",e,n)}},{key:"handleDateChange",value:function(t){var e,n,o,r;this.handleChange(t);var c=null===(e=this.datePicker)||void 0===e?void 0:e.$el,l=t?this.getFormatDate(t):"";if(this.allowTracker&&c){var d=null===(r=null===(o=null===(n=document.body.dataset)||void 0===n?void 0:n.spmPage)||void 0===o?void 0:o.split("?"))||void 0===r?void 0:r[0];if(!d)return;this.$inhouse.track("custom","body",{spm:"".concat(d,".CheckAvailability.SelectDate_Click"),action_type:"click",ext:{Date:l}})}else this.$emit("inhouse-track",t?this.getFormatDate(t):"")}},{key:"date",get:function(){return this.value?this.getLocalDate(this.value):null}},{key:"schedulesMap",get:function(){var t;return null===(t=this.schedules)||void 0===t?void 0:t.reduce((function(t,e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,Object(o.a)({},e.date,e))}),{})}},{key:"hasLegend",get:function(){return this.schedules.some((function(t){var e;return(null===(e=t.legend_keys)||void 0===e?void 0:e.length)>0}))}},{key:"defaultViewDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.find((function(t){var e,n;return null===(n=null===(e=t)||void 0===e?void 0:e.time_slots)||void 0===n?void 0:n.some((function(t){var e;return null===(e=t)||void 0===e?void 0:e.stock}))}));return(null===(e=o)||void 0===e?void 0:e.date)?this.getLocalDate(null===(n=o)||void 0===n?void 0:n.date):this.minDate}},{key:"minDate",get:function(){var t,e;return this.getLocalDate(null===(e=null===(t=this.schedules)||void 0===t?void 0:t[0])||void 0===e?void 0:e.date)}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.length;if(o)return this.getLocalDate(null===(n=null===(e=this.schedules)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}}]),e}(h.Vue);j([h.State],w.prototype,"klook",void 0),j([Object(h.Prop)({default:!1})],w.prototype,"datePickerVisible",void 0),j([Object(h.Prop)({default:""})],w.prototype,"value",void 0),j([Object(h.Prop)()],w.prototype,"schedules",void 0),j([Object(h.Prop)({default:!0})],w.prototype,"tipsVisible",void 0),j([Object(h.Prop)({default:!0})],w.prototype,"priceVisible",void 0),j([Object(h.Prop)({default:!1})],w.prototype,"doublePanel",void 0),j([Object(h.Prop)({default:!0})],w.prototype,"allowTracker",void 0),j([Object(h.Prop)({default:function(){return[]}})],w.prototype,"legends",void 0),j([Object(h.Prop)({default:!1})],w.prototype,"verticalScroll",void 0),j([Object(h.Ref)()],w.prototype,"datePicker",void 0),j([Object(h.Watch)("datePickerVisible",{immediate:!0})],w.prototype,"visibleChange",null),j([Object(h.Watch)("value",{immediate:!0})],w.prototype,"onPackageSelectedDateChanged",null),j([Object(h.Watch)("minDate",{immediate:!0})],w.prototype,"minDateChanged",null);var P=w=j([Object(h.Component)({components:{CalenderTips:k.a,CalendarLengends:O.a}})],w),C=(n(1901),n(43)),component=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-data-picker"},[n("klk-date-picker",{ref:"datePicker",staticClass:"activity-package-date-picker",attrs:{width:"auto","double-panel":t.doublePanel,date:t.date,"should-disable-date":t.shouldDateDisabled,"first-day-of-week":1,"min-date":t.minDate,"max-date":t.maxDate,"default-view-date":t.defaultViewDate,"vertical-scroll":t.verticalScroll,"data-spm-module":"CheckAvailability"},on:{change:t.handleDateChange},scopedSlots:t._u([{key:"day",fn:function(e){return[t._t("day",[t.isSoldout(e.date)?n("div",{staticClass:"klk-date-picker-date-inner"},[n("div",{staticClass:"inner-content klk-date-picker-sold-out"},[t._v("\n            "+t._s(t.formatDay(e.date))+"\n          ")])]):t._e()],{date:e})]}},{key:"date-append",fn:function(e){var o=e.date;return[t._t("append",[t.priceVisible?n("span",[t._v(t._s(t.getPrice(o)))]):t._e(),t._v(" "),t.showItemLegend(t.getSchedule(o))?n("CalendarLengends",{attrs:{legends:t.legends,item:t.getSchedule(o)}}):t._e()],{date:o})]}}],null,!0)},[t._v(" "),t._v(" "),n("template",{slot:"tip"},[t.$slots.tips&&t.hasLegend?t._t("tips"):[t.tipsVisible?n("CalenderTips",{attrs:{"price-visible":t.priceVisible}}):t._e()]],2)],2),t._v(" "),n("div",{staticClass:"picker-sold-out"},[t._t("bottom")],2)],1)}),[],!1,null,"49a82b0a",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1111),y=n(1166),m=n(1252),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).shouldInit=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){t&&(this.shouldInit=!0,this.sendPageView())}},{key:"headerLeftClick",value:function(){this.close()}},{key:"close",value:function(){this.$emit("closeModal")}},{key:"sendPageView",value:function(){var t=this;setTimeout((function(){return t.$inhouse.track("pageview",t.$el,{force:!0})}),100)}},{key:"showBack",get:function(){return this.showInfo}},{key:"showInfo",get:function(){return this.standardActivityId>0}},{key:"popVisible",get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}]),e}(f.Vue);k([Object(f.State)((function(t){return t.klook.platform}))],O.prototype,"platform",void 0),k([Object(f.Prop)({default:!1})],O.prototype,"visible",void 0),k([Object(f.Prop)()],O.prototype,"activityId",void 0),k([Object(f.Prop)()],O.prototype,"standardActivityId",void 0),k([Object(f.Prop)()],O.prototype,"title",void 0),k([Object(f.Prop)()],O.prototype,"packageId",void 0),k([Object(f.Watch)("visible")],O.prototype,"visibleChange",null);var _=O=k([Object(f.Component)({components:{ExperienceModal:h.a,DataLoader:y.a,AttractionIncludedDetail:m.default}})],O),j=(n(1569),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shouldInit?n("ExperienceModal",{staticClass:"attraction-preview-pop",attrs:{visible:t.visible,title:t.title,"header-divider":"","show-close":"","can-pull-close":!1},on:{"update:visible":function(e){t.visible=e},close:t.close}},[t.visible?n("div",{staticClass:"modal-content"},[n("DataLoader",{attrs:{"activity-id":t.activityId,"standard-activity-id":t.standardActivityId,"package-id":t.packageId},scopedSlots:t._u([{key:"default",fn:function(t){var data=t.data;return[n("AttractionIncludedDetail",{attrs:{data:data}})]}}],null,!1,1302347377)})],1):t._e()]):t._e()}),[],!1,null,"b2ecb6f6",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(2059),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([Object(v.Prop)()],y.prototype,"activityId",void 0),h([Object(v.Prop)({default:"#ff5722"})],y.prototype,"favoriteColor",void 0),h([Object(v.Prop)({default:"rgba(0, 0, 0, 0.54)"})],y.prototype,"normalColor",void 0);var m=y=h([Object(v.Component)({components:{WishButton:f.a}})],y),k=(n(2418),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("WishButton",{staticClass:"activity-wish-btn",attrs:{reopen:this.$attrs.reopen,"activity-id":this.activityId},scopedSlots:this._u([{key:"default",fn:function(t){return[e("SvgIcon",{staticClass:"icon-wishlist",class:{"favorite-color":t.favorite},attrs:{name:"activity-common#"+(t.favorite?"collect-new":"uncollect-new"),width:"24",height:"24"}})]}}])})}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(953),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([Object(v.Prop)()],y.prototype,"content",void 0);var m=y=h([Object(v.Component)({components:{ActMarkdown:f.default}})],y),k=n(43),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._l(this.content,(function(t,n){return e("ActMarkdown",{key:n,attrs:{content:t}})})),1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(983),h=n(16),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).approximateThousandsNew=h.e,t}return Object(l.a)(e,t),e}(v.Vue);y([v.State],m.prototype,"klook",void 0),y([Object(v.Prop)()],m.prototype,"score",void 0),y([Object(v.Prop)()],m.prototype,"count",void 0);var k=m=y([Object(v.Component)({components:{stars:f.a}})],m),O=(n(2593),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reviews-rating",class:[t.klook.platform]},[n("div",{staticClass:"reviews-rating-text"},[n("b",[t._v(t._s(parseFloat(t.score).toFixed(1)))]),t._v("\n    /5\n  ")]),t._v(" "),n("div",{staticClass:"reviews-rating-stars"},[n("stars",{attrs:{size:"desktop"===t.klook.platform?32:20,score:t.score,total:"5","star-show":!0,"hide-appraise":!0}})],1),t._v(" "),n("span",{staticClass:"reviews-rating-count"},[t._v("\n    "+t._s(t.$t("global.star.reviews",[t.approximateThousandsNew(t.count)]))+"\n  ")])])}),[],!1,null,"d49ba69e",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2086),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){this.$emit("click-tag")}}]),e}(f.Vue),k=m=y([Object(f.Component)({components:{UspTagList:h.a}})],m),O=(n(2113),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-usp-banner"},[t._t("default"),t._v(" "),n("UspTagList",t._g(t._b({staticClass:"activity-usp-banner_tag",nativeOn:{click:function(e){return t.handleClick(e)}}},"UspTagList",t.$attrs,!1),t.$listeners))],2)}),[],!1,null,null,null);e.a=component.exports},,function(t,e,n){"use strict";n(23);var o=n(4),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(132),m=n.n(y),k=n(3),O=n(1264),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).searchString="",t.loading=!1,t.isFocus=!1,t.total=0,t.dataResult=[],t.debounceGetActivityList=m()(t.getActivityList,200),t.showType=!0,t.tabs=[],t.active="",t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"onTabChange",value:function(t){this.active=t}},{key:"activeChange",value:function(t,e){var n;if(""!==e){var o=null===(n=this.tabs.find((function(e){return e.label===t})))||void 0===n?void 0:n.value;this.getActivityList(!1,o)}}},{key:"visiableChange",value:function(){this.getActivityList(!0)}},{key:"searchStringChange",value:function(){this.searchString.length>0&&(this.initTagValue(),this.debounceGetActivityList(!1)),0===this.searchString.length&&this.getActivityList(!0)}},{key:"initTagValue",value:function(){this.tabs.length>0&&(this.active=this.tabs[0].label)}},{key:"getSpm",value:function(t){var e={FilterType:t.value};return"GroupFilter_List?oid=activity_".concat(this.activityId,"&ext=").concat(JSON.stringify(e),"&mod=stop")}},{key:"getActivityList",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=y.length>0&&void 0!==y[0]&&y[0],n=y.length>1?y[1]:void 0,d={pass_id:this.activityId,group_id:n,include_detail:"mobile"===this.klook.platform,keyword:this.searchString,language:this.klook.language},this.packageId&&(d.package_id=this.packageId),this.loading=!0,t.next=7,this.$axios.$get(k.a.getPassStandardActivityPreviewNew,{params:d});case 7:v=t.sent,this.loading=!1,v.success&&(f=(null===(r=null===(o=v)||void 0===o?void 0:o.result)||void 0===r?void 0:r.attraction_included_list)||[],h=!(null===(l=null===(c=v)||void 0===c?void 0:c.result)||void 0===l?void 0:l.filter_group_not_show),this.showType=h,this.$emit("setShowType",h),this.dataResult=f,f.length>0&&e&&(this.tabs=f.map((function(t){return{label:t.group_name,value:t.group_id}})),this.initTagValue(),this.total=f[0].data_num||0));case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onFocus",value:function(t){t.stopPropagation(),this.isFocus=!0}},{key:"onBlur",value:function(t){t.stopPropagation(),this.isFocus=!1}},{key:"handleBook",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null,n=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n};if(-1!==this.activityId){var o=this.deepLink?this.deepLink:this.$href("/activity/".concat(this.activityId,"/"));"desktop"===this.klook.platform?window.open(n(o)):window.location.href=n(o)}}},{key:"mounted",value:function(){var t=document.querySelector(".attraction-preview .klk-input input");t&&(t.addEventListener("focus",this.onFocus),t.addEventListener("blur",this.onBlur))}},{key:"beforeDestroy",value:function(){var t=document.querySelector(".attraction-preview .klk-input input");t&&(t.removeEventListener("focus",this.onFocus),t.removeEventListener("blur",this.onBlur))}},{key:"showNoneSearch",get:function(){return!this.loading&&""!==this.searchString&&0===this.activityList.length}},{key:"showSearchLoading",get:function(){return this.loading}},{key:"showTabs",get:function(){return this.showType?""===this.searchString||this.tabs.length<2:this.showType}},{key:"activityList",get:function(){var t,e,n=this,o=null===(t=this.tabs.find((function(t){return t.label===n.active})))||void 0===t?void 0:t.value;return(null===(e=this.dataResult.find((function(t){return t.group_id===o})))||void 0===e?void 0:e.data_list)||[]}}]),e}(h.Vue);_([Object(h.State)((function(t){return t.klook}))],j.prototype,"klook",void 0),_([Object(h.Prop)({default:!1})],j.prototype,"renderTop",void 0),_([Object(h.Prop)()],j.prototype,"packageId",void 0),_([Object(h.Prop)()],j.prototype,"activityId",void 0),_([Object(h.Prop)({default:!1})],j.prototype,"isBook",void 0),_([Object(h.Prop)({default:""})],j.prototype,"deepLink",void 0),_([Object(h.Watch)("active")],j.prototype,"activeChange",null),_([Object(h.Watch)("activityId",{immediate:!0})],j.prototype,"visiableChange",null),_([Object(h.Watch)("searchString")],j.prototype,"searchStringChange",null);var w=j=_([Object(h.Component)({components:{NoneSearchResult:O.a}})],j),P=n(43),component=Object(P.a)(w,void 0,void 0,!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(22),n(14),n(11),n(8),n(12),n(0));n(47);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m=function(t,e){var n=e.totalUnitCount,o=e.maxPurchased,r=e.inventories,c=void 0===r?{}:r;return Array.isArray(t)?t.map((function(t){var e=t.required?t.priceMinPax:0,r=Math.min(t.priceMaxPax,o-(n-t.count));if(void 0!==t.prevCount){var l=Math.min(r,Number(c[t.skuId]));t.prevCount>t.count?t.count=t.prevCount>l?0:t.prevCount:t.prevCount<t.count&&(t.count=t.prevCount<e?0:t.prevCount),t.prevCount=void 0}return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{requireMinPax:!t.required&&t.count>=t.priceMinPax&&t.priceMinPax>1,minCount:e,maxCount:r})})):[]},k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcExpUnitsExtra",get:function(){return function(t){var e,n,o,r,c,l=t.unitsMap,d=t.totalUnitCount,v=t.selectedTime||{},f=v.arrangementId,h=v.maxPurchased;if(f&&(null===(n=null===(e=l)||void 0===e?void 0:e[f])||void 0===n?void 0:n.unitList)){var y=(l[f]||{}).inventories,k={totalUnitCount:d,maxPurchased:h,inventories:void 0===y?{}:y};return m(l[f].unitList,k)}return(null===(o=l)||void 0===o?void 0:o.default)&&(null===(c=null===(r=l)||void 0===r?void 0:r.default)||void 0===c?void 0:c.unitList)||[]}}}]),e}(f.Vue);O=k([f.Component],O);e.a=O},,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(133);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=Object(h.namespace)("auth"),O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"loginSuccess",value:function(){this.$store.dispatch("auth/getProfile")}},{key:"market",get:function(){return this.klook.market}},{key:"siteConfig",get:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.klook.websiteConfig,{},this.klook.utilConfig)}},{key:"isSearchVisible",get:function(){return this.siteConfig.search}},{key:"isShoppingCartVisible",get:function(){return this.siteConfig.shopping_cart}},{key:"aid",get:function(){return this.$cookies.get("aid")}},{key:"ismp",get:function(){return!!this.klook.platformMp}}]),e}(h.Vue);m([h.State],O.prototype,"klook",void 0),m([h.Getter],O.prototype,"isGuestCheckout",void 0),m([k.State],O.prototype,"user",void 0),O=m([h.Component],O),e.a=O},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(47),n(20),n(27),n(30),n(37);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(271),m=n(1926);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"formatLongImageUrl",value:function(data){var t=data.prefix,e=data.pre_process,n=data.suffix;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},data,{image_url:"".concat(t).concat(e).concat(n)})}},{key:"imageUrl",value:function(t){return t&&t.image_url?this.isOfficialCdnImage(t.image_url)?this.formatImage(t):t.image_url:""}},{key:"formatImage",value:function(t){var e=this.formatSize(t.width,t.height),n=e.width,o=e.height,r=this.urlToObject(t.image_url),c=r.firstPath,l=r.secondPath,d=r.fileName,v=r.imageType,f=t.seo_title&&this.isActivityPageImage(t.image_url)?Object(y.a)(t.seo_title):"",h=this.hasWaterMark(t)?this.waterMarkPosition(t.width):"",m=["fl_lossy.progressive,q_65",t.pre_process?"":"c_fill,w_".concat(n,",h_").concat(o),h];return[c].concat(m,[l,d,f]).filter((function(t){return!!t})).join("/")+v}},{key:"urlToObject",value:function(t){var e,n=t.split("https://res.klook.com/image/upload/")[1].split("/"),o=(null===(e=Object(y.e)(n[n.length-1]))||void 0===e?void 0:e.name)||"";o=decodeURIComponent(o);var r=this.klook.webp?".webp":".jpg";return{firstPath:this.isActivityPageImage(t)?"https://res.klook.com/images":"https://res.klook.com/image/upload",secondPath:n.slice(0,n.length-1).join("/"),fileName:o,imageType:r}}},{key:"hasWaterMark",value:function(t){return t.has_water_mark&&!this.klook.utilConfig.whiteLabelUtilConfig}},{key:"isOfficialCdnImage",value:function(t){return t.includes("https://res.klook.com/image/upload/")}},{key:"isActivityPageImage",value:function(t){return t.includes("/activities/")}},{key:"formatSize",value:function(t,e){var n=t,o=e;return n>1295&&(o=parseInt(String(1295*o/n)),n=1295),{width:n,height:o}}},{key:"imageHeight",value:function(t,e){return"desktop"===this.klook.platform?this.imageHeightDesktop(t,e):this.imageHeightMobile(t,e)}},{key:"imageHeightDesktop",value:function(t,e){var n=this.baseWidth;return n&&t&&e?e*n/t+"px":e+"px"}},{key:"imageHeightMobile",value:function(t,e){return"calc((100vw - 40px) * ".concat(e," / ").concat(t,")")}},{key:"waterMarkPosition",value:function(t){var e="w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3";if(t<=1295){var n=parseInt(String(t/1295*80)),o=parseInt(String(t/1295*15));e="w_".concat(n,",x_").concat(o,",y_").concat(o,",g_south_west,l_Klook_water_br_trans_yhcmh3")}return e}},{key:"images",get:function(){var t;return(null===(t=this.content)||void 0===t?void 0:t.data)||[]}}]),e}(h.Vue);O([h.State],_.prototype,"klook",void 0),O([Object(h.Prop)()],_.prototype,"content",void 0),O([Object(h.Prop)({type:Number,default:800})],_.prototype,"baseWidth",void 0);var j=_=O([Object(h.Component)({components:{SeoLazyImage:m.a}})],_),w=(n(2157),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dynamic-image",class:t.klook.platform},t._l(t.images,(function(e,o){return n("div",{key:o,staticClass:"page-activity-description-image-desc"},[e.images&&e.images.length?t._l(e.images,(function(o,r){return n("SeoLazyImage",{key:r,staticClass:"seo-lazy-image-long",class:{"first-image":0===r,"last-image":r===e.images.length-1},attrs:{url:t.imageUrl(t.formatLongImageUrl(o)),alt:o.image_alt||"",styles:{height:t.imageHeight(o.width,o.height)}}})})):n("SeoLazyImage",{attrs:{url:t.imageUrl(e),alt:e.image_alt||"",styles:{height:t.imageHeight(e.width,e.height)}}}),t._v(" "),e.image_desc?n("div",{class:["page-activity-description-desc","page-activity-description-desc-"+t.klook.platform]},["mobile"===t.klook.platform?n("span",{staticClass:"my-icon-style"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-up-new",size:"14",width:"14",height:"14",color:"#4A4A4A"}})],1):t._e(),t._v(" "),"desktop"===t.klook.platform?n("SvgIcon",{attrs:{name:"desktop-common#arrow-up-new",size:"14",color:"#666666"}}):t._e(),t._v(" "),n("span",[t._v(t._s(e.image_desc))])],1):t._e()],2)})),0)}),[],!1,null,"174fc2b7",null);e.default=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"close",value:function(){this.$emit("close")}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"title",void 0),h([Object(f.Prop)({type:String,default:"mobile-activity#icon-close"})],y.prototype,"icon",void 0);var m=y=h([f.Component],y),k=(n(1954),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layer-head"},[n("SvgIcon",{staticClass:"icon-close",attrs:{name:t.icon},nativeOn:{click:function(e){return t.close(e)}}}),t._v(" "),n("span",{staticClass:"title"},[t._v("\n    "+t._s(t.title)+"\n  ")])],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(1450),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-placeholder"},[e("div",{staticClass:"item item-1"}),this._v(" "),e("div",{staticClass:"item"}),this._v(" "),e("div",{staticClass:"cow"},[e("div",{staticClass:"item"}),this._v(" "),e("div",{staticClass:"item"})])])}],!1,null,"173c220a",null);e.a=component.exports},,,function(t,e,n){"use strict";var o=n(1018);n.n(o).a},function(t,e,n){"use strict";var o=n(1019);n.n(o).a},function(t,e,n){},function(t,e,n){"use strict";var o=n(1020);n.n(o).a},function(t,e,n){"use strict";var o=n(1021);n.n(o).a},function(t,e,n){"use strict";var o=n(1022);n.n(o).a},,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"init",value:function(){var t=this.$refs.autoAlignRef;if(this.isSlotText){var e=this.$refs.slotRef;e&&(t=e)}if(t){var n=t.offsetWidth||0,o=t.offsetHeight||0;this.$emit("updated",{width:n,height:o})}}},{key:"mounted",value:function(){this.init()}},{key:"updated",value:function(){this.init()}},{key:"calcStyles",get:function(){return{maxWidth:this.maxWidth}}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)({default:"initial"})],y.prototype,"maxWidth",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"isSlotText",void 0);var m=y=h([Object(f.Component)({components:{}})],y),k=(n(1479),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{ref:"autoAlignRef",staticClass:"auto-align-content"},[e("span",{ref:"slotRef",staticClass:"auto-align-content__slot",style:this.calcStyles},[this._t("default")],2)])}),[],!1,null,"c2d923ae",null);e.default=component.exports},,function(t,e,n){"use strict";n.r(e);var o=n(13),r=(n(20),n(27),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1412),m=n(1464),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).popVisible=!1,t.selectedIdList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleConfirm",value:function(t){this.selectedIdList=t||[],this.commit()}},{key:"handleToggle",value:function(t){this.selectedIdList.includes(t)?this.selectedIdList=this.selectedIdList.filter((function(e){return e!==t})):this.selectedIdList.push(t),this.commit()}},{key:"closePop",value:function(){this.popVisible=!1}},{key:"commit",value:function(){this.$emit("select",Object(o.a)(this.selectedIdList))}},{key:"totalActivityNum",get:function(){return this.info.activity_total||0}}]),e}(h.Vue);k([Object(h.Prop)({default:"view"})],O.prototype,"mode",void 0),k([Object(h.Prop)({default:"normal"})],O.prototype,"size",void 0),k([Object(h.Prop)()],O.prototype,"info",void 0),k([Object(h.Prop)()],O.prototype,"activityId",void 0),k([Object(h.Prop)()],O.prototype,"packageId",void 0),k([Object(h.Prop)()],O.prototype,"title",void 0);var _=O=k([Object(h.Component)({components:{AttractionIncludedFilter:y.a,AttractionIncludedDesktop:m.default}})],O),j=n(43),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalActivityNum>0?n("div",{staticClass:"attraction-included"},[n("AttractionIncludedFilter",{attrs:{mode:t.mode,size:t.size,images:t.info.top_activities||[],total:t.totalActivityNum,"selected-id-list":t.selectedIdList,"activity-id":t.activityId,title:t.title},on:{open:function(e){t.popVisible=!0},toggle:t.handleToggle}}),t._v(" "),n("AttractionIncludedDesktop",{attrs:{"activity-id":t.activityId,"package-id":t.packageId,total:t.totalActivityNum,visible:t.popVisible},on:{"update:visible":function(e){t.popVisible=e},closeModal:function(e){t.popVisible=!1}}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(131),m=n(3),k=n(1832),O=n(911),_=n(881),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=Object(h.namespace)("traveller/activity"),P=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).loadingState="",t.pkgDetail=null,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"packageIdWatch",value:function(t){t&&this.getPackageDetail()}},{key:"getPackageDetail",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.pkgDetailData,r=this.preview,c=this.packageId,!o){t.next=4;break}return this.setPackageDetail({status:"success",detail:o}),t.abrupt("return");case 4:if(c){t.next=6;break}return t.abrupt("return");case 6:if(this.setPackageDetail({status:"fetching",detail:null}),l=null,d="1"===(null===(e=this.$route.query)||void 0===e?void 0:e.translation),v=this.isLinePage||!1,t.prev=10,!r){t.next=17;break}return t.next=14,this.$axios.$get(m.a.activityPackageDetail,{params:{preview:r,translation:!!d,package_id_list:c,publish_status:"all",is_line_page:!1}});case 14:l=t.sent,t.next=20;break;case 17:return t.next=19,this.$axios.$get(m.a.activityPackageDetail,{params:{preview:r,translation:!!d,publish_status:"viewable",package_id_list:c,is_line_page:v}});case 19:l=t.sent;case 20:f=(l||{}).result,(null===(n=l)||void 0===n?void 0:n.success)&&!Object(y.isEmpty)(f)?(h=f[0],this.setPackageDetail({status:"success",detail:h})):this.setPackageDetail({status:"failure",detail:null}),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(10),this.setPackageDetail({status:"failure",detail:null});case 27:case"end":return t.stop()}}),t,this,[[10,24]])}))),function(){return n.apply(this,arguments)})},{key:"setPackageDetail",value:function(t){var e=t.status,n=t.detail;this.loadingState=e,this.$set(this,"pkgDetail",n),this.$emit("updatePkgDetail",n)}},{key:"bindIHTrack",value:function(){return _.a.apply(void 0,arguments)}},{key:"isLinePage",get:function(){var t,e;return(null!=(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)?e:{}).is_line_page||!1}},{key:"calcTrack",get:function(){return{action:!1,type:"module",spm:"PackageDetailsPopups",query:{oid:"package_".concat(this.packageId)}}}}]),e}(h.Vue);j([w.State],P.prototype,"activityDetail",void 0),j([Object(h.Prop)()],P.prototype,"specStyle",void 0),j([Object(h.Prop)()],P.prototype,"moreType",void 0),j([Object(h.Prop)()],P.prototype,"hideIniting",void 0),j([Object(h.Prop)()],P.prototype,"pkgDetailData",void 0),j([Object(h.Prop)()],P.prototype,"fetching",void 0),j([Object(h.Prop)()],P.prototype,"packageId",void 0),j([Object(h.Prop)({default:0})],P.prototype,"preview",void 0),j([Object(h.Prop)({default:!1})],P.prototype,"showActivityTitle",void 0),j([Object(h.Watch)("packageId",{immediate:!0})],P.prototype,"packageIdWatch",null);var C=P=j([Object(h.Component)({components:{ExpLoadingState:O.default,NewActivityPackageDetail:k.a}})],P),S=(n(2006),n(43)),component=Object(S.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({staticClass:"loading-pkg-detail"},"div",t.bindIHTrack(t.calcTrack),!1),[n("ExpLoadingState",{attrs:{fetching:t.fetching,"hide-initing":t.hideIniting,state:t.loadingState},on:{refresh:t.getPackageDetail}},["fetching"===t.loadingState&&"desktop-type"===t.moreType?n("div",{staticClass:"desktop-type-wrap",attrs:{slot:"fetching"},slot:"fetching"}):t._e(),t._v(" "),n("NewActivityPackageDetail",t._g({attrs:{"package-detail":t.pkgDetailData,"show-activity-title":t.showActivityTitle,"need-convert":!0,"need-scroll":!1}},t.$listeners))],1)],1)}),[],!1,null,"4eed713a",null);e.default=component.exports},function(t,e,n){"use strict";n(20),n(27),n(30),n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).tagMaps=[{key:2,name:"open",textid:"16078"},{key:3,name:"close",textid:"16077"}],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){t||this.$emit("disappear")}},{key:"tagData",get:function(){var t=this;return this.tagMaps.find((function(e){return e.key===t.reopen.tag}))||{}}},{key:"cClass",get:function(){var t;if(this.visible){var e=(null===(t=this.tagData)||void 0===t?void 0:t.name)||"";return["activity-reopen","activity-reopen-".concat(e)]}return["activity-reopen"]}},{key:"visible",get:function(){return[2,3].includes(this.reopen.tag)}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"reopen",void 0),h([Object(f.Watch)("visible",{immediate:!0})],y.prototype,"visibleChange",null);var m=y=h([f.Component],y),k=(n(2163),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{class:[t.cClass,t.klook.platform]},[n("span",{staticClass:"activity-reopen-wrapper"},[n("span",{staticClass:"no-reopen-status"},[t._v(t._s(t.$t(t.tagData.textid,{date:t.reopen.date})))]),t._v(" "),n("span",{staticClass:"no-reopen-txt"},[t._v(t._s(t.reopen.remind))])])]):t._e()}),[],!1,null,"3bc398d3",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(9),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([Object(f.Prop)({type:String})],y.prototype,"contentTitle",void 0);var m=y=h([Object(v.Component)({})],y),k=(n(2168),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-options-content"},[e("p",{staticClass:"package-options-content-title"},[this._v(this._s(this.contentTitle))]),this._v(" "),this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(282),y=(n(1449),n(1438)),m=n(882),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=Object(f.namespace)("traveller/activity"),_=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"beforeMount",value:function(){window.Cookies=this.$cookies,window.$axios=this.$axios,window.tracker={gtm:{sendGTMCustomEvent:this.$sendGTMCustomEvent.bind(this)},sendMixpanel:this.$sendMixpanel.bind(this),inhouse:this.$inhouse}}},{key:"mounted",value:function(){m.a.$on("refresh-shopping-cart",this.refreshShoppingCart)}},{key:"beforeDestroy",value:function(){m.a.$off("refresh-shopping-cart")}},{key:"refreshShoppingCart",value:function(){var t=this.$refs.travellerHeader;t&&t.updateShoppingCart()}},{key:"serverDestinationData",get:function(){return this.klook.destinationData||null}},{key:"serverAllCategoryList",get:function(){return this.klook.allCategoryList||[]}},{key:"isDestinationListVisible",get:function(){return this.siteConfig.showSecondaryNav}},{key:"isUserVisible",get:function(){return this.siteConfig.user_center_path}},{key:"isExpressCheckOut",get:function(){var t;return"express_check_out"===(null===(t=this.klook.utilConfig)||void 0===t?void 0:t.f_source_type)}},{key:"hideExpressCheckoutActivityLogo",get:function(){return this.isExpressCheckOut&&[67194,35336].includes(this.activityId)}},{key:"logo",get:function(){var t,e,n,o=this.siteConfig,r=null===(t=this.klook.affiliateConf)||void 0===t?void 0:t.cobrand;return{link:o.noLinkToHomePageLogo?"javascript:;":this.$href("/"),url:null===(e=r)||void 0===e?void 0:e.logo_url,height:null===(n=r)||void 0===n?void 0:n.cobrand_height_mweb}}}]),e}(y.a);k([f.State],_.prototype,"klook",void 0),k([O.State],_.prototype,"activityId",void 0);var j=_=k([Object(f.Component)({components:{KlkTravellerHeader:h.b}})],_),w=n(43),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("KlkTravellerHeader",{ref:"travellerHeader",staticClass:"experience-layout-header",attrs:{market:t.market,language:t.klook.language,platform:"mobile",webp:t.klook.webp,"is-search-visible":t.isSearchVisible,"is-destination-visible":t.isDestinationListVisible,"is-user-visible":t.isUserVisible,"is-guest-booking-visible":t.isGuestCheckout,"is-shopping-cart-visible":t.isShoppingCartVisible,"server-destination-data":t.serverDestinationData,"server-all-category-list":t.serverAllCategoryList,"is-logo-visible":!t.hideExpressCheckoutActivityLogo,logo:t.logo,"user-info":t.user,currency:t.klook.currency,"login-success":t.loginSuccess,ismp:t.ismp,aid:t.aid,"use-login-sdk":!0}})}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1410),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"closeModal",value:function(){this.$emit("closeModal")}},{key:"selfTitle",get:function(){return this.title||this.$t("76895",{num:this.total||0})}}]),e}(f.Vue);y([Object(f.Prop)({default:!1})],m.prototype,"visible",void 0),y([Object(f.Prop)()],m.prototype,"activityId",void 0),y([Object(f.Prop)()],m.prototype,"packageId",void 0),y([Object(f.Prop)()],m.prototype,"total",void 0),y([Object(f.Prop)()],m.prototype,"standardActivityId",void 0),y([Object(f.Prop)({default:!1})],m.prototype,"isBook",void 0),y([Object(f.Prop)()],m.prototype,"title",void 0),y([Object(f.Prop)()],m.prototype,"info",void 0),y([Object(f.Prop)({default:""})],m.prototype,"deepLink",void 0);var k=m=y([Object(f.Component)({components:{AttractionPreview:h.default}})],m),O=(n(2167),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-modal",{staticClass:"attraction-preview-modal",attrs:{title:t.selfTitle,size:"large",padding:40,open:t.visible,"esc-press-closable":!0,closable:!0,"data-spm-page":"AttractionsIncluded?trg=manual&oid=activity_"+t.activityId,"overlay-closable":!0,"show-default-footer":!1},on:{close:t.closeModal}},[n("div",{staticClass:"attraction-preview-container"},[t.activityId>0?n("AttractionPreview",t._b({attrs:{"activity-id":t.activityId,"standard-activity-id":t.standardActivityId,"package-id":t.packageId,"is-book":t.isBook,title:t.title,"render-top":!0,"deep-link":t.deepLink}},"AttractionPreview",t.$attrs,!1)):t._e()],1)])}),[],!1,null,"62523a00",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(1956),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"activity-skeleton"})}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(47),n(45),n(86);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showMore=!1,t.visible=!1,t.recordSectionIndex=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onVisibleChange",value:function(t){t&&this.scrollTo()}},{key:"mounted",value:function(){this.checkHeight()}},{key:"checkHeight",value:function(){var t,e=this;this.observeTarget&&(null===(t=this.$el)||void 0===t?void 0:t.querySelector)&&!this.expandItinerarySection&&this.$nextTick((function(){var t=e.$el.querySelector(e.observeTarget),body=e.$el.querySelector(".see-more-with-pop_inner-body");t.scrollHeight>e.limitHeight&&e.isMobile&&(e.showMore=!0,body.style.maxHeight=e.limitHeight+"px",e.getRecordSectionIndex())}))}},{key:"scrollTo",value:function(){var t=this;this.$nextTick((function(){var e,n=t.$el.querySelectorAll(".see-more-with-pop_custom-pop .itinerary-day-block");if(null===(e=n)||void 0===e?void 0:e.length){var o=n[t.recordSectionIndex]||null;o&&o.scrollIntoView({block:"start"})}}))}},{key:"getRecordSectionIndex",value:function(){var t=this;this.$nextTick((function(){var e,n=Array.from(t.$el.querySelectorAll(".itinerary-day-block"))||[];if(null===(e=n)||void 0===e?void 0:e.length)for(var o=0,i=0;i<n.length;i++){var r=n[i].getBoundingClientRect().height;if((o+=void 0===r?0:r)>t.limitHeight){t.recordSectionIndex=i;break}}}))}},{key:"isMobile",get:function(){return"mobile"===this.platform}}]),e}(f.Vue);h([Object(f.Prop)({type:String,default:""})],y.prototype,"observeTarget",void 0),h([Object(f.Prop)({type:Number,default:1200})],y.prototype,"limitHeight",void 0),h([Object(f.Prop)({type:Boolean,default:!1})],y.prototype,"expandItinerarySection",void 0),h([Object(f.Prop)({default:function(){return{}}})],y.prototype,"spm",void 0),h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0),h([Object(f.Watch)("visible")],y.prototype,"onVisibleChange",null);var m=y=h([f.Component],y),k=(n(1885),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"see-more-with-pop",class:{"show-more":t.showMore}},[n("div",{staticClass:"see-more-with-pop_inner"},[t._m(0),t._v(" "),n("div",{staticClass:"see-more-with-pop_inner-body"},[t._t("default")],2)]),t._v(" "),n("div",{staticClass:"see-more-with-pop_footer"},[n("klk-button",{staticClass:"see-more-btn",attrs:{type:"outlined",block:"","data-spm-module":t.spm,"data-spm-virtual-item":"__virtual"},on:{click:function(e){t.visible=!0}}},[t._v("\n      "+t._s(t.$t("81605"))+"\n    ")])],1),t._v(" "),n("klk-bottom-sheet",{staticClass:"see-more-with-pop_custom-pop",attrs:{visible:t.visible,title:t.$t("81827"),"show-close":"",transfer:""},on:{"update:visible":function(e){t.visible=e}}},[t._t("default")],2)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"see-more-with-pop_inner-mask"},[e("div",{staticClass:"modal"}),this._v(" "),e("div",{staticClass:"placeholder"})])}],!1,null,"428d3332",null);e.a=component.exports},,function(t,e,n){"use strict";n(37);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2198),y=(n(2120),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).mapShow=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onShowChange",value:function(){this.showMap()}},{key:"showMap",value:function(){this.$emit("beforeShowMap",!0,this),this.mapShow=!0}},{key:"hideMap",value:function(){this.$emit("beforeShowMap",!1,this),"function"==typeof this.hideMapModalFun&&this.hideMapModalFun(),this.mapShow=!1}},{key:"mounted",value:function(){this.address&&this.showMap()}},{key:"cloneAddress",get:function(){return this.address?this.address.split(",").reverse().join(","):""}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)({default:""})],m.prototype,"address",void 0),y([Object(f.Prop)({default:""})],m.prototype,"addressDesc",void 0),y([Object(f.Prop)()],m.prototype,"show",void 0),y([Object(f.Prop)({default:16})],m.prototype,"zoom",void 0),y([Object(f.Prop)()],m.prototype,"hideMapModalFun",void 0),y([Object(f.Watch)("show")],m.prototype,"onShowChange",null);var k=m=y([Object(f.Component)({components:{KlkMapMarker:h.d,KlkMap:h.a}})],m),O=(n(1960),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.mapShow,expression:"mapShow"}],staticClass:"page-activity-map-container"},[n("Klk-map",{attrs:{height:"100%",center:t.cloneAddress,zoom:t.zoom}},[n("klk-map-marker",{attrs:{center:t.cloneAddress}},[n("span",{attrs:{slot:"poptip"},slot:"poptip"},[t._v("\n          "+t._s(t.addressDesc)+"\n        ")])])],1),t._v(" "),n("div",{staticClass:"map-close",on:{click:t.hideMap}},[n("SvgIcon",{attrs:{name:"mobile-activity#icon-close",size:"18"}})],1)],1)])}),[],!1,null,"3ec9eafd",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([v.State],h.prototype,"klook",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"active",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"verbose",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"disableHover",void 0),f([Object(v.Prop)({default:"normal"})],h.prototype,"mode",void 0);var y=h=f([v.Component],h),m=(n(2502),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["hero-filter-item",this.klook.platform,this.mode,this.active&&"active",this.verbose&&"verbose",this.disableHover&&"disable-hover"]},[e("span",{staticClass:"hero-filter-item-text"},[this._t("default")],2)])}),[],!1,null,"4c5fa979",null);e.a=component.exports},,function(t,e,n){},,,,,,,function(t,e,n){"use strict";var o=n(1044);n.n(o).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1050);n.n(o).a},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1073);n.n(o).a},,,,,,,,,,function(t,e,n){"use strict";var o=n(1075);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(1076);n.n(o).a},function(t,e,n){"use strict";var o=n(1077);n.n(o).a},function(t,e,n){"use strict";var o=n(1078);n.n(o).a},function(t,e,n){"use strict";var o=n(1079);n.n(o).a},function(t,e,n){"use strict";var o=n(1080);n.n(o).a},function(t,e,n){"use strict";var o=n(1081);n.n(o).a},function(t,e,n){"use strict";var o=n(1082);n.n(o).a},function(t,e,n){"use strict";var o=n(1083);n.n(o).a},function(t,e,n){"use strict";var o=n(1084);n.n(o).a},function(t,e,n){"use strict";var o=n(1085);n.n(o).a},function(t,e,n){"use strict";var o=n(1086);n.n(o).a},function(t,e,n){"use strict";var o=n(1087);n.n(o).a},function(t,e,n){"use strict";var o=n(1088);n.n(o).a},,function(t,e,n){"use strict";var o=n(1089);n.n(o).a},function(t,e,n){"use strict";var o=n(1090);n.n(o).a},function(t,e,n){"use strict";var o=n(1091);n.n(o).a},function(t,e,n){"use strict";var o=n(1092);n.n(o).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-chevron-down",!1,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M10 17L24 32L31 24.5L38 17",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}})]));e.default=o},function(t,e,n){},,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(212);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t&&document.querySelector("#js-pkg-id-".concat(t))||document.querySelector("#package_option_card_sku_with_detail")||document.querySelector("#activity-package-options")||document.querySelector("#package_option")||document.querySelector(".js-activity-package-options"),l=Object(r.c)(n);Object(r.d)(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({scrollY:l,lockLocation:108},e))}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(20),n(27);var o=n(0),r=(n(70),n(23),n(4)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(131),k=n(1254),O=n(882),_=n(890),j=n(2),w=n(891);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=Object(y.namespace)("traveller/activity"),x=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).bsObj=Object(_.getBottomSheetConfig)("fixed-height-config"),t.bsObjSavePrice=Object(_.getBottomSheetConfig)({transfer:!1}),t.cacheOpt={date:"",selectedUnits:null},t.oldPrevUnits=null,t.groupPackName="",t.fetchPackageUnitsDebounce=Object(m.debounce)(t.fetchPackageUnits,200),t.fixedHackStyle=null,t}var n,o,h;return Object(f.a)(e,t),Object(l.a)(e,[{key:"fetchPackageUnits",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPackageUnitsApiData(this.calcPkgUnitsParams);case 2:c=t.sent,l={credits_tag:null===(n=null===(e=c)||void 0===e?void 0:e.result)||void 0===n?void 0:n.credits_tag,maxPurchased:this.calcMaxPurchased,inventories:this.calcUnitInventorieObj},d=(null===(r=null===(o=c)||void 0===o?void 0:o.result)||void 0===r?void 0:r.unitList)||[],this.preSelectedSkuId&&d.forEach((function(t){var e,n;return f.autoSelectSku(t,null===(n=null===(e=c)||void 0===e?void 0:e.result)||void 0===n?void 0:n.inventories)})),(v=this.oldPrevUnits||[])&&d.forEach((function(t){var e=v.find((function(e){return e.skuId===t.skuId}));e&&!t.isSoldOut&&(t.prevCount=e.count)})),this.currentUnits=w.a.getExpUnitsExtra(d,l),this.handleGetPreSettlementApiData(d);case 10:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"changeUnitCount",value:(o=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.priceId,r=e.type,c=this.calcPkgSelectedObj,l=this.currentUnits,t.next=4,this.changeExpUnitCount(C({priceId:o,type:r,currentSelectedPackage:c,unitList:l},n||{}));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"closePriceSumary",value:function(){O.a.$emit("setShowPriceSummary2bus",!1)}},{key:"clickSavePrice",value:function(t,e){var n,o=this.bsObjSavePrice;o.visible=t,this.$set(o,"priceSummary",null===(n=e)||void 0===n?void 0:n.priceSummary)}},{key:"getPackagePriceScheduleUnits",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y,m,k,O,_=this,j=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=j.length>0&&void 0!==j[0]?j[0]:{},n=j.length>1&&void 0!==j[1]?j[1]:{fromKey:""},d=(n||{}).fromKey,t.next=5,this.getPackageSchedulesAndUnitsApiData(C({},this.calcPkgSchedulesAndUnitsParams,{},e||{}));case 5:if(v=t.sent,f=v.result){t.next=9;break}return t.abrupt("return",null);case 9:this.calcPkgIsNewOpenTicket&&this.autoSetFeasibleDate(!!(null===(o=this.calcPkgSelectedObj)||void 0===o?void 0:o.auto_select_first_date)),y=(h=f||{}).unitList,m=h.inventories,1===(null===(r=y)||void 0===r?void 0:r.length)&&[w.a.FromKeyDefined.desktop.sku].includes(d)&&(this.preSelectedSkuId=null===(l=null===(c=y)||void 0===c?void 0:c[0])||void 0===l?void 0:l.skuId),this.preSelectedSkuId&&y.forEach((function(t){return _.autoSelectSku(t,m)})),this.currentUnits=y||[],(k=this.oldPrevUnits||[])&&y.forEach((function(t){var e=k.find((function(e){return e.skuId===t.skuId}));e&&!t.isSoldOut&&(t.prevCount=e.count)})),O=!!this.calcArrangementId,setTimeout((function(){_.handleGetPreSettlementApiData(y,O)}),1);case 18:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"autoSetFeasibleDate",value:function(t){var e=this.calcPkgScheduleList,n=this.calcPkgSelectedObj;this.pkgSelectedDate=this.getExpAutoSetFeasibleDate({isFirstDate:t,packageSchedules:e,currentSelectedPackage:n})}},{key:"handleGetPreSettlementApiData",value:function(t){var e,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.calcPkgSelectedObj,c=this.calcArrangementId;if(o&&(null===(e=r)||void 0===e?void 0:e.has_discount)&&c){var l={hideLoading:!0,page_from:2,arrangement_id:c,sku_list:t.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}})),pid:null===(n=r)||void 0===n?void 0:n.package_id};this.getPreSettlementApiData(l)}}},{key:"autoSelectSku",value:function(t,e){var n=this.$t.bind(this),o=this.calcPreview,r=this.calcPkgUnitsObj,c=this.calcPkgSelectedObj,l=this.calcTotalUnitCount,d=this.pkgSelectedTime,v=this.preSelectedSkuId,f=this.setExpAutoSelectSkuHandler({unit:t,inventories:e,preview:o,pkgUnitsObj:r,currentSelectedPackage:c,totalUnitCount:l,selectedTime:d,preSelectedSkuId:v,$t:n});f&&this.alert(f)}},{key:"alert",value:function(text){"desktop"!==this.platform?this.headerAlertRef.open(text):this.$toast(text)}},{key:"clearPreSettlementData",value:function(t){this.$store.commit("traveller/activity/".concat(j.SET_PRE_SETTLEMENT_API_DATA),{res:null})}},{key:"setPackageTime",value:function(data){(this.pkgSelectedTime||{}).arrangementId&&(this.oldPrevUnits=Object(m.cloneDeep)(this.currentUnits)),this.setExpPkgSelectedTime(data)}},{key:"updateInfos",value:function(t){t&&(this.fixedHackStyle={paddingBottom:t.height+"px"})}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"calcTags2discount",get:function(){var t,e,n,o=(null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],r=[];return(null===(n=o)||void 0===n?void 0:n.length)&&o.forEach((function(t){var e,n,o,c,l,d,v=(null===(e=t)||void 0===e?void 0:e.inner_vars)||{};(null===(o=null===(n=v)||void 0===n?void 0:n.inner)||void 0===o?void 0:o.derivation_info)&&(null===(d=null===(l=null===(c=v)||void 0===c?void 0:c.inner)||void 0===l?void 0:l.derivation_info)||void 0===d?void 0:d.is_derived)||r.push(t)})),r}},{key:"showBottomBar",get:function(){var t;return(null===(t=this.currentUnits)||void 0===t?void 0:t.length)>0}},{key:"calcData",get:function(){var t=(this.calcPkgSelectedObj||{}).usage_validity_render_obj||[];return{title:(t.find((function(t){return"title"===t.type}))||{}).content,rules:t.filter((function(t){return"item"===t.type})).map((function(t){return t.content}))}}}]),e}(Object(y.mixins)(k.a));S([Object(y.Prop)()],x.prototype,"autoTimeSlot",void 0),S([Object(y.Prop)({type:String,default:""})],x.prototype,"fromType",void 0),S([Object(y.Prop)({default:"fetching"})],x.prototype,"state",void 0),S([Object(y.Ref)()],x.prototype,"headerAlertRef",void 0),S([Object(y.Prop)()],x.prototype,"showShoppingCart",void 0),S([D.State],x.prototype,"commonLoadingState",void 0),S([D.State],x.prototype,"preSettlementApiData",void 0),S([D.Action],x.prototype,"getPreSettlementApiData",void 0),S([D.Getter],x.prototype,"getPkgPreSettlementTips2getters",void 0),S([Object(y.State)((function(t){return t.klook.platform}))],x.prototype,"platform",void 0),x=S([Object(y.Component)({})],x),e.a=x},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(881),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return h.a.apply(void 0,arguments)}}]),e}(f.Vue);m=y([Object(f.Component)({components:{}})],m),e.a=m},function(t,e,n){"use strict";n(20),n(27),n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(3),m=n(159),k=n(1028),O=n(16),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=Object(h.namespace)("auth"),w=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).autoBookingRole="bookNow",t.autoBookingInitData={activityId:0,shopId:-1,shoppingCartHandler:function(){}},t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getPreOrderKey",value:function(t){return"activity_pre_order_".concat(t)}},{key:"initAutoBookingMinxin",value:function(data){this.autoBookingInitData=data,this.initMounted(data)}},{key:"initMounted",value:function(t){var e,n=t||{},o=n.activityId,r=n.shoppingCartHandler,c=this.getPreOrderKey(o),l=m.b(c);if(l&&this.isLoggedIn){var data=null;try{data=JSON.parse(l)}catch(t){console.log("preOrderSessionData 解析错误！",l)}(null===(e=data)||void 0===e?void 0:e.params)&&(this.autoBookingRole=data.params.shoppingcart_type?"bookNow":"addToCart",this.autoBookingRequest(data.params,{shoppingCartHandler:r}))}m.a(c)}},{key:"autoBookingRequest",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c,l,d,v,f,option,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.calcAutoBooingShopId,r=-1===o?"addToCart"===this.autoBookingRole?y.a.bookingNow:y.a.expPostPreOrderServiceNew:"addToCart"===this.autoBookingRole?y.a.addToShoppingCard:y.a.postExpEditeShoppingCartAndnew,c=e,-1===o&&"addToCart"!==this.autoBookingRole&&(d=(l=c).arrangement_id,v=l.price_items,c=Object(O.B)(d,v)),this.$showLoading({overlayColor:"rgba(255, 255, 255, 0.7)"}),t.prev=5,t.next=8,this.$axios.$post(r,c);case 8:if(f=t.sent,this.$hideLoading(),!f.success){t.next=13;break}return setTimeout((function(){var t,e,r,c=+new Date,l="undefined"!=typeof _args3?_args3:null,d=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var e=+new Date-c;t=__in_house.get_spm_info(t,{duration:e,args:l})}catch(t){console.warn("Get spm info error",t)}return t};if("bookNow"===h.autoBookingRole)Object(O.kb)(h,{name:"ExperiencePay",query:{settlement_type:"1",shoppingcart_guid:null===(t=f.result)||void 0===t?void 0:t.pre_order_id}});else{var v=(null===(e=n)||void 0===e?void 0:e.shoppingCartHandler)||function(){console.log("warn: function showShoppingCart undefined.")};-1===o?v():window.location.href=d(d(h.$href("/shoppingcart"))),h.$inhouse.track("custom","body",{spm:"AddToCartSuccessLoad",shoppingcart_id:null===(r=f.result)||void 0===r?void 0:r.shoppingcart_id})}})),t.abrupt("return");case 13:if("01001007027"!==f.error.code){t.next=17;break}return option={content:this.$t("16995-price_change_tips"),btnYes:this.$t("global.tips.okTxt")},this.$alert(option.content,{okLable:option.btnYes}).then((function(){window.location.reload()})),t.abrupt("return");case 17:this.autoBookingHandleError(f.error),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(5),this.$hideLoading(),this.autoBookingHandleError(t.t0);case 24:case"end":return t.stop()}}),t,this,[[5,20]])}))),function(t,e){return n.apply(this,arguments)})},{key:"autoBookingHandleError",value:function(t){var e=t.code;k.a.includes(e)?this.$confirm(t.message,{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(t){t.result&&window.location.reload()})):this.$confirm(t.message,{okLabel:this.$t("global.confirm")})}},{key:"calcAutoBooingShopId",get:function(){return this.autoBookingInitData.shopId||-1}}]),e}(h.Vue);_([j.State],w.prototype,"isLoggedIn",void 0),w=_([h.Component],w),e.a=w},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(13),r=(n(70),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"packagesInSchedule",get:function(){var t,e,n=this;return(null===(e=null===(t=this.schedule)||void 0===t?void 0:t.stocks)||void 0===e?void 0:e.length)?this.schedule.stocks.reduce((function(t,e){var r=e.stock,c=e.package_id;if(0===r)return t;var l=n.packages.find((function(p){return p.package_id===c}));return l?[].concat(Object(o.a)(t),[l]):t}),[]):this.packages}}]),e}(h.Vue);y([Object(h.Prop)()],m.prototype,"packages",void 0),y([Object(h.Prop)()],m.prototype,"schedule",void 0),m=y([h.Component],m),e.a=m},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(22),n(12);var o=n(13),r=(n(20),n(27),n(61),n(14),n(86),n(11),n(8),n(45),n(99),n(23),n(4)),c=n(0),l=(n(70),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(881),O=n(1254),_=n(1688),j=n(891);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).bookingCoreData={},t.currentBtnType="",t.schedule2self=null,t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"dateChangeWatcher",value:function(t){var e,n=this;t&&((null===(e=this.schedule2self)||void 0===e?void 0:e.stocks)&&(this.calcActInDatePacakges.find((function(t){return t.package_id===n.packageId}))||this.clearSelectPackage()))}},{key:"dateChange",value:function(t,e){this.schedule2self=this.getStocks(t,e)}},{key:"getStocks",value:function(t,e){return P({},e||{},{},this.calcScheduleList.filter((function(e){return e.date===t}))[0])}},{key:"clickCustomFn",value:function(t){var e=this;if(!t)return!1;this.currentBtnType=t,this.packageId&&(this.bookingCoreData=j.a.getBookingCoreData2vm(this),this.$nextTick((function(){var t;(null===(t=e.activityBookingRef)||void 0===t?void 0:t.open)&&e.activityBookingRef.open({date:e.pkgSelectedDate,packageId:e.packageId,skuId:0})})))}},{key:"bindIHTrack",value:function(){return k.a.apply(void 0,arguments)}},{key:"packageIdChange",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return e&&(this.chosenAttrIds=this.getPackageAttrId(e)),t.next=5,this.getPackageSchedulesAndUnitsApiData(this.calcPkgSchedulesAndUnitsParams);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getPackageAttrId",value:function(t){var e,n=null===(e=this.packageList)||void 0===e?void 0:e.find((function(e){return e.package_id===t}));return n?n.spec_attr_id:[]}},{key:"selectPackage",value:function(t){this.updateExpPackageId(t)}},{key:"clearSelectPackage",value:function(){this.chosenAttrIds=[],this.updateExpPackageId()}},{key:"handleClear",value:function(){this.clearSelectPackage()}},{key:"attrChange",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.chosenAttrIds=t,this.updateExpPackageId(e),n.isScheduleMatch||this.clearDate(),this.trackPackageId({packageId:e,spmObj:o})}},{key:"clearDate",value:function(){this.pkgSelectedDate="",this.switchableActivityCalendar&&(this.switchableActivityCalendar.value=null)}},{key:"trackPackageId",value:function(){var t,e,n,o,r,c,l,d=this,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{packageId:this.packageId,type:"User"},f=v.packageId,h=v.type,y=v.spmObj;f=null!=f?f:this.packageId,h=h||(null===(t=y)||void 0===t?void 0:t.type)||"User";var m=null===(e=this.calcPkgSelectedObj)||void 0===e?void 0:e.credits,k=null===(n=this.attrWrap)||void 0===n?void 0:n.$el;if(f&&k){var O=new Set(this.calcSpecIdList||[]),_=!0,j=!1,w=void 0;try{for(var P,C=(this.userSelectedSpec||[])[Symbol.iterator]();!(_=(P=C.next()).done);_=!0){var S=P.value;O.delete(S),O.add(S)}}catch(t){j=!0,w=t}finally{try{_||null==C.return||C.return()}finally{if(j)throw w}}this.$inhouse.track("custom","body",{spm:"Activity.PackageType_LIST_Click",objectId:"package_".concat(f),object_id:"package_".concat(f),listLen:(r=null===(o=y)||void 0===o?void 0:o.len,null!=r?r:-1),listIndex:(l=null===(c=y)||void 0===c?void 0:c.index,null!=l?l:-1),Integral:m?Math.floor(m):"null",SelectType:h,PromoCard:-1,SalesPrice:-1,PromotionType:-1,action_type:"User"===h?"click":null,SelectedStep:Array.from(O).map((function(t){return d.calcSpecIdList.indexOf(t)+1})),AttributeID:Array.from(O)})}}},{key:"handleDeleteAttrs",value:function(t){var e,n;this.chosenAttrIds=this.chosenAttrIds.filter((function(e){return!t.includes(e)})),(null===(e=this.chosenAttrIds)||void 0===e?void 0:e.length)!==(null===(n=this.specList)||void 0===n?void 0:n.length)&&this.updateExpPackageId()}},{key:"handleSelectSpec",value:function(t){this.userSelectedSpec=Object(o.a)(t||[])}},{key:"showOpenTicketBySpec",get:function(){var t;return!(null===(t=this.specList)||void 0===t||!t.length)&&this.specList.some((function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.attr)||void 0===n?void 0:n.length)>1}))}},{key:"calcBusinessData",get:function(){return{activityId:this.activityId,templateId:this.templateId,isSupportShoppingCart:this.isSupportShoppingCart,pickupDateDescription:this.dateDescription,activityTicketType:this.activityTicketType,packages:this.packageList}}},{key:"calcBasicData",get:function(){return{activity_id:this.activityId,is_line_page:this.isLinePage,act_product_type:this.actProductType,is_in_flash_sale:this.isInFlashSale,publish_info:this.publishInfo}}},{key:"pkgDetail",get:function(){return(this.packageDetailList||[])[0]}},{key:"calcSchedule",get:function(){var t=this.pkgSelectedDate,e=this.priceSchedulesObj,n=this.schedule2self;return t?e[t]:n}},{key:"priceSchedulesObj",get:function(){return this.calcScheduleList.reduce((function(t,e){return P({},t,Object(c.a)({},e.date,e))}),{})}}]),e}(Object(m.mixins)(O.a,_.a));C([Object(m.Ref)()],S.prototype,"activityBookingRef",void 0),C([Object(m.Ref)()],S.prototype,"attrWrap",void 0),C([Object(m.Ref)()],S.prototype,"switchableActivityCalendar",void 0),C([Object(m.Watch)("pkgSelectedDate")],S.prototype,"dateChangeWatcher",null),C([Object(m.Watch)("packageId",{immediate:!0})],S.prototype,"packageIdChange",null),S=C([Object(m.Component)({components:{}})],S),e.a=S},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(20),n(27),n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(3),m=n(159),k=n(1028),O=n(16),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=Object(h.namespace)("auth"),w=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).shoppingCartVisible=!1,t.role="bookNow",t.globalSource=null,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:function(){var t,e=m.b(this.preOrderKey);if(e&&this.isLoggedIn){var data=null;try{data=JSON.parse(e)}catch(t){console.log("preOrderSessionData 解析错误！",e)}(null===(t=data)||void 0===t?void 0:t.params)&&(this.role=data.params.shoppingcart_type?"bookNow":"addToCart",this.bookRequest(data.params))}m.a(this.preOrderKey)}},{key:"bookRequest",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,option,v=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=-1===this.shoppingCartId?"addToCart"===this.role?y.a.bookingNow:y.a.expPostPreOrderServiceNew:"addToCart"===this.role?y.a.addToShoppingCard:y.a.postExpEditeShoppingCartAndnew,o=e,-1===this.shoppingCartId&&"addToCart"!==this.role&&(c=(r=o).arrangement_id,l=r.price_items,o=Object(O.B)(c,l)),this.$showLoading({overlayColor:"rgba(255, 255, 255, 0.7)"}),t.prev=4,t.next=7,this.$axios.$post(n,o);case 7:if(d=t.sent,this.$hideLoading(),!d.success){t.next=12;break}return setTimeout((function(){var t,e,n=+new Date,o="undefined"!=typeof _args3?_args3:null,r=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var e=+new Date-n;t=__in_house.get_spm_info(t,{duration:e,args:o})}catch(t){console.warn("Get spm info error",t)}return t};"bookNow"===v.role?Object(O.kb)(v,{name:"ExperiencePay",query:{settlement_type:"1",shoppingcart_guid:null===(t=d.result)||void 0===t?void 0:t.pre_order_id}}):(-1===v.shoppingCartId?v.showShoppingCart():window.location.href=r(r(v.$href("/shoppingcart"))),v.$inhouse.track("custom","body",{spm:"AddToCartSuccessLoad",shoppingcart_id:null===(e=d.result)||void 0===e?void 0:e.shoppingcart_id}))})),t.abrupt("return");case 12:if("01001007027"!==d.error.code){t.next=16;break}return option={content:this.$t("16995-price_change_tips"),btnYes:this.$t("global.tips.okTxt")},this.$alert(option.content,{okLable:option.btnYes}).then((function(){window.location.reload()})),t.abrupt("return");case 16:this.handleError(d.error),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),this.$hideLoading(),this.handleError(t.t0);case 23:case"end":return t.stop()}}),t,this,[[4,19]])}))),function(t){return n.apply(this,arguments)})},{key:"handleError",value:function(t){var e=t.code;k.a.includes(e)?this.$confirm(t.message,{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(t){t.result&&window.location.reload()})):this.$confirm(t.message,{okLabel:this.$t("global.confirm")})}},{key:"showShoppingCart",value:function(){this.globalSource=document.querySelector(".global-js-add-to-cart"),this.shoppingCartVisible=!0}},{key:"preOrderKey",get:function(){return"activity_pre_order_".concat(this.activityId)}},{key:"shoppingCartId",get:function(){return parseInt(this.$route.query.shop_id)||-1}}]),e}(h.Vue);_([j.State],w.prototype,"isLoggedIn",void 0),w=_([h.Component],w),e.a=w},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=[{src:"https://res.klook.com/image/upload/step1_gtjupd.svg",step:"98695",title:"98691",contentList:["98699","98700"]},{src:"https://res.klook.com/image/upload/step2_v1g7qy.svg",step:"98696",title:"98692",contentList:["98701"]},{src:"https://res.klook.com/image/upload/step3_honnat.svg",step:"98697",title:"98693",contentList:["98703","98704","98705","98706"]},{src:"https://res.klook.com/image/upload/step4_xlyal6.svg",step:"98698",title:"98694",contentList:["98707"]}]},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(12),n(47),n(11),n(8),n(45),n(416);var o=n(74),r=n(0),c=(n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(3),O=n(1029),_=n(1432),j=n(2030),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),e}(m.Vue);w([Object(m.Prop)()],P.prototype,"tips",void 0);var C=P=w([m.Component],P),S=(n(2604),n(43)),D=Object(S.a)(C,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"reviews-blank"},[e("div",{staticClass:"reviews-blank-bg"}),this._v(" "),e("p",{staticClass:"reviews-blank-tips"},[this._v("\n    "+this._s(this.tips)+"\n  ")])])}),[],!1,null,"4261573e",null).exports,x=n(2054),T=n(10),I=n.n(T),R=n(983),$=n(1168),L=n(1852),A=n(211),E=n(1912),M=n(1161),B=n(884);function N(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var V=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},F=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).showTranslationContent=!0,t.index=0,t.imageViewerVisible=!1,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"setAvatarUrl",value:function(t){return"https://cdn.klook.com/upload/img200X200/"+t}},{key:"getStandardDateFormat",value:function(t){return Object(A.d)(t,this.$t.bind(this),this.klook.language)}},{key:"changeReviewContent",value:function(){this.showTranslationContent=!this.showTranslationContent}},{key:"showImageViewer",value:function(t){this.index=t,this.imageViewerVisible=!0,this.$sendGTMCustomEvent("Activity Page|View Photo Item Clicked")}},{key:"hideImageViewer",value:function(){this.imageViewerVisible=!1}},{key:"starText",get:function(){var t,e=Number((null===(t=this.review)||void 0===t?void 0:t.rating)||0);return e>80?this.$t("review_highly_recommended"):e>60?this.$t("review_good"):""}},{key:"isSliceImages",get:function(){if(this.count){var t=this.review.review_image;return!I()(t)&&this.count<t.length}}},{key:"reviewsImage",get:function(){var t=this.review.review_image;return I()(t)?[]:this.isSliceImages?t.slice(0,this.count):t}},{key:"images",get:function(){if(!I()(this.review.review_image))return this.review.review_image.map((function(t){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{src:t.img_url})}))}}]),e}(m.Vue);V([m.State],F.prototype,"klook",void 0),V([Object(m.Prop)()],F.prototype,"count",void 0),V([Object(m.Prop)()],F.prototype,"visible",void 0),V([Object(m.Prop)()],F.prototype,"review",void 0);var W=F=V([Object(m.Component)({components:{ActivityReviewsHelpful:$.a,KlkStars:R.a,SeeMoreWithLines:L.a,ImageViewer:E.a,ReviewUser:M.a,Logo:B.a}})],F),H=(n(2606),Object(S.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reviews-item"},[n("ReviewUser",{staticClass:"reviews-item-header",attrs:{avatar:t.setAvatarUrl(t.review.avatar),name:t.review.author||"",date:t.review.date}}),t._v(" "),n("div",{staticClass:"reviews-item-star"},[n("KlkStars",{staticClass:"reviews-item-star-component",attrs:{size:16,score:t.review.rating,total:"100"}}),t._v(" "),n("span",{staticClass:"reviews-item-star-text"},[t._v(t._s(t.starText))])],1),t._v(" "),t.review.package_name?n("p",{staticClass:"reviews-item-review"},[t._v("\n    "+t._s(t.$t("reviews.review_for"))+"\n    "+t._s(t.review.package_name)+"\n    "),n("span",{staticClass:"reviews-item-review-buy",attrs:{"data-spm-module":"Buy_It_Now","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("buy-now")}}},[t._v("\n      "+t._s(t.$t("75393"))+"\n    ")])]):t._e(),t._v(" "),n("SeeMoreWithLines",{staticClass:"reviews-item-content",attrs:{"max-lines":8,visible:t.visible,content:t.showTranslationContent?t.review.translate_content:t.review.content}}),t._v(" "),t.review.need_translate_button?n("div",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Show Original Language Button Clicked",expression:"'Activity Page|Show Original Language Button Clicked'",arg:"click"}],staticClass:"reviews-item-translate",attrs:{"data-track-event":"Activity Page|View Original Btn Click","data-id":t.review.id},on:{click:t.changeReviewContent}},[t._v("\n    "+t._s(t.showTranslationContent?t.$t("activity.v2.translate.show.original"):t.$t("activity.v2.translate.btn"))+"\n  ")]):t._e(),t._v(" "),t.review.review_image?n("div",{staticClass:"reviews-item-images"},t._l(t.reviewsImage,(function(image,e){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:image.img_resize_url,expression:"image.img_resize_url",arg:"background-image"}],key:image.imageId,staticClass:"reviews-item-images-item",attrs:{ratio:"1:1"},on:{click:function(n){t.showImageViewer(Number(e))}}},[n("Logo",{attrs:{ratio:"1:1",width:113/3}})],1)})),0):t._e(),t._v(" "),t.review.has_reply?n("div",{staticClass:"reviews-item-reply"},[n("p",{staticClass:"reviews-item-reply-title"},[t._v("\n      "+t._s(t.$t("review.klook.reply"))+"\n    ")]),t._v(" "),n("SeeMoreWithLines",{attrs:{visible:t.visible,content:t.showTranslationContent?t.review.reply.translate_content:t.review.reply.content,"hide-less":!0}})],1):t._e(),t._v(" "),n("ActivityReviewsHelpful",{staticClass:"reviews-item-helpful",attrs:{comment:t.review}}),t._v(" "),n("ImageViewer",{attrs:{visible:t.imageViewerVisible,index:t.index,images:t.images,transfer:!0,"not-fixed":!0},on:{close:t.hideImageViewer}})],1)}),[],!1,null,"1cd0face",null).exports),U=n(13),z=n(2037),G=n(16),Y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},K=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).visible=!1,t.loading=!1,t.total=0,t.images=[],t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"mounted",value:function(){this.getReviewsImages()}},{key:"getReviewsImages",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.activityId){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.next=5,this.$axios.$get(Object(G.ob)(k.a.activityReviewGalleryImages,{activityId:this.activityId}),{regularUrl:"/v1/usrcsrv/activities/{*}/images/get",params:{page:1,limit:8}});case 5:e=t.sent,n=e.result,e.success&&n&&(this.total=n.image_total_count||0,this.images=(n.review_images_info||[]).reduce((function(t,e){var n;return[].concat(Object(U.a)(t),Object(U.a)((null===(n=e)||void 0===n?void 0:n.images)||[]))}),[]),this.loading=!1);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleBuyNow",value:function(){var t=this;this.visible=!1,this.$nextTick((function(){t.$emit("buy-now")}))}},{key:"countText",get:function(){return this.total>4?"".concat(Object(G.e)(this.total-3,!1),"+"):""}},{key:"shouldShow",get:function(){return Number(this.total)>=8}}]),e}(m.Vue);Y([Object(m.Prop)()],K.prototype,"activityId",void 0),Y([Object(m.Prop)({default:!1})],K.prototype,"showBuyNow",void 0);var J=K=Y([Object(m.Component)({components:{CustomerImageGallery:z.a,Logo:B.a}})],K),X=(n(2607),Object(S.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shouldShow&&t.images&&t.images.length?n("div",{staticClass:"reviews-gallery",attrs:{"data-spm-module":"New_Gallery_Entrance","data-spm-virtual-item":"__virtual"},on:{click:function(e){t.visible=!0}}},[n("h4",{staticClass:"reviews-gallery-title"},[t._v("\n    "+t._s(t.$t("review.photo_gallery"))+"\n  ")]),t._v(" "),n("div",{staticClass:"reviews-gallery-images"},t._l(t.images.slice(0,4),(function(image){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:image.img_resize_url,expression:"image.img_resize_url",arg:"background-image"}],key:image.image_id,staticClass:"reviews-gallery-images-item",class:{"show-count":!!t.countText},attrs:{ratio:"1:1"}},[n("Logo",{attrs:{ratio:"1:1",width:28}}),t._v(" "),n("span",{staticClass:"reviews-gallery-count"},[t._v(t._s(t.countText))])],1)})),0),t._v(" "),n("klk-bottom-sheet",{staticClass:"reviews-gallery-modal custom",attrs:{transfer:"","show-close":"",visible:t.visible,title:t.$t("review.photo_gallery"),"can-pull-close":!1,height:"90%"},on:{"update:visible":function(e){t.visible=e}}},[t.visible?n("CustomerImageGallery",{staticClass:"reviews-gallery-modal-images",attrs:{"activity-id":t.activityId,transfer:!0,"not-fixed":!0,"show-buy-now":!0},on:{"buy-now":t.handleBuyNow}}):t._e()],1)],1):t._e()}),[],!1,null,"957a2b8a",null).exports),Q=n(212),Z=n(1111),tt=n(1417);function et(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function it(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?et(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):et(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var nt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},at=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).page=0,t.pageSize=8,t.loading=!1,t.loadingError=!1,t.gallaryVisible=!1,t.total=0,t.reviewList=[],t.isPinned=!1,t.filter={star_num:"",lang:"",sort_type:0,only_image:!1,translate:1},t}var n,r,y,m,O;return Object(h.a)(e,t),Object(d.a)(e,[{key:"reviewsChange",value:function(){var t,e=this.reviews,n=this.reviewTotal;this.total=n,(null===(t=e)||void 0===t?void 0:t.length)&&(this.reviewList=e,this.page=1)}},{key:"visibleChange",value:function(t){var e,n=this;t&&(this.$nextTick((function(){n.$inhouse.track("pageview","#ReviewPage__spm_page",{force:!0})})),(null===(e=this.reviewList)||void 0===e?void 0:e.length)||this.getReviews())}},{key:"handleFilterChange",value:(O=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.activityReviewsCancelToken&&this.activityReviewsCancelToken.cancel(),this.filter=it({},this.filter,{star_num:e.star_num?e.star_num.join():"",lang:e.lang?e.lang.join():"",sort_type:e.sort_type?e.sort_type:0,only_image:!!e.only_image&&e.only_image}),this.page=1,t.next=5,this.replaceActivityReviews();case 5:this.adjustScrollPosition();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return O.apply(this,arguments)})},{key:"getReviews",value:(m=Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loading&&!this.isNoMore){t.next=2;break}return t.abrupt("return");case 2:return this.loadingError=!1,this.loading=!0,e=null,t.prev=5,t.next=8,this.fetchActivityReview({page:this.page+1});case 8:e=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),console.log("fetchActivityReview error: ",t.t0);case 14:this.loading=!1,e&&e.item?(this.reviewList=this.reviewList.concat(e.item),this.total=e.total,this.page+=1):this.loadingError=!0;case 16:case"end":return t.stop()}}),t,this,[[5,11]])}))),function(){return m.apply(this,arguments)})},{key:"fetchActivityReview",value:(y=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,c,l,d,v,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.activityReviewsCancelToken=this.$axios.CancelToken.source(),c=(r=e||{}).config,l=void 0===c?{}:c,d=Object(o.a)(r,["config"]),v=it({params:it({},this.getReviewParams,{},d,{activity_id:this.activityId})},l,{cancelToken:null===(n=this.activityReviewsCancelToken)||void 0===n?void 0:n.token}),t.next=5,this.$axios.$get(k.a.getActivityReviewsList,v);case 5:if(f=t.sent,h=f.result,!f.success||!h){t.next=11;break}return t.abrupt("return",h);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"fetchActivityReviewsList",value:(r=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,c,l,d,v,f,h,y,m,k=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({},this.getReviewParams,e||{}),r=n.limit,c=Object(o.a)(n,["limit"]),l=Math.floor(r/100),d=r%100,v=new Array(l).fill(100).concat(d).filter((function(t){return t})),f=v.map((function(t,e){return k.fetchActivityReview(it({page:e+1,limit:t},c))})),t.next=9,Promise.all(f);case 9:if((h=t.sent)&&h.length){t.next=12;break}return t.abrupt("return");case 12:if(y=-1,m=h.reduce((function(t,e){if(!e)return t;var n=e.total,o=e.item;return y<0&&(y=n),o?t.concat(o):t}),[]),!(y>-1)){t.next=16;break}return t.abrupt("return",{total:y,item:m||[]});case 16:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"replaceActivityReviews",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchActivityReviewsList({page:1,limit:this.page*this.pageSize,config:{loading:!0}});case 2:(e=t.sent)&&(n=e.total,o=e.item,this.total=n||0,this.reviewList=o||[]);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){this.$emit("close")}},{key:"showGallery",value:function(){this.gallaryVisible=!0}},{key:"closeGallery",value:function(){this.gallaryVisible=!1}},{key:"handleBuyNow",value:function(){var t=this;this.gallaryVisible=!1,this.$emit("close"),setTimeout((function(){t.$nextTick((function(){Object(Q.g)(t.getScrollElBySectionConfig2provide())}))}),500)}},{key:"adjustScrollPosition",value:function(){var t;if(this.isPinned){var e=null===(t=this.$el)||void 0===t?void 0:t.querySelector(".reviews-modal-anchor");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}}},{key:"getReviewParams",get:function(){return it({page:this.page,limit:this.pageSize},this.filter)}},{key:"isNoMore",get:function(){return null!==this.total&&Number(this.total)<=this.page*this.pageSize}}]),e}(m.Vue);nt([Object(m.Prop)()],at.prototype,"subScoreList",void 0),nt([Object(m.Prop)()],at.prototype,"activityId",void 0),nt([Object(m.Prop)()],at.prototype,"reviewGalleryShouldShow",void 0),nt([Object(m.Prop)()],at.prototype,"reviews",void 0),nt([Object(m.Prop)()],at.prototype,"reviewTotal",void 0),nt([Object(m.Prop)()],at.prototype,"visible",void 0),nt([Object(m.Prop)()],at.prototype,"score",void 0),nt([Object(m.Prop)()],at.prototype,"reviewCount",void 0),nt([Object(m.Ref)()],at.prototype,"content",void 0),nt([Object(m.Inject)({default:function(t){return t}})],at.prototype,"getScrollElBySectionConfig2provide",void 0),nt([Object(m.Watch)("reviews",{immediate:!0})],at.prototype,"reviewsChange",null),nt([Object(m.Watch)("visible")],at.prototype,"visibleChange",null);var ot=at=nt([Object(m.Component)({components:{ExpSubScore:tt.default,ExperienceModal:Z.a,ReviewRating:_.a,ReviewFilter:j.a,ReviewBlank:D,ReviewLoading:x.default,ReviewItem:H,ReviewGallery:X,BaseSticky:O.a}})],at),ct=(n(2608),Object(S.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ExperienceModal",{staticClass:"reviews-modal",attrs:{id:"ReviewPage__spm_page",transfer:"","show-close":"",visible:t.visible,title:t.$t("activity.v2.mobile.activity.review"),"can-pull-close":!1,"header-divider":!0,"scroll-props":{loadingError:t.loadingError,loading:t.loading&&!t.loadingError,done:t.isNoMore&&!!t.reviewList&&!!t.reviewList.length,onReachBottom:t.getReviews},"data-spm-page":"ReviewPage?oid=activity_"+t.activityId+"&trg=manual"},on:{close:t.close}},[n("div",{staticClass:"reviews-modal-content"},[n("ReviewRating",{attrs:{score:t.score,count:t.reviewCount}}),t._v(" "),n("ExpSubScore",{staticClass:"custom-sub-score",attrs:{list:t.subScoreList}}),t._v(" "),n("ReviewGallery",{staticClass:"reviews-modal-gallery",attrs:{visible:t.gallaryVisible,"activity-id":t.activityId},on:{"buy-now":t.handleBuyNow,close:t.closeGallery}}),t._v(" "),n("div",{staticClass:"reviews-modal-anchor-wrap"},[n("div",{staticClass:"reviews-modal-anchor"})]),t._v(" "),n("BaseSticky",{staticClass:"reviews-modal-filter",on:{change:function(e){return t.isPinned=e}}},[n("ReviewFilter",{attrs:{"review-gallery-should-show":t.reviewGalleryShouldShow,"activity-id":t.activityId,"hide-button":t.reviewTotal<=8},on:{"filter-change":t.handleFilterChange}})],1),t._v(" "),n("off-screen",{staticClass:"reviews-modal-list"},[t.reviewList&&t.reviewList.length?t._l(t.reviewList,(function(e){return n("ReviewItem",{key:e.id,staticClass:"reviews-modal-list-item",attrs:{review:e,count:6,visible:t.visible},on:{"buy-now":t.handleBuyNow}})})):t.visible&&t.isNoMore?n("ReviewBlank",{staticClass:"reviews-modal-list-blank",attrs:{tips:t.$t("review_filter.empty")}}):t._e()],2)],1)])}),[],!1,null,"6dc95fc4",null));e.default=ct.exports},function(t,e,n){"use strict";n(47),n(133),n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"imageRatio",get:function(){return this.text?"desktop"===this.klook.platform?"desktopChatEntranceIconWithText":"mobileChatEntranceIconWithText":"desktop"===this.klook.platform?"desktopChatEntranceIcon":"mobileChatEntranceIcon"}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)({type:String,default:""})],y.prototype,"icon",void 0),h([Object(f.Prop)({type:String,default:""})],y.prototype,"text",void 0);var m=y=h([f.Component],y),k=(n(1896),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:["chat-entrance-icon-wrapper",t.klook.platform]},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.icon,expression:"icon"}],class:{"with-text":t.text},attrs:{"data-img-type":t.imageRatio,alt:"Chat Entrance Icon"}}),t._v(" "),t.text?n("p",[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()])}),[],!1,null,"77b469fe",null).exports,_=n(3),j=n(64),w=n(16),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showPopup=!1,t.chatEntranceConfig={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"fetchChatEntranceData",value:function(){var t=this;this.$axios.$get(_.a.getChatEntranceConfig,{params:{page_name:this.$route.meta.trackedPageName}}).then((function(e){var n;if((null===(n=e)||void 0===n?void 0:n.success)&&e.result){var o=e.result,r=o.page_list,c=o.default_config,l=r.find((function(e){return e.page_name===t.$route.meta.trackedPageName}));if(l){var d=l.locales.find((function(e){return e.locale===Object(j.a)(t.klook.language)}));if(!d)return void t.$emit("chat-entrance-show",!1);if(d.double_check)t.$axios.$get(_.a.getDoubleCheckResult,{params:{page_name:t.$route.meta.trackedPageName,object_id:t.objectId}}).then((function(e){var n;if((null===(n=e)||void 0===n?void 0:n.success)&&e.result){var o=e.result,r=o.is_on,c=o.object_config_info;if(r){var l=c||{},d=l.icon,v=l.action_link,f=l.bubble_switch,h=l.bubble_text,y=l.bubble_trigger_duration;t.chatEntranceConfig={icon:d,text:"zh-CN"===t.klook.language?"客服":"",jumpLink:v,poptipSwitch:f,poptipText:h?h[Object(j.a)(t.klook.language)]:"",poptipDuration:y},t.setEntranceDisplayTimer(+y),d?t.$emit("chat-entrance-show",!0):t.$emit("chat-entrance-show",!1)}else t.$emit("chat-entrance-show",!1)}}));else{var v=l.config?l.config:c,f=v.icon,h=v.action_link,y=v.bubble_switch,m=v.bubble_text,k=v.bubble_trigger_duration;t.chatEntranceConfig={icon:f,text:"zh-CN"===t.klook.language?"客服":"",jumpLink:h,poptipSwitch:y,poptipText:m?m[Object(j.a)(t.klook.language)]:"",poptipDuration:k},t.setEntranceDisplayTimer(+k),f?t.$emit("chat-entrance-show",!0):t.$emit("chat-entrance-show",!1)}}}}))}},{key:"mounted",value:function(){this.fetchChatEntranceData()}},{key:"setEntranceDisplayTimer",value:function(t){var e=this,n=setTimeout((function(){if(e.showPopup=!0,e.isDesktop)var t=setTimeout((function(){e.showPopup=!1,clearTimeout(t)}),5e3);clearTimeout(n)}),1e3*t)}},{key:"toChat",value:function(){var t,e=+new Date,n="undefined"!=typeof _args3?_args3:null,o=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t},r=encodeURIComponent(JSON.stringify({previousPageName:this.$route.meta.trackedPageName,previousPageLink:location.href,objectId:this.objectId,extraInfo:this.extraInfo})),c=new URL(this.chatEntranceConfig.jumpLink);t=Object(w.ab)("from",c.search)?this.$href("".concat(c.pathname).concat(c.search,"&context=").concat(r)):this.$href("".concat(c.pathname,"?from=").concat(this.$route.meta.trackedPageName,"&context=").concat(r)),this.isDesktop?window.open(o(t)):window.location.href=o(t)}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}}]),e}(f.Vue);P([f.State],C.prototype,"klook",void 0),P([Object(f.Prop)({type:[String,Number]})],C.prototype,"objectId",void 0),P([Object(f.Prop)({type:Object,default:function(){return{}}})],C.prototype,"extraInfo",void 0),P([Object(f.Prop)({type:String,default:function(){return"AskBtn"}})],C.prototype,"spmName",void 0);var S=C=P([Object(f.Component)({components:{ChatEntranceIcon:O}})],C),D=(n(1897),Object(k.a)(S,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return e.chatEntranceConfig.icon?o("section",e._b({class:[{"chat-entrance-wrapper":!e.$slots.default},e.klook.platform],on:{click:e.toChat}},"section",e.spmName?((t={})["data-spm-module"]=e.spmName,t):{},!1),["desktop"===e.klook.platform?e._t("default",[e.chatEntranceConfig.poptipSwitch?o("klk-poptip",{attrs:{content:e.chatEntranceConfig.poptipText,placement:"left","append-to-body":!0},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}})],1)])]):o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}})],1)])]):"mobile"===e.klook.platform?e._t("default",[e.chatEntranceConfig.poptipSwitch?o("klk-poptip",{attrs:{trigger:"none",placement:"top-end",dark:"",closable:""},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[o("a",{staticClass:"chat-entrance",attrs:{"data-spm-item":"__default?typ=entry"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}})],1),e._v(" "),o("div",{attrs:{slot:"content"},on:{click:e.toChat},slot:"content"},[e._v(" "+e._s(e.chatEntranceConfig.poptipText)+" ")])]):o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}})],1)])]):e._e()],2):e._e()}),[],!1,null,"dbe681c8",null));e.a=D.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1036),y=n(1011),m=n(1159),k=n(924),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcTags2attribute",get:function(){var t;return(null===(t=this.packageDetail.product_tags)||void 0===t?void 0:t.attribute_tags)||[]}},{key:"isAiTranslation",get:function(){var t;return!!(null===(t=this.packageDetail)||void 0===t?void 0:t.is_ai_translation)}}]),e}(f.Vue);O([f.State],_.prototype,"klook",void 0),O([Object(f.Prop)()],_.prototype,"packageDetail",void 0),O([Object(f.Prop)({default:"moduleDetail"})],_.prototype,"type",void 0),O([Object(f.Prop)()],_.prototype,"size",void 0),O([Object(f.Prop)({default:!0})],_.prototype,"expandAll",void 0),O([Object(f.Prop)({default:!0})],_.prototype,"showPackageName",void 0),O([Object(f.Prop)({default:!0})],_.prototype,"defaltValue",void 0);var j=_=O([Object(f.Component)({components:{AttractionPreviewTag:m.a,ActivityValidity:y.a,PackageDetailCollapse:h.a,PublishAi:k.a}})],_),w=(n(2004),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-detail-content"},[t.isAiTranslation?n("PublishAi",{staticStyle:{margin:"0 0 16px"},attrs:{type:"text"}}):t._e(),t._v(" "),n("div",{staticClass:"tagging-pkg-attr-style"},t._l(t.calcTags2attribute,(function(e){return n("klk-label",{key:e.text,style:e,attrs:{type:"outlined","text-color":"#757575"}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),1),t._v(" "),t.packageDetail.usageValidity&&t.packageDetail.usageValidity.length?n("ActivityValidity",t._b({staticClass:"activity-validity-style",class:t.type,attrs:{data:t.packageDetail.usageValidity}},"ActivityValidity",t.$attrs,!1)):t._e(),t._v(" "),t.packageDetail.useSection&&t.packageDetail.sectionContent?n("PackageDetailCollapse",{staticClass:"packageDetailCollapse",attrs:{"defalt-value":t.defaltValue,type:t.type,sections:t.packageDetail.sectionContent.sections,size:t.size,"expand-all":t.expandAll}}):t._e()],1)}),[],!1,null,"d9ed7ade",null).exports,C=n(1410),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).active="tab1",t.total=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setTotal",value:function(t){this.total=t}},{key:"getSpm",value:function(t){var e,n={TabType:t};return"PackageDetailTab?oid=package_".concat(null===(e=this.payload)||void 0===e?void 0:e.packageId,"&ext=").concat(JSON.stringify(n),"&mod=stop&evt=click&trg=manual")}},{key:"payload",get:function(){if(this.needConvert){var t=this.packageDetail;return{product_tags:t.product_tags,useSection:t.use_section||!0,sectionContent:t.section_content,usageValidity:t.usage_validity_render_obj,enableTranslationButton:t.enable_translation_button,translationButtonStatus:t.translation_status,activityName:t.activity_name,packageName:t.package_name,packageId:t.id,activityId:t.activity_id,packageSubName:t.package_sub_name,passStandardActivityInfo:t.pass_standard_activity_info}}return this.packageDetail}},{key:"getClassName",get:function(){return this.needScroll?"package-scoll":this.isPass?"package-drawer-tabs":"package-drawer"}},{key:"activityName",get:function(){var t;return(null===(t=this.payload)||void 0===t?void 0:t.activityName)||""}},{key:"packageName",get:function(){var t;return(null===(t=this.payload)||void 0===t?void 0:t.packageName)||""}},{key:"isPass",get:function(){var t,e;return(null===(t=this.payload)||void 0===t?void 0:t.passStandardActivityInfo)&&(null===(e=this.payload)||void 0===e?void 0:e.passStandardActivityInfo.activity_total)>0}}]),e}(f.Vue);S([Object(f.Prop)({default:{}})],D.prototype,"packageDetail",void 0),S([Object(f.Prop)({default:!1})],D.prototype,"needConvert",void 0),S([Object(f.Prop)({default:!0})],D.prototype,"needScroll",void 0),S([Object(f.Prop)()],D.prototype,"expandAll",void 0),S([Object(f.Prop)({default:!1})],D.prototype,"showActivityTitle",void 0);var x=D=S([Object(f.Component)({components:{PackContent:C.default,PackageDetailContent:P}})],D),T=(n(2005),Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-container"},[t.showActivityTitle&&t.activityName?[n("h3",{staticClass:"title"},[t._v(t._s(t.activityName))]),t._v(" "),n("div",{staticClass:"subtitle"},[t._v(t._s(t.packageName))])]:n("h3",{staticClass:"title"},[t._v(t._s(t.packageName))]),t._v(" "),t.isPass?n("div",{staticClass:"package-content"},[n("klk-tabs",{attrs:{underline:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("klk-tab-pane",{staticClass:"package-detail",attrs:{name:"tab1",label:t.$t("1603"),"data-spm-module":t.getSpm("Description"),"data-spm-virtual-item":"__virtual"}},[n("PackageDetailContent",{class:t.getClassName,attrs:{"package-detail":t.payload,"show-package-name":!1,"is-presale":!0,"defalt-value":[0],"expand-all":!1,type:"moduleDetail",size:"large"}})],1),t._v(" "),n("klk-tab-pane",{attrs:{name:"tab2",label:t.$t("89672",{num:t.total}),"data-spm-module":t.getSpm("AttractionsIncluded"),"data-spm-virtual-item":"__virtual"}},[n("PackContent",{class:t.getClassName,attrs:{"activity-id":t.payload.activityId,"package-id":t.payload.packageId,"is-scroll":t.needScroll},on:{setTotal:t.setTotal}})],1)],1)],1):n("div",{staticClass:"package-normal"},[n("PackageDetailContent",{class:t.getClassName,attrs:{"package-detail":t.payload,"show-package-name":!1,"is-presale":!0,type:"moduleDetail",size:"large","expand-all":t.expandAll}})],1)],2)}),[],!1,null,"af8eb4b8",null));e.a=T.exports},function(t,e,n){"use strict";var o=n(13),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),title=n(1041),y=n(883),m=n(985),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getUnitPrice",value:function(t){var e,n,o,r;return(null===(n=null===(e=t)||void 0===e?void 0:e.price_show)||void 0===n?void 0:n.sale_price)||(null===(r=null===(o=t)||void 0===o?void 0:o.price_show)||void 0===r?void 0:r.from_price)||0}}]),e}(h.Vue);k([h.State],O.prototype,"klook",void 0),k([Object(h.Prop)()],O.prototype,"units",void 0);var _=O=k([h.Component],O),j=(n(1995),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.units&&t.units.length?n("div",{staticClass:"units-join-info"},t._l(t.units,(function(e,o){return n("span",{key:o,staticClass:"unit-text"},[n("span",{staticClass:"unit-name"},[t._m(0,!0),t._v("\n      "+t._s(e.priceName)+"\n    ")]),t._v(" "),n("span",{staticClass:"unit-price"},[t._v(t._s(t.getUnitPrice(e)))])])})),0):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"unit-link"},[e("i",{staticClass:"custom-poin"})])}],!1,null,"9109ab5a",null).exports,P=n(920),C=n(885),S=n(881),D=n(934),x=n(1012),T=n(981),I=n(887),R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"bindIHTrack",value:function(){return S.a.apply(void 0,arguments)}},{key:"reload",value:function(){window&&window.location.reload()}},{key:"getTaggingExtraTrackObj",value:function(t){var e,n,r,c,l=[].concat(Object(o.a)((null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.attribute_tags)||[]),Object(o.a)((null===(c=null===(r=t)||void 0===r?void 0:r.product_tags)||void 0===c?void 0:c.discount_tags)||[]));return Object(y.getTaggingExtraTrackObj)(l)||{}}},{key:"clickPkgDetail",value:function(t){this.$emit("setPkgDetailStatus",t)}},{key:"setUnfoldStatus",value:function(t){this.isWarming||this.isSuspended||this.disabled||this.$emit("setUnfoldStatus",t)}},{key:"showPointer",get:function(){return this.isUnfold&&!this.isWarming&&!this.isSuspended}},{key:"calcPriceShow",get:function(){var t;return null===(t=this.pkgData)||void 0===t?void 0:t.price_show}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.pkgData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"cutDownTimeList",get:function(){var t,e=this.calcTags2discount,n=[];return(null===(t=e)||void 0===t?void 0:t.length)&&e.forEach((function(t){var e,o,r,c=null===(r=null===(o=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===o?void 0:o.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&n.push(c)})),n}},{key:"calcTags2discount",get:function(){var t,e,n,o=(null===(e=null===(t=this.pkgData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],r=[];return(null===(n=o)||void 0===n?void 0:n.length)&&o.forEach((function(t){var e,n,o;(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time)?Object(I.c)(t.inner_vars.rate_plan.count_down_end_time)&&r.push(t):r.push(t)})),r}}]),e}(D.a);R([Object(h.Prop)()],$.prototype,"pkgDetailData",void 0),R([Object(h.Prop)()],$.prototype,"pkgData",void 0),R([Object(h.Prop)()],$.prototype,"units",void 0),R([Object(h.Prop)()],$.prototype,"pkgTrack",void 0),R([Object(h.Prop)({type:Boolean,default:!1})],$.prototype,"isReady",void 0),R([Object(h.Prop)({type:Boolean,default:!1})],$.prototype,"isUnfold",void 0),R([Object(h.Prop)({type:Boolean,default:!1})],$.prototype,"disabled",void 0);var L=$=R([Object(h.Component)({components:{TotalSlot:C.a,UnitsJoinInfo:w,ActivityBookingStartDate:P.a,DesktopPackageDetailButton:m.a,ExpTagging:y.default,PackageCardTitle:title.a,WarmingSlogan:x.a,CutDown:T.default}})],$),A=(n(1996),Object(j.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["pkg-item-content",t.showPointer&&"pointer"],on:{click:function(e){return t.setUnfoldStatus(!0)}}},[n("WarmingSlogan",{staticStyle:{"margin-bottom":"8px"},attrs:{"publish-info":t.publishInfo}}),t._v(" "),n("div",t._b({staticClass:"pkg-item-content__box"},"div",t.bindIHTrack(Object.assign({},t.pkgTrack,{action:!t.isUnfold})),!1),[n("div",{staticClass:"left-right-box"},[n("div",{staticClass:"left-box"},[n("div",[n("PackageCardTitle",{staticClass:"pkg-item-content__pkg-title",attrs:{"hide-entry":!0,title:t.pkgData.package_name}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"12px 0 0 0"},attrs:{list:t.calcTags2attribute,line:1}}),t._v(" "),n("div",{staticClass:"cut-down-box"},[n("CutDown",{attrs:{"time-list":t.cutDownTimeList},on:{reload:t.reload}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",attrs:{list:t.calcTags2discount,line:1}})],1)],1)]),t._v(" "),n("div",{staticClass:"right-box"},[t.isWarming||t.isSuspended?t._e():n("div",t._b({staticClass:"reverse-box",attrs:{type:"outlined",size:"small"},on:{click:function(e){return e.stopPropagation(),t.setUnfoldStatus(!t.isUnfold)}}},"div",t.bindIHTrack({type:"module",spm:"PackageClear",query:{oid:"package_"+t.pkgData.package_id}}),!1),[n("svg-icon",{staticClass:"icon-fold",attrs:{name:t.isUnfold?"common#icon_nav_chevron_up_circle_m":"common#icon_nav_chevron_down_circle_m",size:"24"}})],1)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isReady||!t.isUnfold,expression:"!isReady || !isUnfold"}],staticClass:"infos-wrap"},[n("UnitsJoinInfo",{staticClass:"text-ellipsis",staticStyle:{"margin-bottom":"4px"},attrs:{units:t.units}}),t._v(" "),3===t.pkgData.package_ticket_type||!t.pkgData.available_date||t.isWarming||t.isSuspended?t._e():n("ActivityBookingStartDate",{staticClass:"pkg-available-date",attrs:{"start-time":t.pkgData.available_date}}),t._v(" "),n("div",{staticClass:"infos-box"},[n("div",{staticClass:"infos-box__left"},[n("div",{staticClass:"pkg-detail-btn",on:{click:function(e){return e.stopPropagation(),t.clickPkgDetail(!0)}}},[n("DesktopPackageDetailButton",{staticClass:"text-link",attrs:{text:t.$t("activity.v2.label.pkg_info"),"custom-type":"desktop","data-spm-item":"PackageDetailsBtn"}})],1)]),t._v(" "),n("div",{staticClass:"infos-box__right"},[n("TotalSlot",{staticClass:"pkg-price",attrs:{"price-data":t.calcPriceShow,"style-type":"flex-column ta-right pkg-price-style","hide-summary-price":!0}}),t._v(" "),n("klk-button",{staticClass:"pkg-select-booking",attrs:{disabled:t.isWarming||t.isSuspended||t.disabled}},[t._v("\n            "+t._s(t.warmingText||t.suspendedText||t.$t("11888"))+"\n          ")])],1)])],1)]),t._v(" "),t._t("default")],2)}),[],!1,null,"3d988eae",null));e.a=A.exports},,,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(898),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(f.a);h([Object(v.Prop)({default:"unit"})],y.prototype,"priceType",void 0),h([Object(v.Prop)({default:function(){return["market_price_text","original_price_text","original_selling_price_text","selling_price_text"]}})],y.prototype,"orderList",void 0);var m=y=h([v.Component],y),k=(n(1525),n(43));n.d(e,"getPreUnitPriceData",(function(){return f.b})),n.d(e,"testPriceData",(function(){return f.c}));var component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-slot",class:t.styleType},[n("span",{staticClass:"price-slot-wrap"},[t._l(t.priceList,(function(e){return t._t(e.propKey,[n("span",{key:e.propKey,class:["price-box",e.className]},[t._t(e.propKey+"-value",[t._v(t._s(e.value))],{slotScope:e})],2)],{slotScope:e})}))],2)])}),[],!1,null,"5484035b",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(416),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(16),m=n(923),k=n(883),O=n(881);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).activeItem=null,t.showMore=!1,t.firstInitObj={isInit:!1,beforeHeight:"",afterHeight:""},t.swiperOption={slidesPerView:"auto",freeMode:!0,observer:!0,observeParents:!0},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"bindIHTrack",value:function(){return O.a.apply(void 0,arguments)}},{key:"getTagTrack",value:function(t){var e,n,o,track=(null===(e=t)||void 0===e?void 0:e.track)||{};return{type:"module",spm:"Package_Filter",query:{oid:"tag_".concat(null===(n=track)||void 0===n?void 0:n.tag_id),ext:encodeURIComponent(JSON.stringify({TagName:"tag_".concat(null===(o=track)||void 0===o?void 0:o.tag_key)}))}}}},{key:"listWatch",value:function(){this.init()}},{key:"activeSectionChange",value:function(t){t&&this.slide(t)}},{key:"setShowMore",value:function(t){this.showMore=t,this.$emit("showMore",t),t||this.slide(this.value)}},{key:"getItem",value:function(t){return this.$el.querySelector('[data-value="'.concat(t,'"]'))}},{key:"slide",value:function(t){var e=this;setTimeout((function(){var n=e.getItem(t);n&&n.scrollIntoView({behavior:"instant",inline:"center",block:"nearest"})}))}},{key:"clickHandler",value:function(t){this.value===t.tag_key&&(t={}),this.activeItem=t,this.$emit("change",t.tag_key,{value:this.value})}},{key:"init",value:function(){var t=this.firstInitObj;t.isInit=!1,setTimeout((function(){t.beforeHeight=Object(y.C)(document.querySelector(".tag-filter .card-swiper"),"height"),t.isInit=!0,setTimeout((function(){t.afterHeight=Object(y.C)(document.querySelector(".tag-filter .card-swiper"),"height")}),1)}),1)}},{key:"mounted",value:function(){this.init()}},{key:"visible",get:function(){return this.list&&this.list.length}},{key:"calcShowArrow",get:function(){var t=this.firstInitObj;return parseInt(t.beforeHeight)>parseInt(t.afterHeight)}}]),e}(h.Vue);w([Object(h.Ref)()],P.prototype,"swiperRef",void 0),w([Object(h.Prop)()],P.prototype,"value",void 0),w([Object(h.Prop)()],P.prototype,"list",void 0),w([Object(h.Watch)("list")],P.prototype,"listWatch",null),w([Object(h.Watch)("value")],P.prototype,"activeSectionChange",null),P=w([Object(h.Component)({components:{CardSwiper:m.a,ExpTagging:k.default}})],P);var C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,e={type:1,text:"Display tag",text_color:"#212121",background_color:"#eeeeee",background_alpha:0,border_color:"#eeeeee",radius:4,right_action:{icon:"",desc:""},tag_key:"",group_keys:["product_tag","promotion_tag"]},n=new Array(t).fill(0).map((function(t,i){return j({},e,{tag_key:"key".concat(i)})}));return n},S=P,D=(n(1561),n(43));n.d(e,"getTestTags",(function(){return C}));var component=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["tag-filter"]},[n("div",{staticClass:"tag-filter-wrap"},[n("div",{staticClass:"tag-filter-box",class:[t.showMore?"show-more-style":"",t.firstInitObj.isInit?"":"first-init-flag"]},[n("CardSwiper",{ref:"swiperRef"},t._l(t.list,(function(e,o){return n("div",t._b({key:o,class:["tag-filter-btn",{active:t.value===e.tag_key}],attrs:{"data-value":e.tag_key},on:{click:function(n){return t.clickHandler(e)}}},"div",t.bindIHTrack(t.getTagTrack(e)),!1),[t._v("\n          "+t._s(e.text)+"\n        ")])})),0),t._v(" "),t.calcShowArrow?n("span",t._b({staticClass:"arrow-btn-wrap",on:{click:function(e){return e.stopPropagation(),t.setShowMore(!t.showMore)}}},"span",t.bindIHTrack({type:"module",spm:"Package_Filter_View_All"}),!1),[n("SvgIcon",{staticClass:"arrow-btn",attrs:{name:"mobile-activity#icon_navigation_chevron_down_m",width:"16",height:"16"}})],1):t._e()],1)])])}),[],!1,null,"71077dbf",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=n(934),m=n(1632),k=n(885),O=n(889),_=n(882),j=n(1186),w=n(883),P=n(881),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).poptipData={width:360,placement:"bottom","append-to-body":!0,"z-index":1100},t.priceSummary=null,t.initHeight=0,t.showStatus="default",t.totalPriceData=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"scrollToPackageOptionsTop",value:function(){var t,e=this.$route.query,n=this.packageId||parseInt(null===(t=e)||void 0===t?void 0:t.scroll_pkg)||0;Object(m.a)(n);var o=this.basicData||{},r=o.activity_id,c=o.activity_page_template_id;this.$sendGTMCustomEvent("Select Package Clicked|Activity Page|".concat(r,"_").concat(c))}},{key:"mounted",value:function(){var t=this;_.a.$off("updateRightPriceData2bus",this.updateRightPriceData2bus).$on("updateRightPriceData2bus",this.updateRightPriceData2bus),_.a.$off("updateRightPriceStatus2bus",this.updateRightPriceStatus2bus).$on("updateRightPriceStatus2bus",this.updateRightPriceStatus2bus),setTimeout((function(){_.a.$emit("setIsDelayFlag2bus",{from:"right_price_updated"});var e=t.$refs.pageRightPriceRef;t.initHeight=e.offsetHeight||0}))}},{key:"updateRightPriceStatus2bus",value:function(t){this.showStatus=t}},{key:"updateRightPriceData2bus",value:function(data){this.$set(this,"totalPriceData",data||{})}},{key:"bindIHTrack",value:function(){return P.a.apply(void 0,arguments)}},{key:"calcTotalPrice",get:function(){var t,e;return null===(e=null===(t=this.totalPriceData)||void 0===t?void 0:t.prePriceData)||void 0===e?void 0:e.sale_price}},{key:"calcPriceShow",get:function(){return this.calcTotalPrice?{sale_price:this.calcTotalPrice}:this.priceShow}},{key:"calcCridits",get:function(){var t;return(null===(t=this.totalPriceData)||void 0===t?void 0:t.creditsObj)||{}}},{key:"calcBookingBtnsBinds",get:function(){var t;return(null===(t=this.totalPriceData)||void 0===t?void 0:t.bookingBottomBtnsBinds)||{}}},{key:"calcPriceDetail",get:function(){var t;return null===(t=this.totalPriceData)||void 0===t?void 0:t.rightPriceDetail}},{key:"packageId",get:function(){return Object(h.get)(this.calcPriceDetail,"package_list.0.package_id","")}}]),e}(y.a);C([f.State],S.prototype,"klook",void 0),C([Object(f.Prop)()],S.prototype,"basicData",void 0),C([Object(f.Prop)()],S.prototype,"priceShow",void 0),C([Object(f.Prop)()],S.prototype,"city_id",void 0),C([Object(f.Prop)()],S.prototype,"published",void 0),C([Object(f.Prop)()],S.prototype,"sold_out",void 0),C([Object(f.Prop)()],S.prototype,"link",void 0),C([Object(f.Prop)()],S.prototype,"link_title",void 0),C([Object(f.Prop)()],S.prototype,"bottom_button",void 0);var D=S=C([Object(f.Component)({components:{ExpTagging:w.default,BookingBottomBtns:j.a,SavingPriceDetails:O.default,TotalSlot:k.a}})],S),x=(n(2438),n(2439),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"pageRightPriceRef",staticClass:"page-banner-right-price",attrs:{"data-init-height":t.initHeight}},["default"!==t.showStatus&&t.totalPriceData&&t.calcPriceDetail?n("div",{staticClass:"pkg-content"},[n("SavingPriceDetails",{staticClass:"custom-right-price-style",attrs:{"style-type":"desktop-right-price-type","hide-title":!0,"hide-dashed":!0,"price-summary":t.calcPriceDetail}}),t._v(" "),n("div",{staticClass:"total-field-title"},[t._v("\n      "+t._s(t.$t("pay.total_money"))+"\n    ")]),t._v(" "),n("div",{staticClass:"right-price-total"},[n("TotalSlot",{staticClass:"total-slot-wrap flex-center flex-wrap",attrs:{"poptip-data":t.poptipData,"price-data":t.totalPriceData.prePriceData}})],1),t._v(" "),t.calcCridits.creditsVisible?n("div",{staticClass:"right-price-credits"},[t.calcCridits.tagCredits?[n("ExpTagging",{staticClass:"one-tag",attrs:{list:[t.calcCridits.tagCredits]}})]:t._e()],2):t._e(),t._v(" "),n("div",{staticClass:"booking-btns-box"},[t.totalPriceData.isBtnVisibleAddtocart?n("BookingBottomBtns",t._b({staticClass:"booking-btn add-to-card",attrs:{type:"addToCart","btn-content":t.calcBookingBtnsBinds.addToCartText},on:{closeModal:t.totalPriceData.handleCloseModalEvent}},"BookingBottomBtns",Object.assign({},t.calcBookingBtnsBinds,t.bindIHTrack({exposure:!1,type:"module",spm:"AddToCartBtn",query:{oid:"package_"+t.packageId,ext:JSON.stringify({CompletedInfo:!0})}})),!1)):t._e(),t._v(" "),n("BookingBottomBtns",t._b({staticClass:"booking-btn",attrs:{"btn-content":t.totalPriceData.isMultiPass?t.$t("31062-reserve_slot"):"",type:"bookNow"}},"BookingBottomBtns",Object.assign({},t.calcBookingBtnsBinds,t.bindIHTrack({exposure:!1,type:"module",spm:"BookNowBtn",query:{oid:"package_"+t.packageId,ext:JSON.stringify({CompletedInfo:!0})}})),!1))],1)],1):n("div",{staticClass:"pkg-content"},[n("TotalSlot",{staticClass:"total-slot-wrap custom-style",attrs:{"price-data":t.calcPriceShow}}),t._v(" "),n("div",{staticClass:"status-btn-box"},[t.published?n("div",{staticClass:"banner-select-pkg-btn",attrs:{"data-spm-module":"SelectOptionsBtn?trg=manual"}},[t.sold_out?n("klk-button",{attrs:{block:"",disabled:""}},[t._v("\n          "+t._s(t.$t("activity.v2.btn.sold_out"))+"\n        ")]):n("klk-button",{staticClass:"select-btn",attrs:{block:"","data-spm-item":"__default"},on:{click:t.scrollToPackageOptionsTop}},[n("span",[t._v(t._s(t.calcTotalPrice?t.$t("79418"):t.$t("activity.select.option")))])])],1):t.isWarming?n("div",[n("klk-button",{attrs:{block:""},on:{click:t.scrollToPackageOptionsTop}},[t._v("\n          "+t._s(t.warmingText)+"\n        ")])],1):n("div",[n("klk-button",{attrs:{type:"primary",disabled:"",block:""}},[t._v("\n          "+t._s(t.suspendedText||t.bottom_button||t.$t("activity.unpublish_btn_text"))+"\n        ")])],1)]),t._v(" "),t.link&&t.link_title?n("div",{staticClass:"package-content-link",attrs:{"data-spm-module":"Things_To_Do_In_City?oid=city_"+t.city_id,"data-spm-virtual-item":"__virtual?typ=entry"}},[n("a",{attrs:{href:t.link}},[t._v(t._s(t.link_title))])]):t._e()],1)])}),[],!1,null,"4d6fea52",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:"100%"})],h.prototype,"loadingWidth",void 0);var y=h=f([v.Component],h),m=(n(2440),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loading",style:{width:this.loadingWidth}},[this._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-list"},[e("div",{staticClass:"item"},[e("div",{staticClass:"skeleton-header"}),this._v(" "),e("div",{staticClass:"skeleton-short-header"}),this._v(" "),e("div",{staticClass:"skeleton-content"}),this._v(" "),e("div",{staticClass:"skeleton-footer"}),this._v(" "),e("div",{staticClass:"skeleton-long-footer"})])])}],!1,null,"6f53a716",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),base=n(1991),y=n(2062),m=n(2063),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showModal=!1,t.freshLoading=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"statusChange",value:function(t,e){2===t&&t!==e&&(this.showModal=!0)}},{key:"soldOutChange",value:function(t,e){t&&t!==e&&(this.showModal=!0)}},{key:"showDetail",value:function(){this.showModal=!0}},{key:"fresh",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.freshLoading=!0,e.next=3,t.getLineUpInfo();case 3:setTimeout((function(){t.freshLoading=!1}),1200);case 4:case"end":return e.stop()}}),e)}))),350)}},{key:"soldOut",get:function(){return this.lineUpInfo.sold_out}},{key:"status",get:function(){return this.lineUpInfo.flash_sale_status.user_status}}]),e}(base.a);k([Object(h.Watch)("status")],O.prototype,"statusChange",null),k([Object(h.Watch)("soldOut")],O.prototype,"soldOutChange",null);var _=O=k([Object(h.Component)({components:{LineUpStatus:y.a,LineUpBookTips:m.a}})],O),j=(n(2472),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"line-up-bottom-wrap"},[t.basicData.is_line_page&&3!==t.status?[n("div",{staticClass:"status-wrap-mobile",on:{click:t.showDetail}},[n("div"),t._v(" "),t.soldOut?n("div",{staticClass:"status-text soldout-text"},[t._v(t._s(t.$t("78625")))]):1!==t.status||t.canJoin?1===t.status&&t.canJoin?n("div",{staticClass:"status-text"},[t._v(t._s(t.$t("78616")))]):2==t.status?n("div",{staticClass:"line-up-info-wrap"},[n("SvgIcon",{staticClass:"info-icon",attrs:{name:"activity-common#line-up-time"}}),t._v(" "),n("div",{staticClass:"info-text pd-24"},[t._v(t._s(t.timeCount))]),t._v(" "),n("SvgIcon",{staticClass:"info-icon",attrs:{name:"activity-common#line-up-user"}}),t._v(" "),n("div",{staticClass:"info-text"},[t._v(t._s(t.lineUpInfo.ahead))])],1):3===t.status?n("div",{staticClass:"status-text"},[t._v(t._s(t.$t("78623")))]):t._e():n("div",{staticClass:"status-text"},[t._v("\n        "+t._s(t.$t("78613",{time:t.timeCount}))+"\n        ")]),t._v(" "),n("klk-icon",{staticClass:"icon",attrs:{type:"icon_navigation_chevron_up_xs",size:"16"}})],1),t._v(" "),1==t.status||t.soldOut?n("klk-button",{staticClass:"line-up-button",attrs:{disabled:!t.canJoin||t.soldOut},on:{click:t.reload}},[t._v("\n      "+t._s(t.$t("78617"))+"\n    ")]):2==t.status?n("klk-button",{staticClass:"line-up-button fresh",attrs:{type:"outlined",loading:t.freshLoading},on:{click:t.fresh}},[t._v("\n      "+t._s(t.freshLoading?"":t.$t("78621"))+"\n    ")]):3==t.status?n("klk-button",{staticClass:"line-up-button",on:{click:t.reload}},[t._v("\n      "+t._s(t.$t("78624"))+" ("+t._s(t.timeCount)+")\n    ")]):t._e(),t._v(" "),n("klk-bottom-sheet",{attrs:{"show-close":"",visible:t.showModal,title:t.$t("78622"),mask:!1},on:{"update:visible":function(e){t.showModal=e}}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"line-up-status"},[n("LineUpStatus",{attrs:{"time-count":t.timeCount,"can-join":t.canJoin,info:t.lineUpInfo}}),t._v(" "),t.soldOut?n("div",{staticClass:"sold-out-empty"}):1==t.status?n("klk-button",{staticClass:"line-up-button",attrs:{disabled:!t.canJoin},on:{click:t.reload}},[t._v("\n            "+t._s(t.$t("78617"))+"\n          ")]):2==t.status?n("klk-button",{staticClass:"line-up-button fresh",attrs:{type:"outlined",loading:t.freshLoading},on:{click:t.fresh}},[t._v("\n            "+t._s(t.freshLoading?"":t.$t("78621"))+"\n          ")]):3==t.status?n("klk-button",{staticClass:"line-up-button",on:{click:t.reload}},[t._v("\n            "+t._s(t.$t("78624"))+" ("+t._s(t.timeCount)+")\n          ")]):t._e()],1),t._v(" "),n("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("78615")))])])])]:[n("LineUpBookTips",{attrs:{"time-count":t.timeCount,"is-mobile":!0}})]],2)}),[],!1,null,"a0217bae",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1911),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isModalVisible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleOpenModal",value:function(){this.promotionFilteredNone||(this.$emit("open"),this.getActivityPromotion(),this.isModalVisible=!0,this.$sendGTMCustomEvent("Activity Page|ViewPackageWithPromotion_Click|".concat(this.activityId,"|").concat(this.templateId)))}},{key:"handleConfirmModal",value:function(){this.isModalVisible=!1,this.promotionContent.confirmSelect()}},{key:"handleCloseModal",value:function(){this.isModalVisible=!1}},{key:"selectPackage",value:function(data){this.$emit("selectPackage",data)}},{key:"mounted",value:function(){this.$sendGTMCustomEvent("Activity Page|ViewPackageWithPromotion_Appear|".concat(this.activityId,"|").concat(this.templateId))}}]),e}(n(1898).a);y([Object(f.Ref)()],m.prototype,"promotionContent",void 0);var k=m=y([Object(f.Component)({components:{PackagePromotionContent:h.a}})],m),O=(n(2492),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-promotion-wrapper-desktop",class:{"filtered-none":t.promotionFilteredNone}},[n("div",{staticClass:"activity-package-promotion_head",on:{click:t.handleOpenModal}},[n("div",{staticClass:"package-promotion-content"},[n("klk-label",{attrs:{size:"small"}},[t._v(t._s(t.$t("16563")))]),t._v(" "),n("span",{staticClass:"package-promotion-text"},[t._v("\n        "+t._s(t.promotionFilteredNone?t.$t("78197"):t.$t("16575"))+"\n      ")])],1),t._v(" "),n("div",{staticClass:"package-promotion-icon"},[t.promotionFilteredNone?t._e():n("SvgIcon",{attrs:{name:"desktop-common#arrow-standard-right-new",width:"14",height:"14",color:"#4A4A4A"}})],1)]),t._v(" "),n("klk-modal",{attrs:{"modal-class":"activity-package-promotion_modal",mode:"confirm",title:t.$t("12861-select_package"),size:"large",open:t.isModalVisible,"esc-press-closable":!0,closable:!0,scrollable:t.promotionList.length>=3,"overlay-closable":!0,"show-cancel-button":!1,"ok-label":t.$t("global.tips.okTxt")},on:{"update:open":function(e){t.isModalVisible=e},"on-confirm":t.handleConfirmModal,close:t.handleCloseModal}},[n("PackagePromotionContent",{ref:"promotionContent",attrs:{"package-id":t.packageId,"template-id":t.templateId,"activity-id":t.activityId,"package-selected-date":t.packageSelectedDate,"valid-packages":t.validPackages,"included-packages":t.includedPackages,"packages-in-date":t.packagesInDate,type:"desktop","promotion-list":t.promotionList,status:t.fetchStatus},on:{refresh:t.getActivityPromotion,selectPackage:t.selectPackage}})],1)],1)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=n(1186),m=n(1425),k=n(1296),O=n(885),_=n(16),j=n(952),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=Object(f.namespace)("traveller/activity"),C=Object(f.namespace)("experience"),S=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).completeInfo=!1,t.throttleGetFixedWrapInfos=Object(h.throttle)(t.getFixedWrapInfos,300),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getCalcPreTotalPrice",value:function(){var t,e,n=Object(_.v)(this.klook.currency,"-");if(!this.calcShowPrice)return{sale_price:n};var o=null===(t=this.preSettlementApiData)||void 0===t?void 0:t.result,r=this.$refs.bookingSettlementRef,c=Object(_.v)(this.klook.currency,null===(e=r)||void 0===e?void 0:e.price);return Object(O.b)(this.currentSelectedPackage,o,{oldPriceShow:{sale_price:c}})}},{key:"clickSavePrice",value:function(t){var e,n,o=null===(n=null===(e=this.bookingSettlementBinds)||void 0===e?void 0:e.preTotalPrice)||void 0===n?void 0:n.price_summary;this.$emit("clickSavePrice",t,{priceSummary:o})}},{key:"updateModuleExtra",value:function(t){this.completeInfo=JSON.parse(t).CompletedInfo}},{key:"handleCloseModalEvent",value:function(){this.showShoppingCart&&this.showShoppingCart()}},{key:"getFixedWrapInfos",value:function(){var t,e,n,o=null===(t=this.$refs)||void 0===t?void 0:t.fixedWrapRef;if(o){var r={height:null===(n=null===(e=o)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.offsetHeight};return this.$emit("updateInfos",r),r}}},{key:"updated",value:function(){this.throttleGetFixedWrapInfos()}},{key:"arrangementId",get:function(){var t;return null===(t=this.selectedTime)||void 0===t?void 0:t.arrangement_id}},{key:"calcShowPrice",get:function(){return!(!this.arrangementId||Object(h.isEmpty)(this.units))&&(this.units||[]).reduce((function(t,e){return t+=e.count||0}),0)>0}},{key:"itemExtra",get:function(){var t=(this.units||[]).filter((function(t){return t.count>0}));return JSON.stringify({CompletedInfo:this.completeInfo,Sku_id:t.map((function(t){return t.skuId})),Sku_num:t.map((function(t){return t.count}))})}},{key:"isSoldOut",get:function(){var t=this.packages;return Object(h.isEmpty)(t)||t.every((function(t){return!t.has_stocks}))}},{key:"isBtnVisibleAddtocart",get:function(){return!([47631,46820,48639,48789,55826,49807,55724].includes(this.activityId)||this.isSupportShoppingCart||this.isGuestCheckout||this.isMultiPass)}},{key:"isInPromotion",get:function(){var t,e;return 5===((null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event)||{}).status}},{key:"bookingSettlementBinds",get:function(){var t,e,n;return{bookingDays:null===(t=this.wifiSimParams)||void 0===t?void 0:t.days,preTotalPrice:this.getCalcPreTotalPrice(),units:this.units,isInPromotion:this.isInPromotion,promotionDetail:null===(n=null===(e=this.currentSelectedPackage)||void 0===e?void 0:e.promotion_price)||void 0===n?void 0:n.promotion_event}}},{key:"bookingBottomBtnsBinds",get:function(){return{selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,templateId:this.templateId,units:this.units,activityId:this.activityId,isSoldOut:this.isSoldOut,isOpenTicket:this.isActOpenTicket,selectedPackagePriceSchedule:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount,wifiSimParams:this.wifiSimParams}}}]),e}(f.Vue);w([C.State],S.prototype,"sectionActData",void 0),w([f.State],S.prototype,"klook",void 0),w([Object(f.Prop)({type:String,default:""})],S.prototype,"fromType",void 0),w([Object(f.Prop)({default:null})],S.prototype,"wifiSimParams",void 0),w([Object(f.Prop)()],S.prototype,"hideDiscountTips",void 0),w([Object(f.Prop)()],S.prototype,"units",void 0),w([Object(f.Prop)()],S.prototype,"activityId",void 0),w([Object(f.Prop)()],S.prototype,"templateId",void 0),w([Object(f.Prop)()],S.prototype,"isSupportShoppingCart",void 0),w([Object(f.Prop)()],S.prototype,"isActOpenTicket",void 0),w([Object(f.Prop)()],S.prototype,"packages",void 0),w([Object(f.Prop)({default:!1})],S.prototype,"isMultiPass",void 0),w([Object(f.Prop)()],S.prototype,"currentSelectedPackage",void 0),w([Object(f.Prop)()],S.prototype,"selectedTime",void 0),w([Object(f.Prop)()],S.prototype,"packageSchedules",void 0),w([Object(f.Prop)()],S.prototype,"packageSelectedDate",void 0),w([Object(f.Prop)()],S.prototype,"totalUnitCount",void 0),w([f.Getter],S.prototype,"isGuestCheckout",void 0),w([Object(f.Prop)()],S.prototype,"showShoppingCart",void 0),w([P.State],S.prototype,"preSettlementApiData",void 0),w([P.Getter],S.prototype,"preSettlementTips2getters",void 0);var D=S=w([Object(f.Component)({components:{PriceDiscountTips:j.a,TotalSlot:O.a,BookingBarWrap:m.a,ExpBookingSettlement:k.a,BookingBottomBtns:y.a}})],S),x=(n(2535),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BookingBarWrap",{ref:"fixedWrapRef",staticClass:"js-hack-total-footer booking-bottom-bar",class:t.fromType,attrs:{"price-visible":!t.isMultiPass,"is-sold-out":t.isSoldOut}},[!t.hideDiscountTips&&t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"discount-tips-style",attrs:{slot:"discount-tips",tips:t.preSettlementTips2getters},slot:"discount-tips"}):t._e(),t._v(" "),n("ExpBookingSettlement",t._b({ref:"bookingSettlementRef",attrs:{slot:"settlement"},on:{clickSavePrice:t.clickSavePrice},slot:"settlement"},"ExpBookingSettlement",t.bookingSettlementBinds,!1)),t._v(" "),n("div",{staticClass:"activity-booking-options_bottom-bar-buttons",attrs:{slot:"buttons"},slot:"buttons"},[t._t("slot-booking-bar__buttons",[!t.isBtnVisibleAddtocart||t.fromType&&"addToCart"!==t.fromType?t._e():n("BookingBottomBtns",t._b({staticClass:"add-to-card",attrs:{type:"addToCart","data-spm-module":"AddToCartBtn?ext="+t.itemExtra+"&trg=manual","data-spm-virtual-item":"__virtual"},on:{"next-btn-complete":t.updateModuleExtra,closeModal:t.handleCloseModalEvent}},"BookingBottomBtns",t.bookingBottomBtnsBinds,!1)),t._v(" "),t.fromType&&"bookNow"!==t.fromType?t._e():n("BookingBottomBtns",t._b({attrs:{"data-spm-module":(t.isMultiPass?"NextBtn":"BookNowBtn")+"?ext="+t.itemExtra+"&trg=manual","data-spm-virtual-item":"__virtual","btn-content":t.isMultiPass?this.$t("31062-reserve_slot"):"",type:"bookNow"}},"BookingBottomBtns",t.bookingBottomBtnsBinds,!1))],{slotScope:{params:t.bookingBottomBtnsBinds}})],2)],1)}),[],!1,null,"524a3f67",null);e.default=component.exports},,,function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(1961),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"experience-view-more"},[e("span",{staticClass:"experience-view-more_text"},[this._v("\n    "+this._s(this.$t("view_all"))+"\n  ")]),this._v(" "),e("SvgIcon",{attrs:{size:"16",name:"mobile-activity#icon_navigation_chevron_right_m"}})],1)}),[],!1,null,"7d9712c8",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=n(211),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"time",get:function(){var t=Date.parse(this.startTime),e=Date.parse(this.endTime),n=Date.now(),o=this.$t.bind(this),r="";if(n<t){var c=Object(m.e)(new Date(t),o,this.klook.language,3),time=y()(t).format("HH:mm");r=this.$t("17822",{date:c,hhmm:time})}if(n>t&&n<e){var l=Object(m.e)(new Date(e),o,this.klook.language,3),d=y()(e).format("HH:mm");r=this.$t("17823",{date:l,hhmm:d})}return r}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"event",void 0),k([Object(f.Prop)()],O.prototype,"bgImage",void 0),k([Object(f.Prop)()],O.prototype,"tag",void 0),k([Object(f.Prop)()],O.prototype,"startTime",void 0),k([Object(f.Prop)()],O.prototype,"endTime",void 0),k([Object(f.Prop)()],O.prototype,"status",void 0);var _=O=k([f.Component],O),j=(n(1963),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"promo-belt"},[n("img",{attrs:{src:t.bgImage,alt:"background"}}),t._v(" "),n("div",{staticClass:"content"},[t.tag?n("div",{staticClass:"tag"},[t._v(t._s(t.tag))]):t._e(),t._v(" "),n("div",{staticClass:"time"},[t._v(t._s(t.time))])])])}),[],!1,null,"b19bbe32",null);e.a=component.exports},function(t,e,n){"use strict";n(416);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1444),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"list",get:function(){var t,e=(null===(t=this.packageList)||void 0===t?void 0:t.length)||1;return Array(e).fill(0)}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"packageList",void 0);var k=m=y([Object(f.Component)({components:{CardPlaceholder:h.a}})],m),O=(n(2537),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-card-placeholder-list"},this._l(this.list,(function(t,i){return e("CardPlaceholder",{key:i,staticClass:"package-card-placeholder-item"})})),1)}),[],!1,null,"2224cff4",null);e.a=component.exports},function(t,e,n){"use strict";n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2031),y=n(2075),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"toBook",value:function(){this.isWarmingOrSuspended||this.$emit("toBook")}},{key:"isSpaceBetween",get:function(){return this.isWarmingOrSuspended}},{key:"event",get:function(){var t,e;return null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}},{key:"discountDesc",get:function(){var t,e,n;return 5===(null===(n=null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event)||void 0===n?void 0:n.status)?this.packageData.discount_desc:""}},{key:"isWarmingOrSuspended",get:function(){var t,e;return[2,3].includes(null===(e=null===(t=this.packageData)||void 0===t?void 0:t.publish_info)||void 0===e?void 0:e.publish_status)}},{key:"warmingOrSuspendedText",get:function(){var t,e;return this.isWarmingOrSuspended?null===(e=null===(t=this.packageData)||void 0===t?void 0:t.publish_info)||void 0===e?void 0:e.publish_status_desc:""}}]),e}(f.Vue);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)({default:null})],k.prototype,"packageData",void 0),m([Object(f.Prop)({default:null})],k.prototype,"buttonContent",void 0);var O=k=m([Object(f.Component)({components:{PackagePrice:h.a,BookButton:y.a}})],k),_=(n(2540),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["package-price--book-btn",t.isSpaceBetween&&"is-space-between"],on:{click:t.toBook}},[n("PackagePrice",{ref:"packagePrice",attrs:{"price-show":t.packageData.price_show,"sell-price":t.packageData.sell_price,"market-price":t.packageData.market_price,"to-price":t.packageData.to_price,"from-price":t.packageData.from_price,credits:t.packageData.credits,"original-selling-price":t.packageData.original_selling_price,"promotion-status":t.event&&t.event.status||0,discount:t.discountDesc}}),t._v(" "),t.isWarmingOrSuspended?n("div",{staticClass:"warming-or-suspended-text"},[t._v("\n    "+t._s(t.warmingOrSuspendedText)+"\n  ")]):t._t("default",[n("BookButton",{staticClass:"book-button",attrs:{"data-spm-item":"BookBtn?typ=entry",content:t.buttonContent||t.$t("11888")}})])],2)}),[],!1,null,"770801ab",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isShowMore=!1,t.isShowMoreBtn=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"contentChange",value:function(){this.$nextTick(this.checkHeight)}},{key:"visibleChange",value:function(t){t&&!this.isShowMoreBtn&&this.$nextTick(this.checkHeight)}},{key:"mounted",value:function(){this.checkHeight()}},{key:"showMore",value:function(){this.hideMoreButton||(this.isShowMore=!this.isShowMore)}},{key:"checkHeight",value:function(){var t=this.contentRef;this.isShowMoreBtn=!1,t&&t.scrollHeight>t.offsetHeight&&(this.isShowMoreBtn=!0)}},{key:"viewMoreText",get:function(){return this.isShowMore?this.$t("collapse_all"):this.$t("city_page_view_more")}},{key:"hideMoreButton",get:function(){return this.isShowMore&&this.hideLess}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)({default:2})],y.prototype,"maxLines",void 0),h([Object(f.Prop)()],y.prototype,"content",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"hideLess",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"showMoreIcon",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"visible",void 0),h([Object(f.Ref)()],y.prototype,"contentRef",void 0),h([Object(f.Watch)("content")],y.prototype,"contentChange",null),h([Object(f.Watch)("visible")],y.prototype,"visibleChange",null);var m=y=h([f.Component],y),k=(n(2434),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"see-more-with-lines",on:{click:function(e){return t.showMore()}}},[n("p",{ref:"contentRef",staticClass:"content",class:{"not-truncated":t.isShowMore},style:{"-webkit-line-clamp":t.maxLines}},[t._v("\n    "+t._s(t.content)+"\n  ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMoreBtn&&!t.hideMoreButton,expression:"isShowMoreBtn && !hideMoreButton"}],staticClass:"more-btn-wrap"},[n("span",{staticClass:"more-btn"},[n("span",[t._v("\n        "+t._s(t.viewMoreText)+"\n      ")]),t._v(" "),t.showMoreIcon?n("span",{staticClass:"more-btn-icon"},[n("SvgIcon",{staticClass:"act-banner-images-icon-arrow--right",staticStyle:{"margin-left":"4px"},attrs:{name:"desktop-common#arrow-standard-right-new",size:"14"}})],1):t._e()])])])}),[],!1,null,"0df1ce54",null);e.a=component.exports},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(131),y=n(21),m=n(908),k=n(957),O=n(1156),_=n(1094),j=n(1095),w=n(1414),P=n(1033),C=n(911),S=n(1680),D=n(895),x=n(1011),T=n(1005),I=n(883),R=n(952),$=n(889),L=n(882),A=n(2),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=Object(y.namespace)("experience"),B=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n,f;return Object(v.a)(e,t),Object(c.a)(e,[{key:"visibleWatch",value:function(t){var e=this;t?this.$nextTick((function(){e.$inhouse.track("pageview","#booking_options_page_spm",{force:!0})})):this.clearPreSettlementData(),this.$emit("changeVisible",t)}},{key:"packageSelectedDateWatch",value:function(t){this.calcPkgIsNewOpenTicket||this.$emit("updateDate",t)}},{key:"closePriceSumary",value:function(){L.a.$emit("setShowPriceSummary2bus",!1)}},{key:"selectedTimeChange",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.arrangementId){t.next=5;break}if(null===(o=n)||void 0===o||!o.arrangementId||e.arrangementId!==n.arrangementId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchPackageUnitsDebounce();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)})},{key:"open",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.packageId,o=e.date,r=e.skuId,c=e.selectedTime,l=e.selectedUnits,d=e.pkgDate,v=e.packageName,this.cacheOpt.date=o||"",this.bsObj.visible=!0,this.preSelectedSkuId=r,this.pkgSelectedDate=o||d||"",this.setExpPkgSelectedTime(c),this.oldPrevUnits=l||null,this.cacheOpt.selectedUnits=Object(h.cloneDeep)(l),v&&(this.groupPackName=v),!n){t.next=12;break}return t.next=12,this.getPackagePriceScheduleUnits({package_id:n});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"clearPreSettlementData",value:function(t){this.$store.commit("traveller/activity/".concat(A.SET_PRE_SETTLEMENT_API_DATA),{res:null})}},{key:"_showShoppingCart",value:function(){this.showShoppingCart&&this.showShoppingCart(),this.bsObj.visible=!1}},{key:"rangeConfirmHandler",value:function(t){this.pkgSelectedDate=t.date||""}},{key:"bookingCalendarOptions",get:function(){return{templateId:this.templateId,autoTimeSlot:this.autoTimeSlot,packageId:this.packageId,schedules:this.calcPkgScheduleList,warn:this.dateDescription,selectedTime:this.pkgSelectedTime,currentSelectedPackage:this.calcPkgSelectedObj,isNewOpenTicket:this.calcPkgIsNewOpenTicket,legends:this.calcPkgLegendList}}},{key:"bookingUnitOptions",get:function(){return{selectedTime:this.pkgSelectedTime,unitList:this.currentUnits,preview:this.calcPreview,currentSelectedPackage:this.calcPkgSelectedObj,inventories:this.calcUnitInventorieObj,totalUnitCount:this.calcTotalUnitCount,disabled:!this.calcArrangementId}}},{key:"bottomBarBinds",get:function(){var t;return{fromType:this.fromType,hideDiscountTips:null===(t=this.bsObjSavePrice)||void 0===t?void 0:t.visible,businessData:{activity_id:this.activityId,template_id:this.templateId,is_nsw_activity:this.isNswActivity,is_support_shopping_cart:this.isSupportShoppingCart,activity_ticket_type:this.activityTicketType,packages:this.packageList},units:this.currentUnits,currentSelectedPackage:this.calcPkgSelectedObj,selectedTime:this.pkgSelectedTime,packageSchedules:this.calcPkgScheduleList,packageSelectedDate:this.pkgSelectedDate,totalUnitCount:this.calcTotalUnitCount,showShoppingCart:this._showShoppingCart}}}]),e}(Object(y.mixins)(S.a));E([M.State],B.prototype,"sectionActData",void 0),E([Object(y.Prop)()],B.prototype,"autoTimeSlot",void 0),E([Object(y.Ref)()],B.prototype,"headerAlertRef",void 0),E([Object(y.Watch)("bsObj.visible")],B.prototype,"visibleWatch",null),E([Object(y.Watch)("pkgSelectedDate")],B.prototype,"packageSelectedDateWatch",null),E([Object(y.Watch)("pkgSelectedTime",{immediate:!0})],B.prototype,"selectedTimeChange",null);var N=B=E([Object(y.Component)({components:{SavingPriceDetails:$.default,PriceDiscountTips:R.a,ExpTagging:I.default,ActivityValidity:x.a,HasOpenDateTips:T.a,HeaderTips:m.a,CardHeader:k.a,BookineOptionsSkeleton:P.a,ExpLoadingState:C.default,CommonContentLoading:D.a,BookingCalendar:O.a,BookingUnit:_.a,HeaderAlert:j.a,SkuBottomBar:w.default}})],B),V=(n(2524),n(43)),component=Object(V.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bsObj.visible?n("klk-bottom-sheet",t._b({staticClass:"experience-activity-booking hack-zindex-safari",attrs:{"can-pull-close":!1,visible:t.bsObj.visible,title:t.$t("activity.v2.label.booking_options")},on:{"update:visible":function(e){return t.$set(t.bsObj,"visible",e)}}},"klk-bottom-sheet",t.bsObj,!1),[n("div",{staticClass:"booking-content show-bottom-bar",style:t.fixedHackStyle,attrs:{id:"booking_options_page_spm","data-spm-page":"BookingOptions?oid=package_"+t.calcPkgSelectedObj.package_id+"&trg=manual"}},[n("HeaderAlert",{ref:"headerAlertRef",staticClass:"booking-alert",attrs:{"package-id":t.calcPkgSelectedObj.package_id}}),t._v(" "),n("CardHeader",{staticClass:"booking-content-header",attrs:{"package-data":t.calcPkgSelectedObj,"group-pack-name":t.groupPackName}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.calcTags2attribute,pkg:{packageId:t.packageId},track:{spm:"Package_Product_Tag"},line:1}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:t.calcTags2discount,pkg:{packageId:t.packageId},track:{spm:"Package_Discount_Section"},line:1}}),t._v(" "),n("ExpLoadingState",{attrs:{state:t.packageSchedulesAndUnitsApiDefined.state,fetching:{type:"overlay"}},on:{refresh:t.getPackagePriceScheduleUnits}},[t.bsObj.visible?[t.calcPkgSelectedObj.usage_validity_render_obj&&t.calcPkgSelectedObj.usage_validity_render_obj.length?n("ActivityValidity",{staticClass:"activity-validity-style small",attrs:{data:t.calcPkgSelectedObj.usage_validity_render_obj,"max-height":"105px"}}):t._e(),t._v(" "),3!==t.activityTicketType&&t.calcPkgIsNewOpenTicket&&t.cacheOpt.date?n("HasOpenDateTips",{staticStyle:{margin:"16px 0"}}):t._e(),t._v(" "),n("BookingCalendar",t._b({directives:[{name:"show",rawName:"v-show",value:!t.calcPkgIsNewOpenTicket,expression:"!calcPkgIsNewOpenTicket"}],staticClass:"booking-content-calendar",attrs:{"is-track-item":!1},on:{setTime:t.setPackageTime,rangeConfirm:t.rangeConfirmHandler},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}},"BookingCalendar",t.bookingCalendarOptions,!1)),t._v(" "),n("div",{staticClass:"booking-content-units"},[t.calcPkgSelectedObj?n("HeaderTips",{staticClass:"booking-content-units-tips",attrs:{"max-pax":t.calcPkgSelectedObj.max_pax,"min-pax":t.calcPkgSelectedObj.min_pax}}):t._e(),t._v(" "),n("ExpLoadingState",{attrs:{state:t.packageUnitsApiDefined.state?t.packageUnitsApiDefined.state:"success",fetching:{type:"overlay"},"keep-state":!0},on:{refresh:t.fetchPackageUnitsDebounce}},[n("div",{staticClass:"booking-content-units-content"},t._l(t.currentUnits,(function(e){return n("BookingUnit",t._b({key:e.priceId,staticClass:"booking-content-unit",attrs:{unit:e,"is-track-module":!0},on:{changeUnitCount:function(e){return t.changeUnitCount(e,{hideLoading:!0})},alert:t.alert}},"BookingUnit",t.bookingUnitOptions,!1))})),1)])],1)]:t._e()],2),t._v(" "),n("SkuBottomBar",t._b({directives:[{name:"show",rawName:"v-show",value:t.showBottomBar,expression:"showBottomBar"}],on:{clickSavePrice:t.clickSavePrice,updateInfos:t.updateInfos},scopedSlots:t._u([{key:"slot-booking-bar__buttons",fn:function(e){var n=e.slotScope;return[t._t("slot-booking-bar__buttons",null,{slotScope:n})]}}],null,!0)},"SkuBottomBar",t.bottomBarBinds,!1)),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"js-custom-bottom-sheet-hack custom-bottom-sheet-style",class:[t.bsObjSavePrice.visible?"hack-style":""],attrs:{visible:t.bsObjSavePrice.visible,title:t.$t("76591")},on:{"update:visible":function(e){return t.$set(t.bsObjSavePrice,"visible",e)},close:t.closePriceSumary}},"klk-bottom-sheet",t.bsObjSavePrice,!1),[n("SavingPriceDetails",{attrs:{"hide-dashed":!0,"price-summary":t.bsObjSavePrice.priceSummary}})],1),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"vsb-hidden",attrs:{tips:t.preSettlementTips2getters}}):t._e()],1),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.commonLoadingState,expression:"commonLoadingState === 'fetching'"}],attrs:{type:"overlay"}})],1):t._e()}),[],!1,null,"01a7d6d4",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=(n(1881),n(21)),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=arguments[0],content=this.content;if(!content)return null;var e="markdown-content";return this.klook.utilConfig.whiteLabelUtilConfig&&(e+=" white-label-links"),t("div",{ref:"markdown",class:e,domProps:{innerHTML:content}})}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"content",void 0);var m=y=h([f.Component],y);n.d(e,"a",(function(){return m}))},,function(t,e,n){"use strict";var o=n(13),r=(n(273),n(30),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(132),m=n.n(y),k=n(212),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).navShow=!1,t.lockHeight=150,t.visibleHeight=540,t.list=[],t.navList=[],t.activeIndex=-1,t.style={},t.autoScroll=!0,t.debounceInit=m()(t.init,500),t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"listChange",value:function(){this.debounceInit()}},{key:"init",value:function(){this.navList=this.list.filter((function(t){return t.title})),this.isDesktop&&this.navList.unshift({"data-meta-name":"breadCrumb",title:this.$t("overview"),name:"#breadCrumb"}),this.initScroll()}},{key:"getNode",value:function(data){var t;if(null===(t=data)||void 0===t?void 0:t.name){var e='[data-mate-name="'.concat(data["data-meta-name"],'"]');return document.querySelector(e)}}},{key:"debounceClickNav",value:function(data){var t=this,e=this.getNode(data);if(e){var n=Object(k.c)(e),o=this.lockHeight;"#breadCrumb"===data.name&&(o=60),Object(k.d)({scrollY:n,lockLocation:o,callback:function(){t.autoScroll=!0}})}}},{key:"initScroll",value:function(){this.isHeroPage||(Object(k.h)()>=this.visibleHeight?(this.getActiveIndex(),this.navShow=!0):this.navShow=!1)}},{key:"getActiveIndex",value:function(){var t=this;if(this.autoScroll){var e=this.getLastNodeBottom(),n=Object(k.h)();if(n<e-this.lockHeight-4){var o=this.reverseNavList.findIndex((function(e){var o=t.getNode(e);return!!o&&n>=Object(k.c)(o)-t.lockHeight-4}));this.activeIndex=o>-1?this.navList.length-1-o:-1}else this.activeIndex=-1}}},{key:"getLastNodeBottom",value:function(){var t=this.navList[this.navList.length-1],e=this.getNode(t);return e?Object(k.c)(e)+e.getBoundingClientRect().height:Object(k.e)()}},{key:"initTitle",value:function(){var t=this.sections.reduce((function(t,section){var e,n,o,r,c,l,d=section.attr;return((null===(e=d)||void 0===e?void 0:e.is_navigation)?null===(n=d)||void 0===n?void 0:n.nav_title:"")&&t.push({"data-meta-name":null===(r=null===(o=section)||void 0===o?void 0:o.meta)||void 0===r?void 0:r.name,name:".".concat(null===(l=null===(c=section)||void 0===c?void 0:c.meta)||void 0===l?void 0:l.name),title:d.nav_title}),t}),[]);this.list=t}},{key:"created",value:function(){var t=this;this.$root.$on("nav.delSection",(function(e){t.list=t.list.filter((function(t){return t.name!==e}))}))}},{key:"mounted",value:function(){this.initTitle();var header=document.querySelector(".default-header");header&&!this.isDesktop&&(this.lockHeight=header.getBoundingClientRect().height)}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||null}},{key:"isHeroPage",get:function(){var t,e;return"hero_page"===(null!=(e=null===(t=this.basicData)||void 0===t?void 0:t.act_product_type)?e:"")}},{key:"reverseNavList",get:function(){return Object(o.a)(this.navList).reverse()}}]),e}(h.Vue);O([h.State],_.prototype,"klook",void 0),O([Object(h.Prop)()],_.prototype,"sections",void 0),O([Object(h.Watch)("list")],_.prototype,"listChange",null),_=O([h.Component],_),e.a=_},,,,,,,function(t,e,n){"use strict";n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1864),y=n(884),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).styles={height:"240px"},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setStyles",value:function(){var t=this;"mobile"===this.platform&&this.$nextTick((function(){var e=t.actMapImgRef?t.actMapImgRef.offsetWidth:0,n="".concat(e/335*120,"px");t.styles.height=n}))}},{key:"getImageUrl",value:function(t){var e="mobile"===this.platform?"upload/c_crop,q_80,w_776,h_560":"upload/c_crop,q_80,w_1580,h_632";return t.replace(/upload/,e)}},{key:"mounted",value:function(){this.setStyles()}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.Ref)()],k.prototype,"actMapImgRef",void 0);var O=k=m([Object(f.Component)({components:{DynamicMapWrap:h.a,Logo:y.a}})],k),_=(n(2155),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DynamicMapWrap",t._g(t._b({ref:"dynamicMapWrap",staticClass:"dynamic-map",scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.getImageUrl(o.image_url),expression:"getImageUrl(item.image_url)",arg:"background-image"}],ref:"actMapImgRef",staticClass:"activity-map-img",style:t.styles,attrs:{ratio:"16:9"}},[n("Logo",{attrs:{ratio:"16:9",width:150}})],1)]}}])},"DynamicMapWrap",t.$attrs,!1),t.$listeners))}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),map=n(1468),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).map={place_id:"",address:"",address_desc:"",image_url:""},t.mapShow=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showMap",value:function(t){this.map=t,this.mapShow+=1}},{key:"contentData",get:function(){var t;return(null===(t=this.content)||void 0===t?void 0:t.data)||[]}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)()],y.prototype,"content",void 0);var m=y=h([Object(f.Component)({components:{Map:map.a}})],y),k=(n(2154),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dynamic-map-wrap",class:t.klook.platform},[t._l(t.contentData,(function(e){return n("div",{key:e.image_url,staticClass:"dynamic-map_item",attrs:{"data-spm-virtual-item":"__virtual"},on:{click:function(n){return t.showMap(e)}}},[t._t("default",null,{item:e})],2)})),t._v(" "),t.mapShow?n("Map",t._g({attrs:{address:t.map.address,"address-desc":t.map.address_desc,show:t.mapShow}},t.$listeners)):t._e()],2)}),[],!1,null,"6bc8ce38",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"cClass",get:function(){return"keynote-score_".concat(this.platform)}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"score",void 0),h([Object(f.Prop)({default:14})],y.prototype,"size",void 0),h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0);var m=y=h([f.Component],y),k=(n(2110),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return Number(t.score)>0?n("div",{staticClass:"activity-keynote-score"},[n("SvgIcon",{staticClass:"keynote-score_icon keynote-icon",attrs:{name:"mobile-activity#icon_operational_review_xxs",color:"#FF9C00",size:t.size}}),t._v(" "),n("span",{staticClass:"keynote-score_number",class:[t.cClass]},[t._v(t._s(t.score))])],1):t._e()}),[],!1,null,null,null);e.a=component.exports},,,function(t,e,n){"use strict";var o=n(1119);n.n(o).a},,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1131);n.n(o).a},function(t,e,n){},function(t,e,n){"use strict";var o=n(1132);n.n(o).a},function(t,e,n){"use strict";var o=n(1133);n.n(o).a},function(t,e,n){"use strict";var o=n(1134);n.n(o).a},function(t,e,n){"use strict";var o=n(1135);n.n(o).a},function(t,e,n){"use strict";var o=n(1136);n.n(o).a},function(t,e,n){"use strict";var o=n(1137);n.n(o).a},function(t,e,n){"use strict";var o=n(1138);n.n(o).a},function(t,e,n){"use strict";var o=n(1139);n.n(o).a},function(t,e,n){"use strict";var o=n(1141);n.n(o).a},function(t,e,n){"use strict";var o=n(1143);n.n(o).a},function(t,e,n){"use strict";var o=n(1144);n.n(o).a},function(t,e,n){"use strict";var o=n(1145);n.n(o).a},function(t,e,n){"use strict";var o=n(1146);n.n(o).a},function(t,e,n){"use strict";var o=n(1147);n.n(o).a},function(t,e,n){"use strict";var o=n(1148);n.n(o).a},function(t,e,n){"use strict";var o=n(1149);n.n(o).a},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(10),m=n.n(y),k=n(3),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).cachedDate=null,t.fetchStatus="success",t.promotionList=[],t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getActivityPromotion",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.activityId,n=this.packageSelectedDate,o={activity_id:e,date:n},this.cachedDate!==n){t.next=4;break}return t.abrupt("return");case 4:return this.cachedDate=n,n&&(o.date=n),this.fetchStatus="fetching",this.promotionList=[],t.next=10,this.$axios.$post(k.a.activityPromotions,o);case 10:r=t.sent,c=r.result,r.success&&!m()(c)?(this.fetchStatus="success",this.promotionList=c.packages):(this.fetchStatus="failure",this.cachedDate=null);case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"promotionFilteredNone",get:function(){return!!this.includedPackages&&0===this.includedPackages.filter((function(t){var e,n,o;return(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||void 0===o?void 0:o.length)>0})).length}}]),e}(h.Vue);O([Object(h.Prop)()],_.prototype,"activityId",void 0),O([Object(h.Prop)()],_.prototype,"templateId",void 0),O([Object(h.Prop)()],_.prototype,"packageId",void 0),O([Object(h.Prop)()],_.prototype,"packageSelectedDate",void 0),O([Object(h.Prop)()],_.prototype,"validPackages",void 0),O([Object(h.Prop)()],_.prototype,"includedPackages",void 0),O([Object(h.Prop)()],_.prototype,"packagesInDate",void 0),_=O([h.Component],_),e.a=_},function(t,e,n){"use strict";var o=n(1150);n.n(o).a},function(t,e,n){"use strict";var o=n(1151);n.n(o).a},function(t,e,n){"use strict";var o=n(1152);n.n(o).a},function(t,e,n){"use strict";var o=n(1153);n.n(o).a},,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(22),n(14),n(11),n(8),n(12),n(0)),y=(n(28),n(2079));function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"merchantImages",get:function(){var t=this.klook.webp;return this.activityBanner.map((function(e){var n=t?e.suffix.replace(/.(jpg|png|jpeg|gif)$/,".webp"):e.suffix;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},e,{src:"".concat(e.prefix,"fl_lossy.progressive,q_65/").concat(n),imageDesc:e.image_desc})}))}}]),e}(f.Vue);k([Object(f.Prop)()],O.prototype,"activityBanner",void 0),k([f.State],O.prototype,"klook",void 0);var _=O=k([Object(f.Component)({components:{ImageGalleryNew:y.a}})],O),j=(n(2395),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ImageGalleryNew",{attrs:{images:t.merchantImages,"photo-type":"OfficialPhoto"},scopedSlots:t._u([{key:"description",fn:function(e){return[e.image.imageDesc?n("div",{staticClass:"merchant-image-description"},[t._v("\n      "+t._s(e.image.imageDesc)+"\n    ")]):t._e()]}}])})}),[],!1,null,"463613bf",null).exports,P=n(2037),C=n(1258),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).active=t.type,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"closeGallery",value:function(){this.$emit("close")}},{key:"onVisibleChanged",value:function(t){var e=this;t&&setTimeout((function(){e.$inhouse.track("pageview",".activity-gallery",{force:!0})}),100)}},{key:"onTypeChanged",value:function(t){this.active=t}},{key:"onActiveChanged",value:function(t){this.$emit("updateType",t)}},{key:"formatCustomerImageAmount",get:function(){return this.customerImageAmount>9999?"9999+":this.customerImageAmount}},{key:"hasNoCustomerImage",get:function(){return 0===this.customerImageAmount}}]),e}(f.Vue);S([Object(f.Prop)()],D.prototype,"visible",void 0),S([Object(f.Prop)()],D.prototype,"aid",void 0),S([Object(f.Prop)()],D.prototype,"type",void 0),S([Object(f.Prop)()],D.prototype,"merchatImageAmount",void 0),S([Object(f.Prop)()],D.prototype,"customerImageAmount",void 0),S([Object(f.Prop)()],D.prototype,"activityBanner",void 0),S([Object(f.Watch)("visible",{immediate:!0})],D.prototype,"onVisibleChanged",null),S([Object(f.Watch)("type",{immediate:!0})],D.prototype,"onTypeChanged",null),S([Object(f.Watch)("active",{immediate:!0})],D.prototype,"onActiveChanged",null);var x=D=S([Object(f.Component)({components:{MerchatImageGallery:w,CustomerImageGallery:P.a,ActivityModal:C.default}})],D),T=(n(2398),n(2399),Object(j.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityModal",{staticClass:"banner-gallery-modal",attrs:{title:t.$t("activity.allPhotos"),visible:t.visible},on:{close:t.closeGallery}},[n("div",{staticClass:"activity-gallery",attrs:{"data-spm-page":"BannerGallery?trg=manual&oid=activity_"+t.aid}},[n("div",{staticClass:"activity-gallery-tabs"},[n("klk-tabs",{class:[t.hasNoCustomerImage&&"single-image-tab"],attrs:{"background-color":"white"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("klk-tab-pane",{key:"merchant",attrs:{label:t.$t("review.merchant_photo_gallery"),name:"merchant","data-spm-module":"OfficialPhotoTab?trg=manual","data-spm-virtual-item":"__virtual",width:"50%"}},[n("template",{slot:"label"},[t._v("\n            "+t._s(t.$t("review.merchant_photo_gallery"))+"("+t._s(t.merchatImageAmount)+")\n          ")])],2),t._v(" "),t.hasNoCustomerImage?t._e():n("klk-tab-pane",{key:"customer",attrs:{label:t.$t("review.customer_photo_gallery"),name:"customer","data-spm-module":"CustomerPhotoTab?trg=manual","data-spm-virtual-item":"__virtual",width:"50%"}},[n("template",{slot:"label"},[t._v("\n            "+t._s(t.$t("review.customer_photo_gallery"))+"("+t._s(t.formatCustomerImageAmount)+")\n          ")])],2)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"merchant"===t.active,expression:"active === 'merchant'"}],staticClass:"images-gallery-wrap"},[n("MerchatImageGallery",t._b({attrs:{"activity-banner":t.activityBanner}},"MerchatImageGallery",t.$attrs,!1))],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"customer"===t.active,expression:"active === 'customer'"}],staticClass:"images-gallery-wrap 2"},[n("CustomerImageGallery",t._b({attrs:{mtype:"TopCustomerPhotoTab","activity-banner":t.activityBanner,"new-style":!0}},"CustomerImageGallery",t.$attrs,!1))],1)],1)])])}),[],!1,null,"b092dbec",null).exports),I=n(2058),R=n(2192),$=(n(23),n(4)),L=n(3),A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"download",value:(n=Object($.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=+new Date,n="undefined"!=typeof _args3?_args3:null,o=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t},t.next=5,this.$axios.$get(L.a.downloadApk,{baseURL:"/"});case 5:(r=t.sent).success&&r.result&&(window.location.href=o(o(r.result.downland_url)));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(n(2401).a);A([f.State],E.prototype,"klook",void 0),A([Object(f.Ref)()],E.prototype,"bannerPrice",void 0);var M=E=A([f.Component],E),B=(n(2402),Object(j.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShowPromotionDetail?n("div",{staticClass:"mobile-promotion-banner",style:"background-image: url("+t.imageUrl+")",attrs:{"data-spm-module":"PromotionCard"}},[t.isOpen&&t.isInTempPlatform?n("div",{staticClass:"banner-open"},[n("div",{staticClass:"banner-left"},[n("div",{ref:"bannerPrice",staticClass:"banner-price"},[t._v("\n        "+t._s(t._f("currencyToSymbol")(t.klook.currency))+"\n        "+t._s(t._f("formatThousands")(t.selling_price))+"\n      ")]),t._v(" "),n("div",{staticClass:"banner-promotion"},[Number(t.selling_price)<Number(t.original_selling_price)?n("div",{staticClass:"banner-price-original"},[t._v("\n          "+t._s(t._f("currencyToSymbol")(t.klook.currency))+"\n          "+t._s(t._f("formatThousands")(t.original_selling_price))+"\n        ")]):t._e(),t._v(" "),n("div",[t._v(t._s(t.$t("16576",[t.promotionDetail.discount])))])])]),t._v(" "),n("div",{staticClass:"banner-right"},[n("div",{staticClass:"banner-title-wrapper"},[n("div",{staticClass:"banner-title"},[n("SvgIcon",{staticClass:"banner-title-icon",attrs:{name:"common#icon_flashsale",width:"20",height:"20"}}),t._v(" "),n("span",{staticClass:"banner-title-text"},[t._v("\n            "+t._s(t.tagName)+"\n          ")])],1)]),t._v(" "),t.showDays?n("div",{staticClass:"banner-time",domProps:{innerHTML:t._s(t.$t("16559",["<strong>"+t.endDays+"</strong>"]))}}):n("div",{staticClass:"banner-time",domProps:{innerHTML:t._s(t.wrapCountdown(t.countdownObj.time))}})])]):t.isWarmUp||t.isOpen&&!t.isInTempPlatform?n("div",{staticClass:"banner-unopen"},[n("div",{staticClass:"banner-unopen-wrapper"},[n("div",{staticClass:"banner-title"},[n("SvgIcon",{staticClass:"banner-title-icon",attrs:{name:"common#icon_flashsale",width:"20",height:"20"}}),t._v(" "),n("span",{staticClass:"banner-title-text"},[t._v("\n          "+t._s(t.tagName)+"\n        ")])],1),t._v(" "),n("div",{staticClass:"banner-info"},[t.isOpen&&!t.isInTempPlatform?n("div",{staticClass:"banner-info-text",domProps:{innerHTML:t._s(t.$t("16560",t.otherPlatformObj))}}):t.isWarmUp?n("div",{staticClass:"banner-info-text",domProps:{innerHTML:t._s(t.$t("16553",t.warmUpObj))}}):t._e()])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAppDownload,expression:"showAppDownload"}],staticClass:"banner-download-wrapper"},[n("span",{staticClass:"banner-download",on:{click:function(e){return e.stopPropagation(),t.download(e)}}},[t._v("\n        "+t._s(t.$t("16561-download_app"))+"\n      ")])])]):t._e()]):t._e()}),[],!1,null,"ec0653d2",null).exports),N=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},V=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isVideoPlaying=!1,t.visible=!1,t.activeGallery="merchant",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"changePlaying",value:function(t){this.isVideoPlaying=t}},{key:"videoPause",value:function(){this.isVideoPlaying=!1}},{key:"handleGalleryClose",value:function(){var t=this;this.$nextTick((function(){t.activeGallery="merchant"})),this.visible=!1}},{key:"updateType",value:function(t){var e=this;this.$nextTick((function(){e.activeGallery=t}))}},{key:"viewMore",value:function(){this.visible=!0}},{key:"viewMoreVisible",get:function(){var t;return this.isTaVersion||(null===(t=this.banner_list)||void 0===t?void 0:t.length)>1}},{key:"swiperOptions",get:function(){var t=this;return{on:{slideChangeTransitionEnd:function(){var e;if(!t.moreSlideVisible)return{};var n=null===(e=t.banner.$refs.$bannerSwiper)||void 0===e?void 0:e.swiper;if(n){var o=n.snapGrid;n.activeIndex===o.length-2&&(n.slides[o.length-1].style.height=n.height+"px",n.updateSize())}},touchMove:function(){var e;if(!t.moreSlideVisible)return{};var n=null===(e=t.banner.$refs.$bannerSwiper)||void 0===e?void 0:e.swiper;if(n){var o=n.snapGrid,r=o[o.length-1];n.getTranslate()<-r&&n.isEnd&&(t.$nextTick((function(){t.activeGallery="customer"})),setTimeout((function(){n.slideTo(t.activityBanners.length-1)}),100),t.viewMore())}}}}}},{key:"moreSlideVisible",get:function(){return!this.isTaVersion&&this.count>11}},{key:"activityBanners",get:function(){var t;return null===(t=this.banner_list)||void 0===t?void 0:t.slice(0,8)}}]),e}(f.Vue);N([Object(f.Ref)()],V.prototype,"banner",void 0),N([Object(f.Prop)()],V.prototype,"banner_list",void 0),N([Object(f.Prop)()],V.prototype,"activity_id",void 0),N([Object(f.Prop)()],V.prototype,"count",void 0),N([Object(f.Prop)({default:!1})],V.prototype,"isTaVersion",void 0);var F=V=N([Object(f.Component)({components:{ExperienceActivityBanner:I.a,ViewMore:R.a,BannerGallery:T,MobilePromotionBanner:B}})],V),W=(n(2403),Object(j.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-banner-mobile-wrap"},[n("ExperienceActivityBanner",{ref:"banner",staticClass:"experience-activity-banner-mobile",attrs:{"is-video-playing":t.isVideoPlaying,"is-ta-version":t.isTaVersion,"activity-banner":t.activityBanners,"swiper-options":t.swiperOptions},on:{"playing-change":t.changePlaying,"video-pause":t.videoPause}},[n("div",{staticClass:"activity-swiper-pagination",class:{"hide-pagination":t.moreSlideVisible},attrs:{slot:"pagination"},slot:"pagination"}),t._v(" "),[t.viewMoreVisible?n("ViewMore",{staticClass:"activity-banner_view-more",on:{"view-more":t.viewMore}}):t._e(),t._v(" "),t.banner_list?n("BannerGallery",{attrs:{"activity-banner":t.banner_list,"merchat-image-amount":t.banner_list.length,"customer-image-amount":t.count,visible:t.visible,type:t.activeGallery,"activity-id":t.activity_id,aid:t.activity_id},on:{close:t.handleGalleryClose,updateType:t.updateType}}):t._e()],t._v(" "),t.moreSlideVisible?[n("div",{staticClass:"see-more-mask see-more-top"}),t._v(" "),n("div",{staticClass:"see-more-mask see-more-bottom"}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.moreSlideVisible,expression:"moreSlideVisible"}],staticClass:"swiper-slide swiper-slide-more",attrs:{slot:"swiper-slide"},slot:"swiper-slide"},[n("div",{staticClass:"see-more-slide"},[n("div",{staticClass:"see-more-box"},[n("SvgIcon",{attrs:{name:"common#icon_navigation_circle_right_s",size:"20"}}),t._v(" "),n("div",{staticClass:"see-more-txt"},[t._v(t._s(t.$t("activity_see_more")))])],1)])])]:t._e(),t._v(" "),n("div",{staticClass:"activity-banner_arch"})],2),t._v(" "),t.isVideoPlaying?t._e():n("MobilePromotionBanner",t._g(t._b({},"MobilePromotionBanner",t.$attrs,!1),t.$listeners))],1)}),[],!1,null,null,null));e.a=W.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1848),y=n(1431),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.viewMoreVisible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"close",value:function(){this.visible=!1}},{key:"viewMore",value:function(){this.visible=!0}},{key:"initViewMoreVisible",value:function(){var t=this.$refs.activitySummary.$el.clientHeight;this.viewMoreVisible=t>92}},{key:"mounted",value:function(){this.initViewMoreVisible()}}]),e}(f.Vue);m([Object(f.Prop)()],k.prototype,"content",void 0),m([Object(f.Prop)()],k.prototype,"title",void 0);var O=k=m([Object(f.Component)({components:{DynamicPlainMarkdown:y.a,ViewMore:h.a}})],k),_=(n(2153),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dynamic-modal-markdown"},[n("DynamicPlainMarkdown",{ref:"activitySummary",attrs:{content:t.content}}),t._v(" "),t.viewMoreVisible?n("ViewMore",{staticClass:"dynamic-modal-markdown_view-more",attrs:{"data-spm-item":"ViewMore"},nativeOn:{click:function(e){return t.viewMore(e)}}}):t._e(),t._v(" "),n("klk-bottom-sheet",{attrs:{visible:t.visible,title:t.title},on:{"update:visible":function(e){t.visible=e},close:t.close}},[n("klk-button",{attrs:{slot:"header-right","data-spm-item":"Done",type:"outlined",size:"mini"},on:{click:t.close},slot:"header-right"},[t._v("\n      "+t._s(t.$t("ptp_down"))+"\n    ")]),t._v(" "),n("DynamicPlainMarkdown",{attrs:{content:t.content}})],1)],1)}),[],!1,null,"7828011e",null).exports,w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);w([Object(f.Prop)({default:null})],P.prototype,"content",void 0);var C=P=w([f.Component],P),S=Object(_.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,D=n(272),x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"title",get:function(){var t,e;return(null===(e=null===(t=this.content)||void 0===t?void 0:t.style)||void 0===e?void 0:e.fold_title)||this.$t("1315")}},{key:"renderContent",get:function(){var t=this.content.data;return t&&t.length?t.map((function(t){return Object(D.b)(t.render_object)})):[]}},{key:"componentName",get:function(){var t,e;switch(null===(e=null===(t=this.content)||void 0===t?void 0:t.style)||void 0===e?void 0:e.fold_style){case 1:return"DynamicCollapseMarkdown";case 2:return"DynamicModalMarkdown";default:return"DynamicPlainMarkdown"}}}]),e}(f.Vue);x([Object(f.Prop)()],T.prototype,"content",void 0);var I=T=x([Object(f.Component)({components:{DynamicPlainMarkdown:y.a,DynamicModalMarkdown:j,DynamicCollapseMarkdown:S}})],T),R=Object(_.a)(I,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,{tag:"component",attrs:{content:this.renderContent,title:this.title}})}),[],!1,null,null,null);e.default=R.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(22),n(14),n(11),n(8),n(12),n(47),n(0)),y=(n(28),n(271));function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isInitImageLoaded=!1,t.isLoadImageLoaded=!1,t.loadImageTransition="",t.isTargeImageLoaded=!0,t.targetImageTransition="load-image-transition",t.whRateMaps={"1:1":{hwRate:1,styles:{paddingBottom:"100%"}},"4:3":{hwRate:.75,styles:{paddingBottom:"75%"}},"16:9":{hwRate:.5625,styles:{paddingBottom:"56.25%"}}},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"loopSetTimeout",value:function(t,e){var n=this,o=t||0,r="function"==typeof e?e:function(){};o>0?setTimeout((function(){n.loopSetTimeout(o-1,r)}),9):this.$nextTick((function(){r()}))}},{key:"loadTargetImageHandler",value:function(){var t=this;this.isTargeImageLoaded=!0,this.loopSetTimeout(2,(function(){t.targetImageTransition="load-image-transition"}))}},{key:"loadImageHandler",value:function(){var t=this;this.isLoadImageLoaded=!0,this.loopSetTimeout(1,(function(){t.loadImageTransition="load-image-transition",t.$nextTick((function(){t.isInitImageLoaded=!1}))}))}},{key:"getImgSrc",value:function(img,t){var e,n,o,r;if(!img)return img;var c=(null===(e=t)||void 0===e?void 0:e.crop)||"",l=(null===(n=t)||void 0===n?void 0:n.isWebp)||!1,d=(null===(o=t)||void 0===o?void 0:o.regStr)||"//res.klook.com/image/upload",v=c?null===(r=img)||void 0===r?void 0:r.replace(d,"".concat(d).concat(c)):img;return Object(y.i)(v,l)}},{key:"created",value:function(){this.initData()}},{key:"initData",value:function(){this.klook.isBot||(this.isInitImageLoaded=!0,this.isTargeImageLoaded=this.firstImage||!1,this.targetImageTransition="")}},{key:"calcShowTransition",get:function(){return this.showTransition&&!this.firstImage}},{key:"calcRateObj",get:function(){return this.whRateMaps[this.whRate]}},{key:"calcShowInitImg",get:function(){return this.showInitImage&&this.isInitImageLoaded}},{key:"calcStyles",get:function(){var t;return k({},(null===(t=this.calcRateObj)||void 0===t?void 0:t.styles)||{},{},this.calcShowInitImg?{background:"#eee url(https://res.klook.com/image/upload/image_logo_mx7wgd.png) no-repeat center center",backgroundSize:"54px"}:{})}},{key:"calcLoadStyles",get:function(){var t,e=this.isLoadImageLoaded&&(null===(t=this.calcRateObj)||void 0===t?void 0:t.styles)||{};if(this.showLoadImage){var n=this.calcLoadCrop,o=this.src,r=this.klook,c=this.getImgSrc(o,{crop:n,isWebp:r.webp});return k({},e,{},{background:"url(".concat(c,") no-repeat center center"),backgroundSize:"100%"})}return{}}},{key:"calcLoadCrop",get:function(){var t,e;if(null===(t=this.$route.query)||void 0===t?void 0:t.load_crop)return null===(e=this.$route.query)||void 0===e?void 0:e.load_crop;var n=this.klook,o=this.calcRateObj,r=this.realHeight,c=this.cropScale;if(!r){return{mobile:"/c_fill,w_414",desktop:"/c_fill,w_750"}[n.platform]}var l=Math.round(r*c/this.calcLoadRate),d=Math.round(l/o.hwRate);return"/c_fill,w_".concat(d,",h_").concat(l).concat(this.calcLoadEblur)}},{key:"calcLoadRate",get:function(){var t;return Number(null===(t=this.$route.query)||void 0===t?void 0:t.load_rate)||this.loadRate}},{key:"calcLoadEblur",get:function(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.load_eblur)||this.loadEblur}},{key:"calcCrop",get:function(){var t=this.klook,e=this.calcRateObj,n=this.crop,o=this.realHeight,r=this.cropScale;if(n)return n;if(!o){return{mobile:"/c_fill,w_800",desktop:"/c_fill,w_1920"}[t.platform]}var c=Math.round(o*r),l=Math.round(c/e.hwRate);return"/c_fill,w_".concat(l,",h_").concat(c)}},{key:"calcSrc",get:function(){var t=this.calcCrop,e=this.src,n=this.klook;return this.getImgSrc(e,{crop:t,isWebp:n.webp})}}]),e}(f.Vue);O([f.State],_.prototype,"klook",void 0),O([Object(f.Prop)({default:""})],_.prototype,"src",void 0),O([Object(f.Prop)({default:""})],_.prototype,"crop",void 0),O([Object(f.Prop)({default:"1:1"})],_.prototype,"whRate",void 0),O([Object(f.Prop)({default:0})],_.prototype,"realHeight",void 0),O([Object(f.Prop)({default:1.5})],_.prototype,"cropScale",void 0),O([Object(f.Prop)({default:!1})],_.prototype,"showInitImage",void 0),O([Object(f.Prop)({default:!1})],_.prototype,"showLoadImage",void 0),O([Object(f.Prop)({default:12})],_.prototype,"loadRate",void 0),O([Object(f.Prop)({default:"/e_blur:100"})],_.prototype,"loadEblur",void 0),O([Object(f.Prop)({default:!1})],_.prototype,"showTransition",void 0),O([Object(f.Prop)({default:!1})],_.prototype,"firstImage",void 0);var j=_=O([f.Component],_),w=(n(1984),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"prefix-img-contain",style:t.calcStyles},[t.showLoadImage?n("div",{staticClass:"load-img-box",class:[t.calcShowTransition&&"show-transition-style",t.isLoadImageLoaded&&"filter-blur",t.loadImageTransition],style:t.calcLoadStyles},[n("img",{attrs:{src:t.getImgSrc(t.src,{crop:t.calcLoadCrop,isWebp:t.klook.webp}),alt:"hide-img"},on:{error:function(e){t.isLoadImageLoaded=!1},load:t.loadImageHandler}})]):t._e(),t._v(" "),n("img",t._b({directives:[{name:"show",rawName:"v-show",value:t.isTargeImageLoaded,expression:"isTargeImageLoaded"}],staticClass:"prefix-img-contain__prefix-img",class:[t.calcShowTransition&&"show-transition-style",t.targetImageTransition],attrs:{src:t.calcSrc},on:{error:function(e){t.isTargeImageLoaded=!1},load:t.loadTargetImageHandler}},"img",t.$attrs,!1))])}),[],!1,null,"5ffc1922",null).exports,C=n(881),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return C.a.apply(void 0,arguments)}},{key:"calcImg",get:function(){var t,e=(null===(t=this.poiObj)||void 0===t?void 0:t.image)||{};return{src:e.url,alt:e.alt}}},{key:"target",get:function(){return"desktop"===this.klook.platform?"_blank":"_self"}}]),e}(f.Vue);S([f.State],D.prototype,"klook",void 0),S([Object(f.Prop)({type:Object,default:null})],D.prototype,"poiObj",void 0);var x=D=S([Object(f.Component)({components:{PrefixImgNew:P}})],D),T=(n(1985),Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.poiObj?n("div",t._b({staticClass:"exp-pio-box__item-box",class:t.klook.platform},"div",t.bindIHTrack(t.poiObj.track),!1),[n("div",{staticClass:"exp-pio-box"},[n("PrefixImgNew",t._b({staticClass:"exp-pio-box__img",attrs:{"wh-rate":"4:3","first-image":!1,"show-transition":!1,"real-height":"desktop"===t.klook.platform?162:122}},"PrefixImgNew",t.calcImg,!1)),t._v(" "),n("h3",{staticClass:"exp-pio-box__title"},[n("a",{attrs:{href:t.poiObj.deep_link,target:t.target},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.poiObj.theme_name))])]),t._v(" "),n("p",{staticClass:"exp-pio-box__city"},[t._v(t._s(t.poiObj.city_name))])],1)]):t._e()}),[],!1,null,"cbd21432",null).exports),I=n(913),R=n(1093),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"clickHandler",value:function(t){var e=(t||{}).deep_link;e&&Object(I.f)(e,this.klook.platform)}},{key:"calcList",get:function(){return this.list||[]}},{key:"desktopList",get:function(){return this.calcList.reduce((function(t,e,n){var o=Math.floor(n/5);return Array.isArray(t[o])?t[o].push(e):t[o]=[e],t}),[])}}]),e}(f.Vue);$([f.State],L.prototype,"klook",void 0),$([Object(f.Prop)()],L.prototype,"list",void 0);var A=L=$([Object(f.Component)({components:{BaseActivityCards:R.a,ExpPioItem:T}})],L),E=(n(1988),Object(w.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-pio-list"},["desktop"===t.klook.platform?n("klk-card-swiper",t._l(t.desktopList,(function(e,i){return n("klk-card-swiper-item",{key:i,staticClass:"exp-pio-list__desktop-box"},t._l(e,(function(e,o){return n("div",{key:o,staticClass:"exp-pio-list__item-box",on:{click:function(n){return t.clickHandler(e)}}},[n("ExpPioItem",{attrs:{"poi-obj":e}})],1)})),0)})),1):n("BaseActivityCards",{attrs:{data:{card_type:-1,items:t.calcList}},scopedSlots:t._u([{key:"card-item-slot",fn:function(e){var o=e.item;return n("ExpPioItem",{attrs:{"poi-obj":o},nativeOn:{click:function(e){return t.clickHandler(o)}}})}}])})],1)}),[],!1,null,"1bd2afee",null));e.a=E.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(923),y=n(920),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isMobile",get:function(){return"mobile"===this.klook.platform}}]),e}(f.Vue);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)()],k.prototype,"icons",void 0);var O=k=m([Object(f.Component)({components:{CardSwiper:h.a,CardSwiperItem:h.b,ActivityBookingStartDate:y.a}})],k),_=(n(2151),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CardSwiper",{staticClass:"dynamic-horizontal-icons",class:t.klook.platform},t._l(t.icons,(function(e){return n("CardSwiperItem",{key:e.icon_url,staticClass:"activity-icons_item",staticStyle:{width:"104px"},attrs:{"per-view":t.isMobile?0:3,gap:t.isMobile?0:10}},[n("div",{staticClass:"activity-icons_item-content"},[e.icon_url?n("img",{staticClass:"activity-icon img-icon",attrs:{src:e.icon_url}}):t._e(),t._v(" "),"available_date"===e.icon_type?n("ActivityBookingStartDate",{staticClass:"booking-start-date",attrs:{"start-time":e.data&&e.data.time}}):n("p",{staticClass:"activity-icons_desc"},[t._v("\n        "+t._s(e.data&&e.data.icon_desc)+"\n      ")])],1)])})),1)}),[],!1,null,"0f29cfb4",null).exports,w=n(1927),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"componentName",get:function(){var t,e;switch(null===(e=null===(t=this.content)||void 0===t?void 0:t.style)||void 0===e?void 0:e.orientation){case"horizontal":return"DynamicHorizontalIcons";case"vertical":return"DynamicVerticalIcons";default:return"DynamicHorizontalIcons"}}}]),e}(f.Vue);P([Object(f.Prop)()],C.prototype,"content",void 0);var S=C=P([Object(f.Component)({components:{DynamicHorizontalIcons:j,DynamicVerticalIcons:w.a}})],C),D=Object(_.a)(S,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,{tag:"component",staticClass:"dynamic-icons",attrs:{icons:this.content.data}})}),[],!1,null,null,null);e.default=D.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1863),y=n(1864),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue),O=k=m([Object(f.Component)({components:{DynamicMapWrap:y.a}})],k),_=(n(2156),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DynamicMapWrap",t._g(t._b({staticClass:"experience-activity-map",scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n("div",{staticClass:"experience-activity-map-content"},[n("div",{staticClass:"address"},[n("span",{staticClass:"address-desc"},[t._v(t._s(o.address_desc))]),t._v(" "),n("span",{staticClass:"location"},[n("SvgIcon",{staticClass:"location-icon",attrs:{size:"16",color:"primary-500",name:"mobile-activity#icon_travel_location_xs"}})],1)])])]}}])},"DynamicMapWrap",t.$attrs,!1),t.$listeners))}),[],!1,null,"3cd4be3c",null).exports,w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"componentName",get:function(){var t,e;switch(null===(e=null===(t=this.content)||void 0===t?void 0:t.style)||void 0===e?void 0:e.address_type){case"image":return"DynamicImageMap";case"title":return"DynamicTitleMap";default:return"DynamicImageMap"}}}]),e}(f.Vue);w([Object(f.Prop)()],P.prototype,"content",void 0);var C=P=w([Object(f.Component)({components:{DynamicImageMap:h.a,DynamicTitleMap:j}})],P),S=Object(_.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,this._g({tag:"component",attrs:{content:this.content}},this.$listeners))}),[],!1,null,null,null);e.default=S.exports},function(t,e,n){"use strict";n.r(e);n(20),n(27),n(61),n(14),n(11),n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1203),m=n.n(y),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue),_=O=k([Object(h.Component)({components:{IconNext:m.a}})],O),j=(n(2161),n(43)),w=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"experience-view-more"},[e("span",{staticClass:"experience-view-more_text"},[this._v("\n    "+this._s(this.$t("13126"))+"\n  ")]),this._v(" "),e("IconNext",{attrs:{theme:"outline",size:"20",fill:[this.$tokensObj["$color-text-primary"]]}})],1)}),[],!1,null,"653bac1e",null).exports,P=n(272),C=n(1431),S=n(1441),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.viewMoreVisible=!1,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getComponentName",value:function(t){return{markdown:"DynamicPlainMarkdown",image:"DynamicImage"}[t]||""}},{key:"getContent",value:function(t){var e,n;if("markdown"!==(null===(e=t)||void 0===e?void 0:e.type))return t;var o=null===(n=t)||void 0===n?void 0:n.data;return o&&o.length?o.map((function(t){return Object(P.b)(t.render_object)})):[]}},{key:"close",value:function(){this.visible=!1}},{key:"viewMore",value:function(){this.visible=!0}},{key:"handleViewMore",value:function(){this.viewMoreVisible&&!this.isDesktop&&this.viewMore()}},{key:"initViewMoreVisible",value:function(){var t;(null===(t=this.$refs.highlightsWrap)||void 0===t?void 0:t.scrollHeight)>=this.foldHeight&&(this.viewMoreVisible=!0)}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initViewMoreVisible(),t.next=3,null;case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"isDesktop",get:function(){return"desktop"===this.platform}},{key:"foldHeight",get:function(){return this.isDesktop?120:88}},{key:"iconSize",get:function(){return this.isDesktop?72:40}},{key:"cClass",get:function(){return"exp-highlights_".concat(this.platform)}},{key:"title",get:function(){var t,e,n,o=!0,r=!1,c=void 0;try{for(var l,d=this.filteredComponents[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var style=null===(t=l.value)||void 0===t?void 0:t.style;if(null===(e=style)||void 0===e?void 0:e.fold_title)return null===(n=style)||void 0===n?void 0:n.fold_title}}catch(t){r=!0,c=t}finally{try{o||null==d.return||d.return()}finally{if(r)throw c}}return this.$t("1315")}},{key:"filteredComponents",get:function(){return this.components.filter((function(component){var t;return["markdown","image"].includes(null===(t=component)||void 0===t?void 0:t.type)}))}}]),e}(h.Vue);D([Object(h.Prop)()],x.prototype,"components",void 0),D([Object(h.State)((function(t){return t.klook.platform}))],x.prototype,"platform",void 0),D([Object(h.Prop)()],x.prototype,"activityId",void 0);var T=x=D([Object(h.Component)({components:{ViewMore:w,DynamicImage:S.default,DynamicPlainMarkdown:C.a}})],x),I=(n(2162),Object(j.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["exp-highlights",t.cClass],attrs:{"data-spm-module":"ActivityHighlightDetail?oid=activity_"+t.activityId},on:{click:t.handleViewMore}},[n("div",{staticClass:"exp-highlights-content"},[n("div",{ref:"highlightsWrap",staticClass:"exp-highlights-content-wrap",style:{"max-height":t.foldHeight+"px"}},t._l(t.filteredComponents,(function(e,o){return n(t.getComponentName(e.type),t._g({key:o,tag:"component",attrs:{content:t.getContent(e)}},t.$listeners))})),1),t._v(" "),t.viewMoreVisible?n("ViewMore",{staticClass:"exp-highlights-content-more",attrs:{"data-spm-item":"ViewMore?oid=activity_"+t.activityId},nativeOn:{click:function(e){return t.viewMore(e)}}}):t._e()],1),t._v(" "),n("div",{staticClass:"exp-highlights-img"},[n("SvgIcon",{attrs:{name:"activity-common#image_highlights",size:t.iconSize}})],1),t._v(" "),n(t.isDesktop?"klk-modal":"klk-bottom-sheet",{tag:"component",attrs:{visible:t.visible,open:t.visible,width:"680px",title:t.title,scrollable:!0,"overlay-closable":!0,closable:!0,"show-default-footer":!1,"show-close":""},on:{"update:visible":function(e){t.visible=e},"update:open":function(e){t.visible=e},close:t.close}},t._l(t.filteredComponents,(function(e,o){return n(t.getComponentName(e.type),t._g({key:o,tag:"component",attrs:{content:t.getContent(e)}},t.$listeners))})),1)],1)}),[],!1,null,"3dbcd372",null));e.default=I.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(20),n(27),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(885),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);m([Object(h.Prop)({default:function(){return[]}})],k.prototype,"couponList",void 0),m([Object(h.Prop)({default:""})],k.prototype,"slotName",void 0);var O=k=m([h.Component],k),_=(n(2133),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-card-coupon-box"},[n("div",{staticClass:"package-card-coupon-box__left"},[t._t("coupon-left-content")],2),t._v(" "),t.slotName?[n("div",{staticClass:"package-card-coupon-box__right"},[t._t(t.slotName)],2)]:[t.couponList&&t.couponList.length>0?n("div",{staticClass:"package-card-coupon-box__right"},t._l(t.couponList,(function(e,o){return n("div",{key:o,staticClass:"item-box"},[t._t("default",[n("span",{staticClass:"item-content"},[t._v(t._s(e.text))])],{item:e})],2)})),0):t._e()]],2)}),[],!1,null,"161d0c24",null).exports,w=n(883);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).selectedEvent=1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getPriceShow",value:function(t){var e,n=(null===(e=t)||void 0===e?void 0:e.price_show)||{};return n.from_price&&(n.sale_price=n.from_price,n.from_price=""),n}},{key:"getCalcTags2discount",value:function(t){var e,n;return(null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[]}},{key:"packageIdChange",value:function(){this.selectedEvent=this.packageId}},{key:"handleRadioChange",value:function(t){this.selectedEvent=t}},{key:"handleEventClick",value:function(t){t.isAvailable&&(this.selectedEvent=t.package_id,"mobile"===this.type&&(this.$emit("close"),this.confirmSelect()))}},{key:"handleRefreshClick",value:function(){this.$emit("refresh")}},{key:"confirmSelect",value:function(){this.selectedEvent&&this.selectedEvent!==this.packageId&&(this.$emit("selectPackage",this.selectedEvent),this.$inhouse.track("custom","#js-package-type-".concat(this.selectedEvent),{PromoTag:!0,spm:"Activity.SelectPackage.PackageType",action_type:"click"}),this.$sendGTMCustomEvent("Activity Page|SelectPackageWithPromotion_Click|".concat(this.activityId,"|").concat(this.templateId)))}},{key:"mounted",value:function(){this.selectedEvent=this.packageId}},{key:"availablePackageList",get:function(){return this.packagesInDate.map((function(t){return t.package_id||t.packageId}))}},{key:"validPackageList",get:function(){return this.validPackages.map((function(t){return t.package_id||t.packageId}))}},{key:"includedPackageList",get:function(){return this.includedPackages?this.includedPackages.map((function(t){return t.package_id||t.packageId})):this.validPackageList}},{key:"promotionListWithAvailable",get:function(){var t=this,e=this.promotionList.filter((function(e){return t.validPackageList.includes(e.package_id)})).filter((function(e){return t.includedPackageList.includes(e.package_id)})).map((function(e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},e,{isAvailable:t.availablePackageList.includes(e.package_id)})}));return e.sort((function(a,b){return a.isAvailable===b.isAvailable?b.discount-a.discount:b.isAvailable?1:-1})),e}}]),e}(h.Vue);C([h.State],S.prototype,"klook",void 0),C([Object(h.Prop)({default:"desktop"})],S.prototype,"type",void 0),C([Object(h.Prop)({default:"success"})],S.prototype,"status",void 0),C([Object(h.Prop)({default:[]})],S.prototype,"promotionList",void 0),C([Object(h.Prop)()],S.prototype,"packageId",void 0),C([Object(h.Prop)()],S.prototype,"activityId",void 0),C([Object(h.Prop)()],S.prototype,"templateId",void 0),C([Object(h.Prop)()],S.prototype,"validPackages",void 0),C([Object(h.Prop)()],S.prototype,"includedPackages",void 0),C([Object(h.Prop)()],S.prototype,"packagesInDate",void 0),C([Object(h.Watch)("packageId",{immediate:!0})],S.prototype,"packageIdChange",null);var D=S=C([Object(h.Component)({components:{TotalSlot:y.a,ExpTagging:w.default,MobileCouponList:j}})],S),x=(n(2134),n(2135),Object(_.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-promotion-content",class:{"is-mobile":"mobile"===t.type},attrs:{"data-spm-module":"SelectPackage?trg=manual"}},[t.promotionListWithAvailable.length>0?[[n("klk-radio-group",{on:{change:t.handleRadioChange},model:{value:t.selectedEvent,callback:function(e){t.selectedEvent=e},expression:"selectedEvent"}},t._l(t.promotionListWithAvailable,(function(e){return n("div",{key:e.package_id,staticClass:"event-wrap",class:{disabled:!e.isAvailable},attrs:{id:"js-package-type-"+e.package_id,"data-spm-item":"PackageType?trg=manual"},on:{click:function(n){return t.handleEventClick(e)}}},[n("div",{staticClass:"promotion-box"},[n("div",{staticClass:"promotion-box-left"},[n("p",{staticClass:"event-info"},[t._v("\n                "+t._s(e.package_name)+"\n              ")]),t._v(" "),n("klk-radio",{attrs:{disabled:!e.isAvailable,"group-value":e.package_id}})],1)]),t._v(" "),n("klk-radio",{staticClass:"desktop-radio",attrs:{disabled:!e.isAvailable,"group-value":e.package_id}},[n("span",{staticClass:"event-info"},[t._v("\n              "+t._s(e.package_name)+"\n            ")])]),t._v(" "),n("div",{staticClass:"event-price-wrap"},[n("TotalSlot",{attrs:{"price-data":t.getPriceShow(e),"style-type":"flex-column mini-style custom-style","hide-summary-price":!0},scopedSlots:t._u([{key:"sale_price-value",fn:function(o){var r=o.slotScope;return[n("span",{staticClass:"slot-scope-style"},[n("span",{staticClass:"value-wrap"},[t._v(t._s(r.value))]),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"0 0 0 4px"},attrs:{list:t.getCalcTags2discount(e),line:1}})],1)]}}],null,!0)})],1),t._v(" "),e.isAvailable?t._e():n("div",{staticClass:"event-not-available"},[n("SvgIcon",{attrs:{name:"common#icon_time_calendar_unavailable_xs",size:"16"}}),t._v(" "),n("span",{staticClass:"not-available-tips"},[t._v(t._s(t.$t("16578")))])],1)],1)})),0)]]:"success"===t.status?n("p",{staticClass:"no-promotion-content"},[t._v(t._s(t.$t("16995")))]):"failure"===t.status?["desktop"===t.type?n("p",{staticClass:"promotion-content-failure-desktop"},[t._v("\n      "+t._s(t.$t("client_network_failure"))+"\n    ")]):n("div",{staticClass:"promotion-content-failure"},[n("div",{staticClass:"promotion-content-failure-tip"},[t._v("\n        "+t._s(t.$t("client_network_failure"))+"\n      ")]),t._v(" "),n("div",{staticClass:"promotion-content-failure-button",on:{click:t.handleRefreshClick}},[t._v("\n        "+t._s(t.$t("global.reload"))+"\n      ")])])]:t._e(),t._v(" "),"fetching"===t.status?n("klk-loading"):t._e()],2)}),[],!1,null,"08e4a4b2",null));e.a=x.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=(n(47),n(46)),h=n(956),y=n(211),m=n(983),k=n(1168),O=n(1914),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).$swiper=null,t.swiperOptions={slidesPerView:1,initialSlide:t.index,paginationClickable:!0,spaceBetween:16,pagination:{el:".swiper-pagination",type:"fraction"}},t}return Object(l.a)(e,t),Object(f.a)(e,[{key:"indexChange",value:function(t){t>=0&&this.$swiper.slideTo(t)}},{key:"close",value:function(){this.$emit("close")}},{key:"getReviewInfo",value:function(t){return this.reviewsMap[String(t)]||{}}},{key:"getStandardDateFormat",value:function(t){return Object(y.e)(t,this.$t.bind(this),this.klook.language)}},{key:"changeCommentLike",value:function(t){var e=t.reviewId;this.$emit("changeCommentLike",e)}},{key:"mounted",value:function(){var t=this;this.$swiper.on("slideChange",(function(){t.$emit("slide-change")}))}}]),e}(v.Vue);_([v.State],j.prototype,"klook",void 0),_([Object(v.Prop)()],j.prototype,"images",void 0),_([Object(v.Prop)({type:Number,default:0})],j.prototype,"index",void 0),_([Object(v.Prop)()],j.prototype,"reviewsMap",void 0),_([Object(v.Watch)("index")],j.prototype,"indexChange",null);var w=j=_([Object(v.Component)({components:{ActivityLayer:h.a,KlkStars:m.a,ActivityReviewsHelpful:k.a,ImageZoomer:O.a}})],j),P=(n(2117),n(43)),C=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"swiper",rawName:"v-swiper:$swiper",value:t.swiperOptions,expression:"swiperOptions",arg:"$swiper"}],staticClass:"activity-image-viewer_swiper_container swiper-container"},[n("div",{staticClass:"image-viewer-top"},[n("SvgIcon",{staticClass:"activity-image_icon-close",attrs:{name:"desktop-common#icon-close-new",width:"24",height:"24"},nativeOn:{click:function(e){return t.close(e)}}}),t._v(" "),n("div",{ref:"pagination",staticClass:"swiper-pagination activity-swiper-pagination"})],1),t._v(" "),n("div",{staticClass:"swiper-wrapper"},t._l(t.images,(function(image){return n("div",{key:image.src,staticClass:"swiper-slide"},[n("ImageZoomer",[n("img",{staticClass:"activity-image",attrs:{src:image.src,alt:"activity-image"}})]),t._v(" "),t._t("description",[t.reviewsMap?n("div",{staticClass:"activity-image-description"},[n("div",{staticClass:"activity-image-description_author"},[t._v(t._s(t.getReviewInfo(image.reviewId).author))]),t._v(" "),n("div",{staticClass:"activity-image-description_score-time"},[n("div",{staticClass:"activity-image-description_score"},[n("KlkStars",{attrs:{score:t.getReviewInfo(image.reviewId).score,total:"5"}})],1),t._v(" "),n("div",{staticClass:"activity-image-description_time"},[t._v(t._s(t.getStandardDateFormat(t.getReviewInfo(image.reviewId).date)))])]),t._v(" "),t.getReviewInfo(image.reviewId).packageName?n("div",{staticClass:"activity-image-description_package"},[t._v("\n            "+t._s(t.$t("reviews.review_for"))+" "+t._s(t.getReviewInfo(image.reviewId).packageName)+"\n          ")]):t._e(),t._v(" "),n("div",{staticClass:"activity-image-description_comment"},[t._v(t._s(t.getReviewInfo(image.reviewId).content))]),t._v(" "),n("ActivityReviewsHelpful",{attrs:{comment:t.getReviewInfo(image.reviewId)},on:{changeCommentLike:t.changeCommentLike}})],1):t._e()],{image:image})],2)})),0)])}),[],!1,null,null,null).exports,S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);S([Object(v.Prop)()],D.prototype,"visible",void 0),S([Object(v.Prop)()],D.prototype,"transfer",void 0),S([Object(v.Prop)()],D.prototype,"notFixed",void 0);var x=D=S([Object(v.Component)({components:{ActivityLayer:h.a,ImageGalleryViewer:C}})],D),T=(n(2118),Object(P.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityLayer",{staticClass:"activity-image-viewer",attrs:{visible:t.visible,transfer:t.transfer,"not-fixed":t.notFixed,color:"black",transition:"fade"}},[t.visible?n("ImageGalleryViewer",t._g(t._b({scopedSlots:t._u([{key:"description",fn:function(e){return[t._t("description",null,{image:e.image})]}}],null,!0)},"ImageGalleryViewer",t.$attrs,!1),t.$listeners)):t._e()],1)}),[],!1,null,null,null));e.a=T.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(2131),n(43)),k=Object(m.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"dot-flashing"})}),[],!1,null,"f2a86784",null).exports,O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),j=_=O([Object(v.Component)({components:{DotFlashing:k}})],_),w=(n(2132),Object(m.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activity-dot-flashing"},[e("DotFlashing")],1)}),[],!1,null,"f39b216c",null));e.a=w.exports},function(t,e,n){"use strict";n(2115),n(47);var o=n(132),r=n.n(o);n(20);var c=function(){var t=[],e=[];function n(t,e){t.forEach((function(t){t(e)}))}this.onSingleTap=function(e){"function"!=typeof e||t.includes(e)||t.push(e)},this.onDoubleTap=function(t){"function"!=typeof t||e.includes(t)||e.push(t)},this.attach=function(t){t instanceof Element&&(t.addEventListener("touchstart",f),t.addEventListener("touchmove",y),t.addEventListener("touchend",h),t.addEventListener("mousedown",m),t.addEventListener("mouseup",k),t.addEventListener("mousemove",O))},this.detach=function(t){t.removeEventListener("touchstart",f),t.removeEventListener("touchmove",y),t.removeEventListener("touchend",h),t.removeEventListener("mousedown",m),t.removeEventListener("mouseup",k),t.removeEventListener("mousemove",O)};var o=!1,r=0,c=0,l=0,d=0,v=0;function f(t){o=!0,1===t.touches.length&&_(t.touches[0].clientX,t.touches[0].clientY)}function h(t){0===t.touches.length&&j()}function y(t){1===t.touches.length&&w(t.touches[0].clientX,t.touches[0].clientY)}function m(t){o||_(t.clientX,t.clientY)}function k(){o||j()}function O(t){o||0===t.button&&w(t.clientX,t.clientY)}function _(t,e){d=t,v=e,l=0}function j(){var o=Date.now();l<10&&(o-r<300?c+=1:c=1,r=Date.now(),n(t,{clientX:d,clientY:v}),2===c&&(n(e,{clientX:d,clientY:v}),c=0)),l=0}function w(t,e){var n=d-t,o=v-e,r=Math.sqrt(n*n+o*o);l+=r,d=t,v=e}},l={props:{minScale:{type:Number,default:1},maxScale:{type:Number,default:5},zoomed:{type:Boolean,default:!1},resetTrigger:{type:Number,default:1e5},aspectRatio:{type:Number,default:1},backgroundColor:{type:String,default:"transparent"},pivot:{type:String,default:"image-center"},limitTranslation:{type:Boolean,default:!0},doubleClickToZoom:{type:Boolean,default:!0}},data:function(){return{containerWidth:1,containerHeight:1,containerLeft:0,containerTop:0,translateX:0,animTranslateX:0,translateY:0,animTranslateY:0,scale:1,animScale:1,lastFullWheelTime:0,lastWheelTime:0,lastWheelDirection:"y",isPointerDown:!1,pointerPosX:-1,pointerPosY:-1,twoFingerInitDist:0,panLocked:!0,raf:null,tapDetector:null}},computed:{wrapperStyle:function(){var t=this.containerWidth*this.animTranslateX,e=this.containerHeight*this.animTranslateY;return{transform:["translate(".concat(t,"px, ").concat(e,"px)"),"scale(".concat(this.animScale,")")].join(" ")}}},watch:{scale:function(t){1!==t&&(this.$emit("update:zoomed",!0),this.panLocked=!1)},resetTrigger:"reset"},mounted:function(){this.tapDetector=new c,this.tapDetector.attach(this.$el),this.doubleClickToZoom&&this.tapDetector.onDoubleTap(this.onDoubleTap),window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this.refreshContainerPos(),this.loop()},destroyed:function(){this.tapDetector.detach(this.$el),window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.raf)},methods:{reset:function(){this.scale=1,this.panLocked=!0,this.translateX=0,this.translateY=0},zoomIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.tryToScale(t),this.onInteractionEnd()},zoomOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.tryToScale(t),this.onInteractionEnd()},tryToScale:function(t){var e=this.scale*t;if(e<this.minScale||e>this.maxScale){var n=Math.log2(t);n*=.2,t=Math.pow(2,n),e=this.scale*t}if(t=e/this.scale,this.scale=e,"image-center"!==this.pivot){var o=(this.pointerPosX-this.containerLeft)/this.containerWidth,r=(this.pointerPosY-this.containerTop)/this.containerHeight;this.translateX=(.5+this.translateX-o)*t+o-.5,this.translateY=(.5+this.translateY-r)*t+r-.5}},setPointerPosCenter:function(){this.pointerPosX=this.containerLeft+this.containerWidth/2,this.pointerPosY=this.containerTop+this.containerHeight/2},onPointerMove:function(t,e){if(this.isPointerDown){var n=t-this.pointerPosX,o=e-this.pointerPosY;this.panLocked||(this.translateX+=n/this.containerWidth,this.translateY+=o/this.containerHeight)}this.pointerPosX=t,this.pointerPosY=e},onInteractionEnd:r()((function(){this.limit(),this.panLocked=1===this.scale,this.$emit("update:zoomed",!this.panLocked)}),100),limit:function(){if(this.scale<this.minScale?this.scale=this.minScale:this.scale>this.maxScale&&this.tryToScale(this.maxScale/this.scale),this.limitTranslation){var t=this.calcTranslateLimit();Math.abs(this.translateX)>t.x&&(this.translateX*=t.x/Math.abs(this.translateX)),Math.abs(this.translateY)>t.y&&(this.translateY*=t.y/Math.abs(this.translateY))}},calcTranslateLimit:function(){if("y"===this.getMarginDirection()){var t=this.containerWidth/this.aspectRatio/this.containerHeight,e=(this.scale*t-1)/2;return e<0&&(e=0),{x:(this.scale-1)/2,y:e}}var n=this.containerHeight*this.aspectRatio/this.containerWidth,o=(this.scale*n-1)/2;return o<0&&(o=0),{x:o,y:(this.scale-1)/2}},getMarginDirection:function(){return this.containerWidth/this.containerHeight>this.aspectRatio?"x":"y"},onDoubleTap:function(t){1===this.scale?(t.clientX>0&&(this.pointerPosX=t.clientX,this.pointerPosY=t.clientY),this.tryToScale(Math.min(3,this.maxScale))):this.reset(),this.onInteractionEnd()},onWindowResize:function(){var t=window.getComputedStyle(this.$el);this.containerWidth=parseFloat(t.width),this.containerHeight=parseFloat(t.height),this.setPointerPosCenter(),this.limit()},refreshContainerPos:function(){var rect=this.$el.getBoundingClientRect();this.containerLeft=rect.left,this.containerTop=rect.top},loop:function(){this.animScale=this.gainOn(this.animScale,this.scale),this.animTranslateX=this.gainOn(this.animTranslateX,this.translateX),this.animTranslateY=this.gainOn(this.animTranslateY,this.translateY),this.raf=window.requestAnimationFrame(this.loop)},gainOn:function(t,e){var n=.3*(e-t);return Math.abs(n)>1e-5?t+n:e},onMouseWheel:function(t){t.detail&&(t.wheelDelta=-10*t.detail);var e=Date.now();120===Math.abs(t.wheelDelta)?e-this.lastFullWheelTime>50&&(this.onMouseWheelDo(t.wheelDelta),this.lastFullWheelTime=e):(e-this.lastWheelTime>50&&"number"==typeof t.deltaX&&(this.lastWheelDirection=0===t.detail&&Math.abs(t.deltaX)>Math.abs(t.deltaY)?"x":"y","x"===this.lastWheelDirection&&this.$emit("swipe",t.deltaX>0?"left":"right")),"y"===this.lastWheelDirection&&this.onMouseWheelDo(t.wheelDelta)),this.lastWheelTime=e},onMouseWheelDo:function(t){var e=Math.pow(1.25,t/120);this.tryToScale(e),this.onInteractionEnd()},onMouseDown:function(t){this.refreshContainerPos(),this.isPointerDown=!0,this.pointerPosX=t.clientX,this.pointerPosY=t.clientY},onMouseUp:function(){this.isPointerDown=!1,this.onInteractionEnd()},onMouseMove:function(t){this.onPointerMove(t.clientX,t.clientY)},onTouchStart:function(t){if(1===t.touches.length)this.refreshContainerPos(),this.pointerPosX=t.touches[0].clientX,this.pointerPosY=t.touches[0].clientY,this.isPointerDown=!0;else if(2===t.touches.length){this.isPointerDown=!0,this.pointerPosX=(t.touches[0].clientX+t.touches[1].clientX)/2,this.pointerPosY=(t.touches[0].clientY+t.touches[1].clientY)/2;var e=t.touches[0].clientX-t.touches[1].clientX,n=t.touches[0].clientY-t.touches[1].clientY;this.twoFingerInitDist=Math.sqrt(e*e+n*n)}},onTouchEnd:function(t){0===t.touches.length?(this.isPointerDown=!1,Math.abs(this.scale-1)<.1&&(this.scale=1),this.onInteractionEnd()):1===t.touches.length&&(this.pointerPosX=t.touches[0].clientX,this.pointerPosY=t.touches[0].clientY)},onTouchMove:function(t){if(1===t.touches.length)this.onPointerMove(t.touches[0].clientX,t.touches[0].clientY);else if(2===t.touches.length){var e=(t.touches[0].clientX+t.touches[1].clientX)/2,n=(t.touches[0].clientY+t.touches[1].clientY)/2;this.onPointerMove(e,n),this.pointerPosX=e,this.pointerPosY=n;var o=t.touches[0].clientX-t.touches[1].clientX,r=t.touches[0].clientY-t.touches[1].clientY,c=Math.sqrt(o*o+r*r);this.tryToScale(c/this.twoFingerInitDist),this.twoFingerInitDist=c}}}},d=(n(2116),n(43)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-zoomer",style:{backgroundColor:t.backgroundColor},on:{mousewheel:function(e){return e.preventDefault(),t.onMouseWheel(e)},DOMMouseScroll:t.onMouseWheel,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onMouseMove,mouseout:t.setPointerPosCenter,touchstart:t.onTouchStart,touchend:t.onTouchEnd,touchmove:t.onTouchMove}},[n("div",{staticClass:"zoomer",style:t.wrapperStyle},[t._t("default")],2)])}),[],!1,null,null,null);e.a=component.exports},,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(30),n(70),n(47),n(13)),c=(n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(10),k=n.n(m),O=n(71),_=n.n(O),j=n(131),w=n(21),P=n(908),C=n(957),S=n(1156),D=n(1094),x=n(1095),T=n(1414),I=n(1033),R=n(911),$=n(1104),L=n(895),A=n(16),E=n(3),M=n(1011),B=n(1005),N=n(883),V=n(952),F=n(890),W=n(889),H=n(882),U=n(2),z=n(1436);function G(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?G(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):G(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var K=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},J=Object(w.namespace)("traveller/activity"),X=Object(w.namespace)("experience"),Q=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).bsObj=Object(F.getBottomSheetConfig)("fixed-height-config"),t.bsObjSavePrice=Object(F.getBottomSheetConfig)({transfer:!1}),t.cacheOpt={date:"",selectedUnits:null},t.visible=!1,t.packageId=null,t.packageSelectedDate="",t.packageSchedules=[],t.oldPrevUnits=null,t.selectedTime=null,t.preSelectedSkuId=null,t.unitsMap={},t.currentUnits=[],t.legends=[],t.groupPackName="",t.fetchPackageUnitsDebounce=Object(j.debounce)(t.fetchPackageUnits,200),t.unitsLoadingState="success",t.fixedHackStyle=null,t}var n,y,m,O,w;return Object(h.a)(e,t),Object(d.a)(e,[{key:"visibleWatch",value:function(t){var e=this;t?this.$nextTick((function(){e.$inhouse.track("pageview","#booking_options_page_spm",{force:!0})})):this.clearPreSettlementData(),this.$emit("changeVisible",t)}},{key:"packageSelectedDateWatch",value:function(t){this.isNewOpenTicket||this.$emit("updateDate",t)}},{key:"closePriceSumary",value:function(){H.a.$emit("setShowPriceSummary2bus",!1)}},{key:"clickSavePrice",value:function(t,e){var n,o=this.bsObjSavePrice;o.visible=t,this.$set(o,"priceSummary",null===(n=e)||void 0===n?void 0:n.priceSummary)}},{key:"unitsChange",value:function(t){this.currentUnits=k()(t)?[]:t}},{key:"selectedTimeChange",value:(w=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.arrangementId){t.next=5;break}if(null===(o=n)||void 0===o||!o.arrangementId||e.arrangementId!==n.arrangementId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchPackageUnitsDebounce();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return w.apply(this,arguments)})},{key:"open",value:(O=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.packageId,o=e.date,r=e.skuId,c=e.selectedTime,l=e.selectedUnits,d=e.pkgDate,v=e.packageName,this.cacheOpt.date=o||"",this.visible=!0,this.packageId=n,this.preSelectedSkuId=r,this.packageSelectedDate=o||d||"",this.selectedTime=c||null,this.oldPrevUnits=l||null,this.cacheOpt.selectedUnits=_()(l),v&&(this.groupPackName=v),!this.packageId){t.next=13;break}return t.next=13,this.getPackagePriceScheduleUnits(this.packageId);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return O.apply(this,arguments)})},{key:"getPackagePriceScheduleUnits",value:(m=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,c,l,d,v,f,legend;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.selectedTime||{},c=o.arrangementId,t.next=3,this.getPackageSchedulesUnits(e);case 3:if(l=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:d=l.schedules,v=l.units,f=l.legend,legend=void 0===f?[]:f,this.packageSchedules=Object(r.a)(d||[]),this.legends=legend,this.isNewOpenTicket&&this.autoSetFeasibleDate(!!(null===(n=this.currentSelectedPackage)||void 0===n?void 0:n.auto_select_first_date)),c||k()(v)||this.setPackageUnitMap({prices:v}),k()(v)&&(this.unitsMap={});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"autoSetFeasibleDate",value:function(t){var e,n=this,o=_()(this.packageSchedules||[]),r=t?o:o.reverse(),c=function(t){return!!t.stock&&n.currentSelectedPackage&&t.stock>=Number(n.currentSelectedPackage.min_pax)},l=r.find((function(t){return(t.time_slots||[]).some(c)}));this.packageSelectedDate=(null===(e=l)||void 0===e?void 0:e.date)||""}},{key:"autoSelectSku",value:function(t,e){var n;if(this.preSelectedSkuId===t.skuId){var o=this.selectedTime||{},r=o.arrangementId,c=o.maxPurchased,l=this.preview,d=this.unitsMap,v=this.currentSelectedPackage,f=this.totalUnitCount,h=v.max_pax,y=t.count,m=t.priceMinPax,k=t.priceMaxPax,O=t.inventoryId,_=Math.min(t.priceMaxPax,c-(f-t.count)),j=Math.min(_,Number(e[O]));if(l&&!d[r])return;if(f>=h)return void this.alert(this.$t("activity.v2.error.package_max",[h]));if(y>=k)return void((null===(n=t)||void 0===n?void 0:n.maxCount)&&this.alert(this.$t("activity.error.price_max_v2",[t.maxCount])));if(t.count>=j||0===y&&y+m>j)return void this.alert(this.$t("activity.v2.unit_out_of_inventory"));if(y<k)return void(t.count=Math.max(m,1));this.alert(this.$t("activity.error.price_max_v2",[k]))}}},{key:"setPackageUnitMap",value:function(data){var t=this,e=data.prices,n=data.inventories,r=void 0===n?{}:n,c=data.credits_tag,l=this.selectedTime||{},d=l.arrangementId,v=void 0===d?"default":d,f=l.maxPurchased,h=e.filter((function(t){return t.required&&(t.price_min_pax||t.min_pax)})).reduce((function(t,e){return t+(e.price_min_pax||e.min_pax)}),0),y=e.map((function(t){var e,n=t.price_min_pax||t.min_pax||0,o=f-h;e=o<0||!(t.required&&n)&&Math.max(n,1)>o;var l=Math.max(n,1)>r[t.inventory_id],d=t.required?n:0;return{credits_tag:c,redeem_status:t.redeem_status,product_tags:t.product_tags,priceMinPax:n,priceMaxPax:t.price_max_pax||t.max_pax||0,count:d,credits:t.credits,priceId:t.price_id||t.id,sellingPrice:t.selling_price||t.price||0,marketPrice:t.market_price||0,originalPrice:t.original_price||0,promotionDiscount:t.discount||0,priceName:t.price_name||t.name,isSoldOut:e||l,isFree:0===parseFloat(t.selling_price||t.price),specPriceDesc:t.spec_price&&t.spec_price.desc,requireBuy:t.required&&n,requireMinPax:!t.required&&d>=n&&n>1,required:t.required,skuId:t.sku_id,srvSkuInfo:t.srv_sku_info,inventoryId:t.inventory_id,eventId:t.promotion_event?t.promotion_event.event_id:0,isInPromotion:!!t.promotion_event&&!!t.promotion_event.event_id,isDefault:"default"===v}}));this.preSelectedSkuId&&y.forEach((function(e){return t.autoSelectSku(e,r)}));var m=this.oldPrevUnits||[];m&&y.forEach((function(t){var e=m.find((function(e){return e.skuId===t.skuId}));e&&!t.isSoldOut&&(t.prevCount=e.count)})),this.unitsMap=Object(o.a)({default:{inventories:r,unitList:y}},v,{inventories:r,unitList:y}),setTimeout((function(){var e;if((null===(e=t.currentSelectedPackage)||void 0===e?void 0:e.has_discount)&&"default"!==v){var n={hideLoading:!0,page_from:2,arrangement_id:v,sku_list:y.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}}))};t.getPreSettlementApiData(n)}}),1)}},{key:"clearPreSettlementData",value:function(t){this.$store.commit("traveller/activity/".concat(U.SET_PRE_SETTLEMENT_API_DATA),{res:null})}},{key:"rangeConfirmHandler",value:function(t){this.packageSelectedDate=t.date||""}},{key:"setPackageTime",value:function(data){(this.selectedTime||{}).arrangementId&&(this.oldPrevUnits=_()(this.units)),this.selectedTime=data}},{key:"fetchPackageUnits",value:(y=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.selectedTime||{},r=o.arrangementId,c=this.preview,l="1"===(null===(e=this.$route.query)||void 0===e?void 0:e.translation),r){t.next=5;break}return t.abrupt("return",{success:!1});case 5:return this.unitsLoadingState="fetching",t.prev=6,t.next=9,this.$axios.$get(Object(A.ob)(E.a.getPackageUnits,{arrangementId:r}),{params:{preview:c,translation:l},regularUrl:"/v1/usrcsrv/arrangements/{*}/units"});case 9:d=t.sent,t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(6),this.unitsLoadingState="failure",t.abrupt("return");case 16:if(v=d.result,null===(n=d)||void 0===n||!n.success||k()(v)||k()(v.prices)||k()(v.inventories)){t.next=23;break}return this.setPackageUnitMap(Y({},v,{arrangementId:r})),this.unitsLoadingState="success",t.abrupt("return",Y({},d,{success:!0}));case 23:this.unitsLoadingState="failure";case 24:return t.abrupt("return",{success:!1});case 25:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(){return y.apply(this,arguments)})},{key:"changeUnitCount",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y,m,k,O,_,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.priceId,o=e.type,c=this.unitsMap,l=this.selectedTime,d=(l||{}).arrangementId,f=c[v=void 0===d?"default":d]){t.next=6;break}return t.abrupt("return");case 6:if(h=f.unitList,y=h.find((function(t){return t.priceId===n}))){t.next=10;break}return t.abrupt("return");case 10:if(m=y.count,k=y.priceMinPax,O=y.required,"add"!==o){t.next=15;break}0===m?y.count+=Math.max(k,1):y.count++,t.next=18;break;case 15:if(0!==m){t.next=17;break}return t.abrupt("return");case 17:m>k?y.count--:O||(y.count-=k);case 18:if(_=this.currentSelectedPackage,!(null===(r=_)||void 0===r?void 0:r.has_discount)){t.next=23;break}return j={hideLoading:!0,page_from:2,arrangement_id:v,sku_list:h.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}}))},t.next=23,this.getPreSettlementApiData(j);case 23:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"alert",value:function(text){this.headerAlertRef.open(text)}},{key:"_showShoppingCart",value:function(){this.showShoppingCart&&this.showShoppingCart(),this.visible=!1}},{key:"updateInfos",value:function(t){t&&(this.fixedHackStyle={paddingBottom:t.height+"px"})}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"calcTags2discount",get:function(){var t,e,n,o=(null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],r=[];return(null===(n=o)||void 0===n?void 0:n.length)&&o.forEach((function(t){var e,n,o,c,l,d,v=(null===(e=t)||void 0===e?void 0:e.inner_vars)||{};(null===(o=null===(n=v)||void 0===n?void 0:n.inner)||void 0===o?void 0:o.derivation_info)&&(null===(d=null===(l=null===(c=v)||void 0===c?void 0:c.inner)||void 0===l?void 0:l.derivation_info)||void 0===d?void 0:d.is_derived)||r.push(t)})),r}},{key:"showBottomBar",get:function(){var t;return(null===(t=this.currentUnits)||void 0===t?void 0:t.length)>0}},{key:"arrangementId",get:function(){var t;return null===(t=null===this||void 0===this?void 0:this.selectedTime)||void 0===t?void 0:t.arrangementId}},{key:"calcData",get:function(){var t=(this.currentSelectedPackage||{}).usage_validity_render_obj||[];return{title:(t.find((function(t){return"title"===t.type}))||{}).content,rules:t.filter((function(t){return"item"===t.type})).map((function(t){return t.content}))}}},{key:"activityTicketType",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.activity_ticket_type}},{key:"isNewOpenTicket",get:function(){return 3===(this.currentSelectedPackage||{}).package_ticket_type}},{key:"packages",get:function(){return this.businessData.packages}},{key:"currentSelectedPackage",get:function(){var t=this.packageId,e=this.packages;if(t)return e.find((function(e){return e.package_id===t}))}},{key:"pickupDateDescription",get:function(){return this.businessData.date_description}},{key:"units",get:function(){var t=this.unitsMap,e=this.totalUnitCount,n=this.selectedTime;return this.calcExpUnitsExtra({unitsMap:t,totalUnitCount:e,selectedTime:n})}},{key:"totalUnitCount",get:function(){var t=this.unitsMap,e=(this.selectedTime||{}).arrangementId;if(!e)return 0;var n=t[e];return n?n.unitList.reduce((function(t,e){return t+e.count}),0):0}},{key:"inventories",get:function(){var t=this.selectedTime,e=this.unitsMap,n=(t||{}).arrangementId;return n&&e[n]?e[n].inventories:{}}},{key:"bookingCalendarOptions",get:function(){return{templateId:this.templateId,autoTimeSlot:this.autoTimeSlot,packageId:this.packageId,schedules:this.packageSchedules,warn:this.pickupDateDescription,selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,isNewOpenTicket:this.isNewOpenTicket,legends:this.legends}}},{key:"templateId",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.template_id}},{key:"bookingUnitOptions",get:function(){return{selectedTime:this.selectedTime,unitsMap:this.unitsMap,preview:this.preview,currentSelectedPackage:this.currentSelectedPackage,inventories:this.inventories,totalUnitCount:this.totalUnitCount,disabled:!this.arrangementId}}},{key:"bottomBarBinds",get:function(){var t;return{fromType:this.fromType,hideDiscountTips:null===(t=this.bsObjSavePrice)||void 0===t?void 0:t.visible,businessData:this.businessData,units:this.units,currentSelectedPackage:this.currentSelectedPackage,selectedTime:this.selectedTime,packageSchedules:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount,showShoppingCart:this._showShoppingCart}}}]),e}(Object(w.mixins)($.a,z.a));K([X.State],Q.prototype,"sectionActData",void 0),K([Object(w.Prop)()],Q.prototype,"autoTimeSlot",void 0),K([Object(w.Prop)({type:String,default:""})],Q.prototype,"fromType",void 0),K([Object(w.Prop)({default:0})],Q.prototype,"preview",void 0),K([Object(w.Prop)()],Q.prototype,"businessData",void 0),K([Object(w.Prop)()],Q.prototype,"showShoppingCart",void 0),K([Object(w.Prop)({default:"fetching"})],Q.prototype,"state",void 0),K([Object(w.Ref)()],Q.prototype,"headerAlertRef",void 0),K([J.State],Q.prototype,"commonLoadingState",void 0),K([J.State],Q.prototype,"preSettlementApiData",void 0),K([J.Getter],Q.prototype,"preSettlementTips2getters",void 0),K([J.Action],Q.prototype,"getPreSettlementApiData",void 0),K([Object(w.Watch)("visible")],Q.prototype,"visibleWatch",null),K([Object(w.Watch)("packageSelectedDate")],Q.prototype,"packageSelectedDateWatch",null),K([Object(w.Watch)("units",{immediate:!0})],Q.prototype,"unitsChange",null),K([Object(w.Watch)("selectedTime",{immediate:!0})],Q.prototype,"selectedTimeChange",null);var Z=Q=K([Object(w.Component)({components:{SavingPriceDetails:W.default,PriceDiscountTips:V.a,ExpTagging:N.default,ActivityValidity:M.a,HasOpenDateTips:B.a,HeaderTips:P.a,CardHeader:C.a,BookineOptionsSkeleton:I.a,ExpLoadingState:R.default,CommonContentLoading:L.a,BookingCalendar:S.a,BookingUnit:D.a,HeaderAlert:x.a,SkuBottomBar:T.default}})],Q),tt=(n(2173),n(43)),component=Object(tt.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("klk-bottom-sheet",t._b({staticClass:"experience-activity-booking hack-zindex-safari",attrs:{"can-pull-close":!1,visible:t.visible,title:t.$t("activity.v2.label.booking_options")},on:{"update:visible":function(e){t.visible=e}}},"klk-bottom-sheet",t.bsObj,!1),[n("div",{staticClass:"booking-content show-bottom-bar",style:t.fixedHackStyle,attrs:{id:"booking_options_page_spm","data-spm-page":"BookingOptions?oid=package_"+t.currentSelectedPackage.package_id+"&trg=manual"}},[n("HeaderAlert",{ref:"headerAlertRef",staticClass:"booking-alert",attrs:{"package-id":t.currentSelectedPackage.package_id}}),t._v(" "),n("CardHeader",{staticClass:"booking-content-header",attrs:{"package-data":t.currentSelectedPackage,"group-pack-name":t.groupPackName}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.calcTags2attribute,pkg:{packageId:t.packageId},track:{spm:"Package_Product_Tag"},line:1}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:t.calcTags2discount,pkg:{packageId:t.packageId},track:{spm:"Package_Discount_Section"},line:1}}),t._v(" "),n("ExpLoadingState",{attrs:{state:t.schedulesUnitsState,fetching:{type:"overlay"}},on:{refresh:function(e){return t.getPackagePriceScheduleUnits(t.packageId||0)}}},[t.visible?[t.currentSelectedPackage.usage_validity_render_obj&&t.currentSelectedPackage.usage_validity_render_obj.length?n("ActivityValidity",{staticClass:"activity-validity-style small",attrs:{data:t.currentSelectedPackage.usage_validity_render_obj,"max-height":"105px"}}):t._e(),t._v(" "),3!==t.activityTicketType&&t.isNewOpenTicket&&t.cacheOpt.date?n("HasOpenDateTips",{staticStyle:{margin:"16px 0"}}):t._e(),t._v(" "),n("BookingCalendar",t._b({directives:[{name:"show",rawName:"v-show",value:!t.isNewOpenTicket,expression:"!isNewOpenTicket"}],staticClass:"booking-content-calendar",attrs:{"is-track-item":!1},on:{setTime:t.setPackageTime,rangeConfirm:t.rangeConfirmHandler},model:{value:t.packageSelectedDate,callback:function(e){t.packageSelectedDate=e},expression:"packageSelectedDate"}},"BookingCalendar",t.bookingCalendarOptions,!1)),t._v(" "),n("div",{staticClass:"booking-content-units"},[t.currentSelectedPackage?n("HeaderTips",{staticClass:"booking-content-units-tips",attrs:{"max-pax":t.currentSelectedPackage.max_pax,"min-pax":t.currentSelectedPackage.min_pax}}):t._e(),t._v(" "),n("ExpLoadingState",{attrs:{state:t.unitsLoadingState,fetching:{type:"overlay"},"keep-state":!0},on:{refresh:t.fetchPackageUnitsDebounce}},[n("div",{staticClass:"booking-content-units-content"},t._l(t.currentUnits,(function(e){return n("BookingUnit",t._b({key:e.priceId,staticClass:"booking-content-unit",attrs:{unit:e,"is-track-module":!0},on:{changeUnitCount:t.changeUnitCount,alert:t.alert}},"BookingUnit",t.bookingUnitOptions,!1))})),1)])],1)]:t._e()],2),t._v(" "),n("SkuBottomBar",t._b({directives:[{name:"show",rawName:"v-show",value:t.showBottomBar,expression:"showBottomBar"}],on:{clickSavePrice:t.clickSavePrice,updateInfos:t.updateInfos},scopedSlots:t._u([{key:"slot-booking-bar__buttons",fn:function(e){var n=e.slotScope;return[t._t("slot-booking-bar__buttons",null,{slotScope:n})]}}],null,!0)},"SkuBottomBar",t.bottomBarBinds,!1)),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"js-custom-bottom-sheet-hack custom-bottom-sheet-style",class:[t.bsObjSavePrice.visible?"hack-style":""],attrs:{visible:t.bsObjSavePrice.visible,title:t.$t("76591")},on:{"update:visible":function(e){return t.$set(t.bsObjSavePrice,"visible",e)},close:t.closePriceSumary}},"klk-bottom-sheet",t.bsObjSavePrice,!1),[n("SavingPriceDetails",{attrs:{"hide-dashed":!0,"price-summary":t.bsObjSavePrice.priceSummary}})],1),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"vsb-hidden",attrs:{tips:t.preSettlementTips2getters}}):t._e()],1),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.commonLoadingState,expression:"commonLoadingState === 'fetching'"}],attrs:{type:"overlay"}})],1):t._e()}),[],!1,null,"4a72622c",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:1})],h.prototype,"xNumber",void 0),f([Object(v.Prop)({default:1})],h.prototype,"yNumber",void 0),f([Object(v.Prop)({default:"100%"})],h.prototype,"loadingWidth",void 0);var y=h=f([v.Component],h),m=(n(2144),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading",style:{width:t.loadingWidth}},[n("div",{staticClass:"title"}),t._v(" "),t._l(t.yNumber,(function(e){return n("div",{key:e,staticClass:"item-list"},t._l(t.xNumber,(function(e){return n("div",{key:e,staticClass:"item"},[n("div",{staticClass:"skeleton-main"}),t._v(" "),n("div",{staticClass:"skeleton-long-footer"}),t._v(" "),n("div",{staticClass:"skeleton-footer"}),t._v(" "),n("div",{staticClass:"skeleton-footer"})])})),0)}))],2)}),[],!1,null,"1b683874",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(955),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).skeletonNames=["act-date-skeleton","pkg-skeleton","pkg-details-skeleton"],t}return Object(l.a)(e,t),e}(v.Vue);h([Object(v.Prop)()],y.prototype,"styleType",void 0);var m=y=h([Object(v.Component)({components:{CommonSkeletonSlots:f.a}})],y),k=(n(2145),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pkg-options-loading",class:this.styleType},[e("CommonSkeletonSlots",{attrs:{"skeleton-name":this.skeletonNames}})],1)}),[],!1,null,"9ff6cd4e",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(213),y=n.n(h),m=n(1958),header=n(1463),k=n(212),O=n(1959),_=n(1856),j=n(882),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).layerVisible=!1,t.visible=!1,t.$mySwiper=null,t.titleScrollTop=0,t.headerHeight=48,t.headerTop="0",t.navTop="0",t.navHeight=0,t.showAppDownload=!0,t.appDownloadHeight=0,t.hideHeaderGlobal=!1,t.swiperOption={slidesPerView:"auto",freeMode:!0,observer:!0,observeParents:!0},t._scroll=0,t.handleScroll=y()(t.handleCheckVisible,100),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activeSectionChange",value:function(t){t>-1&&this.slideToIndex(t)}},{key:"visibleChange",value:function(t){t&&!this.navHeight&&this.$nextTick((function(){this.navHeight=this.nav?this.nav.getBoundingClientRect().height:48}))}},{key:"appDownloadHeightWatch",value:function(t){var e=document.querySelector(".layout-default_main");e&&(e.style.paddingTop="".concat(this.headerHeight+t,"px"))}},{key:"translate",value:function(data){this.appDownloadHeight=data.transform,this.initScrollHandler()}},{key:"appDownloadClose",value:function(){var t=this;this.appDownloadHeight=0,this.showAppDownload=!1,this.$nextTick((function(){t.initScrollHandler()}))}},{key:"showNavLayer",value:function(){this.layerVisible=!0}},{key:"hideLayer",value:function(){this.layerVisible=!1}},{key:"handleNavClick",value:function(data,t){if(this.activeIndex!==t){var e=t>=this.activeIndex;this.lockHeight=e?this.navHeight+this.headerHeight:this.headerHeight,this.debounceClickNav(data),this.hideLayer()}}},{key:"slideToIndex",value:function(t){Object(O.a)(t,this.$mySwiper)}},{key:"getTitleNodeOffsetTop",value:function(){if(this.titleScrollTop)return this.titleScrollTop;var t=document.querySelector(".j-activity-head-info_title");this.titleScrollTop=t?Object(k.c)(t):350}},{key:"initScrollHandler",value:function(){var t=Object(k.h)();this.initHeaderHeight(),this.getTitleNodeOffsetTop(),this.visible=!this.isHeroPage&&t>this.titleScrollTop;var e=t<this._scroll;this.navTop="".concat(e?this.appDownloadHeight:this.headerHeight+.5+this.appDownloadHeight,"px"),j.a.$emit("getHeaderNavTop",this.navTop),t>this.headerHeight&&e?this.headerTop="-".concat(this.headerHeight-this.appDownloadHeight,"px"):this._scroll>=0&&(this.headerTop="".concat(this.appDownloadHeight,"px")),this._scroll=t,this.lockHeight=e?this.navHeight:this.navHeight+this.headerHeight,this.initScroll()}},{key:"handleCheckVisible",value:function(){var t=Object(k.h)();this.initHeaderHeight(),"fixed"!==document.body.style.position&&t!==this._scroll&&this.initScrollHandler()}},{key:"initHeaderHeight",value:function(){var t;this.headerHeight=((null===(t=this.header)||void 0===t?void 0:t.$el)||this.header).getBoundingClientRect().height}},{key:"mounted",value:function(){this.$nextTick((function(){this.initHeaderHeight()})),this.navVisible&&(document.addEventListener("scroll",this.handleScroll),this.handleScroll()),j.a.$off("getHeaderHeight2bus",this.getHeaderHeight2bus).$on("getHeaderHeight2bus",this.getHeaderHeight2bus),j.a.$off("toggleGlobalHeaderVisible",this.toggleGlobalHeaderVisible).$on("toggleGlobalHeaderVisible",this.toggleGlobalHeaderVisible)}},{key:"getHeaderHeight2bus",value:function(t,e){var n=this.navTop,o=e||{},r=o.from,c=o.hideFlag;switch(r){case"act-page":this.hideHeaderGlobal=c}"function"==typeof t&&t(n)}},{key:"toggleGlobalHeaderVisible",value:function(t){this.hideHeaderGlobal=!t}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll)}},{key:"navVisible",get:function(){return"express_check_out"!==this.klook.utilConfig.f_source_type}},{key:"whiteLabelHeader",get:function(){return!!this.klook.utilConfig.whiteLabelUtilConfig}}]),e}(_.a);w([Object(f.Ref)()],P.prototype,"header",void 0),w([Object(f.Ref)()],P.prototype,"nav",void 0),w([f.Getter],P.prototype,"isGuestCheckout",void 0),w([Object(f.Watch)("activeIndex")],P.prototype,"activeSectionChange",null),w([Object(f.Watch)("visible")],P.prototype,"visibleChange",null),w([Object(f.Watch)("appDownloadHeight")],P.prototype,"appDownloadHeightWatch",null);var C=P=w([Object(f.Component)({components:{ExpAppDownload:function(){return Promise.all([n.e(14),n.e(325)]).then(n.bind(null,2184))},ActivityNavContainer:m.a,DefaultHeader:header.a}})],P),S=(n(2146),n(43)),component=Object(S.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideHeaderGlobal,expression:"!hideHeaderGlobal"}],staticClass:"activity-header-nav-wrap"},[t.whiteLabelHeader?n("div",{ref:"header",staticClass:"j-activity-header activity-header",style:{top:t.headerTop}},[n("div",{staticClass:"partner_header_box"}),t._v(" "),n("div",{staticClass:"platform_header_box"})]):[n("client-only",[t.showAppDownload&&!t.isGuestCheckout?n("div",{staticClass:"pos-app-download",style:{transform:"translateY("+t.appDownloadHeight+"px)"}},[n("ExpAppDownload",{style:{transform:"translateY(-"+t.appDownloadHeight+"px)"},attrs:{"page-key":"mobile-activity-page",el:".pos-app-download"},on:{translate:t.translate,close:t.appDownloadClose}})],1):t._e()]),t._v(" "),n("DefaultHeader",{ref:"header",staticClass:"j-activity-header activity-header",style:{top:t.headerTop}})],t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"nav",staticClass:"j-activity-nav-container activity-nav-container",style:{top:t.navTop}},[n("div",{staticClass:"nav-horizontal"},[n("div",{directives:[{name:"swiper",rawName:"v-swiper:$mySwiper",value:t.swiperOption,expression:"swiperOption",arg:"$mySwiper"}],staticClass:"activity-nav-list"},[n("div",{staticClass:"swiper-wrapper"},t._l(t.navList,(function(e,o){return n("div",{directives:[{name:"track",rawName:"v-track:module:TopLocateTo_LIST",value:{trg:"manual",idx:o,len:t.navList.length,ext:{Type:e.title}},expression:"{\n              trg: 'manual',\n              idx: index,\n              len: navList.length,\n              ext: {\n                Type: item.title\n              }\n            }",arg:"module:TopLocateTo_LIST"}],key:e.title+"_"+o,staticClass:"swiper-slide slide-horizontal",class:{active:o===t.activeIndex},attrs:{"data-spm-virtual-item":"__virtual"},on:{click:function(n){return t.handleNavClick(e,o)}}},[t._v("\n            "+t._s(e.title)+"\n          ")])})),0)]),t._v(" "),n("SvgIcon",{directives:[{name:"track",rawName:"v-track:module:TopLocateToMore",value:{trg:"manual"},expression:"{\n          trg: 'manual'\n        }",arg:"module:TopLocateToMore"}],staticClass:"nav-arrow",attrs:{"data-spm-virtual-item":"__virtual",name:"mobile-activity#icon_navigation_chevron_down_m",width:"16",height:"16"},nativeOn:{click:function(e){return t.showNavLayer(e)}}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.layerVisible,expression:"layerVisible"}],staticClass:"nav-layer"},[n("div",{staticClass:"nav-mask",on:{click:t.hideLayer}}),t._v(" "),n("div",{staticClass:"nav-layer-list"},t._l(t.navList,(function(e,o){return n("div",{key:e.title+"_"+o,staticClass:"nav-layer-item",class:{active:o===t.activeIndex},on:{click:function(n){return t.handleNavClick(e,o)}}},[t._v("\n          "+t._s(e.title)+"\n        ")])})),0)])])],2)}),[],!1,null,"8a7a8fce",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(30),n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(213),y=n.n(h),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).throttleScroll=y()((function(){t.initScroll(),t.setNavTopDistances()}),150),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setNavTopDistances",value:function(){var t,e=(null===(t=document.querySelector(".layout-default_header"))||void 0===t?void 0:t.offsetHeight)||60;this.style={top:e+"px"}}},{key:"handleTabClick",value:function(t){var e=this.navList.find((function(e){return e.name===t}));this.autoScroll=!1,e&&this.debounceClickNav(e)}},{key:"getSpm",value:function(t){return"TopLocateTo_LIST?ext=".concat(JSON.stringify({Type:t.title}),"&trg=manual")}},{key:"beforeDestroy",value:function(){window.document.removeEventListener("scroll",this.throttleScroll)}},{key:"mounted",value:function(){window.document.addEventListener("scroll",this.throttleScroll)}}]),e}(n(1856).a),O=k=m([f.Component],k),_=(n(2147),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.navShow,expression:"navShow"}],ref:"activityTopNavSections",staticClass:"page-activity-top-nav-sections",style:t.style},[n("div",{staticClass:"page-activity-top-nav-sections-nav-list"},[n("klk-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.navList,(function(e,o){return n("klk-tab-pane",{key:o,attrs:{"data-spm-module":t.getSpm(e),"data-spm-virtual-item":"__virtual",name:e.name,label:e.title}})})),1)],1)])}),[],!1,null,"1c2cd3ce",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"drawerVisible",get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"title",void 0),h([Object(f.Prop)()],y.prototype,"drawerWidth",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"visible",void 0);var m=y=h([f.Component],y),k=(n(2149),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-drawer",t._g({staticClass:"dynamic-drawer",attrs:{visible:t.drawerVisible,direction:"right"},on:{"update:visible":function(e){t.drawerVisible=e}}},t.$attrs),[n("div",{staticClass:"dynamic-drawer-header"},[n("h3",[t._v(t._s(t.title))]),t._v(" "),n("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.drawerVisible=!1}}},[n("SvgIcon",{attrs:{name:"desktop-common#icon-close-s",size:"20"}})],1)]),t._v(" "),n("div",{staticClass:"dynamic-drawer-content",style:{width:t.drawerWidth}},[t._t("default")],2)])}),[],!1,null,"5fe51fb4",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1923),y=n(1426),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"maxHeight",get:function(){return"mobile"===this.platform?136:120}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.Prop)({type:Array,default:function(){return[]}})],k.prototype,"components",void 0),m([Object(f.Prop)({type:String,default:""})],k.prototype,"title",void 0),m([Object(f.Prop)()],k.prototype,"activityId",void 0);var O=k=m([Object(f.Component)({components:{SeeMore:h.default,DynamicComponent:y.a}})],k),_=(n(2159),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[t._v(t._s(t.title))]),t._v(" "),n("div",[n("SeeMore",{attrs:{"max-height":t.maxHeight,platform:t.platform,title:t.title,"activity-id":t.activityId}},[n("DynamicComponent",{attrs:{components:t.components,"base-width":670}})],1)],1)])}),[],!1,null,"74e4d560",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(881),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.showButton=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){t&&this.$inhouse.track("pageview","#pop-content-wrap__page",{force:!0})}},{key:"bindIHTrack",value:function(){return h.a.apply(void 0,arguments)}},{key:"changeVisible",value:function(){this.isMobile&&(this.visible=!0)}},{key:"close",value:function(){this.visible=!1}},{key:"calcButtonVisible",value:function(){var t=this.contents.offsetHeight;this.showButton=t>=this.maxHeight}},{key:"mounted",value:function(){this.calcButtonVisible()}},{key:"contentStyle",get:function(){return{maxHeight:this.maxHeight+"px"}}},{key:"popContentStyle",get:function(){return this.isMobile?{minHeight:"40vh"}:{minHeight:"40vh",paddingBottom:"40px"}}},{key:"isMobile",get:function(){return"mobile"===this.platform}},{key:"pageSpm",get:function(){var t=this.activityId;return"WhatToExpect?oid=activity_".concat(t,"&trg=manual")}}]),e}(f.Vue);y([Object(f.Prop)({type:Number,default:136})],m.prototype,"maxHeight",void 0),y([Object(f.Prop)({type:String,default:"mobile"})],m.prototype,"platform",void 0),y([Object(f.Prop)({type:String,default:""})],m.prototype,"title",void 0),y([Object(f.Prop)()],m.prototype,"activityId",void 0),y([Object(f.Ref)()],m.prototype,"contents",void 0),y([Object(f.Watch)("visible")],m.prototype,"visibleChange",null);var k=m=y([f.Component],m),O=(n(2150),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"see-more-wrap"},[n("div",{ref:"contents",staticClass:"content-wrapper",style:t.contentStyle,on:{click:t.changeVisible}},[t._t("default")],2),t._v(" "),t.showButton?n("div",{staticClass:"line-gradient",on:{click:function(e){return e.stopPropagation(),t.changeVisible(e)}}}):t._e(),t._v(" "),t.showButton?n("div",t._b({staticClass:"more-btn",class:[t.platform],on:{click:function(e){e.stopPropagation(),t.visible=!0}}},"div",t.bindIHTrack({type:"module",spm:"SeeMoreWTE"}),!1),[t._v("\n      "+t._s(t.$t("13126"))+"\n    ")]):t._e()]),t._v(" "),n(t.isMobile?"klk-bottom-sheet":"klk-modal",{tag:"component",staticClass:"pop-wrapper",attrs:{visible:t.visible,open:t.visible,width:"750px",title:t.title,scrollable:!0,"overlay-closable":!0,closable:!0,"show-default-footer":!1,"show-close":"",size:"large"},on:{"update:visible":function(e){t.visible=e},"update:open":function(e){t.visible=e},close:t.close}},[n("div",{style:t.popContentStyle,attrs:{id:"pop-content-wrap__page","data-spm-page":t.pageSpm}},[t._t("default")],2)])],1)}),[],!1,null,"8874b676",null);e.default=component.exports},function(t,e,n){"use strict";n(22),n(8),n(12),n(61),n(14),n(11);var o=n(13),r=n(0),c=(n(70),n(25)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(7),O=n.n(k),_=n(10),j=n.n(_),w=n(85),P=n(16);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).isSelect=!1,t.valid=!1,t.defaultTime=-1,t.selectedTime=null,t.timeList=[],t.formatLegendsList=[],t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"packagePriceSchedulesChange",value:function(){this.timeListChange()}},{key:"packageIdChange",value:function(){this.timeListChange()}},{key:"packageSelectedDateChange",value:function(){this.timeListChange()}},{key:"timeListChange",value:function(){var t=this;this.timeList=this.getTimeList();var e=this.timeList;this.valid=!1,this.$nextTick((function(){var n;if(j()(e))t.handleSelect();else{if(1===e.length){var time=Object(c.a)(e,1)[0],o=O()(time.date,"YYYY-MM-DD hh:mm:ss");return t.handleSelect(time),t.defaultTime=t.timeList[0].arrangement_id,void(t.valid=!(0===o.hour()&&0===o.minute()&&0===o.second()))}if(t.isNewOpenTicket){var r=e.find((function(t){return!t.disabled}));return t.handleSelect(r),t.defaultTime=(null===(n=r)||void 0===n?void 0:n.arrangement_id)||-1,void(t.valid=!1)}t.handleSelect(),t.valid=!0}}))}},{key:"getTimeList",value:function(){var t,e=this;if(!this.packageId||!this.packagePriceSchedules)return[];var n=(null===(t=this.packagePriceSchedules)||void 0===t?void 0:t.reduce((function(t,e){return S({},t,Object(r.a)({},e.date,e))}),{}))[this.packageSelectedDate];return(n&&n.time_slots||[]).reduce((function(t,n){var r=e.isDisabled(n);return r?t:[].concat(Object(o.a)(t),[S({},n,{disabled:r,date:"".concat(e.packageSelectedDate," ").concat(n.time_slot)})])}),[])}},{key:"optionLabel",value:function(time){var t,e=this.setTimeFormat(time.date),p=null===(t=time)||void 0===t?void 0:t.selling_price,n=" ".concat(w.b[this.klook.currency]," ").concat(Object(P.y)(void 0===p?"":p));return time.disabled?" ".concat(e," ").concat(this.$t("global.sold_out")):"".concat(e).concat(this.priceVisible?n:"")}},{key:"formatOptionLabel",value:function(time){var t,e,n,o,r=this.optionLabel(time);if(!time.disabled){var c=(null===(t=time)||void 0===t?void 0:t.legend_keys)||[];if((null===(e=c)||void 0===e?void 0:e.length)&&this.legendsMap){var l=!0,d=!1,v=void 0;try{for(var f,h=c[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var y=f.value;this.legendsMap[y]&&(r+=" ".concat(null===(n=this.legendsMap[y])||void 0===n?void 0:n.text),!(null===(o=this.formatLegendsList)||void 0===o?void 0:o.length)&&this.formatLegendsList.push(this.legendsMap[y]))}}catch(t){d=!0,v=t}finally{try{l||null==h.return||h.return()}finally{if(d)throw v}}}}return r}},{key:"setTimeFormat",value:function(t){return O()(t).format(this.timeFormatString)}},{key:"handleSelect",value:function(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!time.arrangement_id)return this.isSelect=!1,this.$emit("resetPackageTime"),null;this.setPackageTime(time),this.isSelect=!!time.date}},{key:"isDisabled",value:function(time){var t,e=time.stock;return!e||e<(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.min_pax)}},{key:"setPackageTime",value:function(data){var t;this.selectedTime=S({},data,{arrangementId:data.arrangement_id||data.arrangementId,stock:data.stock,date:data.date,maxPurchased:Math.min(data.stock,null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.max_pax)}),this.$emit("setPackageTime",this.selectedTime)}},{key:"spmTime",get:function(){var t;return(null===(t=this.selectedTime)||void 0===t?void 0:t.date)?this.setTimeFormat(this.selectedTime.date):"-"}},{key:"legendsMap",get:function(){var t;return(null===(t=this.legends)||void 0===t?void 0:t.length)?this.legends.reduce((function(p,t){var e=t.key,n=t.color,text=t.text;return p[e]={color:n,key:e,text:text},p}),{}):null}}]),e}(m.Vue);D([m.State],x.prototype,"klook",void 0),D([Object(m.Prop)()],x.prototype,"packageSelectedDate",void 0),D([Object(m.Prop)()],x.prototype,"packagePriceSchedules",void 0),D([Object(m.Prop)()],x.prototype,"isNewOpenTicket",void 0),D([Object(m.Prop)()],x.prototype,"packageId",void 0),D([Object(m.Prop)()],x.prototype,"currentSelectedPackage",void 0),D([Object(m.Prop)({default:!0})],x.prototype,"priceVisible",void 0),D([Object(m.Prop)({default:""})],x.prototype,"titleText",void 0),D([Object(m.Prop)({default:function(){return[]}})],x.prototype,"legends",void 0),D([m.Getter],x.prototype,"timeFormatString",void 0),D([Object(m.Watch)("packagePriceSchedules")],x.prototype,"packagePriceSchedulesChange",null),D([Object(m.Watch)("packageId")],x.prototype,"packageIdChange",null),D([Object(m.Watch)("packageSelectedDate")],x.prototype,"packageSelectedDateChange",null);var T=x=D([m.Component],x),I=(n(2169),n(43)),component=Object(I.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"package-options-time"},[n("p",{staticClass:"package-detail-content-title"},[t._v("\n    "+t._s(t.titleText||t.$t("activity.booking.options.select.time"))+"\n  ")]),t._v(" "),n("klk-select",{class:t.isSelect?"selected":"",attrs:{id:"desktop-package-time-picker",value:t.defaultTime,placeholder:t.$t("global.select.palceholder"),"max-height":300}},t._l(t.timeList,(function(time){return n("klk-option",{directives:[{name:"track",rawName:"v-track:module:SelectTime",value:{ext:{Time:t.spmTime},trg:"manual"},expression:"{\n        ext: {\n          Time: spmTime\n        },\n        trg: 'manual'\n      }",arg:"module:SelectTime"}],key:time.arrangementId||time.arrangement_id,attrs:{value:time.arrangementId||time.arrangement_id,label:t.formatOptionLabel(time),disabled:time.disabled,"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.handleSelect(time)}}},[n("div",{staticClass:"select-option-custom"},[n("span",[t._v(t._s(t.optionLabel(time)))]),t._v(" "),time.legend_keys&&time.legend_keys.length?n("span",{staticClass:"append-box"},t._l(t.formatLegendsList,(function(e,i){return n("span",{key:i,staticClass:"text",style:{color:e.color}},[t._v("\n            "+t._s(e.text)+"\n          ")])})),0):t._e()])])})),1)],1):t._e()}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(n(1165).a),y=h=f([v.Component],h),m=(n(2170),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.tips,expression:"tips"}],staticClass:"booking-options-units-tips"},[e("span",{staticClass:"booking-options-units-tips_content",domProps:{innerHTML:this._s(this.tips)}})])}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(11),n(8),n(12);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(10),y=n.n(h),m=n(884),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).width=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getLogoProps",value:function(){var t=this;this.$nextTick((function(){var e=t.$el.getBoundingClientRect().width,n=t.isDesktop?616:document.documentElement.clientWidth-40;t.width=(e||n)/16*3}))}},{key:"mounted",value:function(){this.getLogoProps()}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"noscriptHtml",get:function(){var t=this,e="";return y()(this.styles)||(e=Object.keys(this.styles).reduce((function(e,n){return"".concat(e).concat(n,": ").concat(t.styles[n],";")}),"")),'<noscript>\n      <img class="seo-lazy-image" src="'.concat(this.url,'" alt="').concat(this.alt,'" style="').concat(e,'">\n    </noscript>')}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"url",void 0),k([Object(f.Prop)({type:String,default:"activity-image"})],O.prototype,"alt",void 0),k([Object(f.Prop)()],O.prototype,"styles",void 0);var _=O=k([Object(f.Component)({components:{Logo:m.a}})],O),j=(n(2148),n(43)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-container"},[e("Logo",{attrs:{ratio:"16:9",width:this.width}}),this._v(" "),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.url,expression:"url"}],staticClass:"seo-lazy-image",style:this.styles,attrs:{alt:this.alt,ratio:"16:9"}}),this._v(" "),this._m(0)],1)}),[function(){var t=this.$createElement;return(this._self._c||t)("div",{domProps:{innerHTML:this._s(this.noscriptHtml)}})}],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(920),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"cClass",get:function(){return["dynamic-icons","".concat("dynamic-icons","_").concat(this.platform)]}}]),e}(f.Vue);y([Object(f.State)((function(t){return t.klook.platform}))],m.prototype,"platform",void 0),y([Object(f.Prop)()],m.prototype,"icons",void 0),y([Object(f.Prop)({default:!0})],m.prototype,"availableDateVisible",void 0);var k=m=y([Object(f.Component)({components:{ActivityBookingStartDate:h.a}})],m),O=(n(2152),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.cClass},[t._l(t.icons,(function(e,o){return["available_date"!==e.icon_type||t.availableDateVisible?n("div",{key:o,staticClass:"activity-icons_item"},[n("img",{staticClass:"activity-icon",attrs:{src:e.icon_url,alt:"activity-icon"}}),t._v(" "),"available_date"===e.icon_type?n("ActivityBookingStartDate",{staticClass:"booking-start-date",attrs:{"start-time":e.data.time}}):n("span",{staticClass:"activity-icons_desc"},[t._v("\n        "+t._s(e.data.icon_desc)+"\n      ")])],1):t._e()]}))],2)}),[],!1,null,"f657a0a8",null);e.a=component.exports},function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.maxHeight=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"heightChange",value:function(t){this.maxHeight=t}},{key:"viewMore",value:function(){this.visible=!1,this.maxHeight=this.container.scrollHeight}},{key:"mounted",value:function(){var t=this.container.scrollHeight;(t>this.container.offsetHeight||t===Number(this.maxHeight))&&(this.visible=!0)}},{key:"styles",get:function(){return{maxHeight:this.maxHeight+"px"}}}]),e}(f.Vue);h([Object(f.Ref)()],y.prototype,"container",void 0),h([Object(f.Prop)({default:0})],y.prototype,"height",void 0),h([Object(f.Prop)({default:""})],y.prototype,"content",void 0),h([Object(f.Watch)("height",{immediate:!0})],y.prototype,"heightChange",null);var m=y=h([f.Component],y),k=(n(1902),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"activity-view-more",style:t.styles},[t._t("default",[n("p",{staticClass:"content"},[t._v("\n      "+t._s(t.content)+"\n    ")])]),t._v(" "),t.visible?n("div",{staticClass:"view-more"},[n("div",{staticClass:"cover"}),t._v(" "),n("div",{staticClass:"title",on:{click:t.viewMore}},[t._v("\n      "+t._s(t.$t("faq.viewMore"))+"\n    ")])]):t._e()],2)}),[],!1,null,"f1c85090",null);e.a=component.exports},,,function(t,e,n){"use strict";n(22),n(8),n(12);var o=n(0),r=(n(61),n(14),n(11),n(37),n(25)),c=n(13),l=(n(20),n(27),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).popVisible=!1,t.popSelected=[],t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"computeNum",value:function(t){return"function"==typeof this.getNum?this.getNum(t,this.packages):0}},{key:"getQuickFilterItemSpm",value:function(t,e,n){var o={SectionType:this.selected.includes(t.selectValue)?"Select":"Unselect"};return"EasyFilter_LIST?oid=tag_".concat(t.key,"&idx=").concat(n,"&len=").concat(e,"&ext=").concat(encodeURIComponent(JSON.stringify(o)))}},{key:"baseSelect",value:function(t,e){var n=Object(c.a)(t);if(n.includes(e))return n.filter((function(t){return t!==e}));var o=e.split("::")||[],l=Object(r.a)(o,3),d=l[0];l[1];return"single"===l[2]&&(n=n.filter((function(t){var e;return(null===(e=t.split("::"))||void 0===e?void 0:e[0])!==d}))),n.push(e),n}},{key:"handleSelect",value:function(t){this.$emit("update:selected",this.baseSelect(this.selected,t)),this.$emit("change")}},{key:"handlePopSelect",value:function(t){this.popSelected=this.baseSelect(this.popSelected,t)}},{key:"handleSelectedClear",value:function(){this.selected=[],this.$emit("update:selected",[])}},{key:"handlePopClear",value:function(){this.popSelected=[]}},{key:"handlePopConfirm",value:function(){var t,e;(null===(t=this.heroFilterPopConfirmRef)||void 0===t?void 0:t.$el)&&this.$inhouse.track("action",null===(e=this.heroFilterPopConfirmRef)||void 0===e?void 0:e.$el,{force:!0}),this.$emit("update:selected",Object(c.a)(this.popSelected)),this.$emit("change"),this.popVisible=!1}},{key:"openPop",value:function(){var t,e=this;this.popSelected=Object(c.a)(this.selected),this.popVisible=!0,(null===(t=this.heroFilterPopRef)||void 0===t?void 0:t.$el)&&setTimeout((function(){return e.$inhouse.track("pageview",e.heroFilterPopRef.$el,{force:!0})}),100)}},{key:"quickFilters",get:function(){var t;return((null===(t=this.filterData)||void 0===t?void 0:t.quick_filters)||[]).reduce((function(t,e){var n,o,r=!0,c=!1,l=void 0;try{for(var d,v=((null===(o=null===(n=e)||void 0===n?void 0:n.data)||void 0===o?void 0:o.options)||[])[Symbol.iterator]();!(r=(d=v.next()).done);r=!0){var f=d.value;t.push(O({},f,{selectValue:"".concat(e.key,"::").concat(f.key,"::").concat(e.type)}))}}catch(t){c=!0,l=t}finally{try{r||null==v.return||v.return()}finally{if(c)throw l}}return t}),[])}},{key:"detailFilters",get:function(){var t;return((null===(t=this.filterData)||void 0===t?void 0:t.detail_filters)||[]).reduce((function(t,e){var n,o,r;return(null===(r=null===(o=null===(n=e)||void 0===n?void 0:n.data)||void 0===o?void 0:o.options)||void 0===r?void 0:r.length)&&t.push(O({},e,{data:O({},e.data,{options:e.data.options.map((function(t){return O({},t,{selectValue:"".concat(e.key,"::").concat(t.key,"::").concat(e.type)})}))})})),t}),[])}},{key:"selectedText",get:function(){var t;return((null===(t=this.selected)||void 0===t?void 0:t.length)||0)>0?" · ".concat(this.selected.length):""}},{key:"popConfirmText",get:function(){return this.$t("82863",{num:this.popNum})}},{key:"popNum",get:function(){return"function"==typeof this.getNum?this.getNum(this.popSelected,this.packages):0}},{key:"selectedKeys",get:function(){return this.popSelected.map((function(t){var e;return null===(e=t.split("::"))||void 0===e?void 0:e[1]}))}},{key:"filterTotal",get:function(){return this.detailFilters.reduce((function(t,e){var n,o,r;return t+((null===(r=null===(o=null===(n=e)||void 0===n?void 0:n.data)||void 0===o?void 0:o.options)||void 0===r?void 0:r.length)||0)}),0)}},{key:"filterAmount",get:function(){return"".concat(this.popSelected.length,"/").concat(this.filterTotal)}},{key:"resultPackageAmount",get:function(){return"".concat(this.popNum,"/").concat(this.packagesTotal)}}]),e}(m.Vue);_([Object(m.Prop)()],j.prototype,"filterData",void 0),_([Object(m.Prop)({default:function(){return[]}})],j.prototype,"selected",void 0),_([Object(m.Prop)()],j.prototype,"getNum",void 0),_([Object(m.Prop)()],j.prototype,"activityId",void 0),_([Object(m.Prop)()],j.prototype,"packagesTotal",void 0),_([Object(m.Prop)({type:Array,default:function(){return[]}})],j.prototype,"packages",void 0),_([Object(m.Ref)()],j.prototype,"heroFilterPopRef",void 0),_([Object(m.Ref)()],j.prototype,"heroFilterPopConfirmRef",void 0),j=_([m.Component],j),e.a=j},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-triangle-down",!1,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M22.5409 31.4437L10.5787 18.6839C9.97995 18.0453 10.4328 17 11.3082 17L36.6918 17C37.5672 17 38.0201 18.0453 37.4213 18.6839L25.4591 31.4437C24.6689 32.2865 23.3311 32.2865 22.5409 31.4437Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}})]));e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-destination",!1,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M42 21.0441C42 32.1335 30.6662 40.7078 25.9855 43.776C24.7669 44.5748 23.2331 44.5748 22.0145 43.776C17.3338 40.7078 6 32.1335 6 21.0441C6 11.0786 14.0589 3 24 3C33.9411 3 42 11.0786 42 21.0441Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth}}),t("circle",{attrs:{cx:"24",cy:"20.5",r:"6.5",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth}})]));e.default=o},,,function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1465),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"styles",get:function(){var t={};return this.width&&(t.width=this.width),this.height&&(t.height="".concat(this.height,"px")),this.gap&&(t.marginBottom="".concat(this.gap,"px")),t}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"width",void 0),y([Object(f.Prop)()],m.prototype,"gap",void 0),y([Object(f.Prop)({default:14,type:[Number,String]})],m.prototype,"height",void 0);var k=m=y([Object(f.Component)({components:{ActivitySkeleton:h.a}})],m),O=(n(1957),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement;return(this._self._c||t)("ActivitySkeleton",{staticClass:"home-card-skeleton",style:this.styles})}),[],!1,null,"09c18ef8",null);e.a=component.exports},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n(434)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";var o=n(1204);n.n(o).a},function(t,e,n){"use strict";var o=n(1205);n.n(o).a},function(t,e,n){"use strict";var o=n(1206);n.n(o).a},function(t,e,n){"use strict";var o=n(1207);n.n(o).a},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12),n(70);var o=n(13),r=n(0),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(132),k=n.n(m),O=n(10),_=n.n(O),j=n(212);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).navNameList=[],t.activeSection=null,t.navList=[],t.sections={},t.handleNavScroll=k()(t.getActiveSection,300),t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"created",value:function(){var t=this;this.$root.$on("nav.addSection",(function(e,section){var n=section.$props,title=n&&n.title;t.sections=P({},t.sections,Object(r.a)({},e,{name:e,title:title,el:section.$el})),t.navNameList=[].concat(Object(o.a)(t.navNameList),[e])})),this.$root.$on("nav.delSection",(function(e){t.navNameList=t.navNameList.filter((function(t){return t!==e}))}))}},{key:"getCurrentPosition",value:function(){var t=(this.$refs.nav||this.$el).getBoundingClientRect();return t.top+t.height}},{key:"getLastNodeBottom",value:function(){var t=this.navList[this.navList.length-1],e=t&&t.el;return e?Object(j.c)(e)+e.getBoundingClientRect().height:0}},{key:"getActiveSection",value:function(){var t=this.getCurrentPosition(),e=this.navList[0]&&this.navList[0].el,n=Object(j.c)(e),o=this.getLastNodeBottom(),r=Object(j.h)();this.activeSection=r>=n-t&&r<o-t?this.reverseNavList.find((function(e){return Object(j.h)()>=Object(j.c)(e.el)-t})):null}},{key:"navChange",value:function(t){var e=this;_()(t)||(this.navList=this.navNameList.map((function(t,n){return P({index:n},e.sections[t])})))}},{key:"mounted",value:function(){document.addEventListener("scroll",this.handleNavScroll),this.handleNavScroll()}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleNavScroll)}},{key:"reverseNavList",get:function(){return Object(o.a)(this.navList).reverse()}}]),e}(y.Vue);C([Object(y.Watch)("navNameList")],S.prototype,"navChange",null),S=C([y.Component],S),e.a=S},function(t,e,n){"use strict";function o(t,e){if(e){if(!t)return e.setTranslate(0);var n=e.slides;if(0!==n.length){var o=n[t],r=n[n.length-1],c=e.$el[0].offsetWidth,l=r.offsetLeft+r.offsetWidth;if(!(c>=l)){var d=o.offsetLeft-c/2+o.offsetWidth/2,v=d+c-l;d<0&&(d=0),v>0&&(d=d-v+16),e.setTranslate(-d)}}}}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var o=n(1208);n.n(o).a},function(t,e,n){"use strict";var o=n(1209);n.n(o).a},function(t,e,n){"use strict";var o=n(1210);n.n(o).a},function(t,e,n){"use strict";var o=n(1211);n.n(o).a},function(t,e,n){"use strict";var o=n(1212);n.n(o).a},function(t,e,n){"use strict";var o=n(1218);n.n(o).a},function(t,e,n){"use strict";var o=n(1219);n.n(o).a},function(t,e,n){var o=n(433),r=n(1968);function c(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}c.prototype=o(r.prototype),c.prototype.constructor=c,t.exports=c},function(t,e){t.exports=function(){}},function(t,e,n){var o=n(433),r=n(1968),c=4294967295;function l(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}l.prototype=o(r.prototype),l.prototype.constructor=l,t.exports=l},function(t,e,n){"use strict";var o=n(1225);n.n(o).a},function(t,e,n){"use strict";var o=n(1228);n.n(o).a},function(t,e,n){"use strict";var o=n(1229);n.n(o).a},function(t,e,n){"use strict";var o=n(1230);n.n(o).a},,,,,,,function(t,e,n){"use strict";var o=n(1231);n.n(o).a},function(t,e,n){"use strict";var o=n(1232);n.n(o).a},,,function(t,e,n){"use strict";var o=n(1233);n.n(o).a},function(t,e,n){"use strict";var o=n(1234);n.n(o).a},function(t,e,n){"use strict";var o=n(1235);n.n(o).a},function(t,e,n){"use strict";var o=n(1236);n.n(o).a},function(t,e,n){"use strict";var o=n(1237);n.n(o).a},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(131),y=n(212),m=n(16),k=n(882),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).throttleHandlerRightPriceVisible=Object(h.throttle)(t.handlerRightPriceVisible,60),t.isFixedFlag=!1,t.hidePriceFlag=!1,t.topHeight=132,t.isDelayFlag=!1,t.nodeOldHeight=0,t.hideBaseNode=!1,t.sectionEls=["#package_option_card_sku_with_detail","#package_option",".js-spec-type-pkg-detail","#recommend_activity","#theme_list"],t.isInitFirstFlag=!1,t.rightPriceReady=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handlerRightPriceVisible",value:function(t){var e=this;(t||{isHack:!1,from:""}).isHack&&this.hackPackageOptions();var n=this.sectionEls,o=!1;for(var r in n)if(o=this.handlerScrollFn(n[r]))break;var c=this.sectionEls.every((function(t){return e.handlerRightPriceStatue(t)}));k.a.$emit("updateRightPriceStatus2bus",c?"default":""),this.hidePriceFlag=o}},{key:"handlerRightPriceStatue",value:function(t){var e=document.querySelector(".js-scroll-right-price-wrap"),n=document.querySelector(t);if(!e||!n)return!0;var o=this.topHeight,r=Object(y.h)(),c=document.querySelector(".js-scroll-right-price"),l=parseInt(c.getAttribute("data-init-height"))||0,d=Object(y.c)(n),v=n.querySelector(".section-header_top");return r+o+l<(Object(y.c)(v)||d)}},{key:"handlerScrollFn",value:function(t){var e=Object(y.h)(),n=this.topHeight;try{var o=document.querySelector(".js-scroll-right-price-wrap");if(!o)return!1;var r=Object(y.c)(o),c=e+n>r+24;this.isFixedFlag=c;var l=document.querySelector(".js-scroll-right-price"),d=parseInt(Object(m.C)(l,"height"))||0||this.nodeOldHeight;this.nodeOldHeight=d;var v=document.querySelector(t);if(!v)return!1;var f=Object(y.c)(v),h=parseInt(Object(m.C)(v,"height"))||0,k=v.querySelector(".section-header_top"),O=Object(y.c)(k)||f;return(c?e+n+d>O:r+d>O)&&e+n-h<f}catch(t){}return!1}},{key:"hackPackageOptions",value:function(){var t=document.querySelector(".js-scroll-right-price-wrap");if(!t)return!1;var e=document.querySelector("#package_option");if(!e)return!1;var n=Object(y.c)(t)+(parseInt(Object(m.C)(t,"height"))||235)-Object(y.c)(e);n&&(e.style.paddingTop="".concat(n,"px"))}},{key:"mounted",value:function(){document.addEventListener("scroll",this.throttleHandlerRightPriceVisible),k.a.$off("setIsDelayFlag2bus",this.setIsDelayFlag2bus).$on("setIsDelayFlag2bus",this.setIsDelayFlag2bus),k.a.$off("throttleHandlerRightPriceVisible2bus",this.throttleHandlerRightPriceVisible).$on("throttleHandlerRightPriceVisible2bus",this.throttleHandlerRightPriceVisible),this.throttleHandlerRightPriceVisible()}},{key:"setIsDelayFlag2bus",value:function(t){switch((t||{}).from){case"right_price_updated":this.rightPriceReady=!0,["#package_option_card_sku_with_detail","#package_option"].every((function(t){return!document.querySelector(t)}))&&(this.isDelayFlag=!0);break;default:this.isDelayFlag=!0}this.throttleHandlerRightPriceVisible(t)}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.throttleHandlerRightPriceVisible),k.a.$off("setIsDelayFlag2bus",this.setIsDelayFlag2bus),k.a.$off("throttleHandlerRightPriceVisible2bus",this.throttleHandlerRightPriceVisible)}},{key:"calcFixedStyle",get:function(){var t=this.topHeight,e=this.isFixedFlag,n=this.hidePriceFlag,o=this.isDelayFlag;return e?{visibility:!o||n?"hidden":"visible",top:"".concat(t,"px"),position:"fixed"}:{visibility:!o||n?"hidden":"visible",top:"24px",position:"relative"}}}]),e}(f.Vue);_=O([f.Component],_),e.a=_},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(880),m=n(272),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.valid){t.next=6;break}return t.next=3,this.hideSection;case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.hideSection();case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"activityFaq",get:function(){var t,e,n=((null===(e=null===(t=this.businessData)||void 0===t?void 0:t.activity_faq)||void 0===e?void 0:e.faq)||[]).map((function(t){return t.question&&t.answer?"## "+t.question+" \n\n "+t.answer:""})).join("\n\n");return Object(m.a)(n)}},{key:"helpCenter",get:function(){return this.businessData.help_center}},{key:"activityFaqVisible",get:function(){var t,e;return null===(e=null===(t=this.businessData)||void 0===t?void 0:t.activity_faq)||void 0===e?void 0:e.faq}},{key:"helpCenterVisible",get:function(){var t;return(null===(t=this.klook.utilConfig)||void 0===t?void 0:t.faq_klook)&&this.helpCenter}},{key:"valid",get:function(){return this.helpCenterVisible||this.activityFaq}}]),e}(y.a);k([h.State],O.prototype,"klook",void 0),O=k([h.Component],O),e.a=O},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(880),m=n(3),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).lineUpInfo={key:"",flash_sale_status:{}},t.timeCount="",t.canJoin=!1,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getLineUpInfo",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.businessData.key||this.lineUpInfo.key||"",n=this.activityId,t.next=4,this.$axios.$get(m.a.getActivityLineInfo,{params:{activity_id:n,key:e}});case 4:if((o=t.sent).success){t.next=7;break}return t.abrupt("return");case 7:return r=o.result,"1"===(window.sessionStorage.getItem("lineUpTips")||"0")&&this.$toast({message:this.$t("78623"),duration:3e3}),window.sessionStorage.removeItem("lineUpTips"),c=r.next_fresh_time||60,clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){l.getLineUpInfo()}),1e3*c),this.lineUpInfo=r,this.timeCountDown(),t.abrupt("return",o);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"beforeDestroy",value:function(){clearInterval(this.timer),clearTimeout(this.updateTimer)}},{key:"created",value:function(){var t=this;this.$nextTick((function(){t.getLineUpInfo()}))}},{key:"reload",value:function(){this.$router.go(0)}},{key:"timeCountDown",value:function(){var t=this,e=this.lineUpInfo.current_time,n=this.getEndTime();if(n){var o=new Date(n).getTime(),r=new Date(e).getTime(),c=parseInt((o-r)/1e3+"");clearInterval(this.timer),this.timer=setInterval((function(){if(c--,t.timeCount=t.getTimeString(c),c<20&&clearTimeout(t.updateTimer),c<=0){if(clearInterval(t.timer),1===t.userStatus)return void(t.canJoin=!0);if(2===t.userStatus)return t.reload(),void window.sessionStorage.setItem("lineUpTips","1");if(3===t.userStatus){if(t.$toast({message:t.$t("78626"),duration:3e3}),!t.basicData.is_line_page)return void setTimeout((function(){t.reload()}),3e3);t.lineUpInfo.flash_sale_status.user_status=1,t.canJoin=!0}}}),1e3)}}},{key:"getEndTime",value:function(){var t=this.lineUpInfo,e=t.start_time,n=t.estimated_effective_time,o=t.flash_sale_status.user_status,r=t.expired_time;switch(o){case 1:return e;case 2:return n;case 3:return r;default:return""}}},{key:"getTimeString",value:function(time){var t=this.getString(parseInt(String(time/3600))),e=time%3600,n=this.getString(parseInt(String(e/60))),s=this.getString(parseInt(String(e%60)));return this.basicData.is_line_page&&3!==this.userStatus?"".concat(t,":").concat(n,":").concat(s):"".concat(n,":").concat(s)}},{key:"getString",value:function(t){var e=String(t);return e[1]?e:"0".concat(e)}},{key:"activityId",get:function(){return this.basicData.activity_id}},{key:"userStatus",get:function(){return this.lineUpInfo.flash_sale_status.user_status}}]),e}(y.a);k([Object(h.Prop)()],O.prototype,"basicData",void 0),O=k([Object(h.Component)({})],O),e.a=O},function(t,e,n){t.exports=function(){"use strict";return function(t,e){e.prototype.weekday=function(t){var e=this.$locale().weekStart||0,i=this.$W,n=(i<e?i+7:i)-e;return this.$utils().u(t)?n:this.subtract(n,"day").add(t,"day")}}}()},function(t,e,n){"use strict";var o=n(1238);n.n(o).a},function(t,e,n){"use strict";var o=n(1239);n.n(o).a},function(t,e,n){"use strict";var o=n(1240);n.n(o).a},function(t,e,n){"use strict";var o=n(1241);n.n(o).a},function(t,e,n){"use strict";n(22),n(8),n(12);var o=n(13),r=(n(70),n(30),n(20),n(27),n(61),n(14),n(11),n(0)),c=(n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(3);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=null,P=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).state="success",t.unavailablePackageList=[],t.availablePackageList=[],t.selectedPackageList=[],t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"dateChange",value:function(){this.getPackageInfo()}},{key:"packagesWithSkuChange",value:function(t){Array.isArray(t)&&this.initPackages(t)}},{key:"getPackageInfo",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state="fetching",w&&w.cancel("cancel"),w=this.$axios.CancelToken.source(),t.prev=3,t.next=6,this.$axios.$post(k.a.activityPackageSkuInfoList,{preview:this.preview?1:0,date:this.date,items:this.itemParams},{cancelToken:null===(e=w)||void 0===e?void 0:e.token});case 6:if(!(r=t.sent).success){t.next=11;break}return this.$emit("updateSkuPackages",(null===(o=null===(n=r)||void 0===n?void 0:n.result)||void 0===o?void 0:o.packages_with_sku)||[]),this.state="success",t.abrupt("return");case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(3);case 15:this.state="failure";case 16:case"end":return t.stop()}}),t,this,[[3,13]])}))),function(){return n.apply(this,arguments)})},{key:"initPackages",value:function(t){var e,n,o,c=(t||[]).reduce((function(t,e){return _({},t,Object(r.a)({},e.package_id,e))}),{});this.availablePackageList=[],this.unavailablePackageList=[],this.selectedPackageList=[];var l=!0,d=!1,v=void 0;try{for(var f,h=this.packageList[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var y=f.value,m=c[y.package_id],k=this.formatPackage(y,m),O=this.packageId&&(null===(e=m)||void 0===e?void 0:e.package_id)===this.packageId,j=[2,3].includes(null===(o=null===(n=y)||void 0===n?void 0:n.publish_info)||void 0===o?void 0:o.publish_status),w=m||j,P=this.date&&j;O?this.selectedPackageList=this.selectedPackageList.concat(_({},k,{status:"selected"})):!P&&w?this.availablePackageList=this.availablePackageList.concat([_({},k,{status:"available"})]):this.unavailablePackageList=this.unavailablePackageList.concat(_({},k,{status:"unavailableDate"}))}}catch(t){d=!0,v=t}finally{try{l||null==h.return||h.return()}finally{if(d)throw v}}}},{key:"formatPackage",value:function(t,e){var n,o,r;if(!e)return t;var c=e.promotion_price;return _({},t,{credits:e.credits,units:this.formatUnits(e.units),promotion_price:c,original_selling_price:(null===(n=c)||void 0===n?void 0:n.original_selling_price)||"0",sell_price:(null===(o=c)||void 0===o?void 0:o.selling_price)||t.sell_price,discount_desc:(null===(r=c)||void 0===r?void 0:r.discount)?"".concat(c.discount,"% OFF"):t.discount_desc})}},{key:"formatUnits",value:function(t){return t.map((function(t){var e=t.price_min_pax||t.min_pax||0,n=t.required?e:0;return{price_show:t.price_show,redeem_status:t.redeem_status,product_tags:t.product_tags,priceMinPax:e,priceMaxPax:t.price_max_pax||t.max_pax||0,count:n,credits:t.credits,priceId:t.price_id||t.id,sellingPrice:t.selling_price||t.price||0,marketPrice:t.market_price||0,originalPrice:t.original_price||0,promotionDiscount:t.discount||0,priceName:t.price_name||t.name,isSoldOut:!!t.sold_out,isFree:0===parseFloat(t.selling_price||t.price),specPriceDesc:t.spec_price&&t.spec_price.desc,requireBuy:t.required&&e,requireMinPax:!t.required&&n>=e&&e>1,required:t.required,skuId:t.sku_id,srvSkuInfo:t.srv_sku_info,inventoryId:t.inventory_id,eventId:t.promotion_event?t.promotion_event.event_id:0,isInPromotion:!!t.promotion_event&&!!t.promotion_event.event_id,availableTime:t.available_time}}))}},{key:"packagesInSchedule",get:function(){var t,e,n=this;return(null===(e=null===(t=this.schedule)||void 0===t?void 0:t.stocks)||void 0===e?void 0:e.length)?this.schedule.stocks.reduce((function(t,e){var r=e.stock,c=e.package_id;if(0===r)return t;var l=n.packageList.find((function(p){return p.package_id===c}));return l?[].concat(Object(o.a)(t),[l]):t}),[]):this.packageList}},{key:"packageListSku",get:function(){return this.availablePackageList.concat(this.selectedPackageList).concat(this.unavailablePackageList)}},{key:"itemParams",get:function(){var t;return null===(t=this.packagesInSchedule)||void 0===t?void 0:t.map((function(t){return{actual_price:t.sell_price,package_id:t.package_id}}))}},{key:"filteredPackageIdList",get:function(){return this.packageList.map((function(t){return t.package_id}))}},{key:"filterPackagesWithSku",get:function(){var t=this,e=this.packageList;return this.availablePackageList.filter((function(e){return(t.filteredPackageIdList||[]).includes(e.package_id)})).filter((function(t){return e.find((function(e){return e.package_id===t.package_id}))}))}}]),e}(m.Vue);j([Object(m.Prop)({default:0})],P.prototype,"preview",void 0),j([Object(m.Prop)()],P.prototype,"date",void 0),j([Object(m.Prop)()],P.prototype,"packageList",void 0),j([Object(m.Prop)()],P.prototype,"packageId",void 0),j([Object(m.Prop)()],P.prototype,"packagesWithSku",void 0),j([Object(m.Prop)()],P.prototype,"schedule",void 0),j([Object(m.Watch)("date")],P.prototype,"dateChange",null),j([Object(m.Watch)("packagesWithSku",{immediate:!0})],P.prototype,"packagesWithSkuChange",null),P=j([Object(m.Component)({})],P),e.a=P},function(t,e,n){"use strict";var o=n(1242);n.n(o).a},function(t,e,n){"use strict";var o=n(1243);n.n(o).a},function(t,e,n){"use strict";n.r(e),n.d(e,"apiState",(function(){return r})),n.d(e,"getIsLoadingForApiState",(function(){return c})),n.d(e,"setApiState",(function(){return l})),n.d(e,"getApiDataHandler",(function(){return d})),n.d(e,"getApiState",(function(){return f}));n(23);var o=n(4),r=(n(20),n(27),{init:"",success:"success",failure:"failure",fetching:"fetching"}),c=function(t){return[r.success,r.failure].includes(t)},l=function(t,e,n){var o;if(t.state=e,null===(o=t)||void 0===o?void 0:o.reloadConfig){var c=t.reloadConfig,l=[r.success,r.failure].includes(e);n?setTimeout((function(){c.state=e,c.isReady=l}),c.delay||0):(c.state=e,c.isReady=l)}};function d(t,e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,c,d,v,h,y,m,k,O,_,j,w,P,C,S,D;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"==typeof(null===(c=null===(o=e)||void 0===o?void 0:o.$axios)||void 0===c?void 0:c.$get)){t.next=2;break}return t.abrupt("return");case 2:if(_=null,w=(j=n||{}).cancelTokenConfig,(null===(d=w)||void 0===d?void 0:d.cancelToken)&&w.cancelToken.cancel("cancel"),w&&(w.cancelToken=e.$axios.CancelToken.source()),l(j,r.fetching,!1),(null===(v=j)||void 0===v?void 0:v.apiDataCacheObj)||e.$set(j,"apiDataCacheObj",{}),P=j.apiDataCacheObj,C="function"==typeof j.getCacheKey?j.getCacheKey(j):JSON.stringify(j.params||{}),S=P[C],D=null===(h=S)||void 0===h?void 0:h.success,t.prev=13,!D){t.next=18;break}t.t0=S,t.next=21;break;case 18:return t.next=20,e.$axios.$get(j.url,{params:j.params,cancelToken:null===(m=null===(y=w)||void 0===y?void 0:y.cancelToken)||void 0===m?void 0:m.token,regularUrl:null===(k=w)||void 0===k?void 0:k.regularUrl});case 20:t.t0=t.sent;case 21:_=t.t0,l(j,f(_),!0),e.$nextTick((function(){setTimeout((function(){e.$set(j,"refreshState",f(_))}))})),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(13),l(j,r.failure,!0);case 29:return j.apiData=_,!D&&(null===(O=j)||void 0===O?void 0:O.isCache)&&e.$set(P,C,_),t.abrupt("return",_);case 32:case"end":return t.stop()}}),t,null,[[13,26]])})))).apply(this,arguments)}function f(t){var e;return(null===(e=t)||void 0===e?void 0:e.success)?r.success:r.failure}},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).modificationShoppingCart=!1,t.shoppingCartVisible=!1,t.globalSource=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showShoppingCart",value:function(){this.globalSource=document.querySelector(".global-js-add-to-cart"),this.shoppingCartVisible=!0}}]),e}(f.Vue);y=h([Object(f.Component)({components:{}})],y),e.a=y},function(t,e,n){"use strict";var o=n(1244);n.n(o).a},function(t,e,n){"use strict";var o=n(1245);n.n(o).a},function(t,e,n){"use strict";var o=n(1246);n.n(o).a},function(t,e,n){"use strict";var o=n(1247);n.n(o).a},function(t,e,n){"use strict";var o=n(1248);n.n(o).a},function(t,e,n){"use strict";n(273);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.activityId=-1,t.total=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"spmModule",value:function(t){var e=this.pass_activity.length,n=this.pass_activity.findIndex((function(e){return e.pass_act_id===t.pass_act_id}));return"PassActivityCard_LIST?oid=activity_".concat(t.pass_act_id,"&len=").concat(e,"&idx=").concat(n)}},{key:"openModal",value:function(t){var e=t||{},n=e.standard_act_num,o=void 0===n?0:n,r=e.pass_act_id,c=void 0===r?-1:r;this.total=o,this.visible=!0,this.activityId=c}},{key:"handleBook",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null,n=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n};if(-1!==this.activityId){var o=this.$href("/activity/".concat(this.activityId));this.isDesktop?window.open(n(o)):window.location.href=n(o)}}},{key:"pass_activity",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.pass_activity)||[]}},{key:"cardData",get:function(){var t;return null===(t=this.pass_activity)||void 0===t?void 0:t[0]}},{key:"popComponent",get:function(){return this.isDesktop?"AttractionIncludedDesktopPop":"AttractionIncludedMobilePop"}},{key:"deepLink",get:function(){var t;return(null===(t=this.cardData)||void 0===t?void 0:t.deep_link)||""}}]),e}(n(880).a);h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0),y=h([Object(f.Component)({components:{AttractionIncludedDesktopPop:function(){return Promise.resolve().then(n.bind(null,1464))},AttractionIncludedMobilePop:function(){return Promise.resolve().then(n.bind(null,1155))}}})],y),e.a=y},,,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2080),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"preview",value:function(t){this.$emit("preview",t)}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"images",void 0),y([Object(f.Prop)()],m.prototype,"spm",void 0);var base=m=y([Object(f.Component)({components:{GalleryImage:h.a}})],m),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(base),_=O=k([f.Component],O),j=n(43),w=Object(j.a)(_,(function(){var t=this.$createElement;return(this._self._c||t)("GalleryImage",this._b({attrs:{image:this.images,"logo-width":110},on:{preview:this.preview}},"GalleryImage",this.spm,!1))}),[],!1,null,null,null).exports,P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(base),S=C=P([f.Component],C),D=(n(2390),Object(j.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-wrap"},t._l(t.images,(function(image){return n("div",{key:image.src,staticClass:"image-item"},[n("GalleryImage",t._b({attrs:{image:image,"logo-width":110/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1)})),0)}),[],!1,null,"55b7dc61",null).exports),x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(base),I=T=x([f.Component],T),R=(n(2391),Object(j.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-wrap"},[n("div",{staticClass:"left-side"},[n("GalleryImage",t._b({attrs:{image:t.images[0],"logo-width":220/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1),t._v(" "),n("div",{staticClass:"right-side"},[n("div",{staticClass:"image-item"},[n("GalleryImage",t._b({attrs:{image:t.images[1],"logo-width":110/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1),t._v(" "),n("div",{staticClass:"image-item"},[n("GalleryImage",t._b({attrs:{image:t.images[2],"logo-width":110/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1)])])}),[],!1,null,"07407afc",null).exports),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(base),A=L=$([f.Component],L),E=(n(2392),Object(j.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-wrap"},[n("div",{staticClass:"left-side"},[n("div",{staticClass:"image-item"},[n("GalleryImage",t._b({attrs:{image:t.images[0],"logo-width":110/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1),t._v(" "),n("div",{staticClass:"image-item"},[n("GalleryImage",t._b({attrs:{image:t.images[1],"logo-width":110/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1)]),t._v(" "),n("div",{staticClass:"right-side"},[n("GalleryImage",t._b({attrs:{image:t.images[2],"logo-width":220/3},on:{preview:t.preview}},"GalleryImage",t.spm,!1))],1)])}),[],!1,null,"1e744122",null).exports),M=n(881),B=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"preview",value:function(t){this.$emit("preview",t)}},{key:"inhouseData",get:function(){return Object(M.a)({type:"module",exposure:!1,spm:"GalleryPhotoEnlarge",query:{ext:JSON.stringify({photo_type:this.photoType})}})}}]),e}(f.Vue);B([Object(f.Prop)({default:function(){return[]}})],N.prototype,"images",void 0),B([Object(f.Prop)()],N.prototype,"photoType",void 0);var V=N=B([Object(f.Component)({components:{StyleDefault:w,StyleThree:D,StyleThreeRight:R,StyleThreeLeft:E}})],N),F=(n(2393),Object(j.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.images,(function(e,o){return n("div",{key:o},[10===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(1,4),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThree",{attrs:{images:e.slice(4,7),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeLeft",{attrs:{images:e.slice(7,10),spm:t.inhouseData},on:{preview:t.preview}})],1)]:9===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(1,4),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThree",{attrs:{images:e.slice(4,7),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),t._l(e.slice(7),(function(e,o){return n("div",{key:o,staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e,spm:t.inhouseData},on:{preview:t.preview}})],1)}))]:8===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(1,4),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThree",{attrs:{images:e.slice(4,7),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[7],spm:t.inhouseData},on:{preview:t.preview}})],1)]:7===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeLeft",{attrs:{images:e.slice(1,4),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThree",{attrs:{images:e.slice(4),spm:t.inhouseData},on:{preview:t.preview}})],1)]:6===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(0,3),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThree",{attrs:{images:e.slice(3),spm:t.inhouseData},on:{preview:t.preview}})],1)]:5===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(1,4),spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[4],spm:t.inhouseData},on:{preview:t.preview}})],1)]:4===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e[0],spm:t.inhouseData},on:{preview:t.preview}})],1),t._v(" "),n("div",{staticClass:"group-wrap"},[n("StyleThreeRight",{attrs:{images:e.slice(1),spm:t.inhouseData},on:{preview:t.preview}})],1)]:3===e.length?[n("div",{staticClass:"group-wrap"},[n("StyleThreeLeft",{attrs:{images:e,spm:t.inhouseData},on:{preview:t.preview}})],1)]:t._l(e,(function(e,o){return n("div",{key:o,staticClass:"group-wrap"},[n("StyleDefault",{attrs:{images:e,spm:t.inhouseData},on:{preview:t.preview}})],1)}))],2)})),0)}),[],!1,null,"a9c11160",null));e.default=F.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(47),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"reversed",void 0);var m=y=h([f.Component],y),k=(n(2384),n(43)),O=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-gallery-viewer-shadow",class:{reversed:this.reversed}},[e("div",{staticClass:"shadow-item1"}),this._v(" "),e("div",{staticClass:"shadow-item2"})])}),[],!1,null,"25290bdc",null).exports,_=n(1161),j=n(1168),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setAvatarUrl",value:function(t){return"https://cdn.klook.com/upload/img200X200/"+t}}]),e}(f.Vue);w([f.State],P.prototype,"klook",void 0),w([Object(f.Prop)()],P.prototype,"reviewInfo",void 0),w([Object(f.Prop)({default:!1})],P.prototype,"showBuyNow",void 0);var C=P=w([Object(f.Component)({components:{ReviewUser:_.a,ActivityReviewsHelpful:j.a,ImageGalleryViewerShadow:O}})],P),S=(n(2386),Object(k.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-gallery-viewer-desc"},[n("ImageGalleryViewerShadow",{staticClass:"image-gallery-viewer-desc-shadow top",attrs:{reversed:!0}}),t._v(" "),n("div",{staticClass:"image-gallery-viewer-desc-wrap"},[n("ReviewUser",{staticClass:"image-gallery-viewer-desc-user",attrs:{avatar:t.setAvatarUrl(t.reviewInfo.avatar),name:t.reviewInfo.author,date:t.reviewInfo.date}}),t._v(" "),t.reviewInfo.packageName||t.reviewInfo.package_name?n("div",{staticClass:"image-gallery-viewer-desc-package"},[t._v("\n      "+t._s(t.$t("reviews.review_for"))+"\n      "+t._s(t.reviewInfo.packageName||t.reviewInfo.package_name)+"\n      "),t.showBuyNow?n("span",{staticClass:"image-gallery-viewer-desc-buy",attrs:{"data-spm-module":"Gallery_Buy_It_Now","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("buy-now")}}},[t._v("\n        "+t._s(t.$t("75393"))+"\n      ")]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"image-gallery-viewer-desc-content"},[t._v(t._s(t.reviewInfo.content))]),t._v(" "),n("ActivityReviewsHelpful",{staticClass:"image-gallery-viewer-desc-helpful",attrs:{comment:t.reviewInfo}})],1),t._v(" "),n("ImageGalleryViewerShadow",{staticClass:"image-gallery-viewer-desc-shadow bottom"})],1)}),[],!1,null,"722f499f",null).exports),D=n(956),x=n(983),T=n(1914),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).$swiper=null,t.swiperOptions={slidesPerView:1,initialSlide:t.index,paginationClickable:!0,spaceBetween:16,pagination:{el:".swiper-pagination",type:"fraction"}},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"indexChange",value:function(t){t>=0&&this.$swiper.slideTo(t)}},{key:"close",value:function(){this.$emit("close")}},{key:"getReviewInfo",value:function(t){return this.reviewsMap[String(t)]||{}}},{key:"mounted",value:function(){var t=this;this.$swiper.on("slideChange",(function(){t.$emit("slide-change")}))}}]),e}(f.Vue);I([f.State],R.prototype,"klook",void 0),I([Object(f.Prop)()],R.prototype,"images",void 0),I([Object(f.Prop)({type:Number,default:0})],R.prototype,"index",void 0),I([Object(f.Prop)()],R.prototype,"reviewsMap",void 0),I([Object(f.Prop)({default:!1})],R.prototype,"showBuyNow",void 0),I([Object(f.Watch)("index")],R.prototype,"indexChange",null);var $=R=I([Object(f.Component)({components:{ActivityLayer:D.a,KlkStars:x.a,ImageZoomer:T.a,ReviewUser:_.a,ImageGalleryViewerDesc:S}})],R),L=(n(2387),Object(k.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"swiper",rawName:"v-swiper:$swiper",value:t.swiperOptions,expression:"swiperOptions",arg:"$swiper"}],staticClass:"activity-image-viewer_swiper_container swiper-container"},[n("div",{staticClass:"image-viewer-top"},[n("SvgIcon",{staticClass:"activity-image_icon-close",attrs:{name:"desktop-common#icon-close-new",width:"24",height:"24"},nativeOn:{click:function(e){return t.close(e)}}}),t._v(" "),n("div",{ref:"pagination",staticClass:"swiper-pagination activity-swiper-pagination"})],1),t._v(" "),n("div",{staticClass:"swiper-wrapper"},t._l(t.images,(function(image){return n("div",{key:image.src,staticClass:"swiper-slide"},[n("div",{staticClass:"activity-image-wrapper"},[n("div",{staticClass:"activity-image-content"},[n("ImageZoomer",[n("img",{staticClass:"activity-image",attrs:{src:image.src,alt:"activity-image"}})])],1)]),t._v(" "),t._t("description",[t.reviewsMap?n("ImageGalleryViewerDesc",{attrs:{"review-info":t.getReviewInfo(image.reviewId),"show-buy-now":t.showBuyNow},on:{"buy-now":function(e){return t.$emit("buy-now")}}}):t._e()],{image:image})],2)})),0)])}),[],!1,null,null,null).exports),A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"slideChange",value:function(){var t={};t.photo_type=this.photoType,this.$inhouse.track("custom","body",{spm:"BannerGallery.GalleryPhotoScroll",ext:t})}}]),e}(f.Vue);A([Object(f.Prop)()],E.prototype,"visible",void 0),A([Object(f.Prop)()],E.prototype,"transfer",void 0),A([Object(f.Prop)()],E.prototype,"photoType",void 0),A([Object(f.Prop)({default:!1})],E.prototype,"notFixed",void 0);var M=E=A([Object(f.Component)({components:{ActivityLayer:D.a,ImageGalleryViewer:L}})],E),B=(n(2388),Object(k.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityLayer",{staticClass:"activity-image-viewer",attrs:{visible:t.visible,transfer:t.transfer,"not-fixed":t.notFixed,color:"black",transition:"fade"}},[t.visible?n("ImageGalleryViewer",t._g(t._b({on:{"slide-change":t.slideChange},scopedSlots:t._u([{key:"description",fn:function(e){return[t._t("description",null,{image:e.image})]}}],null,!0)},"ImageGalleryViewer",t.$attrs,!1),t.$listeners)):t._e()],1)}),[],!1,null,null,null));e.a=B.exports},,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(12),n(52),n(53),n(8);var o=n(0),r=(n(28),n(37),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1117),m=n(1849),k=n(1851),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue);O([Object(h.Prop)({default:"default"})],_.prototype,"status",void 0);var j=_=O([h.Component],_),w=(n(2546),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-selected-unavailable-date"},["selected"===t.status?n("p",{staticClass:"selected"},[n("SvgIcon",{attrs:{name:"common#icon_feedback_success_fill_m",color:"#00b371",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("23047")))]),t._v(" "),n("klk-divider",{staticClass:"divider-pos-box",attrs:{dashed:"","dashed-width":4,"dashed-gap":4}})],1):t._e(),t._v(" "),"unavailableDate"===t.status?n("p",[n("SvgIcon",{attrs:{name:"common#icon_time_calendar_unavailable_filled_xs",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("activity.new.package_attr_date_disabled")))]),t._v(" "),n("klk-divider",{staticClass:"divider-pos-box",attrs:{dashed:"","dashed-width":4,"dashed-gap":4}})],1):t._e()])}),[],!1,null,"c3865abe",null).exports,title=n(1041),C=n(2074),S=n(1927),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"availableDateVisible",get:function(){var t;return 3!==(null===(t=this.packageData)||void 0===t?void 0:t.package_ticket_type)}},{key:"isShowPkgIcons",get:function(){var t;return 1===(null===(t=this.klook.utilConfig)||void 0===t?void 0:t.show_pkg_card_icons)}}]),e}(h.Vue);D([h.State],x.prototype,"klook",void 0),D([Object(h.Prop)({default:null})],x.prototype,"packageData",void 0);var T=x=D([Object(h.Component)({components:{PackageCardTitle:title.a,PackageCardStatus:P,DynamicVerticalIcons:S.a,PackageCardInfo:C.a}})],x),I=(n(2547),Object(w.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-main-content"},[n("PackageCardStatus",{attrs:{status:t.packageData.status||"default"}}),t._v(" "),n("PackageCardTitle",{attrs:{title:t.packageData.package_name}}),t._v(" "),t.isShowPkgIcons?n("PackageCardInfo",{attrs:{"product-tags":t.packageData.product_tags,icons:t.packageData.icon_list,"package-sub-name":t.packageData.sub_name,credits:t.packageData.credits}}):t._e()],1)}),[],!1,null,"377e1ddc",null).exports),R=n(16);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).detailShow=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"showPackageDetail",value:function(){this.detailShow=!0}},{key:"closeModal",value:function(){this.detailShow=!1}},{key:"toBook",value:function(){var t=this;if("unavailableDate"===this.packageData.status)this.notAvailableDate();else var time=setTimeout((function(){t.$emit("toBook",t.packageData),clearTimeout(time)}),200)}},{key:"notAvailableDate",value:function(){var t=this;this.$confirm(this.$t("19452"),{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(e){if(e.result)var time=setTimeout((function(){t.closeModal(),t.$emit("resetDate",t.packageData),t.$emit("toBook",t.packageData),clearTimeout(time)}),200)}))}},{key:"newModuleExtra",get:function(){var t,e=this.date;if(e)return e=null===(t=e)||void 0===t?void 0:t.split(" ")[0],JSON.stringify({date:e})}},{key:"trackInfo",get:function(){var t,e,n,o,r,c,l,d,v,f,h=this.packageData.package_id,y=(null===(r=null===(o=null===(n=null===(e=null===(t=this.$refs.price)||void 0===t?void 0:t.$refs)||void 0===e?void 0:e.packagePrice)||void 0===n?void 0:n.$refs)||void 0===o?void 0:o.price)||void 0===r?void 0:r.selling)||"0",m=y.replace(/[^0-9]/gi,""),k=null!=(c=Object(R.o)(m,this.currency))?c:y,O=this.packageData,_=O.discount_desc,j=O.credits;return{oid:"package_".concat(h),ext:L({PromoCard:"".concat((null===(l=this.event)||void 0===l?void 0:l.tag)||"null",", ").concat(encodeURIComponent(_)||"null"),Integral:Math.floor(parseFloat(j.toString())),SalesPrice:k,PromotionType:{4:"WarmUp",5:"Sales"}[null===(f=null===(v=null===(d=this.packageData)||void 0===d?void 0:d.promotion_price)||void 0===v?void 0:v.promotion_event)||void 0===f?void 0:f.status]||"Normal",SelectType:"User"},this.ext)}}},{key:"event",get:function(){var t,e;return null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}},{key:"chosenStyle",get:function(){return"selected"===this.packageData.status?"selected":""}}]),e}(h.Vue);A([Object(h.State)((function(t){return t.klook.currency}))],E.prototype,"currency",void 0),A([Object(h.Prop)({default:null})],E.prototype,"packageData",void 0),A([Object(h.Prop)()],E.prototype,"buttonContent",void 0),A([Object(h.Prop)()],E.prototype,"ext",void 0),A([Object(h.Prop)()],E.prototype,"date",void 0);var M=E=A([Object(h.Component)({components:{PackageCardPromoBelt:m.a,MobilePackageCardMainContent:I,MobilePackageCardPriceAndButton:k.a,ExperiencePackageDetailModule:y.a}})],E),B=(n(2548),Object(w.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.packageData?n("div",{directives:[{name:"track",rawName:"v-track:module:PackageType_LIST",value:t.trackInfo,expression:"trackInfo",arg:"module:PackageType_LIST"}],class:["mobile-package-card",t.chosenStyle],attrs:{"data-spm-virtual-item":"__virtual"}},[t.event?n("PackageCardPromoBelt",{attrs:{status:t.event.status,"start-time":t.event.start_time,"end-time":t.event.end_time,tag:t.event.tag,"bg-image":t.event.image_url}}):t._e(),t._v(" "),n("MobilePackageCardMainContent",{staticClass:"main-content",attrs:{"package-data":t.packageData},on:{toBook:t.toBook},nativeOn:{click:function(e){return t.showPackageDetail(e)}}}),t._v(" "),t._t("price-and-book-button",[n("MobilePackageCardPriceAndButton",{ref:"price",staticClass:"price-button",attrs:{"package-data":t.packageData,"button-content":t.buttonContent},on:{toBook:t.toBook}})]),t._v(" "),t.detailShow?n("ExperiencePackageDetailModule",{staticClass:"module-container radius8-style",attrs:{"package-data":t.packageData,"confirm-text":t.buttonContent,"data-spm-module":"PackageDetailsPopups?oid=package_"+t.packageData.package_id+"&ext="+t.newModuleExtra},on:{close:t.closeModal,confirm:t.toBook}}):t._e()],2):t._e()}),[],!1,null,"0bdbbf66",null));e.default=B.exports},,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(934),m=n(1424),k=n(920),O=(n(52),n(53),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),_=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"credits",get:function(){return 0}},{key:"creditsVisible",get:function(){return this.useCredits&&!this.isGuestCheckout}},{key:"creditsNumber",get:function(){return this.credits&&this.creditsVisible?Math.floor(parseFloat(this.credits.toString())):null}},{key:"creditsText",get:function(){return this.creditsNumber?"".concat(this.$t("header.Credits")," +").concat(this.creditsNumber):null}}]),e}(h.Vue);O([h.Getter],_.prototype,"useCredits",void 0),O([h.Getter],_.prototype,"isGuestCheckout",void 0);var j=_=O([h.Component],_),w=n(899),P=n(883),C=n(981),S=n(887),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getCalcTags2sku",value:function(t){var e,n,o,r=(null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[],c=[];return(null===(o=r)||void 0===o?void 0:o.length)&&r.forEach((function(t){var e,n,o;(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time)?Object(S.c)(t.inner_vars.rate_plan.count_down_end_time)&&c.push(t):c.push(t)})),c}},{key:"getCutDownTimeList",value:function(t){var e,n=this.getCalcTags2sku(t),o=[];return(null===(e=n)||void 0===e?void 0:e.length)&&n.forEach((function(t){var e,n,r,c=null===(r=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&o.push(c)})),o}},{key:"reload",value:function(){window&&window.location.reload()}},{key:"credits",get:function(){return this.unit.credits}},{key:"currentButtonText",get:function(){var t;return(null===(t=this.unit)||void 0===t?void 0:t.isSoldOut)?this.$t("global.sold_out"):this.$t("11888")}}]),e}(j);D([Object(h.Prop)()],x.prototype,"packageTicketType",void 0),D([Object(h.Prop)({default:function(){return{}}})],x.prototype,"unit",void 0),D([Object(h.Prop)({default:!0})],x.prototype,"priceVisible",void 0),D([Object(h.Inject)({from:"fieldsConfig2section",default:function(){return w.a}})],x.prototype,"fieldsConfig2section",void 0),D([Object(h.Prop)()],x.prototype,"buttonDisabled",void 0),D([Object(h.Prop)({default:""})],x.prototype,"disabledText",void 0),D([Object(h.Prop)({default:!1})],x.prototype,"isWarmingOrSuspended",void 0);var T=x=D([Object(h.Component)({components:{ExpTagging:P.default,UnitPrice:m.a,ActivityBookingStartDate:k.a,CutDown:C.default}})],x),I=(n(2538),n(43)),R=Object(I.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-card-unit-box"},[n("div",{staticClass:"package-card-unit"},[n("div",{staticClass:"package-card-unit-left"},[n("h5",{staticClass:"package-card-unit-name"},[t._v("\n        "+t._s(t.unit.priceName)+"\n      ")]),t._v(" "),3===t.packageTicketType||t.unit.isSoldOut||!t.unit.availableTime||t.isWarmingOrSuspended?t._e():n("ActivityBookingStartDate",{staticClass:"package-card-unit-time",attrs:{"start-time":t.unit.availableTime}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-sku-tag-style",staticStyle:{margin:"4px 0 0 0"},attrs:{list:t.getCalcTags2sku(t.unit),line:1}})],1),t._v(" "),n("div",{class:["package-card-unit-right",t.disabledText&&"align-end"]},[t.priceVisible&&!t.unit.isSoldOut?n("UnitPrice",{attrs:{unit:t.unit}}):t._e(),t._v(" "),n("div",[t.disabledText?n("div",{staticClass:"package-card-unit-disabled-text"},[t._v("\n          "+t._s(t.disabledText)+"\n        ")]):n("klk-button",{staticClass:"package-card-unit-button",attrs:{size:"small",disabled:t.unit.isSoldOut||t.buttonDisabled}},[t._v("\n          "+t._s(t.currentButtonText)+"\n        ")])],1)],1)]),t._v(" "),n("CutDown",{staticClass:"package-card-unit-cut-down-box",attrs:{"time-list":t.getCutDownTimeList(t.unit),size:"small"},on:{reload:t.reload}})],1)}),[],!1,null,"4bb83bf6",null).exports,$=n(16);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=Object(h.namespace)("traveller/activity"),M=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showLimit=3,t.showMore=!0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleMore",value:function(){this.showMore=!this.showMore}},{key:"getUnitSpm",value:function(t,e){var n,r,c,l=t.sellingPrice,d=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(P.getTaggingExtraTrackObj)(null===(r=null===(n=t)||void 0===n?void 0:n.product_tags)||void 0===r?void 0:r.discount_tags),{},this.ext,{Length:this.units.length,Index:e,SalesPrice:(c=Object($.o)(l,this.currency),null!=c?c:l)});return"SKUBookBtn_LIST?oid=sku_".concat(t.skuId,"&idx=").concat(e,"&len=").concat(this.units.length,"&ext=").concat(JSON.stringify(d))}},{key:"toBook",value:function(t){this.isLinePage||this.isWarming||this.isSuspended||t.isSoldOut||this.$emit("toBook",t.skuId)}},{key:"isLinePage",get:function(){var t,e,n;return null!=(n=null===(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)||void 0===e?void 0:e.is_line_page)&&n}},{key:"calcSoldUnits",get:function(){var t;return(null===(t=this.units)||void 0===t?void 0:t.filter((function(t){return!t.isSoldOut})))||[]}},{key:"currentUnits",get:function(){var t=this.calcSoldUnits;return this.showMore?t.slice(0,this.showLimit):t}}]),e}(y.a);A([Object(h.State)((function(t){return t.klook.currency}))],M.prototype,"currency",void 0),A([Object(h.Prop)()],M.prototype,"packageId",void 0),A([Object(h.Prop)()],M.prototype,"packageTicketType",void 0),A([Object(h.Prop)({default:function(){return[]}})],M.prototype,"units",void 0),A([Object(h.Prop)({default:function(){return{}}})],M.prototype,"ext",void 0),A([E.State],M.prototype,"activityDetail",void 0);var B=M=A([Object(h.Component)({components:{PackageCardUnit:R}})],M),N=(n(2539),Object(I.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-card-content"},[n("div",{staticClass:"package-card-content-units"},t._l(t.currentUnits,(function(e,o){return n("PackageCardUnit",{key:e.skuId,staticClass:"units-card-wrap",attrs:{unit:e,"data-spm-module":t.getUnitSpm(e,o),"data-spm-virtual-item":"__virtual","package-ticket-type":t.packageTicketType,"button-disabled":t.isLinePage,"disabled-text":t.warmingText||t.suspendedText,"is-warming-or-suspended":t.isWarming||t.isSuspended},nativeOn:{click:function(n){return t.toBook(e)}}})})),1),t._v(" "),t.calcSoldUnits.length>t.showLimit&&t.showMore?n("div",{staticClass:"package-card-content-more",attrs:{"data-spm-module":"SKUViewMore?oid=package_"+t.packageId,"data-spm-virtual-item":"__virtual"},on:{click:t.handleMore}},[n("span",{staticClass:"text"},[t._v("\n      "+t._s(t.showMore?t.$t("city_page_view_more"):t.$t("collapse_all"))+"\n    ")]),t._v(" "),n("SvgIcon",{staticClass:"package-card-content-icon",attrs:{name:"mobile-activity#icon_nav_chevron_down_xs",size:"16"}})],1):t._e()])}),[],!1,null,"c6caaa00",null));e.a=N.exports},,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1850),y=(n(22),n(14),n(11),n(12),n(52),n(53),n(8),n(0)),m=(n(28),n(13)),k=n(1849),O=n(1012),_=n(957),j=n(2021),w=n(1851),P=n(16),C=n(883),S=n(934),D=n(981),x=n(887);function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(y.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getTaggingExtraTrackObj",value:function(t){var e,n,o,r,c=[].concat(Object(m.a)((null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.attribute_tags)||[]),Object(m.a)((null===(r=null===(o=t)||void 0===o?void 0:o.product_tags)||void 0===r?void 0:r.discount_tags)||[]));return Object(C.getTaggingExtraTrackObj)(c)||{}}},{key:"reload",value:function(){window&&window.location.reload()}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.packageData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"calcTags2discount",get:function(){var t,e,n,o,r=(null===(e=null===(t=this.packageData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],c=[];if(null===(n=r)||void 0===n?void 0:n.length){var l=r.filter((function(t){var e,n,o,r,c,l,d=(null===(e=t)||void 0===e?void 0:e.inner_vars)||{};return!(null===(o=null===(n=d)||void 0===n?void 0:n.inner)||void 0===o?void 0:o.derivation_info)||!(null===(l=null===(c=null===(r=d)||void 0===r?void 0:r.inner)||void 0===c?void 0:c.derivation_info)||void 0===l?void 0:l.is_derived)}));(null===(o=l)||void 0===o?void 0:o.length)&&l.forEach((function(t){var e,n,o;(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time)?Object(x.c)(t.inner_vars.rate_plan.count_down_end_time)&&c.push(t):c.push(t)}))}return c}},{key:"cutDownTimeList",get:function(){var t,e=this.calcTags2discount,n=[];return(null===(t=e)||void 0===t?void 0:t.length)&&e.forEach((function(t){var e,o,r,c=null===(r=null===(o=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===o?void 0:o.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&n.push(c)})),n}},{key:"trackExtInfo",get:function(){var t,e,n,o,r,c,l,d,v,f,h=this.isWarming,y=this.isSuspended,m=(null===(r=null===(o=null===(n=null===(e=null===(t=this.$refs.price)||void 0===t?void 0:t.$refs)||void 0===e?void 0:e.packagePrice)||void 0===n?void 0:n.$refs)||void 0===o?void 0:o.price)||void 0===r?void 0:r.selling)||"0",k=m.replace(/[^0-9]/gi,""),O=null!=(c=Object(P.o)(k,this.currency))?c:m,_=this.packageData,j=_.discount_desc,w=_.credits;return I({},this.ext,{PromoCard:"".concat((null===(l=this.event)||void 0===l?void 0:l.tag)||"null",", ").concat(encodeURIComponent(j)||"null"),Integral:Math.floor(parseFloat(w.toString())),SalesPrice:O,PromotionType:{4:"WarmUp",5:"Sales"}[null===(f=null===(v=null===(d=this.packageData)||void 0===d?void 0:d.promotion_price)||void 0===v?void 0:v.promotion_event)||void 0===f?void 0:f.status]||"Normal",SelectType:"User",StatusType:y?"Unavailable":h?"ForSalesSoon":"Normal"})}},{key:"trackInfo",get:function(){var t=this.isWarming,e=this.isSuspended,n=this.packageData.package_id;return{oid:"package_".concat(n),idx:this.spmIndex,len:this.spmLength,ext:I({},this.getTaggingExtraTrackObj(this.packageData),{},this.trackExtInfo,{StatusType:e?"Unavailable":t?"ForSalesSoon":"Normal"})}}},{key:"event",get:function(){var t,e;return null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}}]),e}(S.a);R([Object(f.State)((function(t){return t.klook.currency}))],$.prototype,"currency",void 0),R([Object(f.Prop)({default:null})],$.prototype,"packageData",void 0),R([Object(f.Prop)()],$.prototype,"buttonContent",void 0),R([Object(f.Prop)({default:function(){return{}}})],$.prototype,"ext",void 0),R([Object(f.Prop)()],$.prototype,"date",void 0),R([Object(f.Prop)()],$.prototype,"spmIndex",void 0),R([Object(f.Prop)()],$.prototype,"spmLength",void 0);var L=$=R([Object(f.Component)({components:{ExpTagging:C.default,PackageCardPromoBelt:k.a,WarmingSlogan:O.a,CardHeader:_.a,PackageCardContent:j.a,PriceAndButton:w.a,CutDown:D.default}})],$),A=(n(2541),n(43)),E=Object(A.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.packageData?n("div",{directives:[{name:"track",rawName:"v-track:module:PackageType_LIST",value:t.trackInfo,expression:"trackInfo",arg:"module:PackageType_LIST"}],staticClass:"package-card"},[t.event?n("PackageCardPromoBelt",{staticClass:"package-card-belt",attrs:{status:t.event.status,"start-time":t.event.start_time,"end-time":t.event.end_time,tag:t.event.tag,"bg-image":t.event.image_url}}):t._e(),t._v(" "),n("div",{staticClass:"package-card-wrap"},[n("WarmingSlogan",{staticClass:"package-card-warm",attrs:{"show-arrow":!0,"publish-info":t.publishInfo}}),t._v(" "),n("CardHeader",{staticClass:"package-card-header",attrs:{"package-data":t.packageData}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.calcTags2attribute,line:1}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:t.calcTags2discount,line:1}}),t._v(" "),n("CutDown",{attrs:{"time-list":t.cutDownTimeList,size:"small"},on:{reload:t.reload}}),t._v(" "),t.packageData.units?n("PackageCardContent",t._g({attrs:{units:t.packageData.units,"package-id":t.packageData.package_id,ext:t.trackExtInfo,"package-ticket-type":t.packageData.package_ticket_type,"publish-info":t.publishInfo}},t.$listeners)):n("PriceAndButton",{staticStyle:{margin:"16px 0 4px"},attrs:{"package-data":t.packageData}})],1)],1):t._e()}),[],!1,null,"17d15dd8",null).exports,M=n(2068),B=n(1167),N=n(1997),V=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},F=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showLimit=8,t.showMore=!0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"limitedAvailablePackageList",get:function(){var t=this.showMore,e=this.filterPackagesWithSku,n=this.showLimit;return t?e.slice(0,n):e}},{key:"showMoreText",get:function(){var t=this.filterPackagesWithSku.length;return"".concat(this.$t("city_page_view_more")," (").concat(t-this.showLimit,"+)")}}]),e}(Object(f.mixins)(N.a)),W=F=V([Object(f.Component)({inheritAttrs:!1,components:{EmptyStatus:M.a,PackageCardPlaceholderList:h.a,PackageDetailFailure:B.a,PackageCard:E}})],F),H=(n(2543),Object(A.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-card-list"},["success"===t.state?[n("div",{staticClass:"package-card-list-content"},t._l(t.limitedAvailablePackageList,(function(e,o){return n("PackageCard",{key:e.package_id,staticClass:"js-package-card",attrs:{"package-data":e,"spm-index":o,"spm-length":t.limitedAvailablePackageList.length,"data-id":e.package_id,"publish-info":e.publish_info},on:{toBook:function(n){return t.$emit("toBook",n,e.package_id)}}})})),1),t._v(" "),t.filterPackagesWithSku&&t.filterPackagesWithSku.length?t._e():n("EmptyStatus"),t._v(" "),t.filterPackagesWithSku.length>t.showLimit&&t.showMore?n("klk-button",{staticClass:"show-more-btn",attrs:{block:"",type:"outlined",size:"small","data-spm-module":"PackageViewMore","data-spm-virtual-item":"__virtual"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n      "+t._s(t.showMoreText)+"\n    ")]):t._e()]:"failure"===t.state?n("PackageDetailFailure",{staticClass:"calendar-failure",on:{"fetch-detail":t.getPackageInfo}}):n("PackageCardPlaceholderList",{staticStyle:{"margin-top":"24px"}})],2)}),[],!1,null,"3b96559b",null));e.default=H.exports},function(t,e,n){"use strict";n.r(e);n(22),n(8),n(12),n(61),n(14),n(11);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=(n(47),n(13)),m=n(2019),k=n(883),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).isUnavailableCard=!1,t.showUnavailableFlag=!1,t.clonePackageList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getTaggingExtraTrackObj",value:function(t){var e,n,o,r,c=[].concat(Object(y.a)((null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.attribute_tags)||[]),Object(y.a)((null===(r=null===(o=t)||void 0===o?void 0:o.product_tags)||void 0===r?void 0:r.discount_tags)||[]));return Object(k.getTaggingExtraTrackObj)(c)||{}}},{key:"getCardVisible",value:function(t){return"unavailableDate"!==t.status||this.isUnavailableCard}},{key:"showUnavailableCard",value:function(){var t=this.packageList.filter((function(t){return"unavailableDate"===t.status}));this.isUnavailableCard=!0,this.clonePackageList=this.clonePackageList.concat(t)}},{key:"loadMore",value:function(){var t=this.availableDateList.slice(this.loadMoreLimitNumber);this.clonePackageList=this.clonePackageList.concat(t),this.showUnavailableFlag=!0}},{key:"init",value:function(){this.isAvailableItemOverLoadMoreNumber?this.clonePackageList=this.availableDateList.slice(0,this.loadMoreLimitNumber):(this.clonePackageList=this.availableDateList,this.showUnavailableFlag=!!this.isHaveUnavailableCard)}},{key:"mounted",value:function(){this.init()}},{key:"len",get:function(){var t;return(null===(t=this.packageList)||void 0===t?void 0:t.length)||0}},{key:"isHaveUnavailableCard",get:function(){return this.packageList.some((function(t){return"unavailableDate"===t.status}))&&!this.isUnavailableCard}},{key:"isAvailableItemOverLoadMoreNumber",get:function(){return this.availableDateList.length&&this.availableDateList.length>this.loadMoreLimitNumber}},{key:"availableDateList",get:function(){return this.packageList.filter((function(t){return"unavailableDate"!==t.status}))}}]),e}(h.Vue);O([Object(h.Prop)()],_.prototype,"packageList",void 0),O([Object(h.Prop)({type:Number,default:8})],_.prototype,"loadMoreLimitNumber",void 0);var j=_=O([Object(h.Component)({components:{PackageCard:m.default}})],_),w=(n(2549),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-card-list"},[t._l(t.clonePackageList,(function(e,o){return n("PackageCard",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.getCardVisible(e),expression:"getCardVisible(packageData)"}],key:"index-"+o,staticClass:"package-card",attrs:{ext:Object.assign({},t.getTaggingExtraTrackObj(e),{date:t.$attrs.date,idx:o,len:t.len}),"package-data":e}},"PackageCard",t.$attrs,!1),t.$listeners))})),t._v(" "),t.isAvailableItemOverLoadMoreNumber&&!t.showUnavailableFlag?n("div",[n("klk-button",{attrs:{type:"outlined",size:"small",block:""},on:{click:t.loadMore}},[t._v(t._s(t.$t("13126")))])],1):t._e(),t._v(" "),t.isHaveUnavailableCard&&t.showUnavailableFlag?n("div",{staticClass:"view-unavailable-date-list",on:{click:t.showUnavailableCard}},[n("span",{staticClass:"view-unavailable-date-list_content"},[t._v(t._s(t.$t("21784")))])]):t._e()],2)}),[],!1,null,"6789e25e",null).exports,C=n(1167),S=n(1693),D=n(1850);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).state="fetching",t.unavailablePackageList=[],t.availablePackageList=[],t.selectedPackageList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"dateChange",value:function(){this.getPackagePrice()}},{key:"getPackagePrice",value:function(){var t,e,n=this;this.state="fetching";var r=(null===(t=this.itemParams)||void 0===t?void 0:t.reduce((function(t,e){return T({},t,Object(o.a)({},e.package_id,e))}),{}))||{};this.availablePackageList=[],this.unavailablePackageList=[],this.selectedPackageList=[];var c=!0,l=!1,d=void 0;try{for(var v,f=this.packages[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var h=v.value,y=r[h.package_id],m=h;this.packageId&&(null===(e=y)||void 0===e?void 0:e.package_id)===this.packageId?this.selectedPackageList=this.selectedPackageList.concat(T({},m,{status:"selected"})):y?this.availablePackageList=this.availablePackageList.concat([T({},m,{status:"available"})]):this.unavailablePackageList=this.unavailablePackageList.concat(T({},m,{status:"unavailableDate"}))}}catch(t){l=!0,d=t}finally{try{c||null==f.return||f.return()}finally{if(l)throw d}}this.$nextTick((function(){n.state="success"}))}},{key:"mounted",value:function(){this.getPackagePrice()}},{key:"componentName",get:function(){switch(this.state){case"success":return"PackageCardList";case"failure":return"PackageDetailFailure";default:return"PackageCardPlaceholderList"}}},{key:"packageList",get:function(){return this.availablePackageList.concat(this.selectedPackageList).concat(this.unavailablePackageList)}},{key:"itemParams",get:function(){var t;return null===(t=this.packagesInSchedule)||void 0===t?void 0:t.map((function(t){return{actual_price:t.sell_price,package_id:t.package_id}}))}}]),e}(S.a);I([Object(h.Prop)()],R.prototype,"date",void 0),I([Object(h.Prop)()],R.prototype,"packages",void 0),I([Object(h.Prop)()],R.prototype,"packageId",void 0),I([Object(h.Watch)("date")],R.prototype,"dateChange",null);var $=R=I([Object(h.Component)({components:{PackageCardPlaceholderList:D.a,PackageDetailFailure:C.a,PackageCardList:P}})],R),L=Object(w.a)($,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,this._g(this._b({tag:"component",attrs:{date:this.date,"package-list":this.packageList}},"component",this.$attrs,!1),this.$listeners))}),[],!1,null,null,null);e.default=L.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1763),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"list",get:function(){return h.a}}]),e}(f.Vue),k=m=y([f.Component],m),O=(n(2564),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-guide"},[n("div",{staticClass:"pass-guide-list"},t._l(t.list,(function(e,o){return n("div",{key:o,staticClass:"pass-guide-item"},[n("div",{staticClass:"pass-guide-item-title"},[t._v(t._s(t.$t(e.step))+" : "+t._s(t.$t(e.title)))]),t._v(" "),n("ul",{staticClass:"pass-guide-item-content"},t._l(e.contentList,(function(li){return n("li",{key:li},[t._v("\n          "+t._s(t.$t(li))+"\n        ")])})),0)])})),0)])}),[],!1,null,"580aca37",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"open",value:function(){this.visible=!0}},{key:"list",get:function(){return h.a}}]),e}(f.Vue);j([Object(f.Prop)()],w.prototype,"activityId",void 0);var P=w=j([Object(f.Component)({components:{Describe:_}})],w),C=(n(2565),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-guide",attrs:{"data-spm-module":"HowToUsePass?oid=activity_"+t.activityId,"data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[n("div",{staticClass:"pass-guide-list"},t._l(t.list,(function(e,o){return n("div",{key:o,staticClass:"pass-guide-item"},[n("div",{staticClass:"pass-guide-item-left"},[n("img",{attrs:{src:e.src,alt:"infor"}})]),t._v(" "),n("div",{staticClass:"pass-guide-item-right"},[n("div",{staticClass:"name"},[t._v("\n          "+t._s(t.$t(e.step))+"\n        ")]),t._v(" "),n("div",{staticClass:"step"},[t._v("\n          "+t._s(t.$t(e.title))+"\n        ")])])])})),0),t._v(" "),n("klk-button",{staticClass:"pass-guide-button",attrs:{type:"outlined",block:""}},[t._v("\n    "+t._s(t.$t("88586"))+" "),n("klk-icon",{attrs:{type:"icon_navigation_chevron_right_xs",size:16}})],1),t._v(" "),n("klk-bottom-sheet",{attrs:{visible:t.visible,"show-close":!0,title:t.$t("78437")},on:{"update:visible":function(e){t.visible=e}}},[n("Describe",{attrs:{list:t.list}})],1)],1)}),[],!1,null,"6f226efc",null));e.default=C.exports},function(t,e,n){"use strict";n.r(e);n(47);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=(n(22),n(14),n(11),n(8),n(12),n(0)),h=n(46),y=n(2070),m=n(913),k=n(881);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var _=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).moreObj={status:""},t.tagStyle={maxWidth:"auto"},t.flexWrap="",t.descStyle={lineHeight:"16px",marginTop:"0",lineClamp:0,maxWidth:"unset",maxHeight:"unset"},t}return Object(l.a)(e,t),Object(h.a)(e,[{key:"getSpecClass",value:function(t){var e,n=t||{},o=n.tag_key,r=n.icon;return"credits"===o&&(null===(e=r)||void 0===e?void 0:e.left_icon_url)?"credits":""}},{key:"clickShowMore",value:function(){var t=this.moreObj;if(!t.status)return!1;t.status="more"===t.status?"less":"more"}},{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=this;this.$nextTick((function(){var e,n,o=t.moreObj,r=t.descStyle,c=t.lineClamp,l=t.tagStyle;r.lineHeight=t.descLineHeight;var d=t.leftRef.offsetWidth||0,v=(null===(n=null===(e=t.tagRef)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.offsetWidth)||0;(parseInt(t.tagMaxWidth)||0)<v?(t.flexWrap="wrap",l.maxWidth=t.tagMaxWidth):(t.flexWrap="nowrap",r.maxWidth=d-v-10+"px"),t.$nextTick((function(){var e=parseInt(t.descLineHeight),n=t.realDescRef.offsetHeight||0,l=c*e,d=l+e+"px";n>l+4&&(o.status="more",r.lineClamp=c,r.maxHeight=d)}))}))}},{key:"clickArrowIcon",value:function(t){var e=(t||{}).action;if(!e)return!1;var n=e||{},o=(n.type,n.deep_link);Object(m.f)(o,this.klook.platform)}},{key:"bindIHTrack",value:function(){return k.a.apply(void 0,arguments)}},{key:"descList",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.desc_list)||[]}},{key:"statusMaps",get:function(){return{more:this.$t("see_more"),less:this.$t("17843")}}},{key:"calcDescStyle",get:function(){var t=this.descStyle;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(f.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{maxHeight:"more"===this.moreObj.status?t.maxHeight:"unset"})}}]),e}(v.Vue);_([v.State],j.prototype,"klook",void 0),_([Object(v.Prop)({type:Number,default:5})],j.prototype,"lineClamp",void 0),_([Object(v.Prop)({type:String,default:"200px"})],j.prototype,"tagMaxWidth",void 0),_([Object(v.Prop)({type:String,default:"20px"})],j.prototype,"descLineHeight",void 0),_([Object(v.Prop)({type:Object,default:function(){return{}}})],j.prototype,"data",void 0),_([Object(v.Ref)()],j.prototype,"leftRef",void 0),_([Object(v.Ref)()],j.prototype,"tagRef",void 0),_([Object(v.Ref)()],j.prototype,"realDescRef",void 0);var w=j=_([Object(v.Component)({components:{Tag:y.a}})],j),P=(n(2587),n(43)),C=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discounts-item"},[n("div",{ref:"leftRef",staticClass:"discounts-item__left",class:t.flexWrap},[n("Tag",t._b({ref:"tagRef",staticClass:"discounts-item__tag",class:t.getSpecClass(t.data),style:t.tagStyle},"Tag",t.data,!1)),t._v(" "),n("div",{ref:"realDescRef",staticClass:"discounts-item__desc",class:{"line-clamp":"more"===t.moreObj.status},style:t.calcDescStyle},[t.descList.length?n("div",{staticClass:"desc-box"},t._l(t.descList,(function(e,i){return n("span",{key:i,staticClass:"desc-box__item"},[t.descList.length>=2?n("span",{staticClass:"desc-box__prefix"}):t._e(),t._v(" "),n("span",{staticClass:"desc-box__content"},[t._v(t._s(e.content))])])})),0):t._e(),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.moreObj.status,expression:"moreObj.status"}],staticClass:"more-less",on:{click:t.clickShowMore}},[t._v(t._s(t.statusMaps[t.moreObj.status]))])])],1),t._v(" "),t.data.action&&t.data.action.type>0?n("span",t._b({staticClass:"discounts-item__icon",on:{click:function(e){return t.clickArrowIcon(t.data)}}},"span",t.bindIHTrack(t.data.track),!1),[n("SvgIcon",{attrs:{name:"common#icon_navigation_chevron_right_xxxs",width:"12"}})],1):t._e()])}),[],!1,null,"f626cc74",null).exports,S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);S([Object(v.Prop)({type:String,default:"200px"})],D.prototype,"tagMaxWidth",void 0),S([Object(v.Prop)({type:Array,default:function(){return[]}})],D.prototype,"discountList",void 0),S([Object(v.Prop)({type:Number,default:5})],D.prototype,"lineClamp",void 0);var x=D=S([Object(v.Component)({components:{DiscountsItem:C}})],D),T=(n(2588),Object(P.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discounts-box"},t._l(t.discountList,(function(e,i){return n("DiscountsItem",{key:i,staticClass:"discounts-item-style",attrs:{data:e,"line-clamp":t.lineClamp,"tag-max-width":t.tagMaxWidth}})})),1)}),[],!1,null,"40d88156",null));e.default=T.exports},function(t,e,n){"use strict";n(22),n(14),n(12),n(11),n(8),n(99),n(45),n(86),n(70);var o=n(0),r=(n(20),n(27),n(13)),c=(n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=(n(30),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),O=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).visible=!1,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"open",value:function(){this.visible=!0}},{key:"handleClick",value:function(t){this.$emit("input",t),this.visible=!1,this.$emit("change")}},{key:"text",get:function(){var t=this,text="";return this.sortData.forEach((function(e){var n=e.name,o=e.val;t.value===o&&(text=n)})),text}}]),e}(m.Vue);k([Object(m.Prop)()],O.prototype,"value",void 0),k([Object(m.Prop)()],O.prototype,"sortData",void 0);var _=O=k([m.Component],O),j=(n(2598),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"review-filter-sort"},[n("div",{staticClass:"review-filter-sort-button",on:{click:t.open}},[n("span",{staticClass:"review-filter-sort-title"},[t._v("\n      "+t._s(t.$t("car_rental_search_loading_sort"))+"\n    ")]),t._v(" "),n("span",{staticClass:"review-filter-sort-text"},[t._v("\n      "+t._s(t.text)+"\n    ")]),t._v(" "),n("SvgIcon",{staticClass:"review-filter-sort-icon",attrs:{name:"desktop-common#arrow-up-new",size:"14",width:"14",height:"14",color:"#4A4A4A"}})],1),t._v(" "),t.visible?n("klk-bottom-sheet",{staticClass:"review-filter-sort-modal",attrs:{"show-close":"",transfer:"",title:t.$t("28270"),visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},t._l(t.sortData,(function(e){return n("div",{key:e.name,class:["review-filter-sort-modal-item",{selected:t.value===e.val}],on:{click:function(n){return t.handleClick(e.val)}}},[n("span",[t._v("\n        "+t._s(e.name)+"\n      ")]),t._v(" "),n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:t.value===e.val,expression:"value === item.val"}],attrs:{name:"common#icon_other_click_s_new",width:"20",height:"20"}})],1)})),0):t._e()],1)}),[],!1,null,"55e5fcc0",null).exports,P=n(3);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).filterButtonList=[],t.selectedList=["all"],t.sortType=0,t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"reviewGalleryShouldShowChange",value:function(t){t||(this.filterButtonList=this.filterButtonList.filter((function(t){return"img"!==t.val})))}},{key:"mounted",value:function(){this.initFilterButtonList(),this.getReviewFilter()}},{key:"initFilterButtonList",value:function(){this.filterButtonList=[{name:this.$t("review_filter.all"),val:"all",disabled:!1,spmName:"filter_all"},{name:this.$t("review_filter.only_image"),val:"img",disabled:!1,spmName:"filter_photos_only"},{name:"4.0+",val:"aboveFour",disabled:!1,spmName:"filter_4plus"},{name:"3.0+",val:"aboveThree",disabled:!1,spmName:"filter_3plus"},{name:"<3.0",val:"belowThree",disabled:!1,spmName:"filter_lessthan3"}]}},{key:"handleFilterButtonClick",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==(n=Object(r.a)(this.selectedList)).length||"all"!==n[0]||"all"!==e){t.next=3;break}return t.abrupt("return");case 3:if(n.includes(e)?this.selectedList=n.filter((function(t){return t!==e})):"all"===e?this.selectedList=["all"]:(this.selectedList=n.filter((function(t){return"all"!==t})),this.selectedList.push(e)),0===this.selectedList.length&&(this.selectedList=["all"]),o=!n.includes("img")&&this.selectedList.includes("img"),c=n.includes("img")&&!this.selectedList.includes("img"),!o&&!c){t.next=10;break}return t.next=10,this.getReviewFilter();case 10:this.onChange();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getReviewFilter",value:function(){var t=this;return this.$axios.$get(P.a.reviewFilter,{params:{act_id_list:this.activityId,only_image:!!this.selectedList.includes("img")}}).then((function(e){if(e.success&&e.result){var n=e.result,r=n.star_count_map,c=n.star_order_list.filter((function(t){return!!r[t]}));t.filterButtonList=t.filterButtonList.map((function(t){var e=t.val,n=!c.includes("4")&&!c.includes("5"),r=!c.includes("3")&&n,l=!c.includes("1")&&!c.includes("2");return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{disabled:"aboveFour"===e&&n||"aboveThree"===e&&r||"belowThree"===e&&l||!1})})),t.selectedList=t.selectedList.filter((function(e){var n;return!(null===(n=t.filterButtonList.find((function(t){return t.val===e})))||void 0===n?void 0:n.disabled)}))}}))}},{key:"onChange",value:function(){var t=[];this.selectedList.includes("belowThree")&&t.push.apply(t,[1,2]),this.selectedList.includes("aboveThree")&&t.push.apply(t,[3,4,5]),this.selectedList.includes("aboveFour")&&t.push.apply(t,[4,5]),this.selectedList.includes("all")&&t.push.apply(t,[1,2,3,4,5]),this.$emit("filter-change",{star_num:Array.from(new Set(t)).sort((function(a,b){return a-b})),lang:"",sort_type:this.sortType,only_image:!!this.selectedList.includes("img")})}},{key:"sortData",get:function(){return[{name:this.$t("review_filter.recommend"),val:0},{name:this.$t("review_filter.newest"),val:1},{name:this.$t("review_filter.rate_high_to_low"),val:2}]}}]),e}(m.Vue);S([m.State],D.prototype,"klook",void 0),S([Object(m.Prop)()],D.prototype,"reviewGalleryShouldShow",void 0),S([Object(m.Prop)()],D.prototype,"activityId",void 0),S([Object(m.Prop)({default:!1})],D.prototype,"hideButton",void 0),S([Object(m.Watch)("reviewGalleryShouldShow",{immediate:!0})],D.prototype,"reviewGalleryShouldShowChange",null);var x=D=S([Object(m.Component)({components:{ReviewFilterSort:w}})],D),T=(n(2599),Object(j.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"review-filter",class:[t.klook.platform]},["mobile"===t.klook.platform?n("ReviewFilterSort",{attrs:{"sort-data":t.sortData},on:{change:t.onChange},model:{value:t.sortType,callback:function(e){t.sortType=e},expression:"sortType"}}):t._e(),t._v(" "),t.hideButton?t._e():n("div",{staticClass:"review-filter-button-wrapper"},[n("div",{staticClass:"review-filter-button"},t._l(t.filterButtonList,(function(e,o){return n("span",{key:e.name,staticClass:"review-filter-button-item",class:{disabled:e.disabled,on:t.selectedList.includes(e.val)},attrs:{"data-spm-module":"ReviewFilter_LIST?idx="+o+"&len="+t.filterButtonList.length+"&ext="+JSON.stringify({Filter_Name:e.spmName}),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return t.handleFilterButtonClick(e.val)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),0)]),t._v(" "),"desktop"===t.klook.platform?n("div",{staticClass:"review-filter-selector"},[n("klk-select",{attrs:{size:"small"},on:{change:t.onChange},model:{value:t.sortType,callback:function(e){t.sortType=e},expression:"sortType"}},t._l(t.sortData,(function(option,i){return n("klk-option",{key:i,attrs:{value:option.val,label:option.name}})})),1)],1):t._e()],1)}),[],!1,null,"41806033",null));e.a=T.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=(n(52),n(53),n(8),n(47),n(46)),h=n(16),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(f.a)(e,[{key:"currencySymbol",value:function(t){return"".concat(this.klook.currencySymbol).concat(t)}},{key:"initPrice",value:function(){var t=Number(this.sellPrice),e=Number(this.marketPrice);return 4===this.promotionStatus?{sell:Number(this.originalSellingPrice),market:e}:5===this.promotionStatus?{sell:t,market:Number(this.originalSellingPrice)}:{sell:t,market:e}}},{key:"formatSelling",value:function(){var t=this.initPrice().sell,e=Number(this.fromPrice),n=Number(this.toPrice);if(isNaN(t))return"-";if(!t)return"<b>".concat(this.desc,"</b>");if(!this.promotionStatus&&t>0&&n>e)return this.$t("activity_detail_from_price",[12,this.currencySymbol(t)]);var o="<span class='sell-price-box'>".concat(Object(h.y)(t),"</span>");return"<b>".concat(this.currencySymbol(o),"</b>")}},{key:"creditsVisible",get:function(){return this.useCredits&&!this.isGuestCheckout}},{key:"creditsNumber",get:function(){return this.credits&&this.creditsVisible?Math.floor(parseFloat(this.credits.toString())):null}},{key:"creditsText",get:function(){return this.creditsNumber?"".concat(this.$t("header.Credits")," + ").concat(this.creditsNumber):null}},{key:"selling",get:function(){return this.formatSelling()}},{key:"market",get:function(){var t=this.initPrice(),e=t.market;return t.sell<e?this.currencySymbol(Object(h.y)(e)):""}}]),e}(v.Vue);y([v.State],m.prototype,"klook",void 0),y([Object(v.Prop)({default:""})],m.prototype,"credits",void 0),y([Object(v.Prop)({default:""})],m.prototype,"sellPrice",void 0),y([Object(v.Prop)({default:""})],m.prototype,"marketPrice",void 0),y([Object(v.Prop)({default:""})],m.prototype,"fromPrice",void 0),y([Object(v.Prop)({default:""})],m.prototype,"toPrice",void 0),y([Object(v.Prop)({default:0})],m.prototype,"originalSellingPrice",void 0),y([Object(v.Prop)({default:0})],m.prototype,"promotionStatus",void 0),y([Object(v.Prop)({default:""})],m.prototype,"desc",void 0),y([Object(v.Prop)({default:""})],m.prototype,"discount",void 0),y([v.Getter],m.prototype,"useCredits",void 0),y([v.Getter],m.prototype,"isGuestCheckout",void 0);var k=m=y([v.Component],m),O=n(43),_=Object(O.a)(k,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"price"},[this._t("default",null,{sellPrice:this.selling,marketPrice:this.market,creditsNumber:this.creditsNumber,creditsText:this.creditsText,discount:this.discount})],2)}),[],!1,null,null,null).exports,j=n(899),w=n(885),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);P([v.State],C.prototype,"klook",void 0),P([Object(v.Prop)()],C.prototype,"priceShow",void 0),P([Object(v.Prop)({default:""})],C.prototype,"credits",void 0),P([Object(v.Prop)({default:""})],C.prototype,"sellPrice",void 0),P([Object(v.Prop)({default:""})],C.prototype,"marketPrice",void 0),P([Object(v.Prop)({default:""})],C.prototype,"fromPrice",void 0),P([Object(v.Prop)({default:""})],C.prototype,"toPrice",void 0),P([Object(v.Prop)({default:""})],C.prototype,"promotionStatus",void 0),P([Object(v.Prop)({default:""})],C.prototype,"originalSellingPrice",void 0),P([Object(v.Prop)({default:""})],C.prototype,"discount",void 0),P([Object(v.Inject)({from:"fieldsConfig2section",default:function(){return j.a}})],C.prototype,"fieldsConfig2section",void 0);var S=C=P([Object(v.Component)({components:{TotalSlot:w.a,Price:_}})],C),D=(n(1965),Object(O.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-price"},[n("Price",{ref:"price",attrs:{"sell-price":t.sellPrice,credits:t.credits,"market-price":t.marketPrice,"from-price":t.fromPrice,"to-price":t.toPrice,"promotion-status":t.promotionStatus,"original-selling-price":t.originalSellingPrice,discount:t.discount,desc:"Free"}},[n("TotalSlot",{attrs:{"price-data":t.priceShow,"style-type":"flex-column mini-style ta-right custom-style","hide-summary-price":!0}})],1)],1)}),[],!1,null,"2586a7a3",null));e.a=D.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1401),y=n(1462),m=n(918),k=n(887),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).promoTagText="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onPromoTagChange",value:function(t){var e,n,o;if(t){var r=null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time;if(r){var c=Object(k.c)(r);c&&(this.promoTagText=t.text),this.promoTagText=c?t.text:""}else this.promoTagText=t.text}else this.promoTagText=""}},{key:"handleDiscountChange",value:function(){this.setTextMinWidth()}},{key:"setTextMinWidth",value:function(){var t=this;if(this.$isServer)return null;this.$nextTick((function(){t.checkLayout()})),setTimeout((function(){t.checkLayout()}),1e3)}},{key:"checkLayout",value:function(){var t=this.$refs.text,e=this.$refs.discount;if(t&&e){var n=e.scrollWidth||0;n&&n>40&&(t.style.minWidth="".concat(n-40,"px"))}}},{key:"setPromoTagWidth",value:function(){var t=this.$refs.box,e=this.$refs.promoTag;t&&e&&(e.scrollWidth>200?e.style.width=t.scrollWidth>200?"200px":"100%":e.style.width=t.scrollWidth>e.scrollWidth?"auto":"100%")}},{key:"poptipText",get:function(){return this.unChoose?this.$t("activity.date.unavailable"):this.disabled?this.$t("activity.option.unshot_desc"):""}}]),e}(f.Vue);O([Object(f.Prop)()],_.prototype,"openDateTip",void 0),O([Object(f.Prop)()],_.prototype,"content",void 0),O([Object(f.Prop)()],_.prototype,"disabled",void 0),O([Object(f.Prop)()],_.prototype,"active",void 0),O([Object(f.Prop)()],_.prototype,"unChoose",void 0),O([Object(f.Prop)()],_.prototype,"discount",void 0),O([Object(f.Prop)()],_.prototype,"promoTag",void 0),O([Object(f.Watch)("promoTag",{immediate:!0})],_.prototype,"onPromoTagChange",null),O([Object(f.Watch)("discount")],_.prototype,"handleDiscountChange",null);var j=_=O([f.Component],_),w=(n(2495),n(43)),P=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-poptip",{attrs:{content:t.poptipText,"append-to-body":""}},[n("div",{ref:"box",class:["desktop-attr-btn",{disabled:t.disabled,active:t.active,unChoose:t.unChoose}]},[n("div",{staticClass:"flex-box"},[t.unChoose?n("span",{staticClass:"attr-btn_icon"},[n("SvgIcon",{attrs:{name:"desktop-common#calendar_unavailable-new",size:"16"}})],1):t._e(),t._v(" "),n("span",{staticClass:"flex-style"},[n("h3",{ref:"text",staticClass:"attr-btn_text"},[t._v(t._s(t.content))]),t._v(" "),t.openDateTip?n("span",{staticClass:"open-date-text"},[t._v("\n          "+t._s(t.openDateTip)+"\n        ")]):t._e()])]),t._v(" "),t.promoTagText?n("span",{ref:"promoTag",staticClass:"attr-btn_promotag"},[t._v(t._s(t.promoTagText))]):t._e(),t._v(" "),t.promoTagText?n("span",{staticClass:"attr-btn_triangle"}):t._e()])])}),[],!1,null,"b316ba80",null).exports,C=n(1005),S=n(1034),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).moreObj={len:8,status:""},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"specListLenChange",value:function(t){this.isSingleSpec&&"less"!==this.moreObj.status&&(this.moreObj.status=t>this.moreObj.len?"more":"")}},{key:"getStatusList",value:function(t){var e=t||[];return"more"===this.moreObj.status?e.slice(0,this.moreObj.len):e}},{key:"clickShowMore",value:function(t){this.moreObj.status=t}},{key:"getDefaultAttr",value:function(t){for(var i=0;i<t.length;i++)if(t[i].isActive)return t[i].id;return""}},{key:"isDisabled",value:function(t){return!this.isAbExperiment&&this.isAttrDisabled(t)}},{key:"sendGaEvent",value:function(){var t=this.basicData||{},e=t.activity_id,n=t.activity_page_template_id;this.$sendGTMCustomEvent("Booking Options Clicked|Activity Page|".concat(e||this.activityId,"_").concat(n||this.activityPageTemplateId))}},{key:"specListLen",get:function(){var t,e,n;return(null===(n=null===(e=null===(t=this.specList)||void 0===t?void 0:t[0])||void 0===e?void 0:e.attr)||void 0===n?void 0:n.length)||0}}]),e}(h.a);D([Object(f.Prop)()],x.prototype,"basicData",void 0),D([Object(f.Prop)({default:!1})],x.prototype,"showOpenDateTips",void 0),D([Object(f.Prop)({default:!1})],x.prototype,"isAbExperiment",void 0),D([Object(f.Prop)({default:""})],x.prototype,"specTitle",void 0),D([Object(f.Prop)({default:-1})],x.prototype,"activityPageTemplateId",void 0),D([Object(f.Watch)("specListLen",{immediate:!0})],x.prototype,"specListLenChange",null);var T=x=D([Object(f.Component)({components:{ShowMoreBox:S.default,HasOpenDateTips:C.a,PackageOptionsContent:y.a,ActivityMarkdown:m.a,ActivityPackageBtn:P}})],x),I=(n(2496),Object(w.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-options-attr-desktop"},[t._l(t.specList,(function(e){return n("PackageOptionsContent",{key:e.id,staticClass:"package-detail-type",attrs:{"content-title":t.specTitle||e.name}},[0===e.text_type?[n("ShowMoreBox",{attrs:{status:t.moreObj.status},on:{click:t.clickShowMore},scopedSlots:t._u([{key:"btn",fn:function(e){var o=e.calcText,r=e.clickBtn,c=e.status;return[n("div",{class:["btn-wrapper","more"===c&&"show-content"],on:{click:r}},[n("span",{staticClass:"text"},[t._v(t._s(o))]),t._v(" "),n("SvgIcon",{attrs:{name:"mobile-activity#icon_nav_chevron_down_xs",size:"16"}})],1)]}}],null,!0)},[n("div",{staticClass:"attr-btn-group",class:{"single-spec-with-discount":t.isSingleSpecWithDiscount}},t._l(t.getStatusList(e.attr),(function(o){return n("div",{key:o.id,on:{click:t.sendGaEvent}},[n("klk-poptip",[o.tips&&!t.isDisabled(o)&&o.isScheduleMatch?n("ActivityMarkdown",{staticClass:"activity-tag-markdown",attrs:{slot:"content",content:o.tips},slot:"content"}):t._e(),t._v(" "),n("ActivityPackageBtn",{attrs:{id:"js-ticket-type-"+o.id,active:o.isActive,disabled:t.isDisabled(o),"un-choose":!o.isScheduleMatch,content:o.name,discount:o.discount,"promo-tag":o.promoTag,"data-id":o.id,"open-date-tip":o.openDateTip},nativeOn:{click:function(n){return t.handleSelect(o,e)}}})],1)],1)})),0)])]:t._e(),t._v(" "),1===e.text_type?[n("klk-select",{staticClass:"package-opt-select",class:t.getDefaultAttr(e.attr)?"selected":"",attrs:{value:t.getDefaultAttr(e.attr),placeholder:t.$t("global.select.palceholder"),"max-height":300,size:"small"}},t._l(e.attr,(function(o){return n("klk-option",{key:o.id,class:t.isDisabled(o)?"selectDisable":"",attrs:{value:o.id,label:o.name},nativeOn:{click:function(n){return t.handleSelect(o,e)}}},[t._v("\n          "+t._s(o.name)+"\n          "),t.isDisabled(o)?n("p",[t._v(t._s(t.$t("activity.new.package_attr_disabled")))]):t._e()])})),1)]:t._e()],2)})),t._v(" "),t.showOpenDateTips?n("HasOpenDateTips",{staticStyle:{margin:"24px 0"}}):t._e()],2)}),[],!1,null,"7f69ec49",null));e.a=I.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(12),n(47),n(37),n(30),n(20),n(27),n(23);var o=n(4),r=(n(28),n(52),n(53),n(8),n(0)),c=n(13),l=(n(70),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(10),O=n.n(k),_=n(7),j=n.n(_),w=n(211);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"formatTime",value:function(){var t=this.selectedTime.date,e=j()(t,"YYYY-MM-DD hh:mm:ss"),n=!(0===e.hour()&&0===e.minute()&&0===e.second())?5:1;return Object(w.e)(t,this.$t.bind(this),this.klook.language,n)}},{key:"specs",get:function(){var t;if(O()(this.currentSelectedPackage))return this.$emit("invalidPkg"),[];var e=this.currentSelectedPackage.spec_attr_id,n=void 0===e?[]:e,o=null===(t=this.specList)||void 0===t?void 0:t.map((function(t){var e;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{attr:(null===(e=t.attrs)||void 0===e?void 0:e.find((function(t){return n.includes(t.id)})))||{}})}));return this.amount?o.slice(0,this.amount):o}}]),e}(m.Vue);C([m.State],S.prototype,"klook",void 0),C([Object(m.Prop)()],S.prototype,"amount",void 0),C([Object(m.Prop)()],S.prototype,"isNewOpenTicket",void 0),C([Object(m.Prop)()],S.prototype,"currentSelectedPackage",void 0),C([Object(m.Prop)()],S.prototype,"specList",void 0),C([Object(m.Prop)()],S.prototype,"selectedTime",void 0);var D=S=C([m.Component],S),x=(n(2497),n(43)),T=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-package-attrs"},[t._t("default",[t._l(t.specs,(function(e){return n("div",{key:e.id,staticClass:"select-package-attrs_item"},[n("div",{staticClass:"specs-item"},[n("div",{staticClass:"specs-item_title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"attr-item"},[t._v(t._s(e.attr.name))])])])})),t._v(" "),t.selectedTime.date&&!t.isNewOpenTicket?n("div",{staticClass:"select-package-attrs_item"},[n("div",{staticClass:"specs-item"},[n("div",{staticClass:"specs-item_title"},[t._v(t._s(t.$t("activity.new.selected_date_time")))]),t._v(" "),n("div",{staticClass:"attr-item"},[t._v(t._s(t.formatTime()))])])]):t._e()],{specs:t.specs})],2)}),[],!1,null,null,null).exports,I=n(1632),R=n(3),$=n(982),L=n(159),A=n(85),E=n(16),M=n(1913),B=n(1028),N=n(899),V=n(1007),F=n(885),W=n(981),H=n(882),U=n(887);function z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function G(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},K=Object(m.namespace)("auth"),J=Object(m.namespace)("traveller/activity"),X=Object(m.namespace)("experience"),Q=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).role="bookNow",t.ModuleExtra=JSON.stringify({CompletedInfo:!1}),t.minSellPrice="",t.sellPrice="-",t.loading=!1,t.source=null,t.shoppingCartVisible=!1,t.timeList=[],t}var n,r,y;return Object(h.a)(e,t),Object(d.a)(e,[{key:"getDatetimeFormat",value:function(){var t,e,n,o,r=this,c=this.selectedTime,l=this.isPkgOpenTicket;if(this.sectionActData.isWifiSimCard)return null===(t=this.wifiSimParams)||void 0===t?void 0:t.datetime_format;if(l)return this.$t("24717");var d="",v=(c||{}).date,f=1===(null===(o=null===(n=null===(e=this.packageSchedules||[])||void 0===e?void 0:e.find((function(t){return t.date===r.packageSelectedDate})))||void 0===n?void 0:n.time_slots)||void 0===o?void 0:o.length)?1:5;if(v){var h=this.$t.bind(this);d=Object(w.e)(v,h,this.klook.language,f)}return d}},{key:"getExtraList",value:function(){var t=this.bookingDays,e=[];return t>=1&&e.push({text:this.$t("3485"),value:"x".concat(t)}),e}},{key:"updated",value:function(){var t,e=this.packageId,n=this.selectedTime,o=this.allUnitCount;e&&(null===(t=n)||void 0===t?void 0:t.arrangementId)&&o()||H.a.$emit("updateRightPriceData2bus",{})}},{key:"toastHandler",value:function(t){var content=t.content;this.$toast(content),this.$businessLog({type:"FECheckFail",tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",reason:content})}},{key:"currentSelectedPackageChange",value:function(t){O()(t)||this.getPackageCutDownTime(t),this.getSellPrice()}},{key:"stockChange",value:function(){this.getSellPrice()}},{key:"getPackageCutDownTime",value:function(t){var e,n,o,r=(null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[],c=[];(null===(o=r)||void 0===o?void 0:o.length)?(r.forEach((function(t){var e,n,o,r=null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time;r&&(Object(U.c)(r)&&c.push(r))})),this.timeList=c.length?c:[]):this.timeList=[]}},{key:"reload",value:function(){window&&window.location.reload()}},{key:"getSellPrice",value:function(){if(this.stock){var t=this.stock,e=t.from_price;e===t.to_price?(this.sellPrice=e,this.minSellPrice=""):this.minSellPrice="".concat(A.b[this.klook.currency]," ").concat(Object(E.y)(e))}else if(O()(this.currentSelectedPackage))this.sellPrice="-";else{var n=this.currentSelectedPackage,o=n.from_price;o===n.to_price?(this.sellPrice=o,this.minSellPrice=""):(this.minSellPrice="".concat(A.b[this.klook.currency]," ").concat(Object(E.y)(o)),this.sellPrice="-")}}},{key:"getWifiSimParams",value:function(){var t={};if(this.sectionActData.isWifiSimCard){var e=this.wifiSimParams||{};t={start_date:e.start_date||"",end_date:e.end_date||"",start_time_type_id:e.start_time_type_id||0,end_time_type_id:e.end_time_type_id||0}}return t}},{key:"getParams",value:function(){var t=this.getSessionData("params");if(t)return t;var e=this.selectedTime.arrangementId,n=this.packagePriceSchedules.find((function(t){return t.arrangementId===e})),o=n?n.date:"",r=this.units.reduce((function(t,e){return e.count>0?[].concat(Object(c.a)(t),[{sku_id:e.skuId,price_id:e.priceId,count:e.count,event_id:e.isInPromotion?e.eventId:0}]):t}),[]),l=this.getWifiSimParams(),d=G({arrangement_id:e,schedule_end_id:e,package_id:this.currentSelectedPackage.package_id,template_id:this.templateId,is_open_ticket:this.currentSelectedPackage.isOpenTicket,schedule_end_time:o,price_items:r,shoppingcart_type:"bookNow"===this.role?1:0},l);return-1!==this.shoppingCartId?G({},d,{shoppingcart_id:this.shoppingCartId}):d}},{key:"allUnitCount",value:function(){var t=0;return this.units&&this.units.length>0&&this.units.forEach((function(e){t+=e.count})),t}},{key:"creditsText",value:function(){var t,e=this.vip,n=this.calcPreTotalPrice.credits,o=null===(t=e)||void 0===t?void 0:t.highlight_color,r=this.$t("credits_info.get_credits.booking_text",[n||this.credits]).toString();return o&&(r=r.replace("<b>",'<b style="color: '.concat(o,'">'))),r}},{key:"addToCart",value:function(){var t=this.basicData||{},e=t.activity_id,n=t.activity_page_template_id;this.$sendGTMCustomEvent("Add To Cart Clicked|Activity Page|".concat(e||this.activityId,"_").concat(n||this.activityPageTemplateId)),this.$emit("clickButton"),this.$parent.checkDateAndTime()&&(this.role="addToCart",this.handleClick())}},{key:"handleCloseModalEvent",value:function(){this.showShoppingCart&&this.showShoppingCart()}},{key:"showShoppingCart",value:function(){this.source=this.$el.querySelector(".add-cart"),this.shoppingCartVisible=!0}},{key:"bookNow",value:function(){var t,e=this.basicData||{},n=e.activity_id,o=e.activity_page_template_id;if(this.$sendGTMCustomEvent("Book Now Clicked|Activity Page|".concat(n||this.activityId,"_").concat(o||this.activityPageTemplateId)),this.$emit("clickButton"),this.$parent.checkDateAndTime()){if(this.sectionActData.isWifiSimCard&&"function"==typeof(null===(t=this.wifiSimParams)||void 0===t?void 0:t.validateFn)){var r=this.wifiSimParams.validateFn();if(r)return this.$toast(r)}this.role="bookNow",this.handleClick()}}},{key:"handleNoLogin",value:(y=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$loginSDK({purpose:"addToCart"===this.role?"Cart":"Booking",success:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.bookRequest();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fallback:function(){e.saveBookingOptions()}});case 2:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"handleClick",value:(r=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.totalUnitCount){t.next=3;break}return this.$toast(this.$t("activity.booking.options.select.quantity")),t.abrupt("return");case 3:if(o=this.currentSelectedPackage.min_pax,!(this.totalUnitCount<o)){t.next=7;break}return this.$toast(this.$t("activity.error.price_min",[o])),t.abrupt("return");case 7:if(!this.isGuestCheckout){t.next=22;break}return t.next=10,null===(e=this.klook.utilConfig)||void 0===e?void 0:e.whiteLabelUtilConfig;case 10:if(!t.sent){t.next=17;break}return t.next=13,this.klook.utilConfig.whiteLabelUtilConfig.sdk.login();case 13:t.sent&&this.bookRequest(),t.next=21;break;case 17:return t.next=19,this.$axios.$post(R.a.registerGuest);case 19:r=t.sent,(null===(n=r)||void 0===n?void 0:n.success)&&this.bookRequest();case 21:return t.abrupt("return");case 22:if(this.isLoggedIn){t.next=26;break}return t.next=25,this.handleNoLogin();case 25:return t.abrupt("return");case 26:this.bookRequest();case 27:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"bookRequest",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y,m,k,O,_,j,w,P,C,S,D,x,T,I=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ModuleExtra=JSON.stringify({CompletedInfo:!0}),w=-1===this.shoppingCartId?"addToCart"===this.role?R.a.bookingNow:R.a.expPostPreOrderServiceNew:"addToCart"===this.role?R.a.addToShoppingCard:R.a.postExpEditeShoppingCartAndnew,P=this.getParams(),-1===this.shoppingCartId&&"addToCart"!==this.role&&(S=(C=P).arrangement_id,D=C.price_items,P=Object(E.B)(S,D,{wifiSimParams:this.getWifiSimParams()})),this.$showLoading({overlayColor:"rgba(255, 255, 255, 0.7)"}),t.prev=5,t.next=8,this.$axios.$post(w,P);case 8:if(x=t.sent,this.$hideLoading(),!x.success){t.next=14;break}return"addToCart"===this.role&&this.$inhouse.track("custom","body",{spm:"AddToCartSuccessLoad",shoppingcart_id:null===(e=x.result)||void 0===e?void 0:e.shoppingcart_id}),setTimeout((function(){var t,e=+new Date,n="undefined"!=typeof _args3?_args3:null,o=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-e;t=__in_house.get_spm_info(t,{duration:o,args:n})}catch(t){console.warn("Get spm info error",t)}return t};"bookNow"===I.role?(I.$tracker.$emit("activity.sendMixpanel",{name:"BookNow_Confirmed"}),I.$sendGTMCustomEvent("Activity Page|Book Now Button Clicked"),Object(E.kb)(I,{name:"ExperiencePay",query:{settlement_type:"1",shoppingcart_guid:null===(t=x.result)||void 0===t?void 0:t.pre_order_id}})):(I.$tracker.$emit("activity.sendMixpanel",{name:"AddToCart_Confirmed"}),I.$sendGTMCustomEvent("Activity Page|Add To Cart Button Clicked"),-1===I.shoppingCartId?I.showShoppingCart():window.location.href=o(o(I.$href("/shoppingcart"))))})),t.abrupt("return");case 14:if("4001"!==(null===(o=null===(n=x)||void 0===n?void 0:n.error)||void 0===o?void 0:o.code)){t.next=18;break}return t.next=17,this.handleNoLogin();case 17:return t.abrupt("return");case 18:if("01001007027"!==x.error.code){t.next=22;break}return this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"ApiError",reason:"价格改变了",code:null===(c=null===(r=x)||void 0===r?void 0:r.error)||void 0===c?void 0:c.code,message:null===(d=null===(l=x)||void 0===l?void 0:l.error)||void 0===d?void 0:d.message}),this.$confirm(this.$t("16995-price_change_tips"),"",{okLabel:this.$t("global.tips.okTxt"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(t){t.result&&window.location.reload()})),t.abrupt("return");case 22:this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"ApiError",code:null===(f=null===(v=x)||void 0===v?void 0:v.error)||void 0===f?void 0:f.code,message:null===(y=null===(h=x)||void 0===h?void 0:h.error)||void 0===y?void 0:y.message}),B.a.includes(null===(k=null===(m=x)||void 0===m?void 0:m.error)||void 0===k?void 0:k.code)?this.$confirm(x.error.message,{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("global.tips.cancelTxt")}).then((function(t){t.result&&window.location.reload()})):this.$alert(x.error&&x.error.message),t.next=32;break;case 26:t.prev=26,t.t0=t.catch(5),T=t.t0,this.$businessLog({tag:"bookNow"===this.role?"BookNowBtn":"AddToCartBtn",type:"JsError",name:null===(O=T)||void 0===O?void 0:O.name,stack:null===(_=T)||void 0===_?void 0:_.stack,message:null===(j=T)||void 0===j?void 0:j.message}),this.$hideLoading(),this.$alert(T).then((function(){window.location.reload()}));case 32:case"end":return t.stop()}}),t,this,[[5,26]])}))),function(){return n.apply(this,arguments)})},{key:"saveBookingOptions",value:function(){L.d(this.preOrderKey,JSON.stringify({params:this.getParams()}))}},{key:"getSessionData",value:function(t){var e=L.b(this.preOrderKey);if(!e)return null;try{var data=JSON.parse(e);return data&&data[t]}catch(t){return null}}},{key:"scrollToPackageOptionsTop",value:function(){Object(I.a)()}},{key:"btnClickInHouse",value:function(t){var e=this.packageId||null;return"addToCart"===t?this.isFixedBtn?"AddToCartBtn?trg=manual&oid=package_".concat(e,"&ext=").concat(this.newModuleExtra):"PackageOptionsAddToCartBtn?trg=manual&oid=package_".concat(e,"&ext=").concat(this.newModuleExtra):this.isFixedBtn?"BookNowBtn?trg=manual&oid=package_".concat(e,"&ext=").concat(this.newModuleExtra):"PackageOptionsBookNowBtn?trg=manual&oid=package_".concat(e,"&ext=").concat(this.newModuleExtra)}},{key:"mounted",value:function(){var t=L.b(this.preOrderKey);t&&this.isLoggedIn&&(this.role=JSON.parse(t).params.shoppingcart_type?"bookNow":"addToCart",this.bookRequest()),L.a(this.preOrderKey)}},{key:"isPkgOpenTicket",get:function(){var t;return 3===(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.package_ticket_type)}},{key:"calcPreTotalPrice",get:function(){var t,e,n,o,r=null===(t=this.preSettlementApiData)||void 0===t?void 0:t.result,c=this.selectedTime,l=this.allUnitCount,d=c&&c.arrangementId,v=this.getExtraList(),f=Object(F.b)(this.currentSelectedPackage,r,{oldPriceShow:{price_summary:Object(F.c)(this.currentSelectedPackage,this.units||[],this.klook.currency,{extra_list:v}),sale_price:d&&this.price>0||l()?Object(E.v)(this.klook.currency,this.price):"",from_price:!d&&this.minSellPrice?this.minSellPrice:""}});if(this.calcShowPrice){var h=this.handleCloseModalEvent,y=this.isBtnVisibleAddtocart,m=this.isMultiPass,k=this.bookingBottomBtnsBinds,O=this.creditsVisible,_=this.credits,j=(null===(e=f)||void 0===e?void 0:e.credits)||_,w={text:this.$t("activity.new.credits",{account:Math.floor(j)}),tag_key:"normal-credits",background_color:"#F0FFFA",text_color:"#0DA06A",border_color:"#F0FFFA"},P=(null===(n=this.currentSelectedPackage)||void 0===n?void 0:n.credits_tag)||{};if(null===(o=P)||void 0===o?void 0:o.text){var text="".concat(P.text.split(" ")[0]," +").concat(j);w=G({},P,{text:text})}H.a.$emit("updateRightPriceData2bus",{creditsObj:{creditsVisible:O,tagCredits:w},rightPriceDetail:Object(F.c)(this.currentSelectedPackage,this.units||[],this.klook.currency,{extra_list:v,datetime_format:this.getDatetimeFormat(),package_id:this.currentSelectedPackage.package_id}),prePriceData:f,handleCloseModalEvent:h,bookingBottomBtnsBinds:k,isBtnVisibleAddtocart:y,isMultiPass:m})}else H.a.$emit("updateRightPriceData2bus",{});return f}},{key:"isSoldOut",get:function(){var t=this.packages;return O()(t)||t.every((function(t){return!t.has_stocks}))}},{key:"bookingBottomBtnsBinds",get:function(){return{wifiSimParams:this.wifiSimParams,msgFn:this.toastHandler,selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,templateId:this.templateId,units:this.units,activityId:this.activityId,isSoldOut:this.isSoldOut,isYiFunVoucher:this.isYiFunVoucher,isOpenTicket:this.isNewOpenTicket,selectedPackagePriceSchedule:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount}}},{key:"calcShowPrice",get:function(){var t;return!(null===(t=this.selectedTime)||void 0===t||!t.arrangementId||O()(this.units))&&(this.units||[]).reduce((function(t,e){return t+=e.count||0}),0)>0}},{key:"calcBookButtonText",get:function(){var t;return this.$t(Object(N.b)(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.redeem_status))}},{key:"stock",get:function(){var t=this;if(this.packageSelectedDate){var e=this.priceSchedulesObj[this.packageSelectedDate];if(e&&e.stocks){var n=e.stocks.find((function(e){return e.package_id===t.packageId}));if(n)return n}}}},{key:"newModuleExtra",get:function(){var t=JSON.parse(this.ModuleExtra)||{},e=this.selectedTime.date;e&&(t.date=e.split(" ")[0]||"");var n=(this.units||[]).filter((function(t){return t.count>0}));return n.length&&(t.sku=n.map((function(t){return t.skuId})),t.quantitiy=n.map((function(t){return t.count}))),JSON.stringify(t)}},{key:"creditsVisible",get:function(){return!this.fieldsConfig2section.activity_custom_config_hide_credit&&!this.isGuestCheckout&&!this.custom_config_hide_credit&&this.credits>0}},{key:"isBtnVisibleAddtocart",get:function(){var t="boolean"==typeof this.isSupportShoppingCart?this.isSupportShoppingCart:!this.isNswActivity;return![47631,46820,48639,48789,55826,49807,55724,68784].includes(this.activityId)&&t&&!this.isGuestCheckout}},{key:"usingPriceScheduleStock",get:function(){return this.isUsingPackagePriceSchedule&&this.packageSelectedDate}},{key:"marketPrice",get:function(){if(this.usingPriceScheduleStock)return 0;if(this.currentSelectedPackage){var t=this.currentSelectedPackage,e=t.sell_price,n=t.market_price;return Number(n)>Number(e)?n:0}return 0}},{key:"addToCartText",get:function(){return this.modificationShoppingCart?this.$t("shoppingcart.confirm_change"):this.$t("activity.label.add_to_cart")}},{key:"bookingDays",get:function(){var t;return(null===(t=this.wifiSimParams)||void 0===t?void 0:t.days)||0}},{key:"price",get:function(){var t,e;if(O()(this.units))return 0;var n=(null===(e=(null===(t=this.units[0])||void 0===t?void 0:t.sellingPrice)||"")||void 0===e?void 0:e.toString().split("."))[1]||"",o=this.units.reduce((function(t,e){return t+e.sellingPrice*e.count}),0);return this.bookingDays?(o*this.bookingDays).toFixed(Number(n.length)):o.toFixed(Number(n.length))}},{key:"discountText",get:function(){var t,e;if(!this.isInPromotion||O()(this.units))return"";var n=this.units.reduce((function(t,e){return t+e.sellingPrice*e.count}),0),o=this.units.reduce((function(t,e){return t+e.originalPrice*e.count}),0),r=Number(o-n);if(r>0){var c=(null===(e=(null===(t=this.units[0])||void 0===t?void 0:t.sellingPrice)||"")||void 0===e?void 0:e.toString().split("."))[1]||"";return this.$t("16579",{0:Object(E.y)(r.toFixed(Number(c.length))),currency:A.b[this.klook.currency]})}return""}},{key:"credits",get:function(){if(O()(this.units))return 0;var t=this.units.reduce((function(t,e){var n;return t+parseFloat(null===(n=e.credits)||void 0===n?void 0:n.toString())*e.count}),0);return this.bookingDays?parseInt((t*this.bookingDays).toString()):parseInt(t.toString())}},{key:"shoppingCartId",get:function(){return parseInt(this.$route.query.shop_id)||-1}},{key:"preOrderKey",get:function(){return"activity_pre_order_".concat(this.activityId)}}]),e}(m.Vue);Y([X.State],Q.prototype,"sectionActData",void 0),Y([m.State],Q.prototype,"klook",void 0),Y([J.State],Q.prototype,"preSettlementApiData",void 0),Y([K.State],Q.prototype,"isLoggedIn",void 0),Y([m.Getter],Q.prototype,"isGuestCheckout",void 0),Y([Object(m.Prop)({default:null})],Q.prototype,"wifiSimParams",void 0),Y([Object(m.Prop)()],Q.prototype,"basicData",void 0),Y([Object(m.Prop)()],Q.prototype,"packages",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"isMultiPass",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"fixedComponent",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"isFixedBtn",void 0),Y([Object(m.Prop)()],Q.prototype,"modificationShoppingCart",void 0),Y([Object(m.Prop)()],Q.prototype,"packageId",void 0),Y([Object(m.Prop)()],Q.prototype,"activityId",void 0),Y([Object(m.Prop)({default:-1})],Q.prototype,"activityPageTemplateId",void 0),Y([Object(m.Prop)()],Q.prototype,"templateId",void 0),Y([Object(m.Prop)()],Q.prototype,"selectedTime",void 0),Y([Object(m.Prop)()],Q.prototype,"units",void 0),Y([Object(m.Prop)()],Q.prototype,"totalUnitCount",void 0),Y([Object(m.Prop)()],Q.prototype,"currentSelectedPackage",void 0),Y([Object(m.Prop)()],Q.prototype,"packageSchedules",void 0),Y([Object(m.Prop)()],Q.prototype,"packagePriceSchedules",void 0),Y([Object(m.Prop)()],Q.prototype,"packageSelectedDate",void 0),Y([Object(m.Prop)()],Q.prototype,"isUsingPackagePriceSchedule",void 0),Y([Object(m.Prop)()],Q.prototype,"priceSchedulesObj",void 0),Y([Object(m.Prop)()],Q.prototype,"isInPromotion",void 0),Y([Object(m.Prop)()],Q.prototype,"fetchPromotionDetailStatus",void 0),Y([Object(m.Prop)()],Q.prototype,"isNswActivity",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"isJumpOldSettlement",void 0),Y([Object(m.Prop)()],Q.prototype,"spec",void 0),Y([Object(m.Prop)()],Q.prototype,"isNewOpenTicket",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"isYiFunVoucher",void 0),Y([Object(m.Prop)({default:!1})],Q.prototype,"custom_config_hide_credit",void 0),Y([Object(m.Inject)({from:"fieldsConfig2section",default:function(){return N.a}})],Q.prototype,"fieldsConfig2section",void 0),Y([Object(m.Prop)()],Q.prototype,"vip",void 0),Y([Object(m.Prop)({default:null})],Q.prototype,"isSupportShoppingCart",void 0),Y([Object(m.Watch)("currentSelectedPackage",{immediate:!0})],Q.prototype,"currentSelectedPackageChange",null),Y([Object(m.Watch)("stock",{immediate:!0})],Q.prototype,"stockChange",null);var Z=Q=Y([Object(m.Component)({components:{TotalSlot:F.a,SavingPriceDetailsPoptip:V.a,SelectPackageAttrs:T,ActivityDotFlashing:M.a,ShoppingCart:$.default,CutDown:W.default}})],Q),tt=(n(2498),Object(x.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-options-btnGroup"},[t.packageId?["loading"===t.fetchPromotionDetailStatus?n("div",{staticClass:"options-btnGroup-left options-placeholder"},[n("ActivityDotFlashing")],1):t.selectedTime&&t.selectedTime.arrangementId?n("div",{staticClass:"options-btnGroup-left"},[n("CutDown",{staticStyle:{"margin-bottom":"6px"},attrs:{"time-list":t.timeList,size:"small"},on:{reload:t.reload}}),t._v(" "),n("div",{staticClass:"price-detail"},[t.allUnitCount()>0?n("p",{staticClass:"cost-detail-wrap"},[n("TotalSlot",{attrs:{"price-data":t.calcPreTotalPrice}},[t.calcPreTotalPrice&&t.calcPreTotalPrice&&!t.calcPreTotalPrice.save_price?n("SavingPriceDetailsPoptip",{staticClass:"inline-block price-details",attrs:{slot:"price-details-value","price-summary":t.calcPreTotalPrice.price_summary,"hide-dashed":!0},slot:"price-details-value"},[t._v("\n              "+t._s(t.$t("activity.new.amount_details"))+"\n            ")]):t._e()],1)],1):n("div",[n("p",{staticClass:"cost-detail-price"},[t._v(t._s(t._f("currencyToSymbol")(t.klook.currency))+" -")]),t._v(" "),n("p",{staticClass:"attr-tip"},[t._v(t._s(t.$t("14720")))])])]),t._v(" "),t.creditsVisible?n("p",{staticClass:"cost-detail-integral",domProps:{innerHTML:t._s(t.creditsText())}}):t._e()],1):n("div",{staticClass:"options-promotion-left"},[n("CutDown",{staticStyle:{"margin-bottom":"6px"},attrs:{"time-list":t.timeList,size:"small"},on:{reload:t.reload}}),t._v(" "),n("TotalSlot",{attrs:{"price-data":t.calcPreTotalPrice}}),t._v(" "),n("p",{staticClass:"attr-tip"},[t._v(t._s(t.$t("14720")))])],1)]:t._e(),t._v(" "),t.packageId?n("div",{staticClass:"options-btnGroup-right"},[t.isBtnVisibleAddtocart?n("div",{staticClass:"in-house-btn",attrs:{"data-spm-module":t.btnClickInHouse("addToCart")}},[n("klk-button",{staticClass:"add-cart",attrs:{size:"large","data-spm-item":"__default"},on:{click:t.addToCart}},[t._v("\n        "+t._s(t.addToCartText)+"\n      ")])],1):t._e(),t._v(" "),n("div",{staticClass:"in-house-btn",attrs:{"data-spm-module":t.btnClickInHouse("bookNow")}},[n("klk-button",{attrs:{type:"primary",size:"large","data-spm-item":"__default"},on:{click:t.bookNow}},[t._v("\n        "+t._s(t.calcBookButtonText)+"\n      ")])],1)]):!t.packageId&&t.fixedComponent?n("div",{staticClass:"select-options-btn"},[n("div",{staticClass:"in-house-btn"},[n("klk-button",{attrs:{type:"primary",size:"large"},on:{click:t.scrollToPackageOptionsTop}},[t._v("\n        "+t._s(t.$t("activity.select.option"))+"\n      ")])],1)]):t._e(),t._v(" "),t.fixedComponent&&t.packageId?n("div",{staticClass:"btn-edit",on:{click:t.scrollToPackageOptionsTop}},[n("SvgIcon",{attrs:{name:"common#icon_edit_edit_xs-new",size:"24"}}),t._v("\n    "+t._s(t.$t("activity.new.edit_options"))+"\n  ")],1):t._e(),t._v(" "),n("ShoppingCart",{attrs:{position:t.source,visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],2)}),[],!1,null,"7eed80b6",null));e.a=tt.exports},function(t,e,n){"use strict";n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=(n(22),n(14),n(11),n(8),n(12),n(20),n(27),n(70),n(0)),y=n(10),m=n.n(y),k=n(1832),O=n(924);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t.showAllSpec=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"closeModal",value:function(){this.visible=!1,this.$emit("moduleClose")}},{key:"mounted",value:function(){this.visible=!0}},{key:"specs",get:function(){if(m()(this.currentSelectedPackage))return[];var t=this.currentSelectedPackage.specAttrIds,e=void 0===t?[]:t;return this.specList.map((function(t){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{attr:t.attrs.find((function(t){return e.includes(t.id)}))||{}})}))}},{key:"isAiTranslation",get:function(){return this.translateButtonVisible&&this.isTranslated}},{key:"translateButtonVisible",get:function(){var t;return!!(null===(t=this.packageDetail)||void 0===t?void 0:t.enableTranslationButton)}},{key:"isTranslated",get:function(){var t;return!(null===(t=this.packageDetail)||void 0===t?void 0:t.translationButtonStatus)}}]),e}(f.Vue);j([f.State],w.prototype,"klook",void 0),j([Object(f.Prop)()],w.prototype,"packageDetail",void 0),j([Object(f.Prop)()],w.prototype,"currentSelectedPackage",void 0),j([Object(f.Prop)()],w.prototype,"specList",void 0),j([Object(f.Prop)()],w.prototype,"isPresale",void 0),j([Object(f.Prop)({default:!0})],w.prototype,"expandAll",void 0);var P=w=j([Object(f.Component)({components:{PublishAi:O.a,NewActivityPackageDetail:k.a}})],w),C=(n(2499),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-modal",{staticClass:"activity-package-detail-module",attrs:{title:t.$t("1603"),size:"large",open:t.visible,"esc-press-closable":!0,closable:!0,"lock-scroll":"",padding:40,"overlay-closable":!0,"show-default-footer":!1},on:{"update:open":function(e){t.visible=e},close:t.closeModal}},[n("div",{staticClass:"klk-modal-content"},[n("NewActivityPackageDetail",{attrs:{"package-detail":t.packageDetail,"expand-all":t.expandAll}})],1)])}),[],!1,null,"3f42aa0d",null).exports,D=n(2196),x=n(212),T=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},I=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).detailModuleVisible=!1,t.detailsTitleList=[],t.packageDetailStyle={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"fetchPackageDetailStatusChange",value:function(t){var e=this;"success"===t&&this.$nextTick((function(){e.detailsTitleList=document.querySelectorAll("#slide-package-detail .act-side-package-detail-title"),e.resetDetailPosition()}))}},{key:"moduleClose",value:function(){var t=this;this.$nextTick((function(){t.detailModuleVisible=!1}))}},{key:"showModule",value:function(){this.detailModuleVisible=!0}},{key:"skipToTitle",value:function(t){var e=document.querySelectorAll("#slide-package-detail .act-side-package-detail")||[],n=e[t]?e[t].offsetTop:0;document.querySelector("#slide-package-detail").scrollTo(0,n)}},{key:"resetDetailPosition",value:function(){var t=document.querySelector(".js-scroll-right-price-wrap");if(t){var e=Object(x.c)(t)+t.offsetHeight,n=this.$refs.activityPackageDetail,o=Object(x.c)(n);e>o&&(this.packageDetailStyle={top:e-o+30+"px"})}}},{key:"spm",value:function(text){return text.replace(/(^\s*)|(\s*$)/g,"")}},{key:"handlePickUpClick",value:function(){this.detailModuleVisible=!0,setTimeout((function(){var t=document.querySelector(".js-activity-package-detail-module .js-search-pick-up-keywards-desktop");t&&t.scrollIntoView({block:"start"})}),600)}}]),e}(f.Vue);T([f.State],I.prototype,"klook",void 0),T([Object(f.Prop)()],I.prototype,"packageId",void 0),T([Object(f.Prop)()],I.prototype,"packageDetail",void 0),T([Object(f.Prop)()],I.prototype,"fetchPackageDetailStatus",void 0),T([Object(f.Prop)()],I.prototype,"currentSelectedPackage",void 0),T([Object(f.Prop)()],I.prototype,"specList",void 0),T([Object(f.Prop)()],I.prototype,"isPresale",void 0),T([Object(f.Prop)({default:!0})],I.prototype,"expandAll",void 0),T([Object(f.Watch)("fetchPackageDetailStatus")],I.prototype,"fetchPackageDetailStatusChange",null);var R=I=T([Object(f.Component)({components:{PackageDetailModule:S,PackageDetailContent:D.a}})],I),$=(n(2500),Object(C.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"activityPackageDetail",staticClass:"activity-package-detail",style:t.packageDetailStyle},["fetching"===t.fetchPackageDetailStatus?n("klk-loading",{staticClass:"loading"}):t._e(),t._v(" "),"success"===t.fetchPackageDetailStatus?n("div",{staticClass:"detail-main"},[n("div",{staticClass:"arrow"},[n("SvgIcon",{staticClass:"arc-arrow",attrs:{name:"desktop-common#arc-arrow-new",width:"13",height:"56"}})],1),t._v(" "),n("div",{staticClass:"details-content"},[n("header",{staticClass:"detail-title"},[n("div",{staticClass:"detail-title-header"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("1603")))]),t._v(" "),n("SvgIcon",{directives:[{name:"track",rawName:"v-track:module:PackageDetail.ViewMore",value:{oid:"package_"+t.packageId,trg:"manual"},expression:"{\n              oid: `package_${packageId}`,\n              trg: 'manual'\n            }",arg:"module:PackageDetail",modifiers:{ViewMore:!0}}],staticClass:"expand-icon",attrs:{"data-spm-virtual-item":"__virtual",name:"desktop-activity#icon_other_expand_xs",size:"20"},nativeOn:{click:function(e){return e.stopPropagation(),t.showModule(e)}}})],1)]),t._v(" "),n("PackageDetailContent",{staticClass:"details-content-scroll custom-spec-tag-style",attrs:{id:"slide-package-detail",type:"slideDetail","attraction-size":"small","package-detail":Object.assign({},t.packageDetail,{packageId:t.packageId}),"max-height":"240px","expand-all":t.expandAll,size:"small","show-package-name":!1,"simplified-pick-up":!0},on:{pickUpClick:t.handlePickUpClick}})],1),t._v(" "),n("div",{staticClass:"show-module"})]):t._e(),t._v(" "),t.detailModuleVisible?n("PackageDetailModule",{staticClass:"js-activity-package-detail-module",attrs:{"package-detail":Object.assign({},t.packageDetail,{packageId:t.packageId}),"current-selected-package":t.currentSelectedPackage,"spec-list":t.specList,"is-presale":t.isPresale,"expand-all":t.expandAll},on:{moduleClose:t.moduleClose}}):t._e()],1)}),[],!1,null,"3c1a1ca2",null));e.a=$.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(25),r=n(13),c=n(0),l=(n(47),n(70),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(7),k=n.n(m),O=n(21),_=n(908),j=(n(52),n(53),n(890)),w=n(912),P=n(886);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).bsObjSavePrice=Object(j.getBottomSheetConfig)("fixed-height-config",{class:""}),t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"visibleChange",value:function(t){var e=this;t&&this.$nextTick((function(){var t,n,o,r,c=null===(n=null===(t=e)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.querySelector(".klk-date-picker-date.klk-date-picker-date-selected");if(e.scrollIntoView(c),!c){var l=null===(r=null===(o=e)||void 0===o?void 0:o.$el)||void 0===r?void 0:r.querySelector(".klk-date-picker-date:not(.klk-date-picker-date-disabled):not(.klk-date-picker-date-empty)");e.scrollIntoView(l)}}))}},{key:"onPackageSelectedDateChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.datePickerRef){var n=t?this.getLocalDate(t):this.defaultViewDate;this.setViewDate(n)}t!==e&&this.handleChange(t)}},{key:"handleChange",value:function(t){var e=t?this.getFormatDate(t):"",n=this.schedulesMap[e];this.$emit("input",e,n),this.$emit("change",e,n)}},{key:"minDateChanged",value:function(t){var e=this;this.$nextTick((function(){if(e.datePickerRef&&!e.calendarDate){e.setViewDate(e.defaultViewDate);var t=setTimeout((function(){e.setViewDate(e.defaultViewDate),clearTimeout(t)}),700)}}))}},{key:"setViewDate",value:function(t){this.datePickerRef.setViewDate(t)}},{key:"scrollIntoView",value:function(t){t&&t.scrollIntoView({block:"start",inline:"start",behavior:"smooth"})}},{key:"getLocalDate",value:function(t){var e=k()(t||void 0).toString();return new Date(e)}},{key:"close",value:function(){this.$emit("update:visible",!1)}},{key:"handleDateChange",value:function(t){var e=this,n=t?this.getFormatDate(t):"";!this.isNewOpenTicket&&this.inhouseTrack(n),this.$emit("change",n),setTimeout((function(){e.close()}),100)}},{key:"getPrice",value:function(t){var e;return null===(e=this.getSchedule(t))||void 0===e?void 0:e.selling_price}},{key:"showItemLegend",value:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)}},{key:"getSchedule",value:function(t){var e=this.getFormatDate(t);return this.schedulesMap[e]}},{key:"getFormatDate",value:function(t){return k()(t).format("YYYY-MM-DD")}},{key:"shouldDateDisabled",value:function(t){var e=this.getFormatDate(t);return!this.getSchedule(t)||this.isSoldout(e)}},{key:"formatDay",value:function(t){return k()(t).format("D")}},{key:"isSoldout",value:function(t){var e=this.getFormatDate(t),n=this.schedulesMap[e];if(n)return n.soldout}},{key:"inhouseTrack",value:function(t){var e=this;this.$inhouse.updateBinding(this.datePickerRef.$el,{ext:JSON.stringify({Date:t})}),setTimeout((function(){e.$inhouse.track("action",e.datePickerRef.$el)}),20)}},{key:"calendarDate",get:function(){return this.date?this.getLocalDate(this.date):null}},{key:"schedulesMap",get:function(){var t;return null===(t=this.schedules)||void 0===t?void 0:t.reduce((function(t,e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,Object(c.a)({},e.date,e))}),{})}},{key:"defaultViewDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.find((function(t){var e,n;return null===(n=null===(e=t)||void 0===e?void 0:e.time_slots)||void 0===n?void 0:n.some((function(t){var e;return null===(e=t)||void 0===e?void 0:e.stock}))}));return(null===(e=o)||void 0===e?void 0:e.date)?this.getLocalDate(null===(n=o)||void 0===n?void 0:n.date):this.minDate}},{key:"minDate",get:function(){var t,e;return this.getLocalDate(null===(e=null===(t=this.schedules)||void 0===t?void 0:t[0])||void 0===e?void 0:e.date)}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.length;return 0===o?null:this.getLocalDate(null===(n=null===(e=this.schedules)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}}]),e}(O.Vue);S([O.State],D.prototype,"klook",void 0),S([Object(O.Prop)()],D.prototype,"isNewOpenTicket",void 0),S([Object(O.Prop)()],D.prototype,"packageId",void 0),S([Object(O.Prop)()],D.prototype,"title",void 0),S([Object(O.Prop)()],D.prototype,"visible",void 0),S([Object(O.Prop)()],D.prototype,"date",void 0),S([Object(O.Prop)()],D.prototype,"schedules",void 0),S([Object(O.Prop)({default:!0})],D.prototype,"priceVisible",void 0),S([Object(O.Ref)()],D.prototype,"datePickerRef",void 0),S([Object(O.Prop)({default:function(){return[]}})],D.prototype,"legends",void 0),S([Object(O.Watch)("visible",{immediate:!0})],D.prototype,"visibleChange",null),S([Object(O.Watch)("date",{immediate:!0})],D.prototype,"onPackageSelectedDateChanged",null),S([Object(O.Watch)("minDate",{immediate:!0})],D.prototype,"minDateChanged",null);var x=D=S([Object(O.Component)({components:{CalenderTips:w.a,CalendarLengends:P.a}})],D),T=(n(1998),n(43)),I=Object(T.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",t._b({staticClass:"calendar-popup",attrs:{visible:t.visible,title:t.title||t.$t("car_rental_home_select_date")},on:{close:t.close}},"div",t.bsObjSavePrice,!1),[t.visible?n("div",{staticClass:"calendar-popup-content",attrs:{"data-spm-module":"SelectDate?oid=package_"+t.packageId}},[n("klk-date-picker",{ref:"datePickerRef",staticClass:"calendar-popup-date-picker",attrs:{width:"auto",date:t.calendarDate,"min-date":t.minDate,"max-date":t.maxDate,"default-view-date":t.defaultViewDate,"should-disable-date":t.shouldDateDisabled,"vertical-scroll":!1,"data-spm-virtual-item":"__virtual?trg=manual&ext="+JSON.stringify({Date:t.date})},on:{change:t.handleDateChange},scopedSlots:t._u([{key:"day",fn:function(e){return[t._t("day",[t.isSoldout(e.date)?n("div",{staticClass:"klk-date-picker-date-inner"},[n("div",{staticClass:"inner-content klk-date-picker-sold-out"},[t._v("\n              "+t._s(t.formatDay(e.date))+"\n            ")])]):t._e()],{date:e})]}},{key:"date-append",fn:function(e){var o=e.date;return[t.priceVisible?n("span",[t._v(t._s(t.getPrice(o)))]):t._e(),t._v(" "),t.showItemLegend(t.getSchedule(o))?n("CalendarLengends",{attrs:{legends:t.legends,item:t.getSchedule(o)}}):t._e()]}}],null,!0)},[t._v(" "),t._v(" "),n("template",{slot:"tip"},[t.$slots.tips?t._t("tips"):[n("CalenderTips",{attrs:{"price-visible":t.priceVisible}})]],2)],2)],1):t._e()]):t._e()}),[],!1,null,"7964bc54",null).exports,R=n(1183),$=n(882),L=n(1034);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var M=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},B=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).dateLimit=9999,t.timeLimit=9,t.calendarPopupVisible=!0,t.timePopupVisible=!1,t.formatTimeStr="",t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"timeListChange",value:function(){var t=this,e=this.timeList,n=this.isNewOpenTicket;e&&e.length>0&&this.$nextTick((function(){if(1!==e.length)if(n){var o=e.find((function(t){return!t.disabled}));t.handleSelectTime(o)}else t.handleSelectTime(null);else t.handleSelectTime(e[0])}))}},{key:"clickTimeHandler",value:function(){if(this.calcHideTimeIcon)return!1;this.timePopupVisible=!0}},{key:"created",value:function(){$.a.$off("checkSelectDateAndTime2bus").$on("checkSelectDateAndTime2bus",this.checkSelectDateAndTime2bus)}},{key:"checkSelectDateAndTime2bus",value:function(){var t,e=this.value,n=this.showTime,o=this.selectedTime;e?n&&!(null===(t=o)||void 0===t?void 0:t.time_slot)&&this.$toast(this.$t("activity.booking.options.select.time")):this.$toast(this.$t("activity.booking.options.select.date"))}},{key:"isTimeDisabled",value:function(time){var t,e=time.stock;return!e||e<Number((null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.min_pax)||0)}},{key:"limitDays",value:function(t,e){var n,o,r=null===(n=e.find((function(t){return!t.soldout})))||void 0===n?void 0:n.date,c=null===(o=e[this.schedules.length-1])||void 0===o?void 0:o.date,l=[];if(r)for(var i=0;i<t;i++){var d=k()(r).add(i,"day");d.isAfter(c,"day")||l.push(d.format("YYYY-MM-DD"))}else for(var v=0;v<t;v++)l.push(k()().add(v,"day").format("YYYY-MM-DD"));return l}},{key:"handleDateChange",value:function(t){this.$emit("input",t)}},{key:"handleSelectTime",value:function(data){var t,e,n=this.$refs.timeRef;if((null===(t=n)||void 0===t?void 0:t.formatTime)&&(this.formatTimeStr=n.formatTime(data)),data){var o=E({},data,{arrangementId:data.arrangement_id||data.arrangementId,stock:data.stock,date:data.date,maxPurchased:Math.min(data.stock,Number(null===(e=this.currentSelectedPackage)||void 0===e?void 0:e.max_pax))});this.$emit("setTime",o)}else this.$emit("setTime",null)}},{key:"handleScrollToAnchor",value:function(){var t=this;setTimeout((function(){var e=t.$el.querySelector(".js-scroll-anchor");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),160)}},{key:"clickShowMore",value:function(){this.timeLimit=9999}},{key:"calcShowMoreStatus",get:function(){return this.calcHideTimeIcon?"":"more"}},{key:"calcHideTimeIcon",get:function(){var t=this.timeList,e=this.timeLimit;return t.length<=e}},{key:"validDates",get:function(){var t=this.limitDays(this.dateLimit,this.schedules),e=this.schedules.slice(0,this.dateLimit);return t.map((function(t){return e.find((function(e){return t===e.date}))||{date:t,selling_price:"",soldout:!1,stocks:[],disable:!0}}))}},{key:"timeList",get:function(){var t=this,e=this.schedules.find((function(e){return e.date===t.value}));return(e&&e.time_slots||[]).reduce((function(e,n){return t.isTimeDisabled(n)?e:[].concat(Object(r.a)(e),[E({},n,{disabled:t.isTimeDisabled(n),date:"".concat(t.value," ").concat(n.time_slot)})])}),[])}},{key:"validTimeList",get:function(){return this.timeList.slice(0,this.timeLimit)}},{key:"showTime",get:function(){var t;if(this.isNewOpenTicket)return!1;if(1===(null===(t=this.timeList)||void 0===t?void 0:t.length)){var time=Object(o.a)(this.timeList,1)[0],e=k()(time.date,"YYYY-MM-DD hh:mm:ss");return!(0===e.hour()&&0===e.minute()&&0===e.second())}return this.timeList.length>0}}]),e}(O.Vue);M([Object(O.Prop)()],B.prototype,"packageId",void 0),M([Object(O.Prop)()],B.prototype,"currentSelectedPackage",void 0),M([Object(O.Prop)()],B.prototype,"isNewOpenTicket",void 0),M([Object(O.Prop)({default:function(){return[]}})],B.prototype,"schedules",void 0),M([Object(O.Prop)()],B.prototype,"selectedTime",void 0),M([Object(O.Prop)()],B.prototype,"value",void 0),M([Object(O.Prop)()],B.prototype,"warn",void 0),M([Object(O.Prop)({default:function(){return[]}})],B.prototype,"legends",void 0),M([Object(O.Watch)("timeList",{immediate:!0})],B.prototype,"timeListChange",null);var N=B=M([Object(O.Component)({components:{ShowMoreBox:L.default,HeaderTips:_.a,DesktopCalendar:I,MiniTime:R.a}})],B),V=(n(1999),Object(T.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-calendar-main"},[n("div",{staticClass:"main-title"},[t._v(t._s(t.$t("8010")))]),t._v(" "),n("div",{staticClass:"booking-calendar"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isNewOpenTicket,expression:"!isNewOpenTicket"}],staticClass:"booking-calendar-left"},[n("HeaderTips",{staticClass:"booking-calendar-tips",attrs:{"tips-type":"poptip-type","style-type":"big-style","hide-divider":!0,text:t.warn}}),t._v(" "),n("DesktopCalendar",{staticClass:"calendar-style",attrs:{visible:!0,date:t.value,legends:t.legends,schedules:t.schedules,"package-id":t.packageId,"is-new-open-ticket":t.isNewOpenTicket},on:{change:t.handleDateChange}},[n("template",{slot:"tips"},[t._t("calendar-tips")],2)],2)],1),t._v(" "),n("div",{staticClass:"booking-calendar-right"},[n("div",[!t.isNewOpenTicket&&t.showTime?n("div",{staticClass:"booking-calendar-time"},[n("HeaderTips",{staticClass:"booking-calendar-tips",attrs:{"style-type":"big-style","hide-divider":!0,"hide-icon":!0,text:t.$t("15208")}}),t._v(" "),n("ShowMoreBox",{staticClass:"text-underline-style",attrs:{status:t.calcShowMoreStatus},on:{click:t.clickShowMore}},[n("MiniTime",{ref:"timeRef",staticClass:"swiper-column",attrs:{"original-time-list":t.timeList,"time-list":t.validTimeList,"selected-time":t.selectedTime,legends:t.legends,"price-visible":!1,"data-spm-module":"SelectTime?oid=package_"+t.currentSelectedPackage.package_id,"data-spm-virtual-item":"__virtual?ext="+JSON.stringify({Time:t.formatTimeStr}),"custom-spm":!0},on:{selectTime:t.handleSelectTime}})],1)],1):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t._t("bottom-slot")],2)])])}),[],!1,null,"0e80ede0",null));e.a=V.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);h([Object(f.Prop)({type:Object,default:null})],y.prototype,"item",void 0);var m=y=h([f.Component],y),k=(n(2427),n(43)),O=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activity-hotel-rateitem"},[e("img",{attrs:{src:this.item.icon_url}}),this._v(" "),e("span",{staticClass:"delimeter"}),this._v(" "),e("span",{staticClass:"price",style:{color:this.item.text_color}},[this._v(this._s(this.item.format_price))])])}),[],!1,null,"5aaa52b2",null).exports,_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"goHotelDetail",value:function(){if(this.lowestPriceInfo.deeplink){var a=document.createElement("a");a.href=this.lowestPriceInfo.deeplink,a.target="mobile"===this.platform?"_self":"_blank",document.body.appendChild(a),a.click(),setTimeout((function(){return document.body.removeChild(a)}),500)}}},{key:"lowestPriceInfo",get:function(){var t,e,data=null===(e=null===(t=this.section.body)||void 0===t?void 0:t.content)||void 0===e?void 0:e.data;return data&&data.lowest_rate_list?data:(this.$emit("hide-section"),{lowest_rate_list:[]})}},{key:"dataSpmModule",get:function(){return"ToHotelVisitHotelSite?hotel_".concat(this.lowestPriceInfo.hotel_id)}}]),e}(f.Vue);_([Object(f.Prop)()],j.prototype,"section",void 0),_([Object(f.State)((function(t){return t.klook.platform}))],j.prototype,"platform",void 0),j=_([Object(f.Component)({components:{RateItem:O}})],j);e.a=j},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(25),r=n(0),c=n(13),l=(n(23),n(4)),d=n(31),v=n(46),f=n(39),h=n(35),y=n(40),m=n(5),k=n(21),O=n(162),_=n.n(O),j=n(2017),w=n(884),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(d.a)(this,e),(t=Object(f.a)(this,Object(h.a)(e).apply(this,arguments))).imageViewerVisible=!1,t.index=0,t}return Object(y.a)(e,t),Object(v.a)(e,[{key:"showImage",value:function(t){this.imageViewerVisible=!0,this.index=t}},{key:"load",value:function(){this.loadImage&&this.loadImage()}},{key:"hideImageViewer",value:function(){this.imageViewerVisible=!1}},{key:"handleBuyNow",value:function(){var t=this;this.imageViewerVisible=!1,this.$nextTick((function(){t.buyNow()}))}},{key:"hasMinHeight",get:function(){var t;return this.loading&&!(null===(t=this.images)||void 0===t?void 0:t.length)}}]),e}(k.Vue);P([Object(k.Prop)({type:Array,default:function(){return[]}})],C.prototype,"images",void 0),P([Object(k.Prop)({type:Boolean,default:!1})],C.prototype,"loading",void 0),P([Object(k.Prop)({type:Boolean,default:!1})],C.prototype,"loadingError",void 0),P([Object(k.Prop)()],C.prototype,"reviewsMap",void 0),P([Object(k.Prop)()],C.prototype,"loadImage",void 0),P([Object(k.Prop)()],C.prototype,"buyNow",void 0),P([Object(k.Prop)()],C.prototype,"transfer",void 0),P([Object(k.Prop)()],C.prototype,"photoType",void 0),P([Object(k.Prop)({default:!1})],C.prototype,"notFixed",void 0),P([Object(k.Prop)({default:!1})],C.prototype,"showBuyNow",void 0);var S=C=P([Object(k.Component)({components:{ImageViewer:j.a,Logo:w.a}})],C),D=(n(2396),n(43)),x=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"images-gallery"},[t.loading||t.images&&t.images.length?[n("div",{staticClass:"images-gallery_loadmore-container"},[n("klk-infinite-scroll",{attrs:{loading:t.loading&&!t.loadingError,"on-reach-bottom":t.load}},[n("div",{class:["images-gallery_main",t.hasMinHeight&&"has-min-height"]},t._l(t.images,(function(image,e){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:image.src,expression:"image.src",arg:"background-image"}],key:image.src,staticClass:"images-gallery_img",attrs:{ratio:"1:1",alt:"activity-image","data-spm-module":"GalleryPhotoEnlarge?trg=manual&ext="+JSON.stringify({photo_type:t.photoType}),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return t.showImage(e)}}},[n("Logo",{attrs:{ratio:"1:1",width:110/3}})],1)})),0),t._v(" "),t.loadingError?n("div",{staticClass:"images-gallery-loading-error"},[n("span",[t._v(t._s(t.$t("78605")))])]):n("template",{slot:"loading"},[n("div",{staticClass:"images-gallery-loading"},[n("div",{staticClass:"images-gallery-loading-wrapper"},[n("klk-loading")],1),t._v(" "),n("span",{staticClass:"images-gallery-loading-text"},[t._v("\n              "+t._s(t.$t("car_rental_home_loading"))+"\n            ")])])])],2)],1),t._v(" "),n("ImageViewer",{attrs:{visible:t.imageViewerVisible,"photo-type":t.photoType,index:t.index,images:t.images,"reviews-map":t.reviewsMap,transfer:t.transfer,"not-fixed":t.notFixed,"show-buy-now":t.showBuyNow},on:{"buy-now":t.handleBuyNow,close:t.hideImageViewer},scopedSlots:t._u([{key:"description",fn:function(e){return[t._t("description",null,{image:e.image})]}}],null,!0)})]:[n("div",{staticClass:"images-gallery_empty"},[t._v("\n      "+t._s(t.$t("review.no_photo"))+"\n    ")])]],2)}),[],!1,null,null,null).exports,T=n(2079),I=n(16),R=n(3);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){var t;return Object(d.a)(this,e),(t=Object(f.a)(this,Object(h.a)(e).apply(this,arguments))).page=1,t.pageSize=8,t.images=[],t.loading=!1,t.loadingError=!1,t.imageTotalCount=-1,t.reviewImagesInfo=[],t.imageReviewsMap=[],t.done=!1,t.imagesGroup=[],t.cacheList=[],t}var n;return Object(y.a)(e,t),Object(v.a)(e,[{key:"getReviewsImages",value:(n=Object(l.a)(regeneratorRuntime.mark((function t(){var e,n,o,l,d,v,f,h,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.activityId){t.next=2;break}return t.abrupt("return");case 2:if(!(this.imageTotalCount>0&&(null===(e=this.images)||void 0===e?void 0:e.length)>=this.imageTotalCount)){t.next=5;break}return this.done=!0,t.abrupt("return");case 5:return this.loading=!0,this.loadingError=!1,n={},t.prev=8,t.next=11,this.$axios.$get(Object(I.ob)(R.a.activityReviewGalleryImages,{activityId:this.activityId}),{regularUrl:"/v1/usrcsrv/activities/{*}/images/get",params:{page:this.page,source_from:this.mtype,limit:this.pageSize}});case 11:n=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.log("activityReviewGalleryImages error: ",t.t0);case 17:if(o=n.result,!n.success||!o){t.next=34;break}if(l=o.image_total_count,d=o.review_images_info,0!==l&&d){t.next=24;break}return this.newStyle&&(v=this.initGroup([],!0),this.imagesGroup=[].concat(Object(c.a)(this.imagesGroup),Object(c.a)(v))),this.done=!0,t.abrupt("return",{});case 24:f=_()(d,(function(t,e){var n,o;return t.imageList=[].concat(Object(c.a)(t.imageList),Object(c.a)((o=null===(n=e)||void 0===n?void 0:n.images,null!=o?o:[]).map((function(img){return L({},img,{reviewId:e.review_id})})))),t.reviewsMap=L({},t.reviewsMap,Object(r.a)({},e.review_id,e)),t}),{imageList:[],reviewsMap:{}}),h=f.imageList.map((function(t){return L({},t,{src:t.img_url})})),this.imageTotalCount=o.image_total_count,this.images=[].concat(Object(c.a)(this.images),Object(c.a)(h)),this.imageReviewsMap=L({},this.imageReviewsMap,{},f.reviewsMap),this.page+=1,this.newStyle&&(y=this.initGroup(h),this.imagesGroup=[].concat(Object(c.a)(this.imagesGroup),Object(c.a)(y)),this.images.length<10&&this.getReviewsImages()),this.loading=!1,t.next=36;break;case 34:this.loading=!1,this.loadingError=!0;case 36:case"end":return t.stop()}}),t,this,[[8,14]])}))),function(){return n.apply(this,arguments)})},{key:"buyNow",value:function(){this.$emit("buy-now")}},{key:"mounted",value:function(){this.getReviewsImages()}},{key:"initGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.imageTotalCount,r=this.images,l=this.cacheList,d=this.groupImages([].concat(Object(c.a)(l),Object(c.a)(t))),v=d.slice(-1),f=Object(o.a)(v,1),h=f[0],y=void 0===h?[]:h;return r.length>=n||10===y.length||e?(this.cacheList=[],d):(this.cacheList=Object(c.a)(y),d.slice(0,-1))}},{key:"groupImages",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,e,n){var o=n,r=parseInt(String(n/10)),data=L({},e,{id:o});return t[r]?t[r].push(data):t[r]=[data],t}),[])}},{key:"render",value:function(){var t=arguments[0],e=this.newStyle?"ImageGalleryNew":"ImageGallery";return t(e,{attrs:{images:this.images,"images-group":this.imagesGroup,reviewsMap:this.imageReviewsMap,loading:this.loading,loadingError:this.loadingError,loadImage:this.getReviewsImages,transfer:this.transfer,notFixed:this.notFixed,showBuyNow:this.showBuyNow,buyNow:this.buyNow,photoType:"CustomerPhoto",done:this.done}})}}]),e}(k.Vue);A([Object(k.Prop)()],E.prototype,"activityId",void 0),A([Object(k.Prop)()],E.prototype,"transfer",void 0),A([Object(k.Prop)({default:"ReviewCustomerPhotoTab"})],E.prototype,"mtype",void 0),A([Object(k.Prop)({default:!1})],E.prototype,"notFixed",void 0),A([Object(k.Prop)({default:!1})],E.prototype,"showBuyNow",void 0),A([Object(k.Prop)({default:!1})],E.prototype,"newStyle",void 0),E=A([Object(k.Component)({components:{ImageGallery:x,ImageGalleryNew:T.a}})],E);e.a=E},,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(1980),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"booking-calendar-loading"},[e("div",{staticClass:"item item-1"}),this._v(" "),e("div",{staticClass:"cow"},[e("div",{staticClass:"item"}),this._v(" "),e("div",{staticClass:"item"})])])}],!1,null,"92800db8",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:1})],h.prototype,"unitNum",void 0);var y=h=f([v.Component],h),m=(n(1981),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-units-loading"},t._l(Array(t.unitNum||1).fill(0),(function(e,o){return n("div",{key:o,staticClass:"cow"},[n("div",{staticClass:"item"}),t._v(" "),n("div",{staticClass:"item"})])})),0)}),[],!1,null,"20656ac0",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(884),y=n(1926),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"preview",value:function(t){this.$emit("preview",t)}},{key:"imageHeight",value:function(t,e){return"calc((100vw - 40px) * ".concat(e," / ").concat(t,")")}}]),e}(f.Vue);m([Object(f.Prop)({default:function(){return[]}})],k.prototype,"images",void 0),m([Object(f.Prop)({default:110/3})],k.prototype,"logoWidth",void 0);var O=k=m([Object(f.Component)({components:{Logo:h.a,SeoLazyImage:y.a}})],k),_=(n(2383),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.images,(function(image,e){return n("div",{key:e,staticClass:"image-container",attrs:{"data-spm-module":"GalleryPhotoEnlarge?trg=manual&ext="+JSON.stringify({photo_type:t.photoType}),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return t.preview(e)}}},[n("div",{staticClass:"image-wrap"},[n("SeoLazyImage",{attrs:{url:image.src,styles:{height:t.imageHeight(image.width,image.height)}}})],1),t._v(" "),image.imageDesc?n("div",{staticClass:"image-desc"},[n("div",{staticClass:"arrow"},[n("svg-icon",{attrs:{name:"common#icon_nav_triangle_up_fill_xxxs",size:"12"}})],1),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(image.imageDesc))])]):t._e()])})),0)}),[],!1,null,"43db1341",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(2432),r=n.n(o),c=(n(30),n(31)),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(884),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).isScreened=!1,t.showEnlargeEntry=!1,t.$bigImageSwiper=null,t.$smallImageSwiper=null,t.highlightSwiperSlideIndex=0,t.currentReview=null,t.bigImageSwiperOption={navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},on:{init:function(){if(0===t.currentIndex){var e=".".concat(t.name,"-swiper-prev");t.initSwiper(e)}var n=t.bigImageSwiperOption.slidesPerGroup||1;t.imageList.length<=n&&t.initSwiper(".".concat(t.name,"-swiper-next"))},slideChangeTransitionStart:t.handleSlideStart,slideChange:function(){var e=t.name;t.BigSwiperSlideChange(),t.slideChangeTransitionEnd("$bigImageSwiper",{next:".".concat(e,"-swiper-next"),prev:".".concat(e,"-swiper-prev")})}}},t.smallImageSwiperOption={slidesPerView:"auto",centeredSlides:!1,navigation:{nextEl:".small-swiper-next",prevEl:".small-swiper-prev"},lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},spaceBetween:10,slidesPerGroup:8,noSwiping:!0,on:{init:function(){var e=".".concat(t.name,"-small-swiper-prev");t.initSwiper(e);var n=t.smallImageSwiperOption.slidesPerGroup||1,o="banner-swiper"===t.name?11:n;t.imageList.length<=o&&t.initSwiper(".".concat(t.name,"-small-swiper-next"))},slideChange:function(){var e=t.name;t.slideChangeTransitionEnd("$smallImageSwiper",{next:".".concat(e,"-small-swiper-next"),prev:".".concat(e,"-small-swiper-prev")})}}},t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"currentIndexChange",value:function(t){var e=this;this.$nextTick((function(){e.$bigImageSwiper&&e.$bigImageSwiper.slideTo(t)}))}},{key:"getImgSize",value:function(t){if(this.needEnlarge){var e=document.querySelector(".js-swiper-container .swiper-wrapper");if(e){var n=e.clientWidth,o=e.clientHeight,source=this.imageList[t];if(source){var r=source.width,c=source.height;if(r&&c){var l=n/o,d=r/c;this.showEnlargeEntry=d<=l}}}}}},{key:"updateSwiper",value:function(){this.$smallImageSwiper.update(),this.$bigImageSwiper.update()}},{key:"handleScreen",value:function(){this.isScreened=!this.isScreened}},{key:"handleSlideStart",value:function(){this.showEnlargeEntry=!1,this.isScreened=!1}},{key:"highlightSwiperSlide",value:function(t){this.$bigImageSwiper.slideTo(t),this.highlightSwiperSlideIndex=t}},{key:"BigSwiperSlideChange",value:function(){var t=this,e=this.$bigImageSwiper.realIndex;this.highlightSwiperSlideIndex=e,this.$smallImageSwiper.slideTo(e),this.$emit("bigSwiperChange",e),this.$nextTick((function(){t.getImgSize(e)}))}},{key:"slideChangeTransitionEnd",value:function(t,e){var n=this[t],o=document.querySelector(e.next),r=document.querySelector(e.prev);n.isEnd?o.style.display="none":o.style.display="block",n.isBeginning?r.style.display="none":r.style.display="block";var c=n.realIndex;this.imageList.length<this.total&&this.imageList.length-c<=15&&this.$emit("slideToEnd")}},{key:"initSwiper",value:function(t){this.$nextTick((function(){var e,n=document.querySelector(t);(null===(e=n)||void 0===e?void 0:e.style)&&(n.style.display="none")}))}}]),e}(y.Vue);k([Object(y.Prop)()],O.prototype,"imageList",void 0),k([Object(y.Prop)()],O.prototype,"total",void 0),k([Object(y.Prop)({default:0})],O.prototype,"currentIndex",void 0),k([Object(y.Prop)({default:""})],O.prototype,"name",void 0),k([Object(y.Prop)({type:Boolean,default:!1})],O.prototype,"needEnlarge",void 0),k([Object(y.Watch)("currentIndex",{immediate:!0})],O.prototype,"currentIndexChange",null);var _=O=k([Object(y.Component)({components:{Logo:m.a,IconEnlarge:r.a}})],O),j=(n(2433),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"big-image-swiper"},[n("div",{directives:[{name:"swiper",rawName:"v-swiper:$bigImageSwiper",value:t.bigImageSwiperOption,expression:"bigImageSwiperOption",arg:"$bigImageSwiper"}],ref:"$bigImageSwiper",staticClass:"swiper-container js-swiper-container",class:[t.name]},[n("div",{staticClass:"swiper-wrapper"},t._l(t.imageList,(function(e,o){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:e.img_url,expression:"item.img_url",arg:"background-image",modifiers:{container:!0}}],key:o,staticClass:"swiper-slide",class:t.highlightSwiperSlideIndex===o&&"current-slide-visible",attrs:{ratio:"1:1","data-image-id":e.image_id}},[n("Logo",{attrs:{ratio:"1:1",width:161}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.needEnlarge&&t.isScreened,expression:"needEnlarge && isScreened"}],staticClass:"swiper-slide__img-wrap"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.img_url,expression:"item.img_url"}],staticClass:"swiper-slide__img"})])],1)})),0),t._v(" "),t.needEnlarge&&t.showEnlargeEntry?n("div",{staticClass:"swiper-screen",on:{click:function(e){return e.stopPropagation(),t.handleScreen(e)}}},[n("IconEnlarge",{attrs:{theme:"outline",size:"16",fill:[t.$tokensObj["$color-bg-1"]]}}),t._v(" "),n("span",{staticClass:"swiper-screen-text"},[t._v(t._s(t.isScreened?t.$t("102478"):t.$t("102477")))])],1):t._e(),t._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-fraction"},[t._v("\n        "+t._s(t.highlightSwiperSlideIndex+1)+" / "+t._s(t.total)+"\n      ")]),t._v(" "),n("div",{staticClass:"next-prev swiper-next",class:[t.name+"-swiper-next"]},[n("span",{staticClass:"next-prev__icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-right-new",size:"20"}})],1)]),t._v(" "),n("div",{staticClass:"next-prev swiper-prev",class:[t.name+"-swiper-prev"]},[n("span",{staticClass:"next-prev__icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-right-new",size:"20"}})],1)])])]),t._v(" "),n("div",{staticClass:"small-image-swiper"},[n("div",{staticClass:"small-image-swiper-wrapper"},[n("div",{directives:[{name:"swiper",rawName:"v-swiper:$smallImageSwiper",value:t.smallImageSwiperOption,expression:"smallImageSwiperOption",arg:"$smallImageSwiper"}],ref:"$smallImageSwiper",staticClass:"swiper-container"},[n("div",{staticClass:"swiper-wrapper swiper-no-swiping"},t._l(t.imageList,(function(e,o){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:e.img_resize_url,expression:"item.img_resize_url",arg:"background-image",modifiers:{container:!0}}],key:o,staticClass:"swiper-slide swiper-no-swiping",class:t.highlightSwiperSlideIndex===o?"high-light-swiper-slide":"",attrs:{ratio:"1:1","data-image-id":e.image_id},on:{click:function(e){return t.highlightSwiperSlide(o)}}},[n("Logo",{attrs:{ratio:"1:1",width:24}})],1)})),0)]),t._v(" "),n("div",{staticClass:"small-next-prev small-swiper-next",class:[t.name+"-small-swiper-next"]},[n("span",{staticClass:"small-next-prev__icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-right-new",size:"20"}})],1)]),t._v(" "),n("div",{staticClass:"small-next-prev small-swiper-prev",class:[t.name+"-small-swiper-prev"]},[n("span",{staticClass:"small-next-prev__icon"},[n("SvgIcon",{attrs:{name:"desktop-common#arrow-right-new",size:"20"}})],1)])])])])}),[],!1,null,"6b2e2f10",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).video={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showVideoChange",value:function(t){var e=this;t&&this.$nextTick((function(){e.video.play()}))}},{key:"handlePlay",value:function(){}},{key:"handlePause",value:function(){}},{key:"hideVideoPlayer",value:function(){this.video.pause(),this.$emit("close")}},{key:"initVideo",value:function(){this.video=this.$refs.video}},{key:"mounted",value:function(){this.initVideo()}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"showVideo",void 0),h([Object(f.Prop)({default:""})],y.prototype,"videoUrl",void 0),h([Object(f.Watch)("showVideo")],y.prototype,"showVideoChange",null);var m=y=h([f.Component],y),k=(n(2437),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"video-action"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],class:["video-container","video-container-"+t.klook.platform]},[n("div",{staticClass:"video-container_video"},[n("video",{ref:"video",attrs:{id:"video",controls:"controls",controlsList:"nodownload",preload:"auto",src:t.videoUrl},on:{play:t.handlePlay,pause:t.handlePause}})]),t._v(" "),t.isDesktop?n("SvgIcon",{staticClass:"klook-icon-close",attrs:{name:"desktop-common#icon-close"},nativeOn:{click:function(e){return t.hideVideoPlayer(e)}}}):t._e()],1)])}),[],!1,null,"2263b278",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(28),n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2045),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isMounted=!1,t.showVideo=!1,t.videoUrl="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getSpm",value:function(t){var data=this.originBanner[t]||{},e=!!data.video_url,n={url:e?data.video_url:this.bannerList[t],type:e?"Video":"Photo"};return"BannerPhoto?oid=activity_".concat(this.activityId,"&ext=").concat(JSON.stringify(n))}},{key:"mounted",value:function(){this.isMounted=!0}},{key:"showVideoPlayer",value:function(t){this.showVideo=!0,this.videoUrl=t}},{key:"bannerClick",value:function(t){var e,n,o=null!=(n=null===(e=(this.originBanner||[])[t])||void 0===e?void 0:e.video_url)?n:"";o?this.showVideoPlayer(o):this.$emit("banner-click",t)}},{key:"closeVideo",value:function(){this.showVideo=!1}},{key:"width",get:function(){var t,e;return(null===(e=null===(t=this.imagesObject)||void 0===t?void 0:t.right)||void 0===e?void 0:e.length)?842.7:1160}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"videoIcon",get:function(){return this.isDesktop?"desktop-common#btn-video-normal-new":"mobile-activity#banner-video-play"}},{key:"imagesObject",get:function(){var t,e,n,o=this.bannerList||[];if(o.length<3){var r=o[0]||"";return(null===(e=null===(t=this.originBanner[0])||void 0===t?void 0:t.pre_process)||void 0===e?void 0:e.includes("u_activities:"))&&(r=null===(n=r)||void 0===n?void 0:n.replace(/ar_(\d+):(\d+)/,"ar_1160:474")),{left:r,right:[]}}return{left:o[0],right:[o[1],o[2]]}}}]),e}(f.Vue);y([f.State],m.prototype,"klook",void 0),y([Object(f.Prop)()],m.prototype,"bannerList",void 0),y([Object(f.Prop)()],m.prototype,"originBanner",void 0),y([Object(f.Prop)()],m.prototype,"activityId",void 0);var k=m=y([Object(f.Component)({components:{VideoPlayer:h.default}})],m),O=(n(2441),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-banner-image-container"},[n("div",{staticClass:"activity-banner-image-container_left"},[n("img",{staticClass:"banner-images",style:{backgroundSize:3*t.width/16+"px"},attrs:{"data-spm-module":t.getSpm(0),"data-spm-virtual-item":"__virtual",src:t.imagesObject.left},on:{click:function(e){return t.bannerClick(0)}}}),t._v(" "),t.originBanner[0]&&t.originBanner[0].video_url?n("SvgIcon",{staticClass:"act-banner-icon-video",attrs:{name:t.videoIcon,size:"70"},nativeOn:{click:function(e){return t.showVideoPlayer(t.originBanner[0].video_url)}}}):t._e()],1),t._v(" "),t.bannerList.length>2?n("div",{staticClass:"activity-banner-image-container_right"},t._l(t.imagesObject.right,(function(e,o){return n("div",{key:o,staticClass:"container-item"},[n("img",{staticClass:"banner-images",style:{backgroundSize:"78.325px"},attrs:{src:e,"data-spm-module":t.getSpm(o+1),"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.bannerClick(o+1)}}}),t._v(" "),t.originBanner[o+1]&&t.originBanner[o+1].video_url?n("SvgIcon",{staticClass:"act-banner-icon-video",attrs:{name:t.videoIcon,size:"70"},nativeOn:{click:function(e){return t.showVideoPlayer(t.originBanner[o+1].video_url)}}}):t._e()],1)})),0):t._e(),t._v(" "),n("VideoPlayer",{attrs:{"show-video":t.showVideo,"video-url":t.videoUrl},on:{close:t.closeVideo}}),t._v(" "),t._t("default")],2)}),[],!1,null,"5585b150",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=n(1992),k=n.n(m),O=n(132),_=n.n(O),j=n(912),w=n(886),P=n(2064),C=n(211),S=n(2065),D=n(16),x=n(1413),T=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};y.a.extend(k.a);var I=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).dateShow=!1,t.handleScroll=_()((function(e){var n,o,r=t.$refs.activityDatePicker,c=null===(n=t.$refs.showDatePickerButton)||void 0===n?void 0:n.$el,l=e.target;t.dateShow&&!(l===r||r.contains(l)||(null===(o=c)||void 0===o?void 0:o.contains(l)))&&t.hideDatePicker()})),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"changePackageType",value:function(data){this.$emit("changePackageType",data)}},{key:"handleDateChange",value:function(t){if(t!==this.value){this.$emit("input",t);var e=Object(D.p)(new Date,new Date(t));this.$sendGTMCustomEvent("Activity Page|Calendar Date Clicked|".concat(this.activityId,",").concat(this.templateId,"|").concat(e)),this.hideDatePicker(),this.changeDate(t)}}},{key:"changeDate",value:function(t){var e=new Date(t).getTime()-(new Date).getTime(),n=Math.ceil(e/864e5);this.$logquery.service({timestamp:Date.now(),level:"I",message:JSON.stringify({package_id:this.packageId,activity_id:this.activityId,tag_name:"desktop_activity_date_difference_select_date",date_diff:n}),tag:"desktop-activity-date-difference"},{headers:{"X-Platform":this.klook.platform}})}},{key:"cleanDate",value:function(){this.$emit("input","")}},{key:"hideDatePicker",value:function(){this.dateShow=!1,this.packageId>0&&!this.isPackageSchedule&&this.$emit("changePackageType","packageSchedules")}},{key:"showDatePicker",value:function(){this.dateShow=!0,this.datePickerSpmTrack();var t=this.activityId,e=this.activityPageTemplateId;this.$sendGTMCustomEvent("Calendar Clicked|Activity Page|".concat(t,"_").concat(e))}},{key:"datePickerSpmTrack",value:function(){var t=this,e=document.querySelector(".js-spm-package-date-picker");this.$inhouse.updateBinding(e,{ext:{SelectType:"User"}});var dd=setTimeout((function(){t.$inhouse.track("action","#desktop-package-date-picker"),clearTimeout(dd)}),500)}},{key:"selectDateInOutSideDate",value:function(){return""===this.value}},{key:"formatDay",value:function(t){return Object(C.e)(t,this.$t.bind(this),this.klook.language,1)}},{key:"watchDatePickerOutsideClick",value:function(){document.addEventListener("click",this.handleScroll)}},{key:"clickOutSideDatePicker",value:function(t){var e,n;this.dateShow&&this.$refs.activityDatePicker&&(this.$refs.activityDatePicker.contains(t.target)||(null===(n=null===(e=this.$refs.showDatePickerButton)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.contains(t.target))||this.hideDatePicker())}},{key:"mounted",value:function(){this.watchDatePickerOutsideClick(),document.addEventListener("click",this.clickOutSideDatePicker)}},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll),document.removeEventListener("click",this.clickOutSideDatePicker)}},{key:"datePickerButtonContent",get:function(){return""===this.value||this.selectDateInOutSideDate()?this.$t("activity.new.check_availability"):this.formatDay(this.value)}}]),e}(f.Vue);T([f.State],I.prototype,"klook",void 0),T([Object(f.Prop)()],I.prototype,"schedules",void 0),T([Object(f.Prop)()],I.prototype,"packageSchedules",void 0),T([Object(f.Prop)()],I.prototype,"value",void 0),T([Object(f.Prop)()],I.prototype,"packageId",void 0),T([Object(f.Prop)()],I.prototype,"activityId",void 0),T([Object(f.Prop)()],I.prototype,"templateId",void 0),T([Object(f.Prop)()],I.prototype,"activityPageTemplateId",void 0),T([Object(f.Prop)()],I.prototype,"isPackageSchedule",void 0),T([Object(f.Prop)({default:function(){return[]}})],I.prototype,"legends",void 0);var R=I=T([Object(f.Component)({components:{ActivityPackageDatePicker:P.a,ActivityCalenderSwitch:S.a,SwitchableCalendar:x.a,CalenderTips:j.a,CalendarLengends:w.a}})],I),$=(n(2471),n(43)),component=Object($.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-date js-spm-package-date-picker",attrs:{"data-spm-module":"CheckAvailabilityBtn"}},[n("klk-button",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Check Availability Clicked",expression:"'Activity Page|Check Availability Clicked'",arg:"click"}],ref:"showDatePickerButton",staticClass:"activity-package-date-button-picker",attrs:{id:"desktop-package-date-picker","data-spm-item":"__default?trg=manual"},nativeOn:{click:function(e){return t.showDatePicker(e)}}},[n("span",{staticClass:"activity-package-date-button-picker-container"},[n("SvgIcon",{attrs:{name:"desktop-common#calendar-new",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.datePickerButtonContent))])],1)]),t._v(" "),t.dateShow?n("div",{ref:"activityDatePicker",staticClass:"activity-package-date-picker"},[n("SwitchableCalendar",t._g({attrs:{value:t.value,schedules:t.schedules,"package-schedules":t.packageSchedules,"package-id":t.packageId,"is-package-schedule":t.isPackageSchedule,legends:t.legends},on:{input:t.handleDateChange,changePackageType:t.changePackageType}},t.$listeners),[n("template",{slot:"calendar-tips"},[n("CalenderTips",[t.isPackageSchedule&&t.packageId>0&&t.legends&&t.legends.length>0?n("klk-poptip",{staticStyle:{cursor:"pointer"},attrs:{content:t.legends[0].desc||"",placement:"bottom","append-to-body":""}},[n("CalendarLengends",{attrs:{legends:t.legends,"show-text":!0,"show-statement":!0}})],1):t._e()],1)],1),t._v(" "),n("template",{slot:"calendar-bottom"},[n("div",{staticClass:"clean"},[n("span",{on:{click:t.cleanDate}},[t._v(t._s(t.$t("clear")))])])])],2)],1):t._e()],1)}),[],!1,null,"14a86ed3",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(212),y=n(85),m=n(16),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"booking",value:function(){Object(h.g)()}},{key:"price",get:function(){var t,e,n=this.packageData,o=n.from_price,r=n.to_price,c=null!=(e=null===(t=n.price_show)||void 0===t?void 0:t.sale_price)?e:"";return o&&o!==r&&(c="".concat(y.b[this.klook.currency]," ").concat(Object(m.y)(o))),this.$t("activity_detail_from_price",[12,c]).replace(/color: #\d+;*/,"").replace(/color:#\d+;*/,"")}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)({default:function(){return null}})],O.prototype,"packageData",void 0);var _=O=k([f.Component],O),j=(n(2480),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buttom-wrap"},[n("div"),t._v(" "),t.packageData?n("div",{staticClass:"price",domProps:{innerHTML:t._s(t.price)}}):t._e(),t._v(" "),n("klk-button",{on:{click:t.booking}},[t._v(t._s(t.$t("activity.select.option")))])],1)}),[],!1,null,"bd31b6ae",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(2506),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("klk-skeleton",{staticClass:"package-options-loading",attrs:{animate:""}},[e("klk-skeleton-block",{attrs:{height:76}})],1)}),[],!1,null,"3657d775",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(16),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=Object(f.namespace)("experience"),k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showDatePickerSlot=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleWatch",value:function(t){this.showDatePickerSlot?document.addEventListener("click",this.clickEventListener):document.removeEventListener("click",this.clickEventListener),this.$emit("showDatePicker",t)}},{key:"setDatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;this.showDatePicker(1,t,e)}},{key:"showDatePicker",value:function(time){var t=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;setTimeout((function(){t.clickDatePickerHandler(e),"function"==typeof n&&n(e)}),time||0)}},{key:"clickDatePickerHandler",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.showDatePickerSlot=t}},{key:"clickEventListener",value:function(t){t&&this.showDatePickerSlot&&(this.showDatePickerSlot=Object(h.i)(t.target,"js-show-date-picker-slot"))}}]),e}(f.Vue);y([m.State],k.prototype,"sectionActData",void 0),y([f.State],k.prototype,"klook",void 0),y([Object(f.Prop)()],k.prototype,"borderType",void 0),y([Object(f.Prop)()],k.prototype,"title",void 0),y([Object(f.Prop)()],k.prototype,"subTitle",void 0),y([Object(f.Prop)()],k.prototype,"pickupDatetime",void 0),y([Object(f.Prop)()],k.prototype,"returnDatetime",void 0),y([Object(f.Prop)()],k.prototype,"formatDays",void 0),y([Object(f.Prop)()],k.prototype,"hideReturn",void 0),y([Object(f.Watch)("showDatePickerSlot",{immediate:!0})],k.prototype,"visibleWatch",null);var O=k=y([Object(f.Component)({components:{}})],k),_=(n(2507),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"date-time",class:t.showDatePickerSlot&&t.borderType},[n("div",{staticClass:"date-time-box"},[n("div",{staticClass:"field-box"},[n("span",{staticClass:"field-box__title"},[t._v(t._s(t.title))]),t._v(" "),t.subTitle?n("span",{staticClass:"field-box__sub-title"},[t._v(t._s(t.subTitle))]):t._e()]),t._v(" "),n("div",{staticClass:"date-picker-box"},[n("span",{attrs:{id:"js-show-date-picker-slot"},on:{click:function(e){return e.stopPropagation(),t.clickDatePickerHandler(e)}}},[n("klk-button",{staticClass:"custom-button",attrs:{type:"outlined",size:"small"}},[n("span",{staticClass:"pickup-return-text"},[n("span",{staticClass:"left-icon"},[n("SvgIcon",{attrs:{name:"desktop-common#calendar-new",size:"16"}})],1),t._v(" "),n("span",[t._v(t._s(t.pickupDatetime||t.$t(t.hideReturn?"activity.new.check_availability":"89268-Pick-up")))]),t._v(" "),t.hideReturn?t._e():n("span",{staticClass:"fix-text"},[t._v("-")]),t._v(" "),t.hideReturn?t._e():n("span",[t._v(t._s(t.returnDatetime||t.$t("89269-Return")))])]),t._v(" "),t.showDatePickerSlot?n("span",{staticClass:"date-picker-slot-wrap"},[t._t("date-picker-slot")],2):t._e()])],1),t._v(" "),t.hideReturn?t._e():n("span",{staticClass:"chargeabled-days"},[t._v("\n        "+t._s(t.formatDays)+"\n      ")])])])])}),[],!1,null,"32b70d92",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(887),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).endTime="",t.timeStr="",t.interval=null,t.show=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onTimeListChange",value:function(t){var e;if(null===(e=t)||void 0===e?void 0:e.length)if(1===t.length){Object(h.c)(t[0])&&(this.endTime=t[0])}else{var n=this.bubbleSort(t);this.endTime=n.find((function(t){return Object(h.c)(t)}))}else this.clear();this.getTime(),this.countDown()}},{key:"onTimeStrChange",value:function(t){t||this.$emit("reload")}},{key:"getTime",value:function(){if(this.endTime){this.show||(this.show=!0);var t=Object(h.a)(this.endTime),e=t.days,n=t.hours,o=t.minutes,r=t.seconds;"0"===e&&"00"===n&&"00"===o&&"00"===r?(this.timeStr="",this.show=!1):this.timeStr="0"===e?this.$t("80660",{hh_mm_ss:" ".concat(n,":").concat(o,":").concat(r)}):this.$t("80659",{num:" ".concat(e),hh_mm_ss:"".concat(n,":").concat(o,":").concat(r)})}else this.clear()}},{key:"bubbleSort",value:function(t){for(var e=t.length,n=!1,i=0;i<e-1;i++){for(var o=0;o<e-1-i;o++)if(Object(h.b)(t[o+1])<Object(h.b)(t[o])){var r=t[o+1];t[o+1]=t[o],t[o]=r,n=!0}if(!n)break}return t}},{key:"clear",value:function(){this.cleanup(),this.timeStr="",this.interval=null,this.endTime=""}},{key:"countDown",value:function(){this.interval=setInterval(this.getTime,1e3)}},{key:"cleanup",value:function(){this.interval&&clearInterval&&clearInterval(this.interval)}},{key:"beforeDestroy",value:function(){this.cleanup()}}]),e}(f.Vue);y([Object(f.Prop)({type:Array,default:function(){return[]}})],m.prototype,"timeList",void 0),y([Object(f.Prop)({type:String,default:"normal"})],m.prototype,"size",void 0),y([Object(f.Prop)()],m.prototype,"disabled",void 0),y([Object(f.Watch)("timeList",{immediate:!0})],m.prototype,"onTimeListChange",null),y([Object(f.Watch)("show")],m.prototype,"onTimeStrChange",null);var k=m=y([f.Component],m),O=(n(2551),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show&&t.timeStr?n("div",{staticClass:"cut-down-wrapper",class:[t.size]},[n("div",{class:["cut-down-wrapper__content",{disabled:t.disabled}]},[t._t("default",[n("klk-icon",{class:["cut-down-wrapper-svg",{"disabled-svg":t.disabled}],attrs:{type:"icon_time_time",size:"16"}}),t._v(" "),n("span",{staticClass:"cut-time"},[t._v(t._s(t.timeStr))])],{timeStr:t.timeStr})],2)]):t._e()}),[],!1,null,"0315ae77",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1763),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"list",get:function(){return h.a}}]),e}(f.Vue),k=m=y([f.Component],m),O=(n(2563),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-guide"},[n("div",{staticClass:"pass-guide-list"},t._l(t.list,(function(e,o){return n("div",{key:o,staticClass:"pass-guide-item"},[n("div",{staticClass:"pass-guide-item-icon"},[n("klk-label",{staticClass:"tag",attrs:{type:"outlined","text-color":"#FF5B00"}},[t._v(t._s(t.$t(e.step)))])],1),t._v(" "),n("ul",{staticClass:"pass-guide-item-content"},[n("div",{staticClass:"title"},[t._v("\n          "+t._s(t.$t(e.title))+"\n        ")]),t._v(" "),t._l(e.contentList,(function(li){return n("li",{key:li},[t._v("\n          "+t._s(t.$t(li))+"\n        ")])}))],2)])})),0)])}),[],!1,null,"d578b736",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(2199),h=(n(2102),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([v.State],y.prototype,"klook",void 0),h([Object(v.Prop)({type:Array,default:function(){return[]}})],y.prototype,"couponsList",void 0);var m=y=h([Object(v.Component)({components:{CouponItem:f.a}})],y),k=(n(2585),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"promotion-coupons"},t._l(t.couponsList,(function(e,i){return n("CouponItem",{key:i,staticClass:"coupon-list-item",attrs:{"coupon-item":e,platform:t.klook.platform}})})),1)}),[],!1,null,"716d6140",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).elementObserver=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.$emit("mounted"),this.createObserver()}},{key:"beforeDestroy",value:function(){this.destroyObserver()}},{key:"createObserver",value:function(){var t=this;"IntersectionObserver"in window&&(this.elementObserver=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&t.$emit("show")}))})),this.elementObserver.observe(this.$el))}},{key:"destroyObserver",value:function(){this.elementObserver&&this.$el&&this.elementObserver.unobserve(this.$el)}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(2605),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"reviews-loading"},[e("div",{staticClass:"reviews-loading-wrapper"},[e("klk-loading")],1),this._v(" "),e("span",{staticClass:"reviews-loading-text"},[this._v("\n    "+this._s(this.$t("car_rental_home_loading"))+"\n  ")])])}),[],!1,null,"42f09be0",null);e.default=component.exports},,,,function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(70),n(28),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(157),m=n.n(y);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).bannerActive=0,t.flag=!1,t.videoPlaying=!1,t.swiperWidth=960,t.slidesOffsetBefore=100,t.currentIndex=0,t.show=!1,t.paginationIndex=-1,t.isTouchMoving=!1,t.slideTimeout=null,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"isOnlyOneBannerChange",value:function(t){var e=this;if(!t||this.isTaVersion){if("mobile"===this.klook.platform)return this.showSwiper(),null;this.$nextTick((function(){e.showSwiper()}))}}},{key:"manualAutoplay",value:function(){this.manualAutoplayStop(),this.manualAutoplayStart()}},{key:"manualAutoplayStart",value:function(){var t=this;this.shouldManualAutoplay&&(this.slideTimeout=setTimeout((function(){t.$bannerSwiper.slideNext()}),3e3))}},{key:"manualAutoplayStop",value:function(){this.slideTimeout&&clearTimeout(this.slideTimeout)}},{key:"handleTouchMove",value:function(){this.isTouchMoving=!0,this.manualAutoplayStop()}},{key:"showSwiper",value:function(){this.show=!0,this.watchMouseOnSwiper()}},{key:"isVideoPlayingChange",value:function(t){this.videoPlaying=t}},{key:"videoPlayingChange",value:function(t){this.$emit("playing-change",t)}},{key:"formatVideoUrl",value:function(t){if(this.isTaVersion){for(var e=t;e.replace(",h_540,",",h_607,")!==e;)e=e.replace(",h_540,",",h_607,");return e}return t}},{key:"formatImg",value:function(t){var e=this.hasWaterMark(t)?"w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/":"",n=this.formatPicExtension(t.suffix);return t.prefix+t.pre_process+this.cutSize+e+n}},{key:"hasWaterMark",value:function(t){return t.has_water_mark&&!this.klook.utilConfig.whiteLabelUtilConfig}},{key:"slideChange",value:function(){this.currentIndex=this.$refs.$bannerSwiper.swiper.realIndex,this.setPaginationIndex(this.currentIndex);var t=document.querySelector(".swiper-slide.swiper-slide-active .js-activity-banner-play-button");t&&(t.removeEventListener("click",this.showVideoPlayer),t.addEventListener("click",this.showVideoPlayer))}},{key:"handleTouchEnd",value:function(){this.isTouchMoving=!1,this.manualAutoplay()}},{key:"setPaginationIndex",value:function(t){var e=this;this.isOnlyOneBanner?(this.paginationIndex=-1,setTimeout((function(){return e.paginationIndex=t}),0)):this.paginationIndex=t}},{key:"formatPicExtension",value:function(t){return t?this.klook.webp?t.replace(/.(jpg|png|jpeg)$/,".webp"):t:""}},{key:"showVideoPlayer",value:function(){this.videoPlaying=!0,this.playVideo()}},{key:"hideVideoPlayer",value:function(){this.videoPlaying=!1}},{key:"handlePlay",value:function(){this.videoPlaying=!0}},{key:"playVideo",value:function(){var t,e,n=this,o=(null===(t=this.activityBanner[this.currentIndex])||void 0===t?void 0:t.video_url)||(null===(e=this.activityBanner.find((function(t){return t.video_url})))||void 0===e?void 0:e.video_url);if(o){var video=this.$refs.activityBannerVideo;video.getAttribute("src")||(video.src=this.formatVideoUrl(o)),video.play(),this.isOnlyOneBanner||(this.$bannerSwiper.autoplay.stop(),this.manualAutoplayStop()),video.addEventListener("ended",(function(){n.hideVideoPlayer(),setTimeout((function(){n.$bannerSwiper.slideNext(),n.$bannerSwiper.autoplay.start(),n.manualAutoplay()}),1e3)}))}}},{key:"stopVideo",value:function(){this.$refs.activityBannerVideo.pause(),this.isOnlyOneBanner||(this.$bannerSwiper.autoplay.start(),this.manualAutoplay())}},{key:"watchMouseOnSwiper",value:function(){var t=this;if(!this.isOnlyOneBanner){var e=this.$refs.swiperContainer;if(!e)return;e.addEventListener("mouseover",(function(){t.$bannerSwiper.autoplay.stop()})),e.addEventListener("mouseout",(function(){t.$bannerSwiper.autoplay.start()}))}}},{key:"handlePause",value:function(){this.$emit("video-pause")}},{key:"handlePaginationClick",value:function(t){this.$refs.$bannerSwiper.swiper.slideTo(t)}},{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"logoWidth",get:function(){var t=this.isDesktop?1160:document.documentElement.clientWidth,e=0;switch(this.ratio){case"16:9":e=3*t/16;break;case"4:3":e=t/4;break;default:e=t/3}return e+"px"}},{key:"ratio",get:function(){return this.isDesktop?"16:9":this.isTaVersion?"1:1":"4:3"}},{key:"valid",get:function(){var t;return null===(t=this.activityBanner)||void 0===t?void 0:t.length}},{key:"isOnlyOneBanner",get:function(){var t;return 1===(null===(t=this.activityBanner)||void 0===t?void 0:t.length)}},{key:"shouldManualAutoplay",get:function(){return this.isTaVersion}},{key:"bannerSwiperOption",get:function(){var t=this,option=m()(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({slidesPerView:"auto",loop:this.isTaVersion,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},pagination:!this.isTaVersion&&{el:".activity-swiper-pagination"}},this.shouldManualAutoplay?{speed:0,autoplay:!1}:{},{on:{slideChangeTransitionStart:this.slideChange,slideChangeTransitionEnd:this.manualAutoplay,touchMove:this.handleTouchMove,touchEnd:this.handleTouchEnd}}),this.swiperOptions),e=option.on.touchMove;e!==this.handleTouchMove&&(option.on.touchMove=function(){e(),t.handleTouchMove()});var n=option.on.slideChangeTransitionEnd;return n!==this.manualAutoplay&&(option.on.slideChangeTransitionEnd=function(){n(),t.manualAutoplay()}),option}},{key:"videoIcon",get:function(){return this.isDesktop?"desktop-common#btn-video-normal-new":"mobile-activity#banner-video-play"}},{key:"videoUrl",get:function(){if(this.activityBanner&&this.activityBanner.length>0)for(var i=0;i<this.activityBanner.length;i++){var t=this.activityBanner[i];if(t.video_url)return this.formatVideoUrl(t.video_url)}return""}},{key:"firstImage",get:function(){return this.formatImg(this.activityBanner[0])}},{key:"bannerImageUrls",get:function(){var t,e=this;return null===(t=this.activityBanner)||void 0===t?void 0:t.map((function(t){return e.formatImg(t)}))}},{key:"cutSize",get:function(){var t,e=null===(t=this.activityBanner)||void 0===t?void 0:t.length;return this.isDesktop?1===e?"c_fill,w_1160,h_460/q_80/":"c_fill,w_960,h_460/q_80/":this.isTaVersion?"c_fill,w_750,h_560/q_80/":"c_fill,w_750,h_500/q_80/"}}]),e}(h.Vue);O([Object(h.Prop)()],_.prototype,"activityBanner",void 0),O([Object(h.Prop)()],_.prototype,"isVideoPlaying",void 0),O([Object(h.Prop)()],_.prototype,"swiperOptions",void 0),O([Object(h.Prop)({default:!1})],_.prototype,"isTaVersion",void 0),O([h.State],_.prototype,"klook",void 0),O([Object(h.Watch)("isOnlyOneBanner",{immediate:!0})],_.prototype,"isOnlyOneBannerChange",null),O([Object(h.Watch)("isVideoPlaying")],_.prototype,"isVideoPlayingChange",null),O([Object(h.Watch)("videoPlaying")],_.prototype,"videoPlayingChange",null);var j=_=O([h.Component],_),w=(n(2400),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{ref:"swiperContainer",staticClass:"activity-banner-image-wrap"},[t.isOnlyOneBanner&&!t.isTaVersion?n("div",{staticClass:"page-activity-banner-one-img"},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.videoPlaying,expression:"!videoPlaying"}],staticClass:"activity-banner-image",attrs:{src:t.firstImage,alt:"banner-0"}}),t._v(" "),t.activityBanner[0].video_url?n("SvgIcon",{staticClass:"act-banner-icon-video js-activity-banner-play-button",attrs:{name:t.videoIcon,size:"70"},nativeOn:{click:function(e){return t.showVideoPlayer(e)}}}):t._e()],1):t._e(),t._v(" "),t.show?[n("div",{directives:[{name:"swiper",rawName:"v-swiper:$bannerSwiper",value:t.bannerSwiperOption,expression:"bannerSwiperOption",arg:"$bannerSwiper"}],ref:"$bannerSwiper",staticClass:"swiper-container"},[n("div",{staticClass:"swiper-wrapper swiper-wrapper-960"},[t._l(t.bannerImageUrls,(function(e,o){return n("div",{key:o,class:["swiper-slide",t.isTouchMoving&&"stop-scaling"],attrs:{"data-spm-module":"BannerScroll"}},[n("div",{staticClass:"banner-img-box"},[n("img",0===o?{staticClass:"banner-img",style:{backgroundSize:t.logoWidth},attrs:{src:e,alt:"banner"}}:{staticClass:"banner-img swiper-lazy",style:{backgroundSize:t.logoWidth},attrs:{"data-src":e,alt:"banner"}})]),t._v(" "),t.activityBanner[o].video_url?n("SvgIcon",{staticClass:"act-banner-icon-video js-activity-banner-play-button",attrs:{name:t.videoIcon,size:"70"},nativeOn:{click:function(e){return t.showVideoPlayer(e)}}}):t._e()],1)})),t._v(" "),t._t("swiper-slide")],2),t._v(" "),t.isTaVersion?n("div",{staticClass:"swiper-wrapper-layer"}):t._e(),t._v(" "),t._t("pagination",null,null,{videoUrl:t.videoUrl}),t._v(" "),t.isTaVersion?n("div",{staticClass:"activity-swiper-pagination"},t._l(t.bannerImageUrls,(function(e,o){return n("span",{key:o,staticClass:"swiper-pagination-bullet",class:{"swiper-pagination-bullet-active":o===t.paginationIndex,"is-played":o<t.paginationIndex,"is-playing":o===t.paginationIndex&&!t.isTouchMoving},on:{click:function(e){return t.handlePaginationClick(o)}}})})),0):t._e()],2),t._v(" "),t._t("swiper",null,null,{videoPlaying:t.videoPlaying})]:t._e(),t._v(" "),n("transition",{attrs:{name:"video-action"},on:{leave:t.stopVideo}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.videoPlaying,expression:"videoPlaying"}],class:["video-container","video-container-"+t.klook.platform]},[n("div",{staticClass:"video-container_video"},[n("video",{ref:"activityBannerVideo",staticClass:"video-box",attrs:{id:"video",controls:"controls",controlsList:"nodownload",preload:"auto",src:t.videoUrl},on:{play:t.handlePlay,pause:t.handlePause}})]),t._v(" "),t.isDesktop?n("SvgIcon",{staticClass:"klook-icon-close",attrs:{name:"desktop-common#icon-close"},nativeOn:{click:function(e){return t.hideVideoPlayer(e)}}}):t._e()],1)]),t._v(" "),t._t("default")],2):t._e()}),[],!1,null,"c4fed6a8",null);e.a=component.exports},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(3),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=Object(h.namespace)("auth"),O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).favorite=!1,t.activityReopenModalVisible=!1,t}var n,f,h,m,k,O;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getReopenActivity",value:(O=Object(o.a)(regeneratorRuntime.mark((function t(data){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$post(y.a.updateReopen,data);case 2:(n=t.sent).success&&(this.triggerReopenModalVisible(!1),this.setReopenRemind(null===(e=n.result)||void 0===e?void 0:e.reopen_notice));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return O.apply(this,arguments)})},{key:"triggerReopenModalVisible",value:function(data){this.activityReopenModalVisible=data}},{key:"setReopenRemind",value:function(t){this.$emit("changeReopenRemind",t)}},{key:"getWishStatus",value:(k=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoggedIn){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$axios.$get(y.a.getWishStatus,{params:{id:this.activityId}});case 4:(e=t.sent).success&&e.result&&(this.favorite=e.result.favorite);case 6:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"handleNoLogin",value:(m=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$loginSDK({purpose:"Wishlist",success:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wishList();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"showReopen",value:function(){return this.reopen&&3===this.reopen.tag}},{key:"updateWishList",value:(h=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoggedIn){t.next=5;break}return t.next=3,this.handleNoLogin();case 3:t.next=7;break;case 5:return t.next=7,this.wishList();case 7:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"wishList",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={cancel:{object_id:"".concat(this.activityId),object_type:"act"},add:{object_id:"".concat(this.activityId),object_type:"act"}},r=this.favorite?"cancel":"add",c=this.favorite?y.a.cancelWishList:y.a.addWishList,t.next=5,this.$axios.$post(c,o[r]);case 5:if(!(l=t.sent).success){t.next=15;break}if(this.favorite=!this.favorite,d=this.favorite?"Wishlist Added":"Wishlist Unlisted",this.$sendGTMCustomEvent("Activity Page|".concat(d)),this.showReopen()){t.next=12;break}return t.abrupt("return",null);case 12:this.favorite?this.triggerReopenModalVisible(!0):this.getReopenActivity({activity_id:this.activityId,need_reopen_notice:this.favorite}),t.next=18;break;case 15:if("4001"!==(null===(n=null===(e=l)||void 0===e?void 0:e.error)||void 0===n?void 0:n.code)){t.next=18;break}return t.next=18,this.handleNoLogin();case 18:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"closeReopen",value:function(){this.triggerReopenModalVisible(!1),this.setReopenRemind("")}},{key:"sendReopen",value:function(){var t=this;this.getReopenActivity({activity_id:this.activityId,need_reopen_notice:!0}).then((function(e){e.success&&t.$toast(t.$t("activity_reopen_reminder_4"))}))}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getWishStatus();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"modalWidth",get:function(){return"desktop"===this.klook.platform?"":"76%"}}]),e}(h.Vue);m([h.State],O.prototype,"klook",void 0),m([k.State],O.prototype,"isLoggedIn",void 0),m([Object(h.Prop)()],O.prototype,"activityId",void 0),m([Object(h.Prop)()],O.prototype,"reopen",void 0);var _=O=m([h.Component],O),j=n(43),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module:AddToFavorite",value:{ext:{ClickType:t.favorite?"cut":"add"},oid:"activity_"+t.activityId,trg:"manual"},expression:"{\n    ext: {\n      ClickType: favorite ? 'cut' : 'add'\n    },\n    oid: 'activity_' + activityId,\n    trg: 'manual'\n  }",arg:"module:AddToFavorite"}],staticClass:"wish-button",attrs:{"data-spm-virtual-item":"__virtual"},on:{click:t.updateWishList}},[t._t("default",null,{favorite:t.favorite}),t._v(" "),n("klk-modal",{attrs:{"footer-type":"secondary",open:t.activityReopenModalVisible,"overlay-opacity":.8,width:t.modalWidth,title:t.$t("activity_reopen_reminder_2"),"cancel-label":t.$t("activity_reopen_btn_1"),"ok-label":t.$t("activity_reopen_btn_2")},on:{"update:open":function(e){t.activityReopenModalVisible=e},"on-cancel":t.closeReopen,"on-confirm":t.sendReopen}},[t.activityReopenModalVisible?n("div",{staticClass:"reopen-mask"},[t._v("\n      "+t._s(t.$t("activity_reopen_reminder_3"))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(983),y=n(1168),m=n(1161),k=n(1852),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showTranslationContent=!0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onCommentChanged",value:function(){this.showTranslationContent=!0}},{key:"setAvatarUrl",value:function(t){return"https://cdn.klook.com/upload/img200X200/"+t}},{key:"changeCommentLike",value:function(data){this.$emit("changeCommentLike",data)}},{key:"changeCommentContent",value:function(){this.showTranslationContent=!this.showTranslationContent}}]),e}(f.Vue);O([f.State],_.prototype,"klook",void 0),O([Object(f.Prop)({default:function(){}})],_.prototype,"comment",void 0),O([Object(f.Prop)()],_.prototype,"spm",void 0),O([Object(f.Watch)("comment")],_.prototype,"onCommentChanged",null);var j=_=O([Object(f.Component)({components:{ActivityReviewsHelpful:y.a,KlkStars:h.a,ReviewUser:m.a,SeeMoreWithLines:k.a}})],_),w=(n(2435),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.comment?n("div",{staticClass:"page-activity-reviews-comment-container"},[n("ReviewUser",{staticClass:"page-activity-reviews-comment-user-info",attrs:{avatar:t.setAvatarUrl(t.comment.avatar),name:t.comment.author||"",date:t.comment.date}}),t._v(" "),n("div",{staticClass:"page-activity-reviews-comment-info"},[t.comment.package_name?n("div",{staticClass:"page-activity-reviews-comment-pkg"},[t._v("\n      "+t._s(t.$t("reviews.review_for"))+"\n      "+t._s(t.comment.package_name)+"\n      "),n("span",{staticClass:"page-activity-reviews-comment-pkg-buy",attrs:{"data-spm-module":t.spm?t.spm:"Gallery_Buy_It_Now","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("buy-now")}}},[t._v("\n        "+t._s(t.$t("75393"))+"\n      ")])]):t._e(),t._v(" "),n("div",{staticClass:"page-activity-reviews-comment-content"},[n("SeeMoreWithLines",{attrs:{"max-lines":8,content:t.showTranslationContent?t.comment.translate_content:t.comment.content}})],1),t._v(" "),n("ActivityReviewsHelpful",{staticClass:"custom-reviews-helpful-style",attrs:{comment:t.comment},on:{changeCommentLike:t.changeCommentLike}})],1)],1):t._e()}),[],!1,null,"2720e04b",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"couponListEnterClick",value:function(){this.$emit("couponListEnterClick")}}]),e}(f.Vue);h([Object(f.Prop)({type:String,default:""})],y.prototype,"type",void 0),h([Object(f.Prop)({type:Array,default:function(){return[]}})],y.prototype,"couponList",void 0);var m=y=h([Object(f.Component)({components:{}})],y),k=(n(2450),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-coupon-section",class:t.type+"-section",on:{click:t.couponListEnterClick}},[n("div",{staticClass:"coupon-section-left"},[n("div",{staticClass:"title-label"},[t._v(t._s(t.$t("30641")))]),t._v(" "),n("div",{staticClass:"little-coupon-content"},[n("div",{staticClass:"little-coupon-list"},t._l(t.couponList.slice(0,2),(function(e,o){return n("div",{key:o,staticClass:"little-coupon"},[t._v("\n          "+t._s(e)+"\n        ")])})),0),t._v(" "),n("div",{staticClass:"more-cover"})])]),t._v(" "),n("SvgIcon",{staticClass:"little-coupon-content-icon",attrs:{name:"common#icon_navigation_chevron_right_xs",width:"16",height:"16",color:"rgba(0, 0, 0, 0.54)"}})],1)}),[],!1,null,"6977fd41",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"status",get:function(){return this.info.flash_sale_status.user_status}}]),e}(f.Vue);h([Object(f.Prop)({default:"00:00:00"})],y.prototype,"timeCount",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"canJoin",void 0),h([Object(f.Prop)({default:{}})],y.prototype,"info",void 0);var m=y=h([f.Component],y),k=(n(2464),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status-wrap"},[n("div",{staticClass:"status-svg-wrap"},[t.info.sold_out?n("SvgIcon",{staticClass:"line-up-soldout",attrs:{name:"activity-common#line-up-status-soldout"}}):1===t.status||2===t.status?n("SvgIcon",{staticClass:"line-up-in",attrs:{name:"activity-common#line-up-status-ing"}}):3===t.status?n("SvgIcon",{staticClass:"line-up-now",attrs:{name:"activity-common#line-up-status-now"}}):t._e()],1),t._v(" "),t.info.sold_out?n("div",{staticClass:"status-text soldout-text"},[t._v("\n    "+t._s(t.$t("78625"))+"\n  ")]):2===t.status?n("div",{staticClass:"time-count-down-wrap"},[n("div",{staticClass:"count-down-item"},[n("div",{staticClass:"count-down-head"},[t._v(t._s(t.timeCount))]),t._v(" "),n("div",{staticClass:"count-down-foot"},[t._v(t._s(t.$t("78619")))])]),t._v(" "),n("div",{staticClass:"count-down-item"},[n("div",{staticClass:"count-down-head"},[t._v(t._s(t.info.ahead))]),t._v(" "),n("div",{staticClass:"count-down-foot"},[t._v(t._s(t.$t("78620")))])])]):1!==t.status||t.canJoin?1===t.status&&t.canJoin?n("div",{staticClass:"status-text"},[t._v("\n    "+t._s(t.$t("78616"))+"\n  ")]):3===t.status?n("div",{staticClass:"status-text"},[t._v("\n    "+t._s(t.$t("78623"))+"\n  ")]):t._e():n("div",{staticClass:"status-text sp"},[t._v("\n    "+t._s(t.$t("78613",{time:t.timeCount}))+"\n    ")])])}),[],!1,null,"304f1c28",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:""})],h.prototype,"timeCount",void 0),f([Object(v.Prop)({default:!1})],h.prototype,"isMobile",void 0);var y=h=f([v.Component],h),m=(n(2465),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tips-wrap",class:{mobile:t.isMobile}},[n("span",{staticClass:"icon-box"},[n("SvgIcon",{staticClass:"icon",attrs:{name:"activity-common#line-up-clock"}})],1),t._v(" "),n("div",{staticClass:"title-wrap"},[t._v("\n    "+t._s(t.$t("78627",{time:t.timeCount}))+"\n    ")]),t._v(" "),t.isMobile?t._e():n("div",{staticClass:"after"})])}),[],!1,null,"8049a3d6",null);e.a=component.exports},function(t,e,n){"use strict";n(52),n(53),n(8);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=Object(f.namespace)("traveller/activity"),O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).viewDate=t.getLocalDate(),t.nextCount=0,t.soldoutSchedulesObject={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"priceSchedulesChange",value:function(){var t=this;this.priceSchedules.forEach((function(e){var n=e.date;e.stocks?e.stocks.reduce((function(t,e){return t+e.stock}),0)||(t.soldoutSchedulesObject[n]=e):t.soldoutSchedulesObject[n]=e}))}},{key:"onPackageSelectedDateChanged",value:function(t){this.setView(t)}},{key:"setView",value:function(t){this.datePicker&&(t?this.datePicker.setViewDate(this.getLocalDate(t)):this.datePicker.setViewDate(this.minPriceDate))}},{key:"minDateChange",value:function(){this.peroidChange()}},{key:"maxDateChange",value:function(){this.peroidChange()}},{key:"peroidChange",value:function(){var t=this;this.$nextTick((function(){t.datePicker&&t.datePicker.setViewDate(t.currentDate?t.currentDate:t.minPriceDate)}))}},{key:"getPrice",value:function(t){var e=y()(t).format("YYYY-MM-DD");if(this.packageId){var n=this.packagePriceSchedulesObj[e];return n?n.selling_price:""}var o=this.priceSchedulesObj[e];return o&&o.selling_price}},{key:"changeDate",value:function(t){if(this.setPackageSelectedDate(y()(t).format("YYYY-MM-DD")),"desktop"===this.klook.platform){var e=new Date(t).getTime()-(new Date).getTime(),n=Math.ceil(e/864e5);this.$logquery.service({timestamp:Date.now(),level:"I",message:JSON.stringify({package_id:this.selectedPackageId,activity_id:this.activityId,tag_name:"desktop_activity_date_difference_select_date",date_diff:n}),tag:"desktop-activity-date-difference"},{headers:{"X-Platform":this.klook.platform}})}this.$emit("change",t)}},{key:"cleanDate",value:function(){this.setPackageSelectedDate("")}},{key:"soldOutDate",value:function(t){var e=y()(t).format("YYYY-MM-DD");return this.packageId?this.isPackageSoldout(e):this.soldoutSchedulesObject[e]}},{key:"isPackageSoldout",value:function(t){var e=this,n=this.packagePriceSchedulesObj[t];if(!n)return!1;var o=n.time_slots;return!o||!o.length||o.every((function(t){return!t.stock||t.stock<(e.currentSelectedPackage||{}).minPax}))}},{key:"disableDate",value:function(t){var e=y()(t).format("YYYY-MM-DD");return this.packageId?!this.packagePriceSchedulesObj[e]:!this.priceSchedulesObj[e]}},{key:"shouldDateDisabled",value:function(t){return this.disableDate(t)||this.soldOutDate(t)}},{key:"formatDay",value:function(t){return y()(t).format("D")}},{key:"getLocalDate",value:function(t){var e=y()(t||void 0).toString();return new Date(e)}},{key:"mounted",value:function(){var t=this;this.$el.addEventListener("click",(function(e){if(e.target){var n=e.target.closest(".klk-date-picker-prev-btn"),o=e.target.closest(".klk-date-picker-next-btn");n&&t.nextCount--,o&&t.nextCount++,o&&t.$logquery.service({timestamp:Date.now(),level:"I",message:JSON.stringify({package_id:t.selectedPackageId,activity_id:t.activityId,next_month_count:t.nextCount,tag_name:"desktop_activity_date_difference_next_month_click"}),tag:"desktop_activity_date_difference"},{headers:{"X-Platform":t.klook.platform}})}}))}},{key:"schedules",get:function(){return this.packageId?this.packagePriceSchedules:this.priceSchedules}},{key:"minPriceDate",get:function(){return this.getLocalDate(this.schedules[0]&&this.schedules[0].date)}},{key:"maxPriceDate",get:function(){var t=this.schedules.length-1,e=this.schedules[t];return e&&this.getLocalDate(e.date)}},{key:"currentDate",get:function(){return this.packageSelectedDate?this.getLocalDate(this.packageSelectedDate):null}}]),e}(f.Vue);m([f.State],O.prototype,"klook",void 0),m([Object(f.Prop)({default:!1})],O.prototype,"cleanShow",void 0),m([Object(f.Prop)()],O.prototype,"packageId",void 0),m([Object(f.Prop)()],O.prototype,"startDate",void 0),m([Object(f.Prop)()],O.prototype,"endDate",void 0),m([k.State],O.prototype,"priceSchedules",void 0),m([k.State],O.prototype,"activityId",void 0),m([k.State("packageId")],O.prototype,"selectedPackageId",void 0),m([k.Action],O.prototype,"setPackageSelectedDate",void 0),m([k.Getter],O.prototype,"packageSelectedDate",void 0),m([k.Getter],O.prototype,"packagePriceSchedules",void 0),m([k.Getter],O.prototype,"packagePriceSchedulesObj",void 0),m([k.Getter],O.prototype,"priceSchedulesObj",void 0),m([k.Getter],O.prototype,"currentSelectedPackage",void 0),m([Object(f.Ref)()],O.prototype,"datePicker",void 0),m([Object(f.Watch)("priceSchedules",{immediate:!0})],O.prototype,"priceSchedulesChange",null),m([Object(f.Watch)("packageSelectedDate",{immediate:!0})],O.prototype,"onPackageSelectedDateChanged",null),m([Object(f.Watch)("minPriceDate",{immediate:!0})],O.prototype,"minDateChange",null),m([Object(f.Watch)("maxPriceDate",{immediate:!0})],O.prototype,"maxDateChange",null);var _=O=m([f.Component],O),j=(n(2469),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("klk-date-picker",{ref:"datePicker",staticClass:"activity-package-date-picker",attrs:{width:"auto",date:t.currentDate,"should-disable-date":t.shouldDateDisabled,"first-day-of-week":1,"min-date":t.minPriceDate,"max-date":t.maxPriceDate,"default-view-date":t.viewDate},on:{select:t.changeDate},scopedSlots:t._u([{key:"day",fn:function(e){return[t.soldOutDate(e.date)?n("div",{staticClass:"klk-date-picker-date-inner"},[n("div",{staticClass:"inner-content klk-date-picker-sold-out"},[t._v("\n          "+t._s(t.formatDay(e.date))+"\n        ")])]):t._e()]}},{key:"date-append",fn:function(e){var n=e.date;return[t._v("\n      "+t._s(t.getPrice(n))+"\n    ")]}}])}),t._v(" "),n("div",{staticClass:"picker-sold-out-and-clean"},[n("div",{staticClass:"tips"},[n("div",{staticClass:"tips-item"},[n("SvgIcon",{attrs:{name:"common#icon_tips_tips_fill_m",size:"16",color:"#b2b2b2"}}),t._v(" "),n("span",[t._v("\n          "+t._s(t.$t("activity_detail_date_picker_currency_tips",[t.klook.currencySymbol]))+"\n        ")])],1),t._v(" "),n("div",{staticClass:"tips-item"},[n("SvgIcon",{attrs:{name:"activity-common#icon_feedback_prohibit_xxs",size:"16",color:"#b2b2b2"}}),t._v(" "),n("span",[t._v(t._s(t.$t("global.sold_out")))])],1)]),t._v(" "),t.cleanShow?n("div",{staticClass:"clean"},[n("span",{on:{click:t.cleanDate}},[t._v(t._s(t.$t("clear")))])]):t._e()])],1)}),[],!1,null,"70fcf1b1",null);e.a=component.exports},function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=Object(h.namespace)("traveller/activity"),k=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleCalendarChange",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$emit("switchCalendarLoading",!0),!e){t.next=8;break}return t.next=4,this.getPackagePriceSchedule();case 4:t.sent&&this.setIsPackagePrice(!0),t.next=9;break;case 8:this.setIsPackagePrice(!1);case 9:n=setTimeout((function(){r.$emit("switchCalendarLoading",!1),clearTimeout(n)}),500),o=e?"SelectedPackageCalendarOn_Click":"SelectedPackageCalendarOff_Click",this.$sendGTMCustomEvent("Activity Page|".concat(o,"|").concat(this.activityId,"|").concat(this.templateId));case 12:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setIsPackagePrice",value:function(t){var e=this,n=setTimeout((function(){e.$emit("isPackagePrice",t),clearTimeout(n)}),450)}}]),e}(h.Vue);y([h.State],k.prototype,"klook",void 0),y([Object(h.Prop)()],k.prototype,"isPackagePrice",void 0),y([m.Action],k.prototype,"getPackagePriceSchedule",void 0),y([m.State],k.prototype,"activityId",void 0),y([m.State],k.prototype,"templateId",void 0);var O=k=y([h.Component],k),_=(n(2470),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-date-picker-price"},[t.isPackagePrice?t._e():n("p",{staticClass:"activity-date-picker-price-tips"},[t._v("\n    "+t._s(t.$t("activity_detail_available_date_price_for_all"))+"\n  ")]),t._v(" "),n("div",{staticClass:"activity-date-picker-switch"},[t._v("\n    "+t._s(t.$t("activity_detail_view_selected_package_only"))+"\n\n    "),n("klk-switch",{attrs:{value:t.isPackagePrice},on:{change:t.handleCalendarChange}})],1)])}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2078),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleSelect",value:function(t){this.$emit("select",t,this.spec),this.handleClose()}},{key:"handleDetailVisible",value:function(){this.visible=!0}},{key:"handleClose",value:function(){this.visible=!1}},{key:"btnVisible",get:function(){return!this.spec.text_type&&this.spec.attr.find((function(t){return t.tips}))}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"spec",void 0),y([Object(f.Prop)()],m.prototype,"title",void 0);var k=m=y([Object(f.Component)({components:{AttrDetail:h.a}})],m),O=(n(2517),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-spec-title"},[n("span",{staticClass:"activity-spec-title_title",class:{"is-bold":!!t.title}},[t._v("\n    "+t._s(t.title||t.spec.name)+"\n  ")]),t._v(" "),t.btnVisible?n("AttrDetail",{attrs:{spec:t.spec,visible:t.visible},on:{select:t.handleSelect,close:t.handleClose}},[n("span",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Package Options View Details Button Clicked",expression:"'Activity Page|Package Options View Details Button Clicked'",arg:"click"}],staticClass:"activity-spec-title_btn",on:{click:t.handleDetailVisible}},[t._v(t._s(t.$t("wifi_sim.vertical.view_detail")))])]):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(30),n(70);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2078),y=n(2194),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleSelect",value:function(t){this.$emit("select",t,this.spec),this.close()}},{key:"handleAttrsVisible",value:function(){this.visible=!0}},{key:"close",value:function(){this.visible=!1}},{key:"selectedAttr",get:function(){var t,e;return null===(e=null===(t=this.spec)||void 0===t?void 0:t.attr)||void 0===e?void 0:e.find((function(t){return t.isActive}))}},{key:"selectedAttrName",get:function(){return this.selectedAttr?this.selectedAttr.name:this.$t("global.select.palceholder")}}]),e}(f.Vue);m([Object(f.Prop)()],k.prototype,"spec",void 0);var O=k=m([Object(f.Component)({components:{ActivityPackageBtn:y.a,AttrDetail:h.a}})],k),_=n(43),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("AttrDetail",{attrs:{spec:t.spec,visible:t.visible},on:{select:t.handleSelect,close:t.close}},[n("ActivityPackageBtn",{attrs:{active:t.selectedAttr,content:t.selectedAttrName,icon:"mobile-activity#icon_navigation_chevron_down_m"},nativeOn:{click:function(e){return t.handleAttrsVisible(e)}}})],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue),y=h=f([v.Component],h),m=(n(2542),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"empty-status-box"},[e("SvgIcon",{attrs:{name:"common#illustration",size:"100px"}}),this._v(" "),e("p",{staticClass:"empty-status-text"},[this._v("\n    "+this._s(this.$t("15588"))+"\n  ")])],1)}),[],!1,null,"121d85a6",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=Object(f.namespace)("traveller/activity"),m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"title",get:function(){var t,e=(null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data.city_name)||"";return this.$t("76907",{City_name:e})}}]),e}(f.Vue);h([y.State],m.prototype,"activityDetail",void 0);var k=m=h([f.Component],m),O=(n(2566),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return this.title?e("p",{staticClass:"pass-activity-title"},[this._v("\n  "+this._s(this.title)+"\n")]):this._e()}),[],!1,null,"28a0a02e",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcIcon",get:function(){return this.$attrs.icon||{}}},{key:"calcStyle",get:function(){var t=this.maxWidth,e=this.$attrs;return{maxWidth:t,backgroundColor:e.background_color,color:e.text_color,borderColor:e.border_color}}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"maxWidth",void 0);var m=y=h([f.Component],y),k=(n(2586),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"promotion-tag"},[n("div",{staticClass:"custom-tag",style:t.calcStyle},[t.calcIcon.left_icon_url?n("span",{staticClass:"custom-icon left-icon"},[n("img",{attrs:{src:t.calcIcon.left_icon_url,alt:"icon"}})]):t._e(),t._v(" "),n("span",{staticClass:"custom-text"},[n("span",{staticClass:"js-tag-content-node"},[t._v(t._s(t.$attrs.text))])])])])}),[],!1,null,"639e4f34",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1161),y=n(884),m=n(271),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getAvatarUrl",value:function(t){return Object(m.b)(t)}},{key:"countText",get:function(){var t=this.imageList.length;return t>this.imageSize?"".concat(t-this.imageSize,"+"):""}},{key:"slicedImageList",get:function(){return(this.imageList||[]).slice(0,this.imageSize)}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"avatar",void 0),k([Object(f.Prop)()],O.prototype,"name",void 0),k([Object(f.Prop)()],O.prototype,"utcTime",void 0),k([Object(f.Prop)()],O.prototype,"content",void 0),k([Object(f.Prop)()],O.prototype,"imageList",void 0),k([Object(f.Prop)({default:!1})],O.prototype,"hideImage",void 0),k([Object(f.Prop)({default:4})],O.prototype,"imageSize",void 0);var _=O=k([Object(f.Component)({components:{ReviewUser:h.a,Logo:y.a}})],O),j=(n(2594),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recent-review-card",class:[t.klook.platform],attrs:{"data-spm-module":"Review_Card","data-spm-virtual-item":"__virtual"}},[n("ReviewUser",{staticClass:"recent-review-card-header",attrs:{avatar:t.getAvatarUrl(t.avatar),name:t.name,date:t.utcTime}}),t._v(" "),n("p",{staticClass:"recent-review-card-content"},[t._v("\n    "+t._s(t.content)+"\n  ")]),t._v(" "),t.hideImage?t._e():n("div",{staticClass:"recent-review-card-images"},t._l(t.slicedImageList,(function(img){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:img.img_resize_url||img.image_resize_url,expression:"img.img_resize_url || img.image_resize_url",arg:"background-image",modifiers:{container:!0}}],key:img.image_id,staticClass:"recent-review-card-images-item",attrs:{ratio:"1:1"}},[n("Logo",{attrs:{ratio:"1:1",width:80/3}}),t._v(" "),t.countText?n("span",{staticClass:"recent-review-card-images-count"},[t._v("\n        "+t._s(t.countText)+"\n      ")]):t._e()],1)})),0)],1)}),[],!1,null,"0385163b",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1865),y=n(16),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).approximateThousandsNew=y.e,t.visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"viewReviews",value:function(){this.$emit("view-more-reviews")}},{key:"isNew",get:function(){return"new"===this.hot_state}},{key:"cClass",get:function(){return"score-participants_".concat(this.platform)}},{key:"needHideReviews",get:function(){return this.review_count<10&&this.score<4}},{key:"participantsFormat",get:function(){return this.participants_format}},{key:"isParticipated",get:function(){return parseFloat(this.participantsFormat)>0}},{key:"showSplit",get:function(){return!this.needHideReviews&&this.review_count>0&&this.participantsFormat}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.Prop)()],k.prototype,"score",void 0),m([Object(f.Prop)()],k.prototype,"review_count",void 0),m([Object(f.Prop)()],k.prototype,"participants_format",void 0),m([Object(f.Prop)()],k.prototype,"hot_state",void 0);var O=k=m([Object(f.Component)({components:{Score:h.a}})],k),_=(n(2611),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["score-participants",t.cClass]},[t.needHideReviews?t._e():n("div",{staticClass:"keynote-score_wrap keynote-item"},[n("Score",{staticClass:"score-participants_score",attrs:{score:parseFloat(t.score).toFixed(1),size:(t.platform,20)}}),t._v(" "),t.review_count>0?n("div",{staticClass:"keynote-review-wrap"},[t.needHideReviews?t._e():n("span",{staticClass:"keynote-review",on:{click:t.viewReviews}},[t._v("\n        ("),n("span",{staticClass:"text-underline"},[t._v(t._s(t.$t("global.star.reviews",{0:t.approximateThousandsNew(t.review_count)})))]),t._v(")\n      ")])]):t._e()],1),t._v(" "),t.showSplit&&"desktop"===t.platform?n("span",{staticClass:"keynote-participate_split"},[t._v("\n    •\n  ")]):t._e(),t._v(" "),t.participantsFormat?n("div",{staticClass:"keynote-participate_wrap keynote-item"},[t.showSplit&&"mobile"===t.platform?n("span",{staticClass:"keynote-custom-icon"}):t._e(),t._v(" "),n("span",{staticClass:"keynote-participate_number",class:{active:t.isNew}},[t._v("\n      "+t._s(t.participantsFormat)+"\n    ")])]):t._e()])}),[],!1,null,"ab27dae8",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(956),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).guaranteeModalVisible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"openGuaranteeModal",value:function(){this.guaranteeModalVisible=!0}},{key:"onConfirm",value:function(){this.guaranteeModalVisible=!1}}]),e}(f.Vue);m.displayName="MobilePrice_guarantee",y([Object(f.Prop)()],m.prototype,"bestPriceGuarantee",void 0);var k=m=y([Object(f.Component)({components:{ActivityLayer:h.a}})],m),O=(n(2614),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bestPriceGuarantee?n("div",{staticClass:"activity-head-info_guarantee"},[n("span",{staticClass:"flex-box"},[n("SvgIcon",{staticClass:"prefix_guarantee_icon",attrs:{name:"mobile-activity#icon_service_subtract_xs",size:"16"},nativeOn:{click:function(e){return t.openGuaranteeModal(e)}}}),t._v(" "),n("span",[t._v("\n      "+t._s(t.bestPriceGuarantee.title)+"\n    ")]),t._v(" "),n("SvgIcon",{staticClass:"guarantee_icon",attrs:{name:"common#icon_tips_tips_fill_m",size:"16"},nativeOn:{click:function(e){return t.openGuaranteeModal(e)}}})],1),t._v(" "),n("ActivityLayer",{staticClass:"gurantee-modal-wrap",attrs:{transition:"fade",visible:t.guaranteeModalVisible}},[n("div",{staticClass:"gurantee-modal"},[n("div",{staticClass:"guarantee-modal_main"},[n("div",{staticClass:"guarantee-modal_title"},[t._v("\n          "+t._s(t.bestPriceGuarantee.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"guarantee-modal_content"},[t._v("\n          "+t._s(t.bestPriceGuarantee.content)+"\n        ")])]),t._v(" "),n("div",{staticClass:"guarantee-modal_footer",on:{click:t.onConfirm}},[t._v("\n        "+t._s(t.$t("activity.v2.mobile.guarantee_close"))+"\n      ")])])])],1):t._e()}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(61),n(14),n(11),n(52),n(53),n(8);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=n(211),k=n(883),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=Object(f.namespace)("traveller/activity"),j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getDate",value:function(time){var t=y()(time).format("YYYY-MM-DD");return t===y()().format("YYYY-MM-DD")?"today":t===y()().add(1,"day").format("YYYY-MM-DD")?"tomorrow":Object(m.e)(t,this.$t.bind(this),this.klook.language)}},{key:"getStartTime",value:function(t){return{today:this.$t("book.same.day"),tomorrow:this.$t("book.tomorrow"),soldOut:this.$t("book.time.soldout")}[t]||this.$t("book.time.text",[t])}},{key:"calcCredits",value:function(){var t=Math.floor(parseFloat(this.credits.toString()));return t>0&&"".concat(this.$t("2347")," +").concat(t)}},{key:"calcTags2attribute",get:function(){var t,e,n=this.productTags,o=this.packageDetail;return(null===(e=n||(null===(t=o)||void 0===t?void 0:t.product_tags))||void 0===e?void 0:e.attribute_tags)||[]}},{key:"calcTags2discount",get:function(){var t,e,n=this.productTags,o=this.packageDetail;return(null===(e=n||(null===(t=o)||void 0===t?void 0:t.product_tags))||void 0===e?void 0:e.discount_tags)||[]}},{key:"sepStyle",get:function(){return{display:"inline-block",width:"2px",height:"2px",background:"red",margin:"0 4px",verticalAlign:"middle"}}},{key:"packageDesc",get:function(){var t=[];if(this.icons&&this.icons.length){var e=!0,n=!1,o=void 0;try{for(var r,c=this.icons[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){var l=r.value,d=l.icon_type,v=l.data,f=v.icon_desc,h=void 0===f?"":f,y=v.time,time=void 0===y?"":y;if("available_date"===d){var m=this.getStartTime(this.getDate(time));t.push(m)}else t.push(h)}}catch(t){n=!0,o=t}finally{try{e||null==c.return||c.return()}finally{if(n)throw o}}}var k=this.calcCredits();return k&&t.push(k),t.join('<i class="sep"></i>')}}]),e}(f.Vue);O([_.State],j.prototype,"activityId",void 0),O([_.State],j.prototype,"packageId",void 0),O([_.State],j.prototype,"packageDetail",void 0),O([f.State],j.prototype,"klook",void 0),O([Object(f.Prop)({default:null})],j.prototype,"productTags",void 0),O([Object(f.Prop)({default:""})],j.prototype,"packageSubName",void 0),O([Object(f.Prop)({default:function(){return[]}})],j.prototype,"icons",void 0),O([Object(f.Prop)({default:0})],j.prototype,"credits",void 0);var w=j=O([Object(f.Component)({components:{ExpTagging:k.default}})],j),P=(n(1964),n(43)),component=Object(P.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"package-info-box"},[e("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:this.calcTags2attribute,track:{spm:"Package_Product_Tag"},line:1}}),this._v(" "),e("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:this.calcTags2discount,track:{spm:"Package_Discount_Section",query:{oid:"activity_"+this.activityId}},line:1}})],1)}),[],!1,null,"392e8feb",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)({default:""})],h.prototype,"content",void 0);var y=h=f([v.Component],h),m=(n(1966),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"book-button"},[e("klk-button",{attrs:{type:"primary",size:"small"}},[this._v(this._s(this.content))])],1)}),[],!1,null,"3f12ee04",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(n(934).a);f([Object(v.Prop)({default:""})],h.prototype,"forceText",void 0);var y=h=f([Object(v.Component)({})],h),m=n(43),component=Object(m.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("klk-alert",{staticClass:"package-options-warning",attrs:{type:"warning","show-icon":""}},[this._v("\n  "+this._s(this.forceText||this.warmingText||this.suspendedText)+"\n")])}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(47),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1839),m=n(16),k=n(883),O=n(1012),_=n(934),j=n(981),w=n(887);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=Object(h.namespace)("traveller/activity"),D=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getCalcTags2sku",value:function(t){var e,n,o,r=(null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.discount_tags)||[],c=[];return(null===(o=r)||void 0===o?void 0:o.length)&&r.forEach((function(t){var e,n,o;(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time)?Object(w.c)(t.inner_vars.rate_plan.count_down_end_time)&&c.push(t):c.push(t)})),c}},{key:"getCutDownlist",value:function(t){var e,n=this.getCalcTags2sku(t),o=[];return(null===(e=n)||void 0===e?void 0:e.length)&&n.forEach((function(t){var e,n,r,c=null===(r=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&o.push(c)})),o}},{key:"soldOutColor",value:function(t){return t?"sold-out-color":""}},{key:"reload",value:function(){window&&window.location.reload()}},{key:"calcPreUnitPrice",get:function(){var t,e=this,n=this.currentSelectedPackage.has_discount,r=null===(t=this.preSettlementApiData)||void 0===t?void 0:t.result;return function(t){var c=t.marketPrice||"",l=c&&Number(t.sellingPrice)<Number(c);return Object(y.getPreUnitPriceData)(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{has_discount:n}),r,{oldPriceShow:{market_price_text:l?Object(m.v)(e.klook.currency,c):"",original_price_text:Object(m.v)(e.klook.currency,t.sellingPrice)}})}}},{key:"marketPrice",get:function(){return this.unit.isInPromotion?this.unit.originalPrice:this.unit.marketPrice?this.unit.marketPrice:""}},{key:"isSoldOut",get:function(){var t;return(null===(t=this.unit)||void 0===t?void 0:t.isSoldOut)&&!this.isWarming&&!this.isSuspended}}]),e}(_.a);C([S.State],D.prototype,"preSettlementApiData",void 0),C([h.State],D.prototype,"klook",void 0),C([Object(h.Prop)()],D.prototype,"tipsType",void 0),C([Object(h.Prop)()],D.prototype,"selectedTime",void 0),C([Object(h.Prop)()],D.prototype,"currentSelectedPackage",void 0),C([Object(h.Prop)({default:!0})],D.prototype,"priceVisible",void 0),C([Object(h.Prop)({default:!1})],D.prototype,"disabled",void 0),C([Object(h.Prop)({default:function(){return{}}})],D.prototype,"unit",void 0);var x=D=C([Object(h.Component)({components:{ExpTagging:k.default,DesktopPriceSlot:y.default,WarmingSlogan:O.a,CutDown:j.default}})],D),T=(n(2493),n(2494),n(43)),component=Object(T.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-detail-counter",class:t.tipsType},[n("div",{staticClass:"package-detail-top",class:t.isSoldOut&&"package-detail_flex_wrap"},[n("div",{staticClass:"counter-left",class:t.soldOutColor(t.isSoldOut)},[t._v("\n      "+t._s(t.unit.priceName)+"\n      "),t.unit.requireBuy?n("span",{staticClass:"counter-left-tips"},[t._v(" "+t._s(t.$t("wifi_sim.must_buy")))]):t._e(),t._v(" "),t.unit.requireMinPax?n("span",{staticClass:"counter-left-tips"},[t._v("\n        "+t._s(t.$t("activity.error.required_buy_min",[t.unit.priceMinPax])))]):t._e()]),t._v(" "),n("div",{staticClass:"counter-right"},[!t.selectedTime.arrangementId||t.unit.isDefault||t.isSoldOut?t._e():n("div",{staticClass:"counter-price-wrap"},[t.unit.isFree&&t.unit.specPriceDesc?n("span",{staticClass:"selling_price",class:t.soldOutColor(t.isSoldOut)},[t._v("\n          "+t._s(t.unit.specPriceDesc)+"\n        ")]):t.priceVisible?[n("DesktopPriceSlot",{attrs:{"price-data":t.calcPreUnitPrice(t.unit),"style-type":"flex-end"}}),t._v(" "),n("div",{staticClass:"tags-cut-down-box"},[n("ExpTagging",{staticClass:"tagging-sku-tag-style ta-right discount-tags",attrs:{list:t.getCalcTags2sku(t.unit),track:{spm:"SKU_Tag"},line:1}}),t._v(" "),n("CutDown",{staticClass:"cut-down-time",attrs:{"time-list":t.getCutDownlist(t.unit),size:"small"},on:{reload:t.reload}})],1)]:t._e()],2),t._v(" "),t.isWarming?n("WarmingSlogan",{staticStyle:{"margin-left":"24px"},attrs:{"publish-info":t.publishInfo}}):t.isSuspended?n("div",{staticClass:"suspended-text"},[t._v("\n        "+t._s(t.suspendedText)+"\n      ")]):t.isSoldOut?n("div",{staticClass:"sold-out-txt"},[t._v("\n        "+t._s(t.$t("activity.new.package_attr_date_disabled"))+"\n      ")]):n("div",{staticClass:"activity-counter"},[n("div",{directives:[{name:"track",rawName:"v-track:module:SelectSkuQuantity",value:{oid:"sku_"+t.unit.skuId,ext:{Type:"Cut"},trg:"manual"},expression:"{\n            oid: `sku_${unit.skuId}`,\n            ext: {\n              Type: 'Cut'\n            },\n            trg: 'manual'\n          }",arg:"module:SelectSkuQuantity"}],staticClass:"counter-btn",class:t.disabled||0===t.unit.count?"counter-disable":"",attrs:{"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("handleMinus",t.unit)}}},[n("SvgIcon",{attrs:{name:"common#icon_other_minus_xs-new",size:"16"}})],1),t._v(" "),n("div",{staticClass:"counter-count"},[t._v(t._s(t.unit.count))]),t._v(" "),n("div",{directives:[{name:"track",rawName:"v-track:module:SelectSkuQuantity",value:{oid:"sku_"+t.unit.skuId,ext:{Type:"Add"},trg:"manual"},expression:"{\n            oid: `sku_${unit.skuId}`,\n            ext: {\n              Type: 'Add'\n            },\n            trg: 'manual'\n          }",arg:"module:SelectSkuQuantity"}],staticClass:"counter-btn",class:t.disabled?"counter-disable":"",attrs:{"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("handlePlus",t.unit)}}},[n("SvgIcon",{attrs:{name:"common#icon_other_plus_xs-new",size:"16"}})],1)])],1)]),t._v(" "),t.unit.srvSkuInfo&&t.unit.srvSkuInfo.tips?n("div",{staticClass:"srv-tip"},[t._v("\n    "+t._s(t.unit.srvSkuInfo.tips)+"\n  ")]):t._e()])}),[],!1,null,"33addb15",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(918),y=n(272),m=n(1258),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getAttrTips",value:function(t){return Object(y.c)(t)}},{key:"isDisabled",value:function(t){return!t.isScheduleMatch||!t.isPackageMatch}},{key:"getDisabledTips",value:function(t){var e=t.isPackageMatch;return t.isScheduleMatch?e?void 0:this.$t("activity.new.package_attr_disabled"):this.$t("activity.new.package_attr_date_disabled")}},{key:"select",value:function(t,e){t.isActive||this.$emit("select",t,e)}},{key:"close",value:function(){this.$sendGTMCustomEvent("Activity Page|Package Options View Details Back Button Clicked"),this.$emit("close")}}]),e}(f.Vue);k([Object(f.Prop)()],O.prototype,"spec",void 0),k([Object(f.Prop)()],O.prototype,"visible",void 0);var _=O=k([Object(f.Component)({components:{ActivityMarkdown:h.a,ActivityModal:m.default}})],O),j=(n(2516),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attr-detail"},[t._t("default"),t._v(" "),n("klk-bottom-sheet",{attrs:{visible:t.visible,"show-close":"",title:t.spec.name,"mask-closable":!0},on:{close:t.close}},[n("div",{staticClass:"attr-detail-main"},[n("div",{staticClass:"attr-list"},t._l(t.spec.attr,(function(e){return n("div",{key:e.id,staticClass:"attr-item",on:{click:function(n){return t.select(e,t.spec)}}},[n("div",{staticClass:"attr-item_left",class:{disabled:t.isDisabled(e)}},[n("p",{staticClass:"attr-item_content"},[t._v(t._s(e.name))]),t._v(" "),e.tips?n("ActivityMarkdown",{staticClass:"attr-item_desc",attrs:{content:t.getAttrTips(e.tips)}}):t._e(),t._v(" "),t.isDisabled(e)?n("p",{staticClass:"attr-item_tip"},[t._v(t._s(t.getDisabledTips(e)))]):t._e()],1),t._v(" "),n("span",{staticClass:"attr-item_radio"},[n("klk-radio",{attrs:{size:"small"},model:{value:e.isActive,callback:function(n){t.$set(e,"isActive",n)},expression:"attr.isActive"}})],1)])})),0)])])],2)}),[],!1,null,"6fb75e98",null);e.a=component.exports},function(t,e,n){"use strict";n(273);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2043),y=n(2017),m=n(2016),k=n(2080),O=n(884),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).imageViewerVisible=!1,t.index=0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"preview",value:function(t){var e=this.images.findIndex((function(e){return e.image_id===t}));this.showImage(e)}},{key:"showImage",value:function(t){this.imageViewerVisible=!0,this.index=t}},{key:"load",value:function(){this.loadImage&&this.loadImage()}},{key:"hideImageViewer",value:function(){this.imageViewerVisible=!1}},{key:"handleBuyNow",value:function(){var t=this;this.imageViewerVisible=!1,this.$nextTick((function(){t.buyNow()}))}},{key:"hasMinHeight",get:function(){var t;return this.loading&&!(null===(t=this.images)||void 0===t?void 0:t.length)}}]),e}(f.Vue);_([Object(f.Prop)({type:Array,default:function(){return[]}})],j.prototype,"images",void 0),_([Object(f.Prop)({type:Boolean,default:!1})],j.prototype,"loading",void 0),_([Object(f.Prop)({type:Boolean,default:!1})],j.prototype,"loadingError",void 0),_([Object(f.Prop)({type:Boolean,default:!1})],j.prototype,"done",void 0),_([Object(f.Prop)()],j.prototype,"reviewsMap",void 0),_([Object(f.Prop)()],j.prototype,"loadImage",void 0),_([Object(f.Prop)()],j.prototype,"buyNow",void 0),_([Object(f.Prop)()],j.prototype,"transfer",void 0),_([Object(f.Prop)()],j.prototype,"photoType",void 0),_([Object(f.Prop)({default:!1})],j.prototype,"notFixed",void 0),_([Object(f.Prop)({default:!1})],j.prototype,"showBuyNow",void 0),_([Object(f.Prop)({type:Array,default:function(){return[]}})],j.prototype,"imagesGroup",void 0);var w=j=_([Object(f.Component)({components:{ImageViewer:y.a,Logo:O.a,ImageGalleryCustomer:m.default,GalleryImage:k.a,ImageGalleryMerchant:h.default}})],j),P=(n(2394),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"images-gallery-new"},[t.loading||t.images&&t.images.length?[n("div",{staticClass:"images-gallery_loadmore-container"},[n("klk-infinite-scroll",{attrs:{done:t.done,loading:t.loading&&!t.loadingError,"on-reach-bottom":t.load}},[n("div",{class:["images-gallery_main",t.hasMinHeight&&"has-min-height"]},["OfficialPhoto"===t.photoType?n("ImageGalleryMerchant",{attrs:{images:t.images,"logo-width":110},on:{preview:t.showImage}}):n("ImageGalleryCustomer",{attrs:{images:t.imagesGroup,"photo-type":t.photoType},on:{preview:t.preview}})],1),t._v(" "),t.loadingError?n("div",{staticClass:"images-gallery-loading-error"},[n("span",[t._v(t._s(t.$t("78605")))])]):n("template",{slot:"loading"},[n("div",{staticClass:"images-gallery-loading"},[n("div",{staticClass:"images-gallery-loading-wrapper"},[n("klk-loading")],1)])])],2)],1),t._v(" "),n("ImageViewer",{attrs:{visible:t.imageViewerVisible,"photo-type":t.photoType,index:t.index,images:t.images,"reviews-map":t.reviewsMap,transfer:t.transfer,"not-fixed":t.notFixed,"show-buy-now":t.showBuyNow},on:{"buy-now":t.handleBuyNow,close:t.hideImageViewer},scopedSlots:t._u([{key:"description",fn:function(e){return[t._t("description",null,{image:e.image})]}}],null,!0)})]:[n("div",{staticClass:"images-gallery_empty"},[t._v("\n      "+t._s(t.$t("review.no_photo"))+"\n    ")])]],2)}),[],!1,null,"b17723ec",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(884),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([Object(v.Prop)({default:function(){return[]}})],y.prototype,"image",void 0),h([Object(v.Prop)()],y.prototype,"photoType",void 0),h([Object(v.Prop)({default:110/3})],y.prototype,"logoWidth",void 0);var m=y=h([Object(v.Component)({components:{Logo:f.a}})],y),k=(n(2389),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.image.src,expression:"image.src",arg:"background-image"}],staticClass:"images-gallery-img",attrs:{ratio:"1:1",alt:"activity-image"},on:{click:function(e){return t.$emit("preview",t.image.image_id)}}},[n("Logo",{attrs:{ratio:"1:1",width:t.logoWidth}})],1)}),[],!1,null,"190aa2fa",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(1470),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h([Object(v.Prop)()],y.prototype,"list",void 0),h([Object(v.Prop)()],y.prototype,"selected",void 0);var m=y=h([Object(v.Component)({components:{FilterItem:f.a}})],y),k=(n(2503),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero-filter-pop-content"},t._l(t.list,(function(section,e){return n("div",{key:section.key,staticClass:"hero-filter-pop-section"},[n("div",{staticClass:"hero-filter-pop-section-title"},[t._v("\n      "+t._s(section.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"hero-filter-pop-section-content"},t._l(section.data.options,(function(o,r){return n("FilterItem",{key:o.key,staticClass:"hero-filter-pop-section-item",attrs:{active:t.selected.includes(o.selectValue),"data-spm-module":"Filter?oid=tag_"+o.key+"&ext="+encodeURIComponent(JSON.stringify({GroupTagKey:section.key,GroupOrder:e,ValueOrder:r,SectionType:t.selected.includes(o.selectValue)?"Select":"Unselect"})),"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.$emit("select",o.selectValue)}}},[t._v("\n        "+t._s(o.title)+"\n      ")])})),1)])})),0)}),[],!1,null,"45153182",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(12);var o=n(0),r=(n(61),n(14),n(20),n(27),n(11),n(8),n(99),n(45),n(86),n(13)),c=(n(70),n(47),n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(131),O=n(3),_=n(2),j=n(212),w=n(882),P=n(1254),C=n(7),S=n.n(C),D=n(1226),x=n.n(D),T=n(1227),I=n.n(T),R=n(211),$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};S.a.extend(x.a),S.a.extend(I.a);var L=function(){return{cacheData:null,days:0,minStock:0,stocks:[],list:[]}},A=function(){return{cacheData:null,key:"",in:{},out:{}}},E=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).dateObj=L(),t.timeObj=A(),t.wifiSimParams={},t.isRangeTimeValidate=!1,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"formatStandardDate",value:function(t){return t?Object(R.e)(t,this.$t.bind(this),this.klook.language,1):""}},{key:"getDefDateObj",value:function(){return L()}},{key:"getDefTimeObj",value:function(){return A()}},{key:"calcRightPriceDatetime",get:function(){var t=this.calcPickupDatetime,e=this.calcReturnDatetime,n=[];return t&&n.push(t),e&&n.push(e),n.join(" - ")}},{key:"calcPickupDatetime",get:function(){var t,e,n=this.dateObj,o=this.timeObj,r=this.formatStandardDate,c=[],l=null===(t=n.list)||void 0===t?void 0:t[0];return l&&c.push(r(l)),(null===(e=o.in)||void 0===e?void 0:e.id)&&c.push("".concat(o.in.start,"-").concat(o.in.end)),c.join(", ")}},{key:"calcReturnDatetime",get:function(){var t,e,n=this.dateObj,o=this.timeObj,r=this.formatStandardDate,c=[],l=null===(t=n.list)||void 0===t?void 0:t[1];return l&&c.push(r(l)),(null===(e=o.out)||void 0===e?void 0:e.id)&&c.push("".concat(o.out.start,"-").concat(o.out.end)),c.join(", ")}}]),e}(m.Vue);$([m.State],E.prototype,"klook",void 0);var M=E=$([Object(m.Component)({components:{}})],E),B=n(2e3),N=n(891);function V(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?V(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):V(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var W=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},H=Object(m.namespace)("experience"),U=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).bottomFixedBtn=!1,t.bookBtnScroll=Object(k.throttle)(t.watchBookBtnScroll,150),t}var n,y,m,P,C,S;return Object(h.a)(e,t),Object(d.a)(e,[{key:"packageIdChange",value:(S=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initWifiSimData(),this.$store.commit("traveller/activity/".concat(_.SET_PRE_SETTLEMENT_API_DATA),null),!e){t.next=8;break}return t.next=5,this.getPackagePriceScheduleUnits();case 5:this.selectPackage(e),t.next=8;break;case 8:this.isPackageSchedule=!0;case 9:case"end":return t.stop()}}),t,this)}))),function(t){return S.apply(this,arguments)})},{key:"bottomFixedBtnChange",value:function(t){t?this.pageBottomFixedPlaceHolder():this.removeBottomFixedPlaceHolder()}},{key:"packageSelectedDateChange",value:function(t){this.setPackageSelectedDate(t)}},{key:"arrangementIdChange",value:function(t){t&&this.fetchPackageUnits()}},{key:"checkRangeDateValidate",value:function(t){var e=this.dateObj,n=this.calcTimeExtra,o=t||e.list||[];if(!(2===o.length&&o.every((function(t){return t}))))return this.$t(n?"88950":"13187")}},{key:"checkRangeTimeValidate",value:function(){var t,e,n,o,r,c,l,d,v=this.timeObj,f=this.calcTimeExtra;return!((null===(e=null===(t=f)||void 0===t?void 0:t.in)||void 0===e?void 0:e.length)&&(null===(o=null===(n=v)||void 0===n?void 0:n.in)||void 0===o||!o.id))&&!((null===(c=null===(r=f)||void 0===r?void 0:r.out)||void 0===c?void 0:c.length)&&(null===(d=null===(l=v)||void 0===l?void 0:l.out)||void 0===d||!d.id))}},{key:"initWifiSimData",value:function(){this.sectionActData.isWifi&&(this.pkgSelectedDate="",this.$set(this,"dateObj",this.getDefDateObj()),this.$set(this,"timeObj",this.getDefTimeObj()))}},{key:"checkDateAndTime",value:function(){if(this.sectionActData.isWifi&&!this.checkConfirm()){var t=this.$refs.pickupReturnDateTimeRef;return t&&this.checkPackageComplete("date",{ref:t,callback:t.showDatePicker.bind(null,1,!0,null),scrollConfig:{lockLocation:88}}),!1}return this.pkgSelectedDate?!!this.calcArrangementId||(this.checkPackageComplete("time"),!1):(this.checkPackageComplete("date"),!1)}},{key:"checkConfirm",value:function(){var t,e="";if(this.sectionActData.isWifi)e=this.checkRangeDateValidate();else{var n=this.dateObj;this.pkgSelectedDate&&(null===(t=n.list)||void 0===t?void 0:t.length)||(e=this.$t("88950"))}return e?(this.$toast(e),!1):this.checkRangeTimeValidate()?(this.isRangeTimeValidate=!1,!0):(this.isRangeTimeValidate=!0,this.$toast(this.$t("88950")),!1)}},{key:"handlePlus",value:function(t){var e=this.isLinePage,n=this.calcPreview,o=this.calcPkgSelectedObj,r=this.calcTotalUnitCount,c=this.currentUnits,l=this.calcUnitInventorieObj;if(!e){var d=(o||{}).max_pax,v=t.priceMaxPax,f=t.maxCount,h=t.inventoryId,y=Math.min(f,Number(l[h]));if(this.checkDateAndTime()){if(n&&!c)return this.$toast("Cannot add units in unpublished status");r>=o.max_pax?this.$toast(this.$t("activity.v2.error.package_max",[d])):t.count>=t.priceMaxPax?this.$toast(this.$t("activity.error.price_max_v2",[t.maxCount])):t.count>=y||0===t.count&&t.count+t.priceMinPax>y?this.$toast(this.$t("activity.v2.unit_out_of_inventory")):t.count<t.priceMaxPax?this.changeUnitCount({type:"add",priceId:t.priceId}):this.$toast(this.$t("activity.error.price_max_v2",[v])),this.$sendGTMCustomEvent("Activity Page|Quantity Selected|".concat(t.isInPromotion))}}}},{key:"handleMinus",value:function(t){if(!this.isLinePage&&0!==t.count){this.changeUnitCount({type:"minus",priceId:t.priceId});var e=t.priceMinPax;t.required&&t.count===e&&this.$toast(this.$t("activity.error.required_buy_min",[e])),this.$sendGTMCustomEvent("Activity Page|Quantity Selected|".concat(t.isInPromotion))}}},{key:"alert",value:function(text){this.$toast(text)}},{key:"setPackageSelectedDate",value:function(t){var e=this;t?this.calcActInDatePacakges.find((function(t){return t.package_id===e.packageId}))||this.setChosenAttributeIds([]):this.setExpPkgSelectedTime()}},{key:"setChosenAttributeIds",value:function(t){var e=this.specList,n=this.packageList,o=this.packageId,c=e.reduce((function(t,e){var n=e.attrs;return n&&1===n.length?[].concat(Object(r.a)(t),[n[0].id]):t}),[]),l=Array.from(new Set([].concat(Object(r.a)(t),Object(r.a)(c))));this.setAttributes(l);var d=null;if(this.isAttrsSelectedAll()&&l.length===e.length){var v=n.find((function(t){var e=t.specAttrIds;return Object(r.a)(e).sort().join(",")===Object(r.a)(l).sort().join(",")}));v&&v.package_id!==o&&(d=v.package_id)}this.selectPackage(d)}},{key:"isAttrsSelectedAll",value:function(){var t=this.specList,e=this.chosenAttrIds;return t.length===e.length}},{key:"autoSetFeasibleDate",value:function(t){var e=this.calcPkgScheduleList,n=this.calcPkgSelectedObj;this.pkgSelectedDate=this.getExpAutoSetFeasibleDate({isFirstDate:t,packageSchedules:e,currentSelectedPackage:n})}},{key:"getShoppingCartList",value:(C=Object(c.a)(regeneratorRuntime.mark((function t(data){var e,n,o,r,c,l,i,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get(O.a.shoppingCartList);case 2:if(!((e=t.sent)&&e.success&&e.result)){t.next=25;break}if(n=e.result.group,this.modificationShoppingCart=!0,!(o=data.shopId)||!n){t.next=25;break}if(r=null,n.find((function(t){return!!(r=t.items.find((function(t){return t.shoppingcart_id===Number(o)})))})),r){t.next=12;break}return t.abrupt("return",0);case 12:if(c=r.package_id,l=this.packageList.find((function(t){return t.package_id===c}))){t.next=16;break}return t.abrupt("return",0);case 16:i=0;case 17:if(!(i<r.main_package_specs.length)){t.next=24;break}if(d=r.main_package_specs[i],l.spec_attr_id.includes(d.attr_id)){t.next=21;break}return t.abrupt("return",0);case 21:i++,t.next=17;break;case 24:return t.abrupt("return",c);case 25:case"end":return t.stop()}}),t,this)}))),function(t){return C.apply(this,arguments)})},{key:"fetchPackageUnits",value:(P=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y,m,O=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.calcArrangementId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.getPackageUnitsApiData(this.calcPkgUnitsParams);case 5:if(r=t.sent,c=(r||{}).result,null===(e=r)||void 0===e||!e.success||Object(k.isEmpty)(c)||Object(k.isEmpty)(c.prices)||Object(k.isEmpty)(c.inventories)){t.next=17;break}if(d=(l=c||{}).unitList,v=l.inventories,this.preSelectedSkuId&&d.forEach((function(t){return O.autoSelectSku(t,v,{passValidate:O.sectionActData.isWifi})})),f={maxPurchased:this.calcMaxPurchased,inventories:this.calcUnitInventorieObj},this.currentUnits=N.a.getExpUnitsExtra(d,f),h=this.currentUnits,y=this.calcPkgSelectedObj,!(null===(n=y)||void 0===n?void 0:n.has_discount)){t.next=17;break}return m={page_from:2,arrangement_id:o,sku_list:h.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}}))},t.next=17,this.getPreSettlementApiData(m);case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}}),t,this)}))),function(){return P.apply(this,arguments)})},{key:"changeUnitCount",value:(m=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.priceId,o=e.type,r=this.calcPkgSelectedObj,c=this.currentUnits,t.next=4,this.changeExpUnitCount({priceId:n,type:o,currentSelectedPackage:r,unitList:c});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"autoDateClickDom",value:function(){this.autoClick("#desktop-package-date-picker"),this.updateDatePickerSpm()}},{key:"updateDatePickerSpm",value:function(){var t,e=null===(t=document)||void 0===t?void 0:t.querySelector(".js-spm-package-date-picker");e&&this.$inhouse.updateBinding(e,{ext:{SelectType:"System"}})}},{key:"autoTimeClickDom",value:function(){this.autoClick("#desktop-package-time-picker")}},{key:"autoClick",value:function(t){var e,n=null===(e=document)||void 0===e?void 0:e.querySelector(t);n&&n.click()}},{key:"pageBottomFixedPlaceHolder",value:function(){var t=this;this.$nextTick((function(){var e,n,body=null===(e=document)||void 0===e?void 0:e.querySelector("body"),o=t.$refs.bottomFixedBtnRef;if(body&&(null===(n=o)||void 0===n?void 0:n.offsetHeight)){var r=o.offsetHeight;body.insertAdjacentHTML("beforeend",'<div class="js-bottom-fixed-btn" style="width: 100%; height: '.concat(r,'px"></div>'))}}))}},{key:"removeBottomFixedPlaceHolder",value:function(){var t,e=null===(t=document)||void 0===t?void 0:t.querySelector(".js-bottom-fixed-btn");e&&e.remove()}},{key:"attrChange",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.chosenAttrIds=t,this.updateExpPackageId(e),n.isScheduleMatch||this.clearDate(),this.trackPackageId({packageId:e,spmObj:o})}},{key:"clearDate",value:function(){}},{key:"trackPackageId",value:function(){var t,e,n,o,r,c,l,d,v,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{packageId:this.packageId,type:"User"},h=f.packageId,y=f.type,m=f.spmObj;h=null!=h?h:this.packageId,y=y||(null===(t=m)||void 0===t?void 0:t.type)||"User";var k=null===(e=this.calcPkgSelectedObj)||void 0===e?void 0:e.credits,O=null===(o=null===(n=this)||void 0===n?void 0:n.$refs)||void 0===o?void 0:o.attrWrap,_=null===(r=O)||void 0===r?void 0:r.$el;if(h&&_){var j=this.calcSpecIdList,w=new Set(j||[]),P=!0,C=!1,S=void 0;try{for(var D,x=(this.userSelectedSpec||[])[Symbol.iterator]();!(P=(D=x.next()).done);P=!0){var T=D.value;w.delete(T),w.add(T)}}catch(t){C=!0,S=t}finally{try{P||null==x.return||x.return()}finally{if(C)throw S}}this.$inhouse.track("custom","body",{spm:"Activity.PackageType_LIST_Click",objectId:"package_".concat(h),object_id:"package_".concat(h),listLen:(l=null===(c=m)||void 0===c?void 0:c.len,null!=l?l:-1),listIndex:(v=null===(d=m)||void 0===d?void 0:d.index,null!=v?v:-1),Integral:k?Math.floor(k):"null",SelectType:y,PromoCard:-1,SalesPrice:-1,PromotionType:-1,action_type:"User"===y?"click":null,SelectedStep:Array.from(w).map((function(t){return j.indexOf(t)+1})),AttributeID:Array.from(w)})}}},{key:"watchBookBtnScroll",value:function(){var t=this.$refs.packageOptionsBtnGroup;if(t&&t.$el&&t.$el.textContent){var a=Object(j.c)(t.$el),e=Object(j.h)();this.bottomFixedBtn=e>a-70}}},{key:"selectPackage",value:function(t){if(t){this.updateExpPackageId(t);var e=this.packageList.find((function(e){return e.package_id===t}));e&&(this.setAttributes(e.spec_attr_id),this.getPackageDetailApiData(this.calcPkgDetailParams))}else this.updateExpPackageId()}},{key:"setPackageTime",value:function(data){this.setExpPkgSelectedTime(data)}},{key:"setAttributes",value:function(t){this.chosenAttrIds=Object(r.a)(t||[])}},{key:"autoSelectSku",value:function(t,e,n){var o=(n||{}).passValidate,r=this.$t.bind(this),c=this.calcPreview,l=this.calcPkgUnitsObj,d=this.calcPkgSelectedObj,v=this.calcTotalUnitCount,f=this.pkgSelectedTime,h=this.preSelectedSkuId,y=this.setExpAutoSelectSkuHandler({unit:t,inventories:e,preview:c,pkgUnitsObj:l,currentSelectedPackage:d,totalUnitCount:v,selectedTime:f,preSelectedSkuId:h,$t:r,passValidate:o});y&&this.alert(y)}},{key:"checkPackageComplete",value:function(t,e){var n=e||{},o=n.ref,r=n.callback,c=n.scrollConfig,l=this.$refs.desktopPackageDate,time=this.$refs.desktopPackageTime,d=o||("date"===t?l:time),v=r||("date"===t?this.autoDateClickDom:this.autoTimeClickDom);if(!d)return null;try{var f=Object(j.c)(d.$el);Object(j.d)(F({scrollY:f,lockLocation:130,callback:v},c||{}))}catch(t){}}},{key:"getPackagePriceScheduleUnits",value:(y=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v,f,h,y=this,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.length>0&&void 0!==m[0]?m[0]:{},t.next=3,this.getPackageSchedulesAndUnitsApiData(F({},this.calcPkgSchedulesAndUnitsParams,{},e||{}));case 3:if(d=t.sent,null===(n=d)||void 0===n?void 0:n.result){t.next=6;break}return t.abrupt("return",null);case 6:return v=d.result||{},f=v.unitList,h=v.inventories,1===(null===(o=f)||void 0===o?void 0:o.length)&&(this.preSelectedSkuId=null===(r=f[0])||void 0===r?void 0:r.skuId),this.calcActIsNewOpenTicket&&this.autoSetFeasibleDate(!!(null===(c=this.calcPkgSelectedObj)||void 0===c?void 0:c.auto_select_first_date)),!this.calcArrangementId&&(null===(l=f)||void 0===l?void 0:l.length)&&this.preSelectedSkuId&&f.forEach((function(t){return y.autoSelectSku(t,h,{passValidate:y.sectionActData.isWifi})})),this.currentUnits=f||[],t.next=14,this.$nextTick();case 14:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"resetPackageTime",value:function(){this.setPackageTime({})}},{key:"scrollWatch",value:function(){document.addEventListener("scroll",this.bookBtnScroll)}},{key:"created",value:function(){var t=this.packageId,e=this.packageDetailList||[];t&&e&&e[0]&&(this.packageDetailApiDefined.apiData={success:!0,result:e},Object(B.setApiState)(this.packageDetailApiDefined,B.apiState.success,!1))}},{key:"mounted",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return setTimeout((function(){w.a.$emit("setIsDelayFlag2bus",{from:"spec_type_mounted"})}),60),t.next=3,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 3:if(!(e=this.$route.query.shop_id)){t.next=9;break}return t.next=7,this.getShoppingCartList({shopId:e});case 7:(n=t.sent)&&this.updateExpPackageId(n);case 9:this.scrollWatch();case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"beforeDestory",value:function(){document.removeEventListener("scroll",this.bookBtnScroll)}},{key:"calcIsReloadStatus",get:function(){var t,e=this.calcArrangementId,n=this.packageUnitsApiDefined;return!e||"fetching"!==(null===(t=n)||void 0===t?void 0:t.state)}},{key:"addToCartOrBookButton",get:function(){var t=this.membershipInfo||{},e=this.isSupportShoppingCart,n=this.modificationShoppingCart,o=this.packageId,r=this.activityId,c=this.templateId,l=this.pkgSelectedTime,d=this.currentUnits,v=this.calcTotalUnitCount,f=this.calcPkgSelectedObj,h=this.calcPkgScheduleList,y=this.pkgSelectedDate,m=this.priceSchedulesObj,k=this.calcActScheduleList,O=this.isPackageSchedule,_=this.calcActIsNewOpenTicket,j=this.activityPageTemplateId;return{isSupportShoppingCart:e,wifiSimParams:F({},this.wifiSimParams,{datetime_format:this.calcRightPriceDatetime}),vip:t,packagePriceSchedules:this.calcActScheduleList,isUsingPackagePriceSchedule:this.isPackageSchedule,modificationShoppingCart:n,packageId:o,activityId:r,templateId:c,selectedTime:l,units:d,totalUnitCount:v,currentSelectedPackage:f,packageSchedules:h,packageSelectedDate:y,priceSchedulesObj:m,schedules:k,isPackageSchedule:O,isNewOpenTicket:_,activityPageTemplateId:j}}},{key:"priceSchedulesObj",get:function(){return this.calcScheduleList.reduce((function(t,e){return F({},t,Object(o.a)({},e.date,e))}),{})}},{key:"showOpenDateTips",get:function(){return!this.calcActIsNewOpenTicket&&(!!this.pkgSelectedDate&&3===(this.calcPkgSelectedObj||{}).package_ticket_type)}},{key:"isRealLoading",get:function(){var t=this.calcArrangementId?this.packageUnitsApiDefined:this.packageSchedulesAndUnitsApiDefined;return this.getIsLoadingForApiDefined(t)}},{key:"showWarning",get:function(){var t,e=this.calcPkgIsWarmingOrSuspended,n=this.packageId,o=this.currentUnits,r=this.isRealLoading;return e&&n&&0===(null===(t=o)||void 0===t?void 0:t.length)&&r}},{key:"calcTimeExtra",get:function(){var t;return(null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.time_extra)||null}}]),e}(Object(m.mixins)(P.a,M));W([H.State],U.prototype,"sectionActData",void 0),W([Object(m.Watch)("packageId",{immediate:!0})],U.prototype,"packageIdChange",null),W([Object(m.Watch)("bottomFixedBtn")],U.prototype,"bottomFixedBtnChange",null),W([Object(m.Watch)("pkgSelectedDate")],U.prototype,"packageSelectedDateChange",null),W([Object(m.Watch)("calcArrangementId",{immediate:!0})],U.prototype,"arrangementIdChange",null),U=W([Object(m.Component)({components:{}})],U);e.a=U},function(t,e){t.exports=function(){}},,,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){this.tip&&(this.visible=!0)}},{key:"backgroundStyle",get:function(){return{background:this.background}}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"content",void 0),h([Object(f.Prop)()],y.prototype,"icon",void 0),h([Object(f.Prop)({default:"#00B371;"})],y.prototype,"background",void 0),h([Object(f.Prop)()],y.prototype,"tip",void 0);var m=y=h([f.Component],y),k=(n(2111),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-usp-tag",style:t.backgroundStyle,on:{click:t.handleClick}},[t.icon?n("svg-icon",{staticClass:"activity-usp-tag_icon",attrs:{size:"16",name:t.icon,color:"#fff"}}):t._e(),t._v(" "),n("span",{staticClass:"activity-usp-tag_content",domProps:{innerHTML:t._s(t.content)}}),t._v(" "),n("svg-icon",{staticClass:"activity-usp-tag_icon",attrs:{size:"16",name:"common#icon_tips_tips_fill_m",color:"#fff"}}),t._v(" "),t.tip?n("klk-modal",{attrs:{title:t.tip.title,"title-align":"center","button-align":"block",open:t.visible,"show-cancel-button":!1},on:{"update:open":function(e){t.visible=e},"on-confirm":function(e){t.visible=!1}}},[n("div",{staticClass:"klk-modal-content"},[t._v("\n      "+t._s(t.tip.content)+"\n    ")])]):t._e()],1)}),[],!1,null,"264a6991",null).exports,_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getExtra",value:function(t){return JSON.stringify({Text:t.text,type:this.type})}},{key:"len",get:function(){return this.tagList.length}}]),e}(f.Vue);_([Object(f.Prop)()],j.prototype,"tagList",void 0),_([Object(f.Prop)()],j.prototype,"type",void 0);var w=j=_([Object(f.Component)({components:{UspTag:O}})],j),P=(n(2112),Object(k.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tagList&&t.tagList.length?n("div",{staticClass:"normal-usp-tag"},t._l(t.tagList,(function(e,o){return n("UspTag",t._b({key:e.content,staticClass:"normal-usp-tag_item",attrs:{"data-spm-module":"UspTagList?idx="+o+"&len="+t.len+"&ext="+t.getExtra(e),"data-spm-virtual-item":"__virtual"}},"UspTag",e,!1))})),1):t._e()}),[],!1,null,"6e7af332",null));e.a=P.exports},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1329);n.n(o).a},function(t,e,n){"use strict";var o=n(1330);n.n(o).a},function(t,e,n){"use strict";var o=n(1331);n.n(o).a},function(t,e,n){"use strict";var o=n(1332);n.n(o).a},function(t,e,n){"use strict";var o=n(1333);n.n(o).a},function(t,e,n){var o=n(32);o(o.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){"use strict";var o=n(1334);n.n(o).a},function(t,e,n){"use strict";var o=n(1335);n.n(o).a},function(t,e,n){"use strict";var o=n(1336);n.n(o).a},function(t,e,n){"use strict";var o=n(1337);n.n(o).a},,function(t,e,n){"use strict";var o=n(1338);n.n(o).a},function(t,e,n){"use strict";var o=n(1339);n.n(o).a},function(t,e,n){"use strict";var o=n(1340);n.n(o).a},function(t,e,n){"use strict";var o=n(1341);n.n(o).a},,,function(t,e,n){"use strict";var o=n(1344);n.n(o).a},function(t,e,n){"use strict";var o=n(1345);n.n(o).a},function(t,e,n){"use strict";var o=n(1346);n.n(o).a},function(t,e,n){"use strict";var o=n(1347);n.n(o).a},function(t,e,n){"use strict";var o=n(1348);n.n(o).a},function(t,e,n){"use strict";var o=n(1349);n.n(o).a},function(t,e,n){"use strict";var o=n(1350);n.n(o).a},function(t,e,n){"use strict";var o=n(1351);n.n(o).a},function(t,e,n){"use strict";var o=n(1352);n.n(o).a},function(t,e,n){"use strict";var o=n(1353);n.n(o).a},function(t,e,n){"use strict";var o=n(1366);n.n(o).a},function(t,e,n){"use strict";n(8);e.a=function(t){return new Promise((function(e){t&&(t.$inhouse.track("custom","body",{spm:"Activity.Notification_Yifun_AddCart",action_type:"click"}),t.$confirm(t.$t("30895"),"",{okLabel:t.$t("30897"),cancelLabel:t.$t("activity.label.add_to_cart")}).then((function(n){var o="Activity.Notification_Yifun_AddCart.".concat(n.result?"OK_Btn":"AddToCart_Btn");t.$inhouse.track("custom","body",{spm:o,action_type:"click"}),e(n.result)})))}))}},function(t,e,n){"use strict";var o=n(1369);n.n(o).a},function(t,e,n){"use strict";var o=n(1370);n.n(o).a},function(t,e,n){"use strict";var o=n(1371);n.n(o).a},function(t,e,n){},function(t,e,n){"use strict";var o=n(1372);n.n(o).a},function(t,e,n){"use strict";var o=n(1373);n.n(o).a},function(t,e,n){"use strict";var o=n(1374);n.n(o).a},function(t,e,n){"use strict";var o=n(1375);n.n(o).a},function(t,e,n){"use strict";var o=n(1376);n.n(o).a},function(t,e,n){"use strict";var o=n(1377);n.n(o).a},function(t,e,n){"use strict";var o=n(1379);n.n(o).a},function(t,e,n){"use strict";var o=n(1380);n.n(o).a},function(t,e,n){"use strict";var o=n(1381);n.n(o).a},function(t,e,n){"use strict";var o=n(1382);n.n(o).a},function(t,e,n){"use strict";var o=n(1383);n.n(o).a},function(t,e,n){"use strict";var o=n(1384);n.n(o).a},function(t,e,n){"use strict";var o=n(1385);n.n(o).a},function(t,e,n){"use strict";var o=n(1386);n.n(o).a},function(t,e,n){"use strict";var o=n(1387);n.n(o).a},function(t,e,n){"use strict";var o=n(1388);n.n(o).a},function(t,e,n){"use strict";var o=n(1389);n.n(o).a},function(t,e,n){"use strict";var o=n(1390);n.n(o).a},function(t,e,n){"use strict";var o=n(1391);n.n(o).a},function(t,e,n){"use strict";var o=n(1392);n.n(o).a},function(t,e,n){"use strict";var o=n(1393);n.n(o).a},function(t,e,n){"use strict";var o=n(1394);n.n(o).a},function(t,e,n){"use strict";var o=n(1395);n.n(o).a},function(t,e,n){"use strict";var o=n(1396);n.n(o).a},function(t,e,n){"use strict";var o=n(1397);n.n(o).a},function(t,e,n){"use strict";var o=n(1398);n.n(o).a},function(t,e,n){"use strict";var o=n(1399);n.n(o).a},function(t,e,n){"use strict";var o=n(1400);n.n(o).a},function(t,e,n){"use strict";var o=n(1402);n.n(o).a},function(t,e,n){"use strict";var o=n(1403);n.n(o).a},function(t,e,n){"use strict";var o=n(1404);n.n(o).a},function(t,e,n){"use strict";var o=n(1405);n.n(o).a},function(t,e,n){"use strict";var o=n(1406);n.n(o).a},,,,,function(t,e,n){"use strict";n(22),n(12),n(30),n(273);var o=n(25),r=(n(23),n(4)),c=n(0),l=(n(61),n(14),n(11),n(8),n(45),n(160),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=(n(20),n(27),n(278)),O=n.n(k),body=n(1024),_=n(1259),j=n(1158),w=n(1193),P=n(893),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"styles",get:function(){return this.attr?{height:4*this.attr.height+"px",backgroundColor:this.attr.color}:{}}}]),e}(m.Vue);C([Object(m.Prop)()],S.prototype,"attr",void 0);var D=S=C([m.Component],S),x=n(43),T=Object(x.a)(D,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"divider-gap",style:this.styles})}),[],!1,null,null,null).exports,I=n(1118),R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentName",get:function(){var t,e,n=null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.component;if(n)switch(n){case"line":return"DividerLine";case"gap":return"DividerGap"}}},{key:"attr",get:function(){var t;return null===(t=this.section)||void 0===t?void 0:t.attr}},{key:"platform",get:function(){return"section-divider-"+this.klook.platform}}]),e}(P.a),L=$=R([Object(m.Component)({components:{DividerGap:T,DividerLine:I.a}})],$),A=(n(2139),Object(x.a)(L,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,{tag:"component",class:["section-divider",this.platform],attrs:{attr:this.attr}})}),[],!1,null,null,null).exports),section=Object(w.a)({SectionHeader:j.a,SectionBody:body.a,SectionFooter:_.a,SectionDivider:A}),E=n(13),M=(n(99),n(86),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),B=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).initLoad=!1,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"mounted",value:function(){var t,e=this,n=function(t){var e=t.root,n=void 0===e?null:e,o=t.rootMargin,r=void 0===o?"0px":o,c=t.threshold,l=void 0===c?[.01,.05]:c,d=t.once,v=void 0===d||d,f=t.callBack,h=t.observeDom;if(!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype))return h&&(h instanceof Element?f(h):Array.from(h).forEach((function(t){return f(t)}))),null;var y=new Set,m=new IntersectionObserver((function(t,e){t.length<=0&&(e.disconnect(),y=null),t.forEach((function(t){(void 0===e.thresholds||t.intersectionRatio>e.thresholds[0])&&(v?(e.unobserve(t.target),y&&(y.has(t.target)||setTimeout((function(){return f(t.target,e)})),y.add(t.target),y.size===(h.length||1)&&(e.disconnect(),y=null))):f&&setTimeout((function(){return f(t.target,e)})))}))}),{root:n,rootMargin:r,threshold:l});return h&&(h instanceof Element?m.observe(h):Array.from(h).forEach((function(t){return m.observe(t)}))),m}({rootMargin:this.rootMargin,callBack:(t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeLoad();case 2:e.initLoad=!0;case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),observeDom:this.$el});this.$once("hook:beforeDestroy",(function(){n.disconnect()}))}}]),e}(m.Vue);M([Object(m.Prop)({type:Function,default:function(){return Promise.resolve()}})],B.prototype,"beforeLoad",void 0),M([Object(m.Prop)({type:String,default:"100px"})],B.prototype,"rootMargin",void 0);var N=B=M([m.Component],B),V=Object(x.a)(N,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"lazyComponent_wrap"},[this.initLoad?this._t("default"):this._t("skeleton")],2)}),[],!1,null,null,null).exports,F=(n(47),n(416),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),W=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"items",get:function(){return new Array(this.itemNum).fill(null).map((function(t,i){return i}))}}]),e}(m.Vue);F([Object(m.Prop)({type:Number,default:4})],W.prototype,"itemNum",void 0),F([Object(m.Prop)({type:Number,default:1})],W.prototype,"rows",void 0);var H=W=F([m.Component],W);n(2140),Object(x.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-skeleton",{staticClass:"default-skeleton-wrapper",attrs:{animate:""}},[n("klk-skeleton-block",{attrs:{height:40}}),t._v(" "),t._l(t.rows,(function(e,i){return n("div",{key:i,staticClass:"default-skeleton-list"},t._l(t.items,(function(e,o){return n("div",{key:o,staticClass:"default-skeleton-item"},[n("klk-skeleton-block",{attrs:{height:"154"}}),t._v(" "),n("klk-skeleton-block"),t._v(" "),n("div",{staticClass:"default-skeleton-item-line"},[n("klk-skeleton-block"),t._v(" "),n("klk-skeleton-block")],1)],1)})),0)}))],2)}),[],!1,null,"60d87cd4",null).exports,n(74);n(274);var U=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},z=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),e}(m.Vue);U([Object(m.Prop)({type:String,default:"desktop"})],z.prototype,"platform",void 0);var G,Y=z=U([m.Component],z),K=Object(x.a)(Y,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)}),[],!1,null,null,null).exports;function J(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}!function(t){t[t.default=1]="default",t[t.klookUi=2]="klookUi"}(G||(G={}));var X=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Q=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).moreLoading=!1,t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"viewMoreHandler",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoadMoreMode||this.moreLoading){t.next=6;break}if(this.isFakePagination&&this.containerData.fake_pagination_handle&&this.containerData.fake_pagination_handle(),!this.isUseLoadMore||!this.containerData.more_load_handler){t.next=6;break}return this.moreLoading=!0,t.next=6,this.containerData.more_load_handler().finally((function(){n.moreLoading=!1}));case 6:this.$emit("onClickViewBtn",e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"trueSectionParams",get:function(){var t=this.sectionParams||{};return{platform:this.platform||t.platform||"desktop",headStyle:this.headStyle||t.headStyle||G.default,headTag:this.headTag||t.headTag||"h2"}}},{key:"wrapperClass",get:function(){return"common-container-".concat(this.trueSectionParams.platform)}},{key:"title",get:function(){return this.containerData.title}},{key:"subtitle",get:function(){return this.containerData.sub_title}},{key:"cornerButtonSpm",get:function(){return this.containerData.corner_button_spm||{}}},{key:"moreSpm",get:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?J(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):J(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.containerData.more_spm_module?{"data-spm-virtual-item":"__virtual","data-spm-module":this.containerData.more_spm_module}:{},{},this.containerData.more_spm||{})}},{key:"cornerButtonDeepLink",get:function(){return this.containerData.corner_button_deep_link}},{key:"cornerButtonTitle",get:function(){return this.containerData.corner_button_title}},{key:"cornerTarget",get:function(){return this.containerData.corner_target||""}},{key:"showCorner",get:function(){return this.cornerButtonDeepLink&&this.cornerButtonTitle}},{key:"moreTitle",get:function(){return this.containerData.more_title}},{key:"moreDeepLink",get:function(){return this.isLoadMoreMode?"javascript:;":this.containerData.more_deep_link}},{key:"showHeader",get:function(){return this.title||this.subtitle||this.showCorner}},{key:"isUseLoadMore",get:function(){return"load_more"===this.containerData.more_action_type}},{key:"isFakePagination",get:function(){return"fake_pagination"===this.containerData.more_action_type}},{key:"isLoadMoreMode",get:function(){return this.isUseLoadMore||this.isFakePagination}},{key:"showMore",get:function(){if(this.moreTitle){if(this.isLoadMoreMode){if(this.isUseLoadMore)return!!this.containerData.more_load_link;if(this.isFakePagination)return!!this.containerData.more_title}return!!this.containerData.more_deep_link}return!1}}]),e}(m.Vue);X([Object(m.Prop)({type:String,default:""})],Q.prototype,"platform",void 0),X([Object(m.Prop)({type:Number,default:null})],Q.prototype,"headStyle",void 0),X([Object(m.Prop)({type:String,default:""})],Q.prototype,"headTag",void 0),X([Object(m.Prop)({type:Object,default:function(){return{}}})],Q.prototype,"containerData",void 0),X([Object(m.Inject)({default:function(){return{}}})],Q.prototype,"sectionParams",void 0);var Z,tt=Q=X([Object(m.Component)({components:{HeadTagCom:{functional:!0,props:["size"],render:function(t,e){return t(e.props.size||"h2",e.data,e.children)}}}})],Q),et=(n(2141),Object(x.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapperClass},[t.showHeader?[1===t.trueSectionParams.headStyle?n("div",{staticClass:"header_wrapper header_wrapper-default"},[t.title||t.subtitle?n("div",{staticClass:"header"},[t.title?n("HeadTagCom",{staticClass:"header_title",attrs:{size:t.trueSectionParams.headTag}},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.subtitle?n("div",{staticClass:"header_subTitle",domProps:{innerHTML:t._s(t.subtitle)}}):t._e()],1):t._e(),t._v(" "),t.showCorner?n("a",t._b({staticClass:"header_link",attrs:{href:t.cornerButtonDeepLink,target:t.cornerTarget}},"a",t.cornerButtonSpm,!1),[t._v("\n        "+t._s(t.cornerButtonTitle)+" >\n      ")]):t._e()]):t._e(),t._v(" "),2===t.trueSectionParams.headStyle?n("klk-section-title",{staticClass:"header_wrapper header_wrapper-klook",attrs:{size:t.trueSectionParams.headTag,desc:t.subtitle,"view-more":t.cornerButtonDeepLink,"view-more-text":t.cornerButtonTitle,"decorative-line":""}},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e()]:t._e(),t._v(" "),t._t("default"),t._v(" "),t._t("footer",[t.showMore?n("div",{staticClass:"footer"},[n("a",{staticClass:"footer_link",attrs:{href:t.moreDeepLink},on:{click:t.viewMoreHandler}},[n("klk-button",t._b({staticClass:"footer_button",attrs:{loading:t.moreLoading,type:"outlined",size:"small"}},"klk-button",t.moreSpm,!1),[t._v("\n          "+t._s(t.moreTitle)+"\n          "),t.isLoadMoreMode?n("klk-icon",{staticClass:"view-more-btn-icon",attrs:{type:"icon_navigation_chevron_down_xs"}}):t._e()],1)],1)]):t._e()])],2)}),[],!1,null,"ea5c79e0",null).exports),it=Object(m.Component)({components:{CommonContainer:et}})(Z=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),e}(m.Vue))||Z,nt=Object(x.a)(it,(function(){var t=this.$createElement;return(this._self._c||t)("CommonContainer",this._g(this._b({},"CommonContainer",this.$attrs,!1),this.$listeners))}),[],!1,null,null,null).exports,at=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ot=function(t){function e(){return Object(l.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),e}(m.Vue);at([Object(m.Prop)({type:String,default:"desktop"})],ot.prototype,"platform",void 0),at([Object(m.Prop)({type:Object,default:function(){return{}}})],ot.prototype,"containerData",void 0);var ct=ot=at([Object(m.Component)({})],ot);Object(x.a)(ct,(function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{display:"block",height:this.containerData.height+"px"}})}),[],!1,null,null,null).exports,n(2142);n(284);function st(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function lt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?st(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):st(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ut=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},pt=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).fakePage=0,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"fakePaginationHandler",value:function(){this.moduleData.items=[].concat(Object(E.a)(this.moduleData.items),Object(E.a)(this.moduleData.$_cloneItems.slice(this.fakePage*this.moduleData.one_page_count,(this.fakePage+1)*this.moduleData.one_page_count))),this.fakePage++,this.moduleData.items.length>=this.moduleData.$_cloneItems.length&&(this.moduleData.bottom_button_title="")}},{key:"fakePaginationInit",value:function(){this.$set(this.moduleData,"$_cloneItems",Object.freeze(Object(E.a)(this.moduleData.$_cloneItems||this.moduleData.items)||[])),this.moduleData.items=[],this.fakePage=0,this.fakePaginationHandler()}},{key:"watchOriItems",value:function(){var t=this;if(!this.$isServer)var e=this.$watch("moduleData.$_cloneItems",(function(){e(),t.fakePaginationInit(),t.watchOriItems()}))}},{key:"created",value:function(){"fake_pagination"===this.moduleData.action_type&&(this.fakePaginationInit(),this.watchOriItems())}},{key:"formatSPM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){return"object"===Object(y.a)(t)?JSON.stringify(t):t},c=Object.entries(e).map((function(t){var e=Object(o.a)(t,2),n=e[0],c=e[1];return"".concat(n,"=").concat(encodeURIComponent(r(c)))})).join("&");return[n?t:"".concat(this.ihtData.spmPrefix,":").concat(t)].concat(Object(E.a)(c?[c]:[])).join("?")}},{key:"defaultContainerData",get:function(){var t,e=this;if(this.moduleData){var n=this.moduleData,o=n.action_type;return void 0!==o?{title:n.title,sub_title:n.sub_title,more_title:n.bottom_button_title,more_deep_link:n.bottom_button_deep_link,more_action_type:o,more_load_link:n.bottom_button_load_more_link,more_spm_module:this.formatSPM("deeplink"===o?"ViewAllBtn":"ViewMoreBtn",{trg:"manual"}),more_load_handler:(t=Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get(n.bottom_button_load_more_link);case 3:o=t.sent,r=o.success,c=o.result,r?Object.assign(n,lt({},c,{items:n.items.concat(c.items)})):n.action_type="",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n.action_type="";case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),function(){return t.apply(this,arguments)}),fake_pagination_handle:function(){e.fakePaginationHandler()},corner_button_title:n.more_title,corner_button_deep_link:n.more_deep_link}:{title:n.title,sub_title:n.sub_title,more_title:n.more_title,more_deep_link:n.more_deep_link,corner_button_title:n.corner_button_title,corner_button_deep_link:n.corner_button_deep_link,more_spm_module:this.formatSPM("ViewAllBtn",{trg:"manual"})}}return{}}}]),e}(m.Vue);ut([Object(m.Prop)({type:String,default:"desktop"})],pt.prototype,"platform",void 0),ut([Object(m.Prop)({type:Object,default:function(){return{}}})],pt.prototype,"moduleData",void 0),ut([Object(m.Prop)({type:Object,required:!0,default:function(){return{}}})],pt.prototype,"ihtData",void 0),ut([Object(m.Prop)()],pt.prototype,"hideSection",void 0),ut([Object(m.Prop)({type:Object,default:function(){return{}}})],pt.prototype,"extraData",void 0);pt=ut([m.Component],pt),n(28),n(70);var vt,ft;vt="".concat(+new Date),ft=0;function ht(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(t instanceof NodeList)return Array.from(t);if(t instanceof HTMLElement)return[t];if(e=t,String(e)===e)return Array.from(n.querySelectorAll(t));throw new Error("请传入一个正确的选择器")}function gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"addEventListener";t.forEach((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,o=t.eventName,r=t.handler,c=t.useCapture,l=void 0!==c&&c;Array.isArray(o)?o.forEach((function(t){n[e](t,r,l)})):n[e](o,r,l)}))}n(72);var bt=function(element,t){try{var e=document.defaultView.getComputedStyle(element,"");return element.style[t]||e?e[t]:null}catch(e){return element.style[t]}},yt=function(t,e){return bt(t,null!==e||void 0!==e?e?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)},mt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.html,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"offsetTop",o=0;null!==t&&t!==e;)o+=t[n],t=t.offsetParent;return o},kt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.html;return mt(t,e,"offsetLeft")},Ot=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.html;return mt(t,e)};var _t=function(t){return t.scrollTop||window.pageYOffset||document.documentElement.scrollTop},jt=function(t,e){var n=e>0?e:0;t===window?(document.documentElement.scrollTop=n,document.body.scrollTop=n):t.scrollTop=n},wt=function(t){return Math.pow(t,3)},Pt=function(t){return t<.5?wt(2*t)/2:1-wt(2*(1-t))/2};function Ct(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var St=function(){function t(e){var n,o=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,t),this.shouldObserveOnScroll=!0,this.navContainerDom=null,this.navWrapperDom=null,this.sectionScrollDom=null,this.itemSectionList=[],this.curItemData=null,this.events=[],this.scrollTimer=null,this.cancelAniScroll=function(){};var d={horizontalNav:!0,navItemClassName:"js_navItem",getSectionSelector:function(t){return t.getAttribute("href")},currentClass:"current",offset:80,scrollDuration:500,onNavChange:null,onScrollStart:null,onClickNav:null,onScrollEnd:null,scrollToNav:function(t){n&&(cancelAnimationFrame(n),clearTimeout(n),n=null);var e=Date.now(),r=o.navContainerDom.scrollLeft,c=t-r,l=window.requestAnimationFrame||function(t){return setTimeout(t,16)};l((function d(){var progress=(Date.now()-e)/300;progress<1?(o.navContainerDom.scrollLeft=r+c*progress,n=l(d)):o.navContainerDom.scrollLeft=t}))}};this.options=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ct(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ct(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},d,{},r),this.navContainerDom=ht(e)[0],this.navWrapperDom=this.navContainerDom.firstElementChild,this.init()}return Object(d.a)(t,[{key:"callHook",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var c=this.options[t];c&&(e?setTimeout((function(){c.apply(void 0,o)})):c.apply(void 0,o))}},{key:"init",value:function(){this.resolveData(),this.initEvent(),this.scrollEvent()}},{key:"resolveData",value:function(){var t=this;this.navWrapperDom.classList.add("klook-nav-wrapper"),this.options.horizontalNav&&this.navContainerDom.classList.add("klook-horizontal-nav");var e=ht(".".concat(this.options.navItemClassName));this.itemSectionList=e.map((function(e,n){return{index:n,navItem:e,sectionItem:ht(t.options.getSectionSelector(e))[0]}}));try{this.sectionScrollDom=function(t,e){for(var n=t;n;){if([window,document,document.documentElement].includes(n))return window;if(yt(n,e))return n;n=n.parentNode}return n}(this.itemSectionList[0].sectionItem)}catch(t){throw new Error("获取不到navItems元素 或者 section 元素")}}},{key:"getCurrentItem",value:function(){var t=_t(this.sectionScrollDom);this.callHook("onScroll",!0,t);for(var i=this.itemSectionList.length-1;i>=0;i-=1){var e=Ot(this.itemSectionList[i].sectionItem,this.sectionScrollDom);if(0===i&&this.callHook("updateFirstItemTop",!1,e),e<=t+this.options.offset)return this.itemSectionList[i]}return this.itemSectionList[0]}},{key:"scrollEvent",value:function(){var t=this.getCurrentItem();t!==this.curItemData&&this.setCurrentNav(t)}},{key:"setCurrentNav",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.curItemData=t;var n=this.navContainerDom.clientWidth,o=this.navWrapperDom.clientWidth;if(o>n){var r=this.curItemData.navItem,c=kt(r,this.navContainerDom)+(r.offsetWidth/2-n/2);c=c>0?c>o-n?o-n:c:0,this.options.scrollToNav(c)}e||this.callHook("onNavChange",!0,this.curItemData)}},{key:"navSelect",value:function(t){var e=this;if(t!==(this.curItemData||{}).navItem){this.callHook("onClickNav",!0,t);var n=this.itemSectionList.find((function(e){return e.navItem===t}));this.setCurrentNav(n),this.shouldObserveOnScroll?this.callHook("onScrollStart"):(clearTimeout(this.scrollTimer),this.cancelAniScroll(),this.scrollTimer=null),this.shouldObserveOnScroll=!1;var o=Ot(n.sectionItem,this.sectionScrollDom)-this.options.offset;this.cancelAniScroll=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,o=arguments.length>3?arguments[3]:void 0,r=Date.now(),c=_t(t),l=e-c,d=window.requestAnimationFrame||function(t){return setTimeout(t,16)},v=null,f=function f(){var progress=(Date.now()-r)/n;progress<1?(jt(t,c+l*Pt(progress)),v=d(f)):(jt(t,e),o&&o())};return d(f),function(){return(cancelAnimationFrame||clearTimeout)(v)}}(this.sectionScrollDom,o,this.options.scrollDuration,(function(){e.scrollTimer=setTimeout((function(){e.shouldObserveOnScroll=!0,e.callHook("onScrollEnd")}),60)}))}}},{key:"initEvent",value:function(){var t,e,n,o,r,c,l,d,v,f,h=this,y=(t=this.scrollEvent.bind(this),e=200,l=null,d=0,v=Object.assign({},n),f=function(){d=!1===v.leading?0:Date.now(),l=null,c=t.apply(o,r),l||(o=null,r=null)},function(){var n=Date.now();d||!1!==v.leading||(d=n);var h=e-(n-d);o=this;for(var y=arguments.length,m=new Array(y),k=0;k<y;k++)m[k]=arguments[k];return r=m,h<=0||h>e?(l&&(clearTimeout(l),l=null),d=n,c=t.apply(o,r),l||(o=null,r=null)):l||(l=setTimeout(f,h)),c});this.events.push({target:this.sectionScrollDom,eventName:"scroll",handler:function(){h.shouldObserveOnScroll&&y()}}),this.events.push({target:window,eventName:"resize",handler:function(){h.setCurrentNav(h.curItemData,!0)}}),this.events.push({target:this.navContainerDom,eventName:"click",handler:function(t){t.preventDefault();var e=function(t,e,n){for(;e;){if(n(e))return e;if(e===t||e.parentNode===t)break;e=e.parentNode}return null}(t.currentTarget,t.target,(function(t){return t.className&&~t.className.indexOf(h.options.navItemClassName.replace(".",""))}));e&&h.navSelect(e)}}),gt(this.events)}},{key:"destroy",value:function(){gt(this.events,"removeEventListener"),this.navContainerDom=null,this.navWrapperDom=null,this.sectionScrollDom=null,this.itemSectionList.length=0,this.curItemData=null,this.events.length=0}}]),t}();function Dt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var xt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Tt=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).defaultVisible=!1,t.currentIndex=0,t.$swiper=null,t.firstItemVisiblePosition=0,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"mounted",value:function(){var t=this;if(this.navItems.length){var nav=new St(this.$el,function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Dt(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Dt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({offset:this.offset,onNavChange:function(e){var n=e.index;t.currentIndex=n},scrollToNav:function(e){t.$swiper&&(t.$swiper.setTransition(350),t.$swiper.setTranslate(0-e))}},this.visiblePosition>0||this.visibleByFirstItem?{onScroll:function(e){t.defaultVisible=e>(t.firstItemVisiblePosition||t.visiblePosition)}}:{},{},this.visibleByFirstItem?{updateFirstItemTop:function(e){t.firstItemVisiblePosition=e-t.offset}}:{}));this.$once("hook:beforeDestroy",(function(){nav.destroy()}))}}},{key:"swiperOption",get:function(){return{init:!0,slidesPerView:"auto",freeMode:!0,observer:!0,observeParents:!0}}},{key:"visible",get:function(){return!(this.visiblePosition>0||this.visibleByFirstItem)||this.defaultVisible}}]),e}(m.Vue);xt([Object(m.Prop)({type:Array,default:function(){return[]}})],Tt.prototype,"navItems",void 0),xt([Object(m.Prop)({type:String,default:"current"})],Tt.prototype,"currentClass",void 0),xt([Object(m.Prop)({type:Number,default:80})],Tt.prototype,"offset",void 0),xt([Object(m.Prop)({type:Number,default:0})],Tt.prototype,"visiblePosition",void 0),xt([Object(m.Prop)({type:Boolean,default:!1})],Tt.prototype,"visibleByFirstItem",void 0);var It=Tt=xt([m.Component],Tt);n(2143),Object(x.a)(It,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"swiper",rawName:"v-swiper:$swiper",value:t.swiperOption,expression:"swiperOption",arg:"$swiper"}],staticClass:"scroll-nav-wrapper swiper-container",class:{"scroll-nav-hidden":!t.visible}},[n("ul",{staticClass:"scroll-nav-list swiper-wrapper"},t._l(t.navItems,(function(e,o){var r;return n("li",{key:o,staticClass:"scroll-nav-item swiper-slide",attrs:{"data-spm-module":"Location::::SectionTab_LIST?&idx="+o+"&len="+t.navItems.length+"&ext="+encodeURIComponent(JSON.stringify({SectionName:e.name})),"data-spm-virtual-item":"__virtual"}},[n("a",{staticClass:"scroll-nav-link js_navItem",class:(r={},r[t.currentClass]=o===t.currentIndex,r),attrs:{href:e.id}},[t._v(t._s(e.text))])])})),0)])}),[],!1,null,"641a0996",null).exports;var Rt=n(1917),$t=n(1918);function Lt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function At(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Lt(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Lt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Mt=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).pkgOptionsList=["MobilePackage_options_spec_typeLoading","MobilePackage_options_spec_type_leftLoading","MobilePackage_options_wifi_spec_typeLoading"],t.mapLoadingData={PkgOptionsLoading:{styleType:"pkg-options-type"}},t.asyncNames=[],t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"getAsyncSourceList",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.asyncNames.length||(this.asyncNames=this.sourceName.filter((function(t){var e;return"async"===(null===(e=n.sources[t])||void 0===e?void 0:e.load_type)}))),t.next=3,Promise.all(this.asyncNames.map((function(t){return n.getAsyncSource(t,e)})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"change",value:function(data){var t,e;if(data&&"object"===Object(y.a)(data)){var n=Object.keys(data),source=this.sources,o=!0,r=!1,l=void 0;try{for(var d,v=this.sourceName[Symbol.iterator]();!(o=(d=v.next()).done);o=!0){var f=d.value,h=null===(e=null===(t=this.sources)||void 0===t?void 0:t[f])||void 0===e?void 0:e.data;if(h){var m=At({},h),k=!0,O=!1,_=void 0;try{for(var j,w=n[Symbol.iterator]();!(k=(j=w.next()).done);k=!0){var P=j.value;Object.keys(h).includes(P)&&(m[P]=data[P])}}catch(t){O=!0,_=t}finally{try{k||null==w.return||w.return()}finally{if(O)throw _}}source=At({},source,Object(c.a)({},f,At({},this.sources[f],{data:m})))}}}catch(t){r=!0,l=t}finally{try{o||null==v.return||v.return()}finally{if(r)throw l}}this.$emit("update",source)}}},{key:"handleHide",value:function(t){this.$emit("remove-section",t)}},{key:"mounted",value:function(){this.isCSR||this.getAsyncSourceList(),this.isNavigation&&this.$root.$emit("nav.addSection",{name:".".concat(this.metaName),title:this.navTitle})}},{key:"loadingWidth",get:function(){return"desktop"===this.platform?"790px":"100%"}},{key:"rootMargin",get:function(){return"desktop"===this.platform?"2000px":"400px"}},{key:"state",get:function(){var t;if(1!==this.sourceName.length)return"success";var source=this.sources[this.sourceName[0]];return"sync"===source.load_type?"success":null===(t=source.data)||void 0===t?void 0:t.state}},{key:"isCSR",get:function(){var t,e;return"client"===(null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.render_type)}},{key:"isDivider",get:function(){var t,e;return"divider"===(null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.type)}},{key:"wrapComp",get:function(){return this.isCSR&&!this.isDivider?"LazyComponent":"div"}},{key:"loadingComponent",get:function(){var t,e;if(!this.isCSR||this.isDivider)return"";var component=null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.component;if(!component)return"";var n=O()(component)+"Loading",o="desktop"===this.platform?"Desktop".concat(n):"Mobile".concat(n);return this.pkgOptionsList.includes(o)?"PkgOptionsLoading":m.Vue.component(o)?o:m.Vue.component(n)?n:"Loading"}},{key:"metaName",get:function(){var t,e;return null===(e=null===(t=this.section)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.name}},{key:"sourceName",get:function(){var t,e,n=this;return((null===(e=null===(t=this.section)||void 0===t?void 0:t.source)||void 0===e?void 0:e.name)||[]).filter((function(t){return n.sources[t]}))}},{key:"mergedSourceData",get:function(){var t=this;return this.sourceName.reduce((function(e,n){var o;return At({},e,{},(null===(o=t.sources[n])||void 0===o?void 0:o.data)||{})}),{})}},{key:"isNavigation",get:function(){var t,e;return null===(e=null===(t=this.section)||void 0===t?void 0:t.attr)||void 0===e?void 0:e.is_navigation}},{key:"navTitle",get:function(){var t,e,n=this.section.attr;return(null===(t=n)||void 0===t?void 0:t.is_navigation)?null===(e=n)||void 0===e?void 0:e.nav_title:""}},{key:"spmName",get:function(){var t,e=null===(t=this.track)||void 0===t?void 0:t.name;if(e){var n=this.section.meta,o=n.type,component=n.component;return"".concat(e,":").concat(o,"::").concat(component)}}},{key:"track",get:function(){return this.section.meta.track}},{key:"sectionData",get:function(){var t,e,n,o,r,c,l,section=this.section,meta=section.meta,d=section.attr,v=section.fields;return{fields:v=v||[],meta:{name:meta.name,type:meta.type,placeholder:meta.placeholder,component:meta.component,track:meta.track},data:{bottom_button_deep_link:null===(t=d)||void 0===t?void 0:t.bottom_button_link,bottom_button_title:null===(e=d)||void 0===e?void 0:e.bottom_button_title,is_navigation:null===(n=d)||void 0===n?void 0:n.is_navigation,more_deep_link:null===(o=d)||void 0===o?void 0:o.explore_link,more_title:null===(r=d)||void 0===r?void 0:r.explore,sub_title:null===(c=d)||void 0===c?void 0:c.sub_title,title:null===(l=d)||void 0===l?void 0:l.title},attr:d,body:{content:{data_type:meta.component,handler:"",load_type:"sync",data:this.mergedSourceData||{}}}}}}]),e}(m.Vue);Et([Object(m.Prop)()],Mt.prototype,"sources",void 0),Et([Object(m.Prop)()],Mt.prototype,"section",void 0),Et([Object(m.State)((function(t){return t.klook.platform}))],Mt.prototype,"platform",void 0),Et([Object(m.Prop)()],Mt.prototype,"getAsyncSource",void 0);var Bt=Mt=Et([Object(m.Component)({components:{PkgOptionsLoading:$t.default,ExperienceSection:section,LazyComponent:V,Loading:Rt.default}})],Mt),Nt=Object(x.a)(Bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.wrapComp,t._b({tag:"component"},"component",{beforeLoad:t.getAsyncSourceList,rootMargin:t.rootMargin},!1),[n("ExperienceSection",t._g(t._b({directives:[{name:"track",rawName:"v-track:provide:section",value:t.spmName?Object.assign({},t.track||{},{name:t.spmName}):null,expression:"spmName ? {\n      ...(track || {}),\n      name: spmName\n    } : null",arg:"provide:section"}],class:["experiences-activity-dto",t.metaName],attrs:{"data-navigation-title":t.navTitle,section:t.sectionData,state:t.state},on:{change:t.change,refresh:t.getAsyncSourceList,hide:t.handleHide}},"ExperienceSection",t.$attrs,!1),t.$listeners)),t._v(" "),n(t.loadingComponent,t._b({tag:"component",attrs:{slot:"skeleton","loading-width":t.loadingWidth},slot:"skeleton"},"component",t.mapLoadingData[t.loadingComponent]||{},!1))],1)}),[],!1,null,null,null).exports,Vt=n(16),Ft=n(1919),Wt=n(1920);function Ht(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Ut(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ht(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ht(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var zt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Gt=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).sourcesData=t.sources,t.sectionsData=t.handleSections(t.sections),t.sourcesLoadingMap=new Map,t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"handleSections",value:function(t){var e,n,o=[],r=!1,c=0,l=!0,d=!1,v=void 0;try{for(var f,h=t[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var section=f.value,y="divider"===(null===(n=null===(e=section)||void 0===e?void 0:e.meta)||void 0===n?void 0:n.type);r&&y||(r=y,o.push(Ut({},section,{uid:c})),c+=1)}}catch(t){d=!0,v=t}finally{try{l||null==h.return||h.return()}finally{if(d)throw v}}return o}},{key:"update",value:function(data){this.sourcesData=Ut({},this.sourcesData,{},data)}},{key:"updateSource",value:function(t,data,e){var source=this.sourcesData[t],n=Ut({},source.data||{},{state:"loading"});this.update(Object(c.a)({},t,Ut({},source,{is_fetching:e,data:Ut({},n,{},data)})))}},{key:"createUpdateSourcePromise",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,source,r,c,l,d,v,f,h,y=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=y.length>1&&void 0!==y[1]?y[1]:{},source=this.sourcesData[e],r=source.load_url,t.next=5,Object(Vt.f)(this.$axios.$get(r,{params:Ut({},n,{preview:this.preview})}));case 5:if(c=t.sent,l=Object(o.a)(c,2),d=l[0],v=l[1],!d){t.next=12;break}return this.updateSource(e,{state:"failure"}),t.abrupt("return",!1);case 12:if(f=v.success,h=v.result,f){t.next=16;break}return this.updateSource(e,{state:"failure"}),t.abrupt("return",!1);case 16:return this.updateSource(e,Ut({state:"success"},h||{})),t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getAsyncSource",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},source=this.sourcesData[t],n=source.is_fetching;if(n)return this.sourcesLoadingMap.get(t);this.updateSource(t,{},!0);var o=this.createUpdateSourcePromise(t,e);return this.sourcesLoadingMap.set(t,o),o}},{key:"removeSection",value:function(t){var e,n,o=this.sectionsData.findIndex((function(e){var n;return(null===(n=e.meta)||void 0===n?void 0:n.name)===t}));if(!(o<1)){var r=o+1;"divider"===(null===(n=null===(e=this.sectionsData[r])||void 0===e?void 0:e.meta)||void 0===n?void 0:n.type)?this.sectionsData.splice(o,2):this.sectionsData.splice(o,1),this.$root&&this.$root.$emit("nav.delSection",".".concat(t))}}},{key:"navComponent",get:function(){return"desktop"===this.platform?"ActivityNavDesktop":"ActivityNavMobile"}}]),e}(m.Vue);zt([Object(m.Prop)()],Gt.prototype,"sources",void 0),zt([Object(m.Prop)()],Gt.prototype,"sections",void 0),zt([Object(m.Prop)()],Gt.prototype,"preview",void 0),zt([Object(m.Prop)({default:!1})],Gt.prototype,"hideNav",void 0),zt([Object(m.State)((function(t){return t.klook.platform}))],Gt.prototype,"platform",void 0);var qt=Gt=zt([Object(m.Component)({components:{SectionDTO:Nt,ActivityNavMobile:Ft.default,ActivityNavDesktop:Wt.default}})],Gt),Yt=Object(x.a)(qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-section-list"},[t.hideNav?t._e():n(t.navComponent,t._b({tag:"component",attrs:{sections:t.sectionsData}},"component",t.$attrs,!1)),t._v(" "),t._l(t.sectionsData,(function(section){return n("SectionDTO",t._g(t._b({key:section.uid,staticClass:"experience-section-item",class:section.meta.name,attrs:{id:section.meta.name,sources:t.sourcesData,section:section,preview:t.preview,"data-mate-name":section.meta.name,"get-async-source":t.getAsyncSource},on:{update:t.update,"remove-section":t.removeSection,"get-async-source":t.getAsyncSource}},"SectionDTO",t.$attrs,!1),t.$listeners))}))],2)}),[],!1,null,null,null);e.a=Yt.exports},,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1426),m=n(1921),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).showMore=!1,t.visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"openDrawer",value:function(){this.visible=!0}},{key:"checkHeight",value:function(){this.$el&&this.$el.scrollHeight>=this.foldHeight&&(this.showMore=!0)}},{key:"mounted",value:function(){setTimeout(this.checkHeight,50)}},{key:"foldHeight",get:function(){return this.foldMinHeight?parseInt(this.foldMinHeight):"desktop"===this.platform?1200:800}},{key:"drawerComponent",get:function(){return"desktop"===this.platform?"DynamicDrawer":"klk-bottom-sheet"}}]),e}(f.Vue);k([Object(f.State)((function(t){return t.klook.platform}))],O.prototype,"platform",void 0),k([Object(f.Prop)()],O.prototype,"components",void 0),k([Object(f.Prop)()],O.prototype,"foldMinHeight",void 0),k([Object(f.Prop)()],O.prototype,"title",void 0);var _=O=k([Object(f.Component)({components:{DynamicComponent:y.a,DynamicDrawer:m.default}})],O),j=(n(2160),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"dynamic-component-can-fold",class:[t.platform]},[n("DynamicComponent",{staticClass:"dynamic-component-can-fold-content",style:{"max-height":t.foldHeight+"px"},attrs:{components:t.components}}),t._v(" "),n("div",{staticClass:"dynamic-component-can-fold-more",class:{show:t.showMore}},["desktop"===t.platform?n("span",{staticClass:"more-btn",attrs:{"data-spm-item":"ReadMore"},on:{click:function(e){return t.openDrawer()}}},[t._v("\n      "+t._s(t.$t("city_page_view_more"))+"\n      "),n("SvgIcon",{staticClass:"more-btn-icon",staticStyle:{"margin-left":"4px"},attrs:{name:"desktop-common#arrow-standard-right-new",size:"14"}})],1):"mobile"===t.platform?n("klk-button",{staticClass:"more-btn",attrs:{block:"",type:"outlined",size:"small","data-spm-item":"ReadMore"},on:{click:function(e){return t.openDrawer()}}},[t._v("\n      "+t._s(t.$t("city_page_view_more"))+"\n    ")]):t._e()],1),t._v(" "),n(t.drawerComponent,{tag:"component",staticClass:"dynamic-component-can-fold-drawer",class:[t.platform],attrs:{visible:t.visible,title:t.title,"show-close":"",transfer:"","drawer-width":"680px"},on:{"update:visible":function(e){t.visible=e}}},[n("DynamicComponent",{attrs:{components:t.components}})],1)],1)}),[],!1,null,"b210513e",null).exports,P=n(1910),C=n(1922),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activityId",get:function(){return this.basicData.activity_id}},{key:"title",get:function(){var t,e,n,o,r="";r=(null===(t=this.businessData)||void 0===t?void 0:t.title)?null===(e=this.businessData)||void 0===e?void 0:e.title:null===(o=null===(n=this.sectionData)||void 0===n?void 0:n.data)||void 0===o?void 0:o.title;var title=[].concat(r);return this.$t.apply(this,title)}},{key:"shouldFold",get:function(){return this.fieldsConfig2section.fold_switch||!1}},{key:"foldMinHeight",get:function(){return this.fieldsConfig2section.fold_min_height||""}},{key:"showStyleVersion",get:function(){return this.fieldsConfig2section.show_style_version||0}},{key:"isHeroPage",get:function(){return!!this.fieldsConfig2section.is_hero_page}},{key:"componentName",get:function(){return this.isHeroPage?C.default:1===this.showStyleVersion?P.default:this.shouldFold?w:y.a}},{key:"components",get:function(){return this.businessData.components}}]),e}(h.a);D.displayName="Dynamic_component",S([Object(f.Prop)()],D.prototype,"basicData",void 0);var x=D=S([Object(f.Component)({components:{DynamicComponent:y.a,DynamicComponentCanFold:w,DynamicComponentTa:P.default,DynamicComponentHero:C.default}})],D),T=Object(j.a)(x,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentName,{tag:"component",attrs:{components:this.components,"fold-min-height":this.foldMinHeight,title:this.title,"activity-id":this.activityId}})}),[],!1,null,null,null);e.default=T.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1928),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(f.Vue);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)()],k.prototype,"height",void 0),m([Object(f.Prop)()],k.prototype,"subtitle",void 0);var O=k=m([Object(f.Component)({components:{ActivityViewMore:y.a}})],k),_=(n(2174),n(43)),j=Object(_.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("ActivityViewMore",{staticClass:"activity-subtitle",attrs:{height:this.height}},[e("div",{staticClass:"content",class:"sub-title_"+this.klook.platform},[this._v("\n    "+this._s(this.subtitle)+"\n  ")])])}),[],!1,null,"29fe3a4e",null).exports,w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"iconVisible",get:function(){return!1}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||null}},{key:"isHeroPage",get:function(){var t,e;return"hero_page"===(null!=(e=null===(t=this.basicData)||void 0===t?void 0:t.act_product_type)?e:"")}},{key:"titleStyle",get:function(){return{}}},{key:"cClass",get:function(){return"activity-experience-title_".concat(this.klook.platform)}},{key:"subtitleHeight",get:function(){return this.isDesktop?80:160}}]),e}(h.a);P.displayName="Activity_title",w([f.State],P.prototype,"klook",void 0);var C=P=w([Object(f.Component)({components:{ActivitySubtitle:j}})],P),S=(n(2175),Object(_.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["activity-experience-title",t.cClass]},[n("h1",{staticClass:"activity-head-info_title j-activity-head-info_title"},[t.iconVisible?n("img",{staticClass:"vam activity-head-info_icon",attrs:{src:t.businessData.icon,alt:"title-icon"}}):t._e(),t._v(" "),n("span",{staticClass:"vam",class:{"hero-page":t.isHeroPage},style:t.titleStyle},[t._v("\n      "+t._s(t.businessData.title)+"\n    ")])]),t._v(" "),t.businessData.subtitle?n("ActivitySubtitle",{staticClass:"activity-experience-title_subtitle",attrs:{height:t.subtitleHeight,subtitle:t.businessData.subtitle}}):t._e()],1)}),[],!1,null,"552aec55",null));e.default=S.exports},,function(t,e,n){"use strict";n.r(e);var o=n(1203),r=n.n(o),c=(n(20),n(27),n(37),n(28),n(31)),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(79),k=n.n(m),O=n(880),content=n(1461),_=n(1863),j=n(881),w=n(884),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).styles={height:"123px"},t.bsObj={height:"auto",visible:!1,"show-close":!0},t.mapVm=null,t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"bindIHTrack",value:function(){return j.a.apply(void 0,arguments)}},{key:"visibleWatch",value:function(t){var e;!t&&(null===(e=this.mapVm)||void 0===e?void 0:e.hideMap)&&this.mapVm.hideMap(),t&&this.setStyles()}},{key:"setStyles",value:function(){var t=this;"mobile"===this.platform&&this.$nextTick((function(){var e=t.imgRef?t.imgRef.offsetWidth:0,n="".concat(e/335*120,"px");t.styles.height=n}))}},{key:"getImageUrl",value:function(t){var e="mobile"===this.platform?"upload/c_crop,q_80,w_776,h_560":"upload/c_crop,q_80,w_1580,h_632";return t.replace(/upload/,e)}},{key:"gShowChange",value:function(t){t||this.hideSection()}},{key:"getComponentName",value:function(t){return{icon:"DynamicIcons",markdown:"DynamicMarkdown",address:"DynamicMap",image:"DynamicImage"}[t]||""}},{key:"clickLinkMapImg",value:function(){var t,e,n,o=this.compMapImgRef;(null===(n=null===(e=null===(t=o)||void 0===t?void 0:t.$refs)||void 0===e?void 0:e.dynamicMapWrap)||void 0===n?void 0:n.showMap)&&o.$refs.dynamicMapWrap.showMap(this.addressObj)}},{key:"handleClickEvent",value:function(){var t=this.klookInsiderVisible,e=this.reopenVisible,n=this.addressVisible;t||e||!n?this.bsObj.visible=!0:this.clickLinkMapImg()}},{key:"calcTrack",get:function(){var t=(this.$route.params.activityPath||"").split("-")[0];return{type:"module",spm:"Mini_Info_Section",query:{oid:"activity_".concat(t)}}}},{key:"logoWidth",get:function(){return 3*(document.documentElement.clientWidth-40)/16}},{key:"platform",get:function(){return this.klook.platform}},{key:"gShow",get:function(){var t=this.klookInsiderVisible,e=this.reopenVisible,n=this.addressVisible;return!!(t||e||n)}},{key:"klookInsiderVisible",get:function(){var t,e;return(null===(t=this.fieldsConfig2section)||void 0===t?void 0:t.klook_insider)&&(null===(e=this.klookInsider)||void 0===e?void 0:e.klook_insider)}},{key:"reopenVisible",get:function(){var t,e;return(null===(t=this.fieldsConfig2section)||void 0===t?void 0:t.reopen)&&[2,3].includes(null===(e=this.reopen)||void 0===e?void 0:e.tag)}},{key:"addressVisible",get:function(){var t,e;return(null===(t=this.fieldsConfig2section)||void 0===t?void 0:t.address_image)&&(null===(e=this.addressObj)||void 0===e?void 0:e.address_desc)}},{key:"addressContent",get:function(){var t=this.addressImage;return k()(t,"components.0")}},{key:"addressObj",get:function(){var t=this.addressImage;return k()(t,"components.0.data.0",{})}},{key:"klookInsider",get:function(){var t=this.businessData.klook_insider;return{klook_insider:void 0===t?"":t}}},{key:"reopen",get:function(){return this.businessData}},{key:"addressImage",get:function(){return this.businessData}}]),e}(O.a);C.displayName="MobileActivity_mini_info",P([y.State],C.prototype,"klook",void 0),P([Object(y.Ref)()],C.prototype,"imgRef",void 0),P([Object(y.Ref)()],C.prototype,"compMapImgRef",void 0),P([Object(y.Watch)("bsObj.visible")],C.prototype,"visibleWatch",null),P([Object(y.Watch)("gShow",{immediate:!0})],C.prototype,"gShowChange",null);var S=C=P([Object(y.Component)({components:{reopenContent:content.a,DynamicImageMap:_.a,Logo:w.a,IconNext:r.a}})],C),D=(n(2164),n(43)),component=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.gShow?n("div",{staticClass:"mini-info"},[n("div",t._b({staticClass:"mini-info-box",on:{click:function(e){return e.stopPropagation(),t.handleClickEvent(e)}}},"div",t.bindIHTrack(t.calcTrack),!1),[n("div",{staticClass:"mini-info-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.klookInsiderVisible,expression:"klookInsiderVisible"}],staticClass:"line-box"},[n("div",{staticClass:"line-box__left_wrap"},[n("span",{staticClass:"line-box__icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_other_notify_fill_xs"}})],1),t._v(" "),n("span",{staticClass:"line-box__text"},[t._v(t._s(t.klookInsider.klook_insider))])]),t._v(" "),n("div",{staticClass:"line-box__right_wrap"},[n("span",{staticClass:"arrow-icon"},[n("IconNext",{attrs:{theme:"outline",size:"16",fill:[t.$tokensObj["$color-text-primary"]]}})],1)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.reopenVisible,expression:"reopenVisible"}],staticClass:"line-box"},[n("div",{staticClass:"line-box__left_wrap"},[n("span",{staticClass:"line-box__icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_time_time_fill_xs"}})],1),t._v(" "),n("span",{staticClass:"line-box__text"},[n("reopenContent",{attrs:{reopen:t.reopen}})],1)]),t._v(" "),n("div",{staticClass:"line-box__right_wrap"},[n("span",{staticClass:"arrow-icon"},[n("IconNext",{attrs:{theme:"outline",size:"16",fill:[t.$tokensObj["$color-text-primary"]]}})],1)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.addressVisible,expression:"addressVisible"}],staticClass:"line-box"},[n("div",{staticClass:"line-box__left_wrap"},[n("span",{staticClass:"line-box__icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_travel_location_fill_xs"}})],1),t._v(" "),n("span",{staticClass:"line-box__text"},[t._v(t._s(t.addressObj.address_desc))])]),t._v(" "),n("div",{staticClass:"line-box__right_wrap"},[n("span",{staticClass:"arrow-icon"},[n("IconNext",{attrs:{theme:"outline",size:"16",fill:[t.$tokensObj["$color-text-primary"]]}})],1)])])])]),t._v(" "),n("DynamicImageMap",{ref:"compMapImgRef",staticClass:"hide-act-map",attrs:{content:t.addressContent}}),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"bottom-sheet-style",attrs:{visible:t.bsObj.visible},on:{"update:visible":function(e){return t.$set(t.bsObj,"visible",e)}}},"klk-bottom-sheet",t.bsObj,!1),[n("div",{staticClass:"content-wrap"},[t.klookInsiderVisible?n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-box__title"},[t._v("\n          "+t._s(t.$t("76261"))+"\n        ")]),t._v(" "),n("div",{staticClass:"content-box__desc"},[t._v(t._s(t.klookInsider.klook_insider))])]):t._e(),t._v(" "),t.reopenVisible?n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-box__title"},[t._v("\n          "+t._s(t.$t("76262"))+"\n        ")]),t._v(" "),n("div",{staticClass:"content-box__desc"},[n("reopenContent",{attrs:{reopen:t.reopen}})],1)]):t._e(),t._v(" "),t.addressVisible?n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-box__title"},[t._v("\n          "+t._s(t.$t("activity.detail.location.map"))+"\n        ")]),t._v(" "),n("div",{staticClass:"content-box__desc"},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.getImageUrl(t.addressObj.image_url),expression:"getImageUrl(addressObj.image_url)",arg:"background-image"}],ref:"imgRef",staticClass:"activity-map-img",style:t.styles,attrs:{ratio:"16:9"},on:{click:t.clickLinkMapImg}},[n("Logo",{attrs:{ratio:"16:9",width:t.logoWidth}})],1),t._v(" "),n("div",{staticClass:"content-box__txt"},[t._v(t._s(t.addressObj.address_desc))])])]):t._e()])])],1):t._e()}),[],!1,null,"b6e3b8f4",null);e.default=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)()],h.prototype,"content",void 0);var y=h=f([v.Component],h),m=(n(2119),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activity-faq-item"},[e("span",{staticClass:"activity-faq-item_content"},[this._v(this._s(this.content))]),this._v(" "),e("SvgIcon",{staticClass:"faq-item_icon",attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",width:"18",height:"18",color:"#4A4A4A"}})],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.State)((function(t){return t.klook.platform}))],h.prototype,"platform",void 0);var y=h=f([v.Component],h),m=(n(2124),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("klk-button",{staticClass:"activity-contact__button",attrs:{type:"secondary",block:"mobile"===this.platform,"data-spm-item":"__default"}},[e("SvgIcon",{staticClass:"activity-chat_icon",staticStyle:{"min-width":"24px"},attrs:{name:"common#icon_service_chat_fill_m",width:"24",height:"24",color:"primary-500"}}),this._v(" "),e("span",{staticClass:"btn-text"},[this._v(this._s(this.$t("5110-chat_with_us")))])],1)}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(887),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).promoTagText="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onPromoTagChange",value:function(t){var e,n,o;if(t){var r=null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time;if(r){var c=Object(h.c)(r);c&&(this.promoTagText=t.text),this.promoTagText=c?t.text:""}else this.promoTagText=t.text}else this.promoTagText=""}},{key:"handleDiscountChange",value:function(){this.setTextMinWidth()}},{key:"setTextMinWidth",value:function(){var t=this;if(this.$isServer)return null;this.$nextTick((function(){t.checkLayout()})),setTimeout((function(){t.checkLayout()}),1e3)}},{key:"checkLayout",value:function(){var t=this.$refs.text,e=this.$refs.discount;if(t&&e){var n=e.scrollWidth||0;n&&n>24&&(t.style.minWidth="".concat(n-24,"px"))}}},{key:"setPromoTagWidth",value:function(){var t=this.$refs.box,e=this.$refs.promoTag;t&&e&&(e.scrollWidth>200?e.style.width=t.scrollWidth>200?"200px":"100%":e.style.width=t.scrollWidth>e.scrollWidth?"auto":"100%")}}]),e}(f.Vue);y([Object(f.Prop)()],m.prototype,"openDateTip",void 0),y([Object(f.Prop)()],m.prototype,"content",void 0),y([Object(f.Prop)({type:String,default:""})],m.prototype,"icon",void 0),y([Object(f.Prop)({type:Number,default:16})],m.prototype,"iconSize",void 0),y([Object(f.Prop)()],m.prototype,"disabled",void 0),y([Object(f.Prop)()],m.prototype,"active",void 0),y([Object(f.Prop)()],m.prototype,"discount",void 0),y([Object(f.Prop)()],m.prototype,"promoTag",void 0),y([Object(f.Prop)()],m.prototype,"priceText",void 0),y([Object(f.Watch)("promoTag",{immediate:!0})],m.prototype,"onPromoTagChange",null),y([Object(f.Watch)("discount")],m.prototype,"handleDiscountChange",null);var k=m=y([f.Component],m),O=(n(2127),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"box",class:["attr-btn",{disabled:t.disabled,active:t.active,"has-promo-tag":!!t.promoTagText}],attrs:{"data-spm-item":"TicketType?trg=manual&ext="+JSON.stringify({PromoTag:t.discount>0})}},[n("klk-button",t._b({ref:"text",staticClass:"attr-btn_text",class:[t.active&&"attr-btn_active",t.disabled&&"attr-btn_disabled"]},"klk-button",{disabled:t.disabled,type:t.active?"secondary":"outlined",size:"small"},!1),[n("span",{staticClass:"flex-box"},[t.icon?n("span",{staticClass:"attr-btn_icon"},[n("SvgIcon",{attrs:{name:t.icon,size:t.iconSize}})],1):t._e(),t._v(" "),n("span",{staticClass:"flex-style"},[t._t("default",[n("h3",{staticClass:"attr-btn_text_mweb"},[t._v(t._s(t.content))])]),t._v(" "),t.openDateTip?n("span",{staticClass:"open-date-text"},[t._v(t._s(t.openDateTip))]):t._e(),t._v(" "),t.priceText?n("span",{staticClass:"price-text-divider"}):t._e(),t._v(" "),t.priceText?n("span",{staticClass:"price-text",domProps:{innerHTML:t._s(t.priceText)}}):t._e()],2)])]),t._v(" "),t.promoTagText?n("span",{ref:"promoTag",staticClass:"attr-btn_promotag"},[t._v(t._s(t.promoTagText))]):t._e(),t._v(" "),t.promoTagText?n("span",{staticClass:"attr-btn_triangle"}):t._e()],1)}),[],!1,null,"025a3619",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){var t=this.$el;this.$emit("mounted",t.offsetHeight)}}]),e}(f.Vue);h([f.State],y.prototype,"klook",void 0),h([Object(f.Prop)({default:0})],y.prototype,"showGoSpec",void 0);var m=y=h([f.Component],y),k=(n(2129),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-detail-empty"},[n("SvgIcon",{attrs:{name:"mobile-activity#icon_empty_state",width:"183",height:"126"}}),t._v(" "),n("div",{staticClass:"package-detail-empty-tip"},[t._v(t._s(t.$t("13778")))]),t._v(" "),t.showGoSpec?n("klk-button",{staticClass:"package-detail-empty-spec-button",attrs:{type:"secondary","data-spm-module":"PackageDetail_GoBack","data-spm-virtual-item":"__virtual",size:"mobile"===t.klook.platform?"small":"normal"},on:{click:function(e){return t.$emit("goToSpec")}}},[t._v("\n    "+t._s(t.$t("83358"))+"\n  ")]):t._e()],1)}),[],!1,null,"250950cc",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visbileChange",value:function(t){t&&this.setBoxStyle()}},{key:"setBoxStyle",value:function(){return"mobile"===this.platform?{}:{right:document.querySelector(".layout-default_header_main").getBoundingClientRect().left+"px"}}}]),e}(f.Vue);h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0),h([Object(f.Prop)({default:"success"})],y.prototype,"type",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"closable",void 0),h([Object(f.Prop)({default:!1})],y.prototype,"visible",void 0),h([Object(f.Prop)({default:""})],y.prototype,"content",void 0),h([Object(f.Watch)("visible")],y.prototype,"visbileChange",null);var m=y=h([f.Component],y),k=(n(2137),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{class:["klk-alert-box",t.platform],style:t.setBoxStyle()},[n("transition",{attrs:{name:"slide-down"}},[n("klk-alert",{attrs:{type:t.type,closable:t.closable,"show-icon":""}},[t._v("\n      "+t._s(t.content||t.$t("471"))+"\n    ")])],1)],1):t._e()}),[],!1,null,"d3988914",null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){this.$emit("view-more")}}]),e}(f.Vue),m=y=h([f.Component],y),k=(n(2123),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activity-banner-view-more",attrs:{"data-spm-module":"BannerGallery","data-spm-virtual-item":"__virtual"},on:{click:this.handleClick}},[e("SvgIcon",{staticClass:"activity-banner-view-more_icon",attrs:{name:"mobile-activity#icon_medi_atlas"}}),this._v(" "),e("div",{staticClass:"activity-banner-view-more_count"},[this._v("\n    "+this._s(this.$t("activity_gallery"))+"\n  ")])],1)}),[],!1,null,"6c7f7d15",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(7),y=n.n(h),m=n(923),k=n(211),O=n(1027),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).selectedDate="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"valueChange",value:function(t){t!==this.selectedDate&&(this.slide(t,this.smooth),this.selectedDate=t)}},{key:"getDisplayDate",value:function(t,e){if(e<2){var n=y()().format("YYYY-MM-DD"),o=y()().add(1,"day").format("YYYY-MM-DD");if(t===n)return this.$t("today");if(t===o)return this.$t("search_tomorrow")}return Object(k.e)(t,this.$t.bind(this),this.klook.language,3)}},{key:"slide",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];setTimeout((function(){var o=e.getItem(t);o&&o.scrollIntoView({behavior:n?"smooth":"auto",inline:"center",block:"nearest"})}))}},{key:"formatDate",value:function(t){return Object(k.e)(t,this.$t.bind(this),this.klook.language,1)}},{key:"formatPrice",value:function(t){return"".concat(this.klook.currencySymbol," ").concat(t)}},{key:"change",value:function(t){if(t.soldout||t.disable)return null;var e=t.date;this.selectedDate=e,this.slide(e),this.$emit("change",e,t),this.$emit("input",e,t)}},{key:"getItem",value:function(t){var e;return null===(e=this.$el)||void 0===e?void 0:e.querySelector('[data-date="'.concat(t,'"]'))}},{key:"mounted",value:function(){var t=this,a=setTimeout((function(){t.slide(t.value,t.smooth),clearTimeout(a)}),500)}},{key:"isOverLimit",get:function(){var t;if(!this.value)return!1;var e=null===(t=this.schedules)||void 0===t?void 0:t.length;if(!e)return!1;var n=this.schedules[e-1].date;return new Date(this.value)>new Date(n)||void 0}}]),e}(f.Vue);_([f.State],j.prototype,"klook",void 0),_([Object(f.Prop)()],j.prototype,"schedules",void 0),_([Object(f.Prop)()],j.prototype,"value",void 0),_([Object(f.Prop)({default:!1})],j.prototype,"smooth",void 0),_([Object(f.Prop)({default:!0})],j.prototype,"priceVisible",void 0),_([Object(f.Watch)("value",{immediate:!0})],j.prototype,"valueChange",null);var w=j=_([Object(f.Component)({components:{CardSwiper:m.a,MiniDateButton:O.a}})],j),P=(n(2121),n(2122),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-mini-calendar"},[t._t("over",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOverLimit,expression:"isOverLimit"}],staticClass:"activity-calendar_extra-date"},[t._v("\n      "+t._s(t.$t("calendar.selected"))+": "+t._s(t.formatDate(t.value))+"\n    ")])]),t._v(" "),n("CardSwiper",{directives:[{name:"show",rawName:"v-show",value:!t.isOverLimit,expression:"!isOverLimit"}],staticClass:"mini-calendar"},t._l(t.schedules,(function(e,o){return n("div",{key:e.date,staticClass:"mini-calendar_item"},[n("MiniDateButton",{directives:[{name:"track",rawName:"v-track:module:SelectDate",value:{ext:{Date:e.date}},expression:"{\n          ext: {\n            Date: item.date\n          }\n        }",arg:"module:SelectDate"}],staticClass:"mini-calendar_item-btn j-mini-calendar_item",attrs:{"data-spm-virtual-item":"__virtual",disable:e.disable||e.soldout,active:e.date===t.value,"data-date":e.date},nativeOn:{click:function(n){return t.change(e)}}},[t._t("default",[n("div",{staticClass:"date"},[t._v(t._s(t.getDisplayDate(e.date,o)))]),t._v(" "),t.priceVisible?n("div",{staticClass:"normal-font"},[e.soldout?n("div",[t._v(t._s(t.$t("sold_out")))]):e.disable?n("div",[t._v(t._s(t.$t("19451")))]):n("div",[t._v(t._s(t.formatPrice(e.selling_price)))])]):t._e()])],2)],1)})),0)],2)}),[],!1,null,"158ee440",null);e.a=component.exports},function(t,e,n){"use strict";n(47);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleDiscountChange",value:function(){this.setTextMinWidth()}},{key:"setTextMinWidth",value:function(){var t=this;if(this.$isServer)return null;this.$nextTick((function(){t.checkLayout()})),setTimeout((function(){t.checkLayout()}),1e3)}},{key:"checkLayout",value:function(){var t=this.$refs.text,e=this.$refs.discount;if(t&&e){var n=e.scrollWidth||0;n&&n>24&&(t.style.minWidth="".concat(n-24,"px"))}}},{key:"mounted",value:function(){this.setTextMinWidth()}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"openDateTip",void 0),h([Object(f.Prop)()],y.prototype,"content",void 0),h([Object(f.Prop)({type:String,default:""})],y.prototype,"icon",void 0),h([Object(f.Prop)({type:Number,default:16})],y.prototype,"iconSize",void 0),h([Object(f.Prop)()],y.prototype,"disabled",void 0),h([Object(f.Prop)()],y.prototype,"active",void 0),h([Object(f.Prop)()],y.prototype,"discount",void 0),h([Object(f.Watch)("discount")],y.prototype,"handleDiscountChange",null);var m=y=h([f.Component],y),k=(n(2128),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["attr-btn",{disabled:t.disabled,active:t.active}],attrs:{"data-spm-item":"TicketType?trg=manual&ext="+JSON.stringify({PromoTag:t.discount>0})}},[n("klk-button",t._b({ref:"text",staticClass:"attr-btn_text",class:[t.active&&"attr-btn_active",t.disabled&&"attr-btn_disabled"]},"klk-button",{disabled:t.disabled,type:t.active?"secondary":"outlined",size:"small"},!1),[n("span",{staticClass:"flex-box"},[n("span",{staticClass:"flex-style"},[t._t("default",[n("span",[t._v(t._s(t.content))])]),t._v(" "),t.openDateTip?n("span",{staticClass:"open-date-text"},[t._v(t._s(t.openDateTip))]):t._e()],2),t._v(" "),t.icon?n("span",{staticClass:"attr-btn_icon"},[n("SvgIcon",{attrs:{name:t.icon,size:t.iconSize}})],1):t._e()])]),t._v(" "),t.discount>0?n("span",{ref:"discount",staticClass:"attr-btn_discount"},[t._v(t._s(t.$t("16576",[t.discount])))]):t._e(),t._v(" "),t.discount>0?n("span",{staticClass:"attr-btn_triangle"}):t._e()],1)}),[],!1,null,"4418057b",null);e.a=component.exports},function(t,e,n){"use strict";var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);f([Object(v.Prop)()],h.prototype,"content",void 0),f([Object(v.Prop)()],h.prototype,"visible",void 0);var y=h=f([v.Component],h),m=(n(2130),n(43)),component=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"activity-attr-tips"},[this._v("\n    "+this._s(this.content)+"\n  ")])])}),[],!1,null,null,null);e.a=component.exports},function(t,e,n){"use strict";n(30);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1036),y=n(1011),m=n(1459),k=n(883),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcTags2attribute",get:function(){var t;return(null===(t=this.packageDetail.product_tags)||void 0===t?void 0:t.attribute_tags)||[]}},{key:"specInfo",get:function(){var t,e,n=(null===(t=this.packageDetail)||void 0===t?void 0:t.spec)||[];return(null===(e=n)||void 0===e?void 0:e.length)?n.map((function(t){var e;return((null===(e=t)||void 0===e?void 0:e.attr)||[]).map((function(t){var e;return(null===(e=t)||void 0===e?void 0:e.name)||""}))})).flat():[]}},{key:"passStandardActivityInfo",get:function(){var t;return(null===(t=this.packageDetail)||void 0===t?void 0:t.passStandardActivityInfo)||{}}}]),e}(f.Vue);O([f.State],_.prototype,"klook",void 0),O([Object(f.Prop)()],_.prototype,"packageDetail",void 0),O([Object(f.Prop)({default:"slideDetail"})],_.prototype,"type",void 0),O([Object(f.Prop)({default:"normal"})],_.prototype,"attractionSize",void 0),O([Object(f.Prop)()],_.prototype,"size",void 0),O([Object(f.Prop)({default:!0})],_.prototype,"expandAll",void 0),O([Object(f.Prop)({default:!0})],_.prototype,"showPackageName",void 0),O([Object(f.Prop)({default:!1})],_.prototype,"simplifiedPickUp",void 0);var j=_=O([Object(f.Component)({components:{ExpTagging:k.default,ActivityValidity:y.a,PackageDetailCollapse:h.a,AttractionIncluded:m.default}})],_),w=(n(2171),n(2172),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-detail-content"},[t._t("title-slot",[n("div",{staticClass:"package-detail-title-desc"},[t.showPackageName?[0===t.specInfo.length?n("p",{staticClass:"activity-name"},[t._v("\n          "+t._s(t.packageDetail.packageName)+"\n        ")]):n("p",{staticClass:"package-name"},t._l(t.specInfo,(function(e,o){return n("span",{key:o},[n("span",{staticClass:"attr"},[t._v(t._s(e))])])})),0)]:t._e()],2)]),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",class:t.type,attrs:{list:t.calcTags2attribute,pkg:t.packageDetail,track:{spm:"Package_Product_Tag"}}}),t._v(" "),t.packageDetail.passStandardActivityInfo?n("AttractionIncluded",{class:t.type,attrs:{size:t.attractionSize,"activity-id":t.packageDetail.activityId,"package-id":t.packageDetail.packageId,info:t.packageDetail.passStandardActivityInfo}}):t._e(),t._v(" "),t.packageDetail.usageValidity&&t.packageDetail.usageValidity.length?n("ActivityValidity",t._b({staticClass:"activity-validity-style",class:t.type,attrs:{data:t.packageDetail.usageValidity}},"ActivityValidity",t.$attrs,!1)):t._e(),t._v(" "),t.packageDetail.useSection&&t.packageDetail.sectionContent?n("PackageDetailCollapse",{attrs:{type:t.type,sections:t.packageDetail.sectionContent.sections,size:t.size,"expand-all":t.expandAll,"simplified-pick-up":t.simplifiedPickUp},on:{pickUpClick:function(e){return t.$emit("pickUpClick")}}}):t._e()],2)}),[],!1,null,"d8961210",null);e.a=component.exports},function(t,e,n){"use strict";n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(13),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(10),k=n.n(m);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"activityIcons",get:function(){var t,e,n=this;return null===(e=(t=this.multiLanguageIcons).reduce)||void 0===e?void 0:e.call(t,(function(t,e){if("confirmation_type"===e.iconKey){if(n.isPresale)return t;if(n.instant)return[].concat(Object(r.a)(t),[_({},e,{iconKey:"fast"})])}return[].concat(Object(r.a)(t),[_({},e,{iconKey:e.iconKey})])}),[])}},{key:"visible",get:function(){return!k()(this.activityIcons)}}]),e}(y.Vue);j([Object(y.Prop)()],w.prototype,"multiLanguageIcons",void 0),j([Object(y.Prop)()],w.prototype,"instant",void 0),j([Object(y.Prop)()],w.prototype,"isPresale",void 0);var P=w=j([y.Component],w),C=n(43),component=Object(C.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("div",[this._t("default",null,{activityIcons:this.activityIcons})],2):this._e()}),[],!1,null,null,null);e.a=component.exports},,,,,function(t,e,n){var o=n(2809),r=n(2083),c=o?function(t){return o.get(t)}:r;t.exports=c},function(t,e,n){var o=n(2810),r=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=o[e],c=r.call(o,e)?n.length:0;c--;){var data=n[c],l=data.func;if(null==l||l==t)return data.name}return e}},,,,,,,,,function(t,e,n){"use strict";var o=n(1472);n.n(o).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1562);n.n(o).a},,,,,,,,,,,function(t,e,n){var o=n(286),r=n(2294);t.exports=function t(e,n,c,l,d){var v=-1,f=e.length;for(c||(c=r),d||(d=[]);++v<f;){var h=e[v];n>0&&c(h)?n>1?t(h,n-1,c,l,d):o(d,h):l||(d[d.length]=h)}return d}},function(t,e,n){var o=n(136),r=n(166),c=n(59),l=o?o.isConcatSpreadable:void 0;t.exports=function(t){return c(t)||r(t)||!!(l&&t&&t[l])}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1582);n.n(o).a},function(t,e,n){"use strict";var o=n(1583);n.n(o).a},function(t,e,n){"use strict";var o=n(1584);n.n(o).a},function(t,e,n){"use strict";var o=n(1585);n.n(o).a},function(t,e,n){"use strict";var o=n(1586);n.n(o).a},function(t,e,n){"use strict";var o=n(1587);n.n(o).a},function(t,e,n){"use strict";var o=n(1588);n.n(o).a},function(t,e,n){"use strict";var o=n(1589);n.n(o).a},function(t,e,n){"use strict";var o=n(1590);n.n(o).a},function(t,e,n){"use strict";var o=n(1591);n.n(o).a},function(t,e,n){"use strict";var o=n(1592);n.n(o).a},function(t,e,n){"use strict";var o=n(1593);n.n(o).a},function(t,e,n){"use strict";var o=n(1594);n.n(o).a},function(t,e,n){"use strict";var o=n(1595);n.n(o).a},function(t,e,n){"use strict";var o=n(1596);n.n(o).a},function(t,e,n){"use strict";var o=n(1597);n.n(o).a},function(t,e,n){"use strict";var o=n(1598);n.n(o).a},function(t,e,n){"use strict";var o=n(1599);n.n(o).a},function(t,e,n){"use strict";(function(t){n(20),n(27),n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(7),h=n.n(f),y=n(10),m=n.n(y),k=n(21),O=n(85),_=n(16),j=n(211),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(e){function n(){var t;return Object(o.a)(this,n),(t=Object(c.a)(this,Object(l.a)(n).apply(this,arguments))).endDays=0,t.countdownObj={},t.warmUpObj={},t.otherPlatformObj={},t.interval=null,t}return Object(d.a)(n,e),Object(r.a)(n,[{key:"handlePromotionDetailChange",value:function(){var e=this;if(!m()(this.promotionEvent))if(this.isWarmUp)this.warmUpObj=this.getWarmUpObj();else if(!this.isOpen||this.isInTempPlatform){if(this.isOpen&&this.isInTempPlatform){var n=h()(),o=h()(this.promotionEvent.end_time);this.endDays=o.diff(n,"day"),this.showDays||(this.countdownObj=this.getCountdownObj(),this.$isServer||(this.interval&&t(this.interval),this.interval=setInterval((function(){e.countdownObj=e.getCountdownObj()}),1e3)))}}else this.otherPlatformObj=this.getOtherPlatformObj()}},{key:"formatTwoDigits",value:function(t){return t<=0?"00":t>=100?String(t):"00".concat(t).substr(-2)}},{key:"getCountdownObj",value:function(){var t=h()(),e=h()(this.promotionEvent.end_time),n=e.diff(t,"hour"),o=e.diff(t,"minute")%60,r=e.diff(t,"second")%60,c=this.formatTwoDigits(n),l=this.formatTwoDigits(o),d=this.formatTwoDigits(r);return{time:"".concat(c,":").concat(l,":").concat(d)}}},{key:"getWarmUpObj",value:function(){var t=this.promotionDetail,e=t.selling_price,n=t.promotion_event,o=h()(n.start_time),r=h()(n.end_time);return{currency:O.b[this.klook.currency],amount:Object(_.y)(e),mmm:o.locale(this.dayjsLocale).format("MMM"),d:o.locale(this.dayjsLocale).format("D"),hhmm:o.format("HH:mm"),mmm1:r.locale(this.dayjsLocale).format("MMM"),d1:r.locale(this.dayjsLocale).format("D"),hhmm1:r.format("HH:mm")}}},{key:"getOtherPlatformObj",value:function(){var t=this.promotionDetail.selling_price,e=h()(this.promotionEvent.end_time),n={web:this.$t("16572"),mweb:this.$t("16571"),app:this.$t("16570")};return{currency:O.b[this.klook.currency],amount:Object(_.y)(t),platform:(this.promotionEvent.platforms||[]).map((function(p){return n[p]})).join("&"),mmm:e.locale(this.dayjsLocale).format("MMM"),d:e.locale(this.dayjsLocale).format("D"),hhmm:e.format("HH:mm")}}},{key:"wrapCountdown",value:function(time){var t=this.$t("16558",{time:time}),text=t.replace(time,"");return t.replace(text,"<span>".concat(text,"</span>")).replace(time,'<span class="time-deadline">'.concat(time,"</span>"))}},{key:"beforeDestroy",value:function(){this.interval&&t(this.interval)}},{key:"promotionEvent",get:function(){return this.promotionDetail.promotion_event||{}}},{key:"tempPlatform",get:function(){return"mobile"===this.klook.platform?"mweb":"web"}},{key:"tagName",get:function(){return this.promotionEvent.tag||""}},{key:"isInTempPlatform",get:function(){return(this.promotionEvent.platforms||[]).includes(this.tempPlatform)}},{key:"isInApp",get:function(){return(this.promotionEvent.platforms||[]).includes("app")}},{key:"isOpen",get:function(){return 5===this.promotionEvent.status}},{key:"showAppDownload",get:function(){return this.isOpen&&!this.isInTempPlatform&&this.isInApp}},{key:"showDays",get:function(){return this.endDays>=3}},{key:"imageUrl",get:function(){return this.promotionEvent.image_url||""}},{key:"dayjsLocale",get:function(){var t=this.klook.language;return j.f[t]||t}}]),n}(n(1378).a);w([Object(k.Watch)("promotionDetail",{immediate:!0})],P.prototype,"handlePromotionDetailChange",null),P=w([k.Component],P),e.a=P}).call(this,n(431).clearImmediate)},function(t,e,n){"use strict";var o=n(1600);n.n(o).a},function(t,e,n){"use strict";var o=n(1601);n.n(o).a},,,function(t,e,n){"use strict";var o=n(1603);n.n(o).a},,,,,,,,,,,function(t,e,n){var map={"./activity-bottom-button/index.vue":2711,"./activity-cards-list/poi-theme-list/index.vue":2737,"./activity-cards-list/recommend-activity/index.vue":2738,"./activity-cards-list/related-activity/index.vue":2739,"./activity-cards-list/same-city-activity/index.vue":2740,"./activity-cards-list/unpublished-recommend-activity/desktop/index.vue":2741,"./activity-cards-list/unpublished-recommend-activity/mobile/index.vue":2742,"./activity-departure/mobile/index.vue":2743,"./activity-hotel/desktop/index.vue":2744,"./activity-hotel/mobile/index.vue":2745,"./activity-modal/index.vue":1258,"./activity-nav/desktop/index.vue":1920,"./activity-nav/mobile/index.vue":1919,"./activity-package-detail/index.vue":1106,"./activity-shopping-cart/index.vue":982,"./activity-tagging/index.vue":2746,"./banner/components/image-gallery/image-swiper/index.vue":2044,"./banner/components/image-gallery/index.vue":1420,"./banner/components/video-player/index.vue":2045,"./banner/desktop/activity-right-price/index.vue":1841,"./banner/desktop/activity-right-price/loading.vue":1842,"./banner/desktop/banner-atlas/index.vue":2747,"./banner/desktop/banner/index.vue":2046,"./banner/desktop/index.vue":2748,"./banner/mobile/banner/index.vue":2749,"./banner/mobile/gallery/image-gallery-customer/index.vue":2016,"./banner/mobile/gallery/image-gallery-merchant/index.vue":2043,"./banner/mobile/new-flow-banner/index.vue":2750,"./bread-crumb/index.vue":2751,"./contact/index.vue":2752,"./coupon-tag/desktop/index.vue":2712,"./coupon-tag/mobile/index.vue":2713,"./credit-rebate/mobile/credits-rebate-banner/index.vue":2753,"./credit-rebate/mobile/credits-rebate-landing-entrance/index.vue":2754,"./device-details/index.vue":2714,"./dynamic-component/drawer/index.vue":1921,"./dynamic-component/dynamic-component-hero/index.vue":1922,"./dynamic-component/dynamic-component-hero/see-more/index.vue":1923,"./dynamic-component/icons/index.vue":1908,"./dynamic-component/image/index.vue":1441,"./dynamic-component/index.vue":2182,"./dynamic-component/map/index.vue":1909,"./dynamic-component/markdown/index.vue":1906,"./dynamic-component/t-and-a/index.vue":1910,"./editor-chioce/index.vue":2755,"./faq/desktop/index.vue":2756,"./faq/mobile/index.vue":2757,"./insider/index.vue":2758,"./internal-link/index.vue":2759,"./line-up/desktop/index.vue":2760,"./markdown/index.vue":953,"./notify-map/desktop/index.vue":2761,"./notify-map/mobile/index.vue":2185,"./open-date-ticket/activity-validity/index.vue":1188,"./open-date-ticket/open-date-tips/index.vue":1006,"./package-options/activity-calendar/desktop/index.vue":2047,"./package-options/attraction-included/desktop/index.vue":1459,"./package-options/attraction-included/mobile/index.vue":1418,"./package-options/attraction-preview/components/attraction-preview-detail/index.vue":1252,"./package-options/attraction-preview/desktop/index.vue":1410,"./package-options/attraction-preview/mobile/index.vue":1155,"./package-options/bottom-bar/mobile/attribute-bottom-bar/index.vue":1407,"./package-options/bottom-bar/mobile/card-bottom-bar/index.vue":1411,"./package-options/bottom-bar/mobile/hero-page-bottom-bar/index.vue":2048,"./package-options/bottom-bar/mobile/line-up-bottom-bar/index.vue":1843,"./package-options/desktop/card-sku-with-detail/index.vue":2696,"./package-options/desktop/index.vue":2699,"./package-options/desktop/package-options-loading.vue":2049,"./package-options/desktop/pickup-return-date-time/index.vue":2050,"./package-options/desktop/unfold-card/pkg-detail/index.vue":2715,"./package-options/desktop/unfold-card/pkg-detail/loading.vue":1460,"./package-options/desktop/wifi-index.vue":2700,"./package-options/mobile/attribute-package-options/index.vue":2701,"./package-options/mobile/attribute-package-options/swiper-index.vue":2691,"./package-options/mobile/card-package-options-sku/booking/booking-calendar-loading.vue":2041,"./package-options/mobile/card-package-options-sku/booking/booking-units-loading.vue":2042,"./package-options/mobile/card-package-options-sku/booking/bottom-bar/index.vue":1414,"./package-options/mobile/card-package-options-sku/booking/bottom-bar/new-index.vue":1845,"./package-options/mobile/card-package-options-sku/booking/index.vue":1916,"./package-options/mobile/card-package-options-sku/booking/new-index.vue":2762,"./package-options/mobile/card-package-options-sku/calendar/index.vue":1253,"./package-options/mobile/card-package-options-sku/components/range-date-time/index.vue":1419,"./package-options/mobile/card-package-options-sku/index.vue":2716,"./package-options/mobile/card-package-options-sku/package-card-list/index.vue":2026,"./package-options/mobile/card-package-options/index.vue":2717,"./package-options/mobile/group-package-options/components/cut-down/index.vue":2051,"./package-options/mobile/group-package-options/index.vue":2693,"./package-options/mobile/wifi-package-options/index.vue":2705,"./package-options/package-attributes/mobile/index.vue":1421,"./package-options/package-card-list/index.vue":2027,"./package-options/package-card-list/package-card/index.vue":2019,"./package-options/package-detail/mobile/index.vue":1408,"./package-options/package-promotion/desktop/index.vue":1844,"./package-options/package-promotion/mobile/index.vue":1298,"./package-options/package-soldout/index.vue":2763,"./pass-guide/desktop/index.vue":2052,"./pass-guide/index.vue":2764,"./pass-guide/mobile/index.vue":2028,"./pass-with-pic/index.vue":2697,"./pass-without-pic/index.vue":2698,"./pass_attractions/index.vue":2718,"./pass_introduction/desktop/index.vue":2765,"./pass_introduction/desktop/loading.vue":2766,"./pass_introduction/index.vue":2767,"./pass_introduction/mobile/index.vue":2768,"./price_info/index.vue":2769,"./promotion-system/coupons/index.vue":2053,"./promotion-system/discounts/index.vue":2029,"./promotion-system/index.vue":2770,"./promotion/index.vue":2706,"./recent-review/index.vue":2771,"./reopen/index.vue":2772,"./review/desktop/index.vue":2702,"./review/mobile/index.vue":2719,"./review/mobile/reviews-modal/index.vue":1830,"./review/mobile/reviews-modal/reviews-loading.vue":2054,"./score-participants/desktop/index.vue":2720,"./score-participants/mobile/index.vue":2773,"./score-participants/price-guarantee/mobile/index.vue":2774,"./section/component/pkg-options-loading.vue":1918,"./section/component/section-loading.vue":1917,"./share-coupon/index.vue":2775,"./show-more-box/index.vue":1034,"./srv-banner/index.vue":2776,"./title/index.vue":2183,"./translate-button/index.vue":2777,"./usp-tip/index.vue":2695};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=2417},function(t,e,n){"use strict";var o=n(1613);n.n(o).a},function(t,e,n){"use strict";var o=n(1614);n.n(o).a},function(t,e,n){"use strict";var o=n(1615);n.n(o).a},function(t,e,n){"use strict";var o=n(1616);n.n(o).a},function(t,e,n){"use strict";var o=n(1617);n.n(o).a},function(t,e,n){"use strict";var o=n(1618);n.n(o).a},function(t,e,n){"use strict";var o=n(1619);n.n(o).a},function(t,e,n){"use strict";var o=n(1620);n.n(o).a},function(t,e,n){"use strict";var o=n(1621);n.n(o).a},function(t,e,n){"use strict";var o=n(1622);n.n(o).a},function(t,e,n){"use strict";var o=n(1623);n.n(o).a},function(t,e,n){"use strict";var o=n(1624);n.n(o).a},function(t,e,n){"use strict";var o=n(1625);n.n(o).a},function(t,e,n){"use strict";var o=n(1626);n.n(o).a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-enlarge",!0,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M5 27V43H21",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}}),t("path",{attrs:{d:"M43 21V5H27",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}}),t("path",{attrs:{d:"M6 42L18.0208 29.9792",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("path",{attrs:{d:"M42 6L29.9792 18.0208",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}})]));e.default=o},function(t,e,n){"use strict";var o=n(1627);n.n(o).a},function(t,e,n){"use strict";var o=n(1628);n.n(o).a},function(t,e,n){"use strict";var o=n(1629);n.n(o).a},function(t,e,n){"use strict";var o=n(1630);n.n(o).a},function(t,e,n){"use strict";var o=n(1631);n.n(o).a},function(t,e,n){"use strict";var o=n(1633);n.n(o).a},function(t,e,n){"use strict";var o=n(1634);n.n(o).a},function(t,e,n){"use strict";var o=n(1635);n.n(o).a},function(t,e,n){"use strict";var o=n(1636);n.n(o).a},function(t,e,n){"use strict";var o=n(1637);n.n(o).a},function(t,e,n){"use strict";var o=n(1638);n.n(o).a},function(t,e,n){"use strict";var o=n(1639);n.n(o).a},function(t,e,n){"use strict";var o=n(1640);n.n(o).a},function(t,e,n){"use strict";var o=n(1641);n.n(o).a},function(t,e,n){"use strict";var o=n(1642);n.n(o).a},function(t,e,n){"use strict";var o=n(1643);n.n(o).a},function(t,e,n){"use strict";var o=n(1644);n.n(o).a},function(t,e,n){"use strict";var o=n(1645);n.n(o).a},function(t,e,n){"use strict";var o=n(1646);n.n(o).a},function(t,e,n){"use strict";var o=n(1647);n.n(o).a},function(t,e,n){"use strict";var o=n(1648);n.n(o).a},function(t,e,n){"use strict";var o=n(1649);n.n(o).a},function(t,e,n){"use strict";var o=n(1650);n.n(o).a},function(t,e,n){"use strict";var o=n(1651);n.n(o).a},function(t,e,n){"use strict";var o=n(1652);n.n(o).a},function(t,e,n){"use strict";var o=n(1653);n.n(o).a},function(t,e,n){"use strict";var o=n(1654);n.n(o).a},function(t,e,n){"use strict";var o=n(1655);n.n(o).a},function(t,e,n){"use strict";var o=n(1656);n.n(o).a},function(t,e,n){"use strict";var o=n(1657);n.n(o).a},function(t,e,n){"use strict";var o=n(1658);n.n(o).a},function(t,e,n){"use strict";var o=n(1659);n.n(o).a},function(t,e,n){"use strict";var o=n(1660);n.n(o).a},function(t,e,n){"use strict";var o=n(1661);n.n(o).a},function(t,e,n){"use strict";var o=n(1662);n.n(o).a},function(t,e,n){"use strict";var o=n(1663);n.n(o).a},function(t,e,n){"use strict";var o=n(1664);n.n(o).a},function(t,e,n){"use strict";var o=n(1665);n.n(o).a},function(t,e,n){"use strict";var o=n(1666);n.n(o).a},function(t,e,n){"use strict";var o=n(1667);n.n(o).a},function(t,e,n){"use strict";var o=n(1668);n.n(o).a},function(t,e,n){"use strict";var o=n(1669);n.n(o).a},function(t,e,n){"use strict";var o=n(1670);n.n(o).a},function(t,e,n){"use strict";var o=n(1671);n.n(o).a},function(t,e,n){"use strict";var o=n(1672);n.n(o).a},function(t,e,n){"use strict";var o=n(1673);n.n(o).a},function(t,e,n){"use strict";var o=n(1674);n.n(o).a},function(t,e,n){"use strict";var o=n(1675);n.n(o).a},function(t,e,n){"use strict";var o=n(1676);n.n(o).a},function(t,e,n){"use strict";var o=n(1677);n.n(o).a},function(t,e,n){"use strict";var o=n(1678);n.n(o).a},function(t,e,n){"use strict";var o=n(1679);n.n(o).a},function(t,e,n){"use strict";var o=n(1681);n.n(o).a},function(t,e,n){"use strict";var o=n(1682);n.n(o).a},function(t,e,n){"use strict";var o=n(1683);n.n(o).a},function(t,e,n){"use strict";var o=n(1684);n.n(o).a},function(t,e,n){"use strict";var o=n(1685);n.n(o).a},function(t,e,n){"use strict";var o=n(1686);n.n(o).a},function(t,e,n){"use strict";var o=n(1689);n.n(o).a},function(t,e,n){"use strict";var o=n(1690);n.n(o).a},function(t,e,n){"use strict";var o=n(1691);n.n(o).a},function(t,e,n){"use strict";var o=n(1692);n.n(o).a},function(t,e,n){"use strict";var o=n(1694);n.n(o).a},function(t,e,n){"use strict";var o=n(1695);n.n(o).a},function(t,e,n){"use strict";var o=n(1696);n.n(o).a},function(t,e,n){"use strict";var o=n(1697);n.n(o).a},function(t,e,n){"use strict";var o=n(1698);n.n(o).a},function(t,e,n){"use strict";var o=n(1699);n.n(o).a},function(t,e,n){"use strict";var o=n(1700);n.n(o).a},function(t,e,n){"use strict";var o=n(1701);n.n(o).a},function(t,e,n){"use strict";var o=n(1702);n.n(o).a},function(t,e,n){"use strict";var o=n(1703);n.n(o).a},function(t,e,n){"use strict";var o=n(1704);n.n(o).a},function(t,e,n){"use strict";var o=n(1705);n.n(o).a},function(t,e,n){"use strict";var o=n(1706);n.n(o).a},function(t,e,n){"use strict";var o=n(1707);n.n(o).a},function(t,e,n){"use strict";var o=n(1708);n.n(o).a},function(t,e,n){"use strict";var o=n(1709);n.n(o).a},function(t,e,n){"use strict";var o=n(1710);n.n(o).a},function(t,e,n){"use strict";var o=n(1711);n.n(o).a},function(t,e,n){"use strict";var o=n(1712);n.n(o).a},function(t,e,n){"use strict";var o=n(1713);n.n(o).a},function(t,e,n){"use strict";var o=n(1714);n.n(o).a},function(t,e,n){"use strict";var o=n(1715);n.n(o).a},function(t,e,n){"use strict";var o=n(1716);n.n(o).a},function(t,e,n){"use strict";var o=n(1717);n.n(o).a},function(t,e,n){"use strict";var o=n(1718);n.n(o).a},function(t,e,n){"use strict";var o=n(1719);n.n(o).a},function(t,e,n){"use strict";var o=n(1720);n.n(o).a},function(t,e,n){"use strict";var o=n(1721);n.n(o).a},function(t,e,n){"use strict";var o=n(1722);n.n(o).a},function(t,e,n){"use strict";var o=n(1723);n.n(o).a},function(t,e,n){"use strict";var o=n(1725);n.n(o).a},function(t,e,n){"use strict";var o=n(1726);n.n(o).a},function(t,e,n){"use strict";var o=n(1727);n.n(o).a},function(t,e,n){"use strict";var o=n(1728);n.n(o).a},function(t,e,n){"use strict";var o=n(1729);n.n(o).a},function(t,e,n){"use strict";var o=n(1730);n.n(o).a},function(t,e,n){"use strict";var o=n(1731);n.n(o).a},function(t,e,n){"use strict";var o=n(1732);n.n(o).a},function(t,e,n){"use strict";var o=n(1733);n.n(o).a},function(t,e,n){"use strict";var o=n(1734);n.n(o).a},function(t,e,n){"use strict";var o=n(1735);n.n(o).a},function(t,e,n){"use strict";var o=n(1736);n.n(o).a},function(t,e,n){"use strict";var o=n(1737);n.n(o).a},function(t,e,n){"use strict";var o=n(1738);n.n(o).a},function(t,e,n){"use strict";var o=n(1739);n.n(o).a},function(t,e,n){"use strict";var o=n(1740);n.n(o).a},function(t,e,n){"use strict";var o=n(1741);n.n(o).a},function(t,e,n){"use strict";var o=n(1742);n.n(o).a},function(t,e,n){"use strict";var o=n(1743);n.n(o).a},function(t,e,n){"use strict";var o=n(1744);n.n(o).a},function(t,e,n){"use strict";var o=n(1745);n.n(o).a},function(t,e,n){"use strict";var o=n(1746);n.n(o).a},function(t,e,n){"use strict";var o=n(1747);n.n(o).a},function(t,e,n){"use strict";var o=n(1748);n.n(o).a},function(t,e,n){"use strict";var o=n(1749);n.n(o).a},function(t,e,n){"use strict";var o=n(1751);n.n(o).a},function(t,e,n){"use strict";var o=n(1752);n.n(o).a},function(t,e,n){"use strict";var o=n(1753);n.n(o).a},function(t,e,n){"use strict";var o=n(1754);n.n(o).a},function(t,e,n){"use strict";var o=n(1755);n.n(o).a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-calendar-unavailable",!1,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M40.5 43C40.5 43 24.4667 43 10.9973 43C6.57899 43 3 39.417 3 34.9987C3 29.1337 3 24.2666 3 17.0014C3 15.515 2.5 12 6 8.5",fill:e.colors[1]}}),t("path",{attrs:{d:"M40.5 43C40.5 43 24.4667 43 10.9973 43C6.57899 43 3 39.417 3 34.9987C3 29.1337 3 24.2666 3 17.0014C3 15.515 2.5 12 6 8.5",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 7C16 7 26.2447 7 36.9994 7C41.4177 7 45 10.5814 45 14.9997C45 25.378 45 36 45 36",fill:e.colors[1]}}),t("path",{attrs:{d:"M16 7C16 7 26.2447 7 36.9994 7C41.4177 7 45 10.5814 45 14.9997C45 25.378 45 36 45 36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}}),t("line",{attrs:{x1:"15.2",y1:"8.2",x2:"15.2",y2:"3.8",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("line",{attrs:{x1:"32.2",y1:"11.2",x2:"32.2",y2:"3.8",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("path",{attrs:{d:"M28.3 17.4C27.3059 17.4 26.5 18.2058 26.5 19.2C26.5 20.1941 27.3059 21 28.3 21V17.4ZM28.3 21H46.8V17.4H28.3V21Z",fill:e.colors[2]}}),t("line",{attrs:{x1:"1.25",y1:"19.2",x2:"18.75",y2:"19.2",stroke:e.colors[2],"stroke-width":e.strokeWidth}}),t("line",{attrs:{x1:"4.04558",y1:"5",x2:"43.9264",y2:"44.8808",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}})]));e.default=o},function(t,e,n){"use strict";var o=n(1756);n.n(o).a},function(t,e,n){"use strict";var o=n(1757);n.n(o).a},function(t,e,n){"use strict";var o=n(1758);n.n(o).a},function(t,e,n){"use strict";var o=n(1759);n.n(o).a},function(t,e,n){"use strict";var o=n(1760);n.n(o).a},function(t,e,n){"use strict";var o=n(1761);n.n(o).a},function(t,e,n){"use strict";var o=n(1762);n.n(o).a},function(t,e,n){"use strict";var o=n(1764);n.n(o).a},function(t,e,n){"use strict";var o=n(1765);n.n(o).a},function(t,e,n){"use strict";var o=n(1766);n.n(o).a},function(t,e,n){"use strict";var o=n(1767);n.n(o).a},function(t,e,n){"use strict";var o=n(1768);n.n(o).a},function(t,e,n){"use strict";var o=n(1769);n.n(o).a},function(t,e,n){"use strict";var o=n(1770);n.n(o).a},function(t,e,n){"use strict";var o=n(1771);n.n(o).a},function(t,e,n){"use strict";var o=n(1772);n.n(o).a},function(t,e,n){"use strict";var o=n(1773);n.n(o).a},function(t,e,n){"use strict";var o=n(1774);n.n(o).a},function(t,e,n){"use strict";var o=n(1775);n.n(o).a},function(t,e,n){"use strict";var o=n(1776);n.n(o).a},function(t,e,n){"use strict";var o=n(1777);n.n(o).a},function(t,e,n){"use strict";var o=n(1778);n.n(o).a},function(t,e,n){"use strict";var o=n(1779);n.n(o).a},function(t,e,n){"use strict";var o=n(1780);n.n(o).a},function(t,e,n){"use strict";var o=n(1781);n.n(o).a},function(t,e,n){"use strict";var o=n(1782);n.n(o).a},function(t,e,n){"use strict";var o=n(1783);n.n(o).a},function(t,e,n){"use strict";var o=n(1784);n.n(o).a},function(t,e,n){"use strict";var o=n(1785);n.n(o).a},function(t,e,n){"use strict";var o=n(1786);n.n(o).a},function(t,e,n){"use strict";var o=n(1787);n.n(o).a},function(t,e,n){"use strict";var o=n(1788);n.n(o).a},function(t,e,n){"use strict";var o=n(1789);n.n(o).a},function(t,e,n){"use strict";var o=n(1790);n.n(o).a},function(t,e,n){"use strict";var o=n(1791);n.n(o).a},function(t,e,n){"use strict";var o=n(1792);n.n(o).a},function(t,e,n){"use strict";var o=n(1793);n.n(o).a},function(t,e,n){"use strict";var o=n(1794);n.n(o).a},function(t,e,n){"use strict";var o=n(1795);n.n(o).a},function(t,e,n){"use strict";var o=n(1796);n.n(o).a},function(t,e,n){"use strict";var o=n(1797);n.n(o).a},function(t,e,n){"use strict";var o=n(1798);n.n(o).a},function(t,e,n){"use strict";var o=n(1799);n.n(o).a},function(t,e,n){"use strict";var o=n(1800);n.n(o).a},function(t,e,n){"use strict";var o=n(1801);n.n(o).a},function(t,e,n){"use strict";var o=n(1802);n.n(o).a},function(t,e,n){"use strict";var o=n(1803);n.n(o).a},function(t,e,n){"use strict";var o=n(1804);n.n(o).a},function(t,e,n){"use strict";var o=n(1805);n.n(o).a},function(t,e,n){"use strict";var o=n(1806);n.n(o).a},function(t,e,n){"use strict";var o=n(1807);n.n(o).a},function(t,e,n){"use strict";var o=n(1808);n.n(o).a},function(t,e,n){"use strict";var o=n(1809);n.n(o).a},function(t,e,n){"use strict";var o=n(1810);n.n(o).a},function(t,e,n){"use strict";var o=n(1811);n.n(o).a},function(t,e,n){"use strict";var o=n(1812);n.n(o).a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(897).IconWrapper("icon-destination-out",!1,(t,e)=>t("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"}},[t("path",{attrs:{d:"M31 40.178C28.7084 42.2154 26.5043 43.7801 24.992 44.7717C23.7735 45.5708 22.2331 45.5748 21.0145 44.776C16.3338 41.7078 5 33.1335 5 22.0441C5 12.0786 13.0589 4 23 4C32.5915 4 40.4309 11.5204 40.9704 21",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("circle",{attrs:{cx:"23",cy:"21.5",r:"6.5",stroke:e.colors[0],"stroke-width":e.strokeWidth}}),t("path",{attrs:{d:"M32 33H45",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap}}),t("path",{attrs:{d:"M39 27L45 33L39 39",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin}})]));e.default=o},function(t,e,n){"use strict";var o=n(1813);n.n(o).a},function(t,e,n){"use strict";var o=n(1814);n.n(o).a},function(t,e,n){"use strict";var o=n(1815);n.n(o).a},function(t,e,n){"use strict";var o=n(1816);n.n(o).a},function(t,e,n){"use strict";var o=n(1817);n.n(o).a},function(t,e,n){"use strict";var o=n(1818);n.n(o).a},function(t,e,n){"use strict";var o=n(1819);n.n(o).a},function(t,e,n){"use strict";var o=n(1820);n.n(o).a},function(t,e,n){"use strict";var o=n(1821);n.n(o).a},function(t,e,n){"use strict";var o=n(1822);n.n(o).a},function(t,e,n){"use strict";var o=n(1823);n.n(o).a},function(t,e,n){"use strict";var o=n(1824);n.n(o).a},function(t,e,n){"use strict";var o=n(1825);n.n(o).a},function(t,e,n){"use strict";var o=n(1826);n.n(o).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(23),n(4)),m=n(213),k=n.n(m),O=n(1253),_=n(982),j=n(1408),w=n(1407),P=n(1006),C=n(1038),S=(n(22),n(14),n(11),n(8),n(12),n(273),n(0)),D=n(2066),x=n(2067),T=(n(47),n(887)),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).promoTagText="",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"onPromoTagChange",value:function(t){var e,n,o;if(t){var r=null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time;if(r){var c=Object(T.c)(r);c&&(this.promoTagText=t.text),this.promoTagText=c?t.text:""}else this.promoTagText=t.text}else this.promoTagText=""}},{key:"handleDiscountChange",value:function(){this.setTextMinWidth()}},{key:"setTextMinWidth",value:function(){var t=this;if(this.$isServer)return null;this.$nextTick((function(){t.checkLayout()})),setTimeout((function(){t.checkLayout()}),1e3)}},{key:"checkLayout",value:function(){var t=this.$refs.text,e=this.$refs.discount;if(t&&e){var n=e.scrollWidth||0;n&&n>24&&(t.style.minWidth="".concat(n-24,"px"))}}},{key:"setPromoTagWidth",value:function(){var t=this.$refs.box,e=this.$refs.promoTag;t&&e&&(e.scrollWidth>200?e.style.width=t.scrollWidth>200?"200px":"100%":e.style.width=t.scrollWidth>e.scrollWidth?"auto":"100%")}}]),e}(f.Vue);I([Object(f.Prop)()],R.prototype,"openDateTip",void 0),I([Object(f.Prop)()],R.prototype,"content",void 0),I([Object(f.Prop)({type:String,default:""})],R.prototype,"icon",void 0),I([Object(f.Prop)({type:Number,default:16})],R.prototype,"iconSize",void 0),I([Object(f.Prop)()],R.prototype,"disabled",void 0),I([Object(f.Prop)()],R.prototype,"active",void 0),I([Object(f.Prop)()],R.prototype,"discount",void 0),I([Object(f.Prop)()],R.prototype,"promoTag",void 0),I([Object(f.Prop)()],R.prototype,"priceText",void 0),I([Object(f.Watch)("promoTag",{immediate:!0})],R.prototype,"onPromoTagChange",null),I([Object(f.Watch)("discount")],R.prototype,"handleDiscountChange",null);var $=R=I([f.Component],R),L=(n(2526),n(43)),A=Object(L.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"box",class:["attr-btn",{disabled:t.disabled,active:t.active,"has-promo-tag":!!t.promoTagText}]},[n("div",{ref:"text",staticClass:"attr-btn_text",class:[t.active&&"attr-btn_active",t.disabled&&"attr-btn_disabled"],attrs:{disable:t.disabled}},[n("span",{staticClass:"flex-box attr-btn_text-content"},[t.icon?n("span",{staticClass:"attr-btn_icon"},[n("SvgIcon",{attrs:{name:t.icon,size:t.iconSize}})],1):t._e(),t._v(" "),n("span",{staticClass:"flex-style"},[t._t("default",[n("h3",{staticClass:"attr-btn_text_mweb"},[t._v(t._s(t.content))])]),t._v(" "),t.openDateTip?n("span",{staticClass:"open-date-text"},[t._v(t._s(t.openDateTip))]):t._e(),t._v(" "),t.priceText?n("span",{staticClass:"price-text-divider"}):t._e(),t._v(" "),t.priceText?n("span",{staticClass:"price-text",domProps:{innerHTML:t._s(t.priceText)}}):t._e()],2)])]),t._v(" "),t.promoTagText?n("span",{ref:"promoTag",staticClass:"attr-btn_promotag"},[t._v(t._s(t.promoTagText))]):t._e(),t._v(" "),t.promoTagText?n("span",{staticClass:"attr-btn_triangle"}):t._e()])}),[],!1,null,"621d712c",null).exports,E=n(1401),M=n(1034),B=n(923),N=n(16),V=n(212),F=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},W=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).elementObserver=null,t.popTextVisible=!0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.animate&&this.createObserver()}},{key:"visibleChange",value:function(){var t=this;this.$nextTick((function(){var e,n,o=null===(n=null===(e=t.singleAttrPopRef)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.querySelector(".single-attr-pop-sheet .attr-btn.active");o&&o.scrollIntoView({behavior:"instant",block:"start",inline:"start"})}))}},{key:"beforeDestroy",value:function(){this.destroyObserver()}},{key:"handleClick",value:function(){var t,e=this;this.$emit("update:visible",!0),(null===(t=this.singleAttrPopRef)||void 0===t?void 0:t.$el)&&setTimeout((function(){return e.$inhouse.track("pageview",e.singleAttrPopRef.$el,{force:!0})}),100)}},{key:"handleTransitionend",value:function(){this.$emit("update:animate",!1)}},{key:"createObserver",value:function(){var t=this;"IntersectionObserver"in window&&(this.elementObserver=new IntersectionObserver((function(e){return e.forEach((function(e){e.intersectionRatio>0&&(setTimeout((function(){return t.popTextVisible=!1}),1e3),t.destroyObserver())}))}),{rootMargin:"-320px 0px -320px 0px"}),this.elementObserver.observe(this.$el))}},{key:"destroyObserver",value:function(){this.elementObserver&&this.$el&&this.elementObserver.unobserve(this.$el)}}]),e}(f.Vue);F([Object(f.Prop)({default:!1})],W.prototype,"visible",void 0),F([Object(f.Prop)({default:""})],W.prototype,"title",void 0),F([Object(f.Prop)({default:!1})],W.prototype,"animate",void 0),F([Object(f.Prop)()],W.prototype,"activityId",void 0),F([Object(f.Ref)()],W.prototype,"singleAttrPopRef",void 0),F([Object(f.Watch)("visible")],W.prototype,"visibleChange",null);var H=W=F([f.Component],W),U=(n(2527),Object(L.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"single-attr-pop"},[n("div",{staticClass:"single-attr-pop-content",attrs:{"data-spm-module":"SeeAllMatched","data-spm-virtual-item":"__virtual"},on:{click:t.handleClick}},[t.animate?n("span",{class:["single-attr-pop-text",t.popTextVisible&&"visible"],on:{transitionend:t.handleTransitionend}},[t._v("\n      "+t._s(t.$t("98471"))+"\n    ")]):t._e(),t._v(" "),n("span",{staticClass:"single-attr-pop-icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_triangle_down",size:"24"}})],1)]),t._v(" "),n("div",{staticClass:"single-attr-pop-gradient"}),t._v(" "),n("klk-bottom-sheet",t._g({ref:"singleAttrPopRef",staticClass:"single-attr-pop-sheet",attrs:{visible:t.visible,"can-pull-close":!1,transfer:!0,"show-close":!0,title:t.$t("activity.v2.label.booking_options"),"data-spm-page":"TNA_PackageOptions?oid=activity_"+t.activityId+"&trg=manual"}},t.$listeners),[n("div",{staticClass:"single-attr-pop-sheet-title"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"single-attr-pop-sheet-content"},[t._t("default")],2)])],1)}),[],!1,null,"036e9263",null).exports),z=(n(28),n(85)),G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getPackagePrice",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=this.packageAttrToPriceMap[t];if(!o)return"";var r=o.from_price,c=o.to_price,l=o.price_show;if(r&&r!==c){var d="".concat(z.b[this.klook.currency]," ").concat(Object(N.y)(r));return this.$t("activity_detail_from_price",[n,d]).replace(/color: #\d+;*/,"").replace(/color:#\d+;*/,"")}return(null===(e=l)||void 0===e?void 0:e.sale_price)||""}},{key:"packageAttrToPriceMap",get:function(){return(this.includedPackages||[]).reduce((function(t,e){var n,o;return 1===(null===(o=null===(n=e)||void 0===n?void 0:n.spec_attr_id)||void 0===o?void 0:o.length)&&(t[e.spec_attr_id[0]]=e),t}),{})}}]),e}(f.Vue);G([f.State],Y.prototype,"klook",void 0),G([Object(f.Prop)()],Y.prototype,"includedPackages",void 0),G([Object(f.Prop)({default:""})],Y.prototype,"specTitle",void 0),G([Object(f.Prop)({default:!1})],Y.prototype,"showSinglePop",void 0);var K=Y=G([f.Component],Y);function J(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function X(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?J(Object(source),!0).forEach((function(e){Object(S.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):J(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Q=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Z=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).winTop=0,t.scrollStopTimer=null,t.popVisible=!1,t.showSinglePopAnimate=!0,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activeSectionChange",value:function(t){t&&setTimeout(this.handlerSlide,100)}},{key:"handleAttrPopSelect",value:function(t,e,n,o){this.popVisible=!1,this.handleAttrSelect(t,e,{index:n,len:o,type:"PackageOptionsBring"})}},{key:"heroSlideToCenter",value:function(){this.handlerSlide()}},{key:"handlerSlide",value:function(){var t=this.$el.querySelector("#js-swiper-dom .card-swiper"),e=this.$el.querySelector("#js-swiper-dom .js-active");Object(V.f)(e,t)}},{key:"getItem",value:function(t){return this.$el.querySelector('[data-id="'.concat(t,'"]'))}},{key:"checkSwiperInView",value:function(){var t=document.querySelector("#js-swiper-dom");return Object(N.S)(t)}},{key:"slide",value:function(t,e){var n=this,o=X({behavior:"instant"},e||{});setTimeout((function(){var e=n.getItem(t);e&&n.checkSwiperInView()&&e.scrollIntoView(X({inline:"center",block:"nearest"},o))}))}},{key:"computeLocation",value:function(t){var e,n,o=(null===(n=null===(e=this.specList)||void 0===e?void 0:e[0])||void 0===n?void 0:n.attr)||[],r=o.findIndex((function(t){var e;return null===(e=t)||void 0===e?void 0:e.isActive})),c=o.findIndex((function(e){return e===t}));this.$emit("directionChange",r>c?"right":"left")}},{key:"handleAttrSelect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.computeLocation(t),this.handleSelect(t,e,n)}}]),e}(Object(f.mixins)(E.a,K));Q([f.State],Z.prototype,"klook",void 0),Q([Object(f.Prop)({default:55})],Z.prototype,"waitTime",void 0),Q([Object(f.Ref)()],Z.prototype,"swiperRef",void 0),Q([Object(f.Watch)("value",{immediate:!0})],Z.prototype,"activeSectionChange",null);var tt=Z=Q([Object(f.Component)({components:{CardSwiper:B.a,ShowMoreBox:M.default,SpecTitle:D.a,ActivityPackageBtn:A,AttrDetailBtn:x.a,SinglePop:U}})],Z),et=(n(2528),Object(L.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-package-spec-wrap"},[n("div",t._l(t.specList,(function(e){return n("div",{key:e.id,staticClass:"activity-spec"},[n("SpecTitle",{attrs:{title:t.specTitle,spec:e},on:{select:t.handleSelect}}),t._v(" "),n("div",{staticClass:"activity-package-spec-content"},[n("div",{staticClass:"activity-package-attributes-wrap"},[n("div",{ref:"container",refInFor:!0,staticClass:"activity-package-attributes",class:{"single-spec-with-discount":t.isSingleSpecWithDiscount}},[0===e.text_type?[n("CardSwiper",{ref:"swiperRef",refInFor:!0,staticClass:"swiper-custom-style",class:{"only-one-custom-style":1===e.attr.length,"extra-padding-right":t.showSinglePop},attrs:{id:"js-swiper-dom"}},t._l(e.attr,(function(o){return n("ActivityPackageBtn",{key:o.id,staticClass:"spec-btn-style",class:{"js-active":o.isActive,"only-one-class":1===e.attr.length},attrs:{id:"js-ticket-type-"+o.id,active:o.isActive,disabled:!o.isScheduleMatch||!o.isPackageMatch,"promo-tag":o.promoTag,icon:o.isScheduleMatch?"":"common#icon_time_calendar_unavailable_xs","icon-size":16,discount:o.discount,content:o.name,"data-id":o.id,"open-date-tip":o.openDateTip,"price-text":t.getPackagePrice(o.id,14)},nativeOn:{click:function(n){return t.handleAttrSelect(o,e)}}})})),1)]:t._e(),t._v(" "),1===e.text_type?[n("AttrDetailBtn",{attrs:{spec:e},on:{select:t.handleSelect}})]:t._e()],2)]),t._v(" "),t.showSinglePop?n("SinglePop",{staticClass:"activity-package-attributes-pop",attrs:{visible:t.popVisible,animate:t.showSinglePopAnimate,"activity-id":t.activityId,title:t.specTitle},on:{"update:visible":function(e){t.popVisible=e},"update:animate":function(e){t.showSinglePopAnimate=e}}},t._l(e.attr,(function(o,r){return n("ActivityPackageBtn",{key:o.id,staticStyle:{"scroll-margin-top":"16px"},attrs:{active:o.isActive,disabled:!o.isScheduleMatch||!o.isPackageMatch,"promo-tag":o.promoTag,icon:o.isScheduleMatch?"":"common#icon_time_calendar_unavailable_xs","icon-size":16,discount:o.discount,content:o.name,"data-id":o.id,"open-date-tip":o.openDateTip,"price-text":t.getPackagePrice(o.id,14),"data-spm-module":"PackageType_LIST?oid=package_"+o.singleAttrPackageId+"&idx="+r+"&len="+e.attr.length,"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(n){return t.handleAttrPopSelect(o,e,r,e.attr.length)}}})})),1):t._e()],1)],1)})),0),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isPackageNotAvailable||t.isScheduleNotAvailable,expression:"isPackageNotAvailable || isScheduleNotAvailable"}],staticClass:"activity-not-available-tips_wrap"},[t.isPackageNotAvailable?n("div",{staticClass:"activity-not-available-tips"},[n("div",{staticClass:"not-match_icon fn"}),t._v(" "),n("span",{staticClass:"not-available-content"},[t._v("\n        "+t._s(t.$t("activity.option.unshot_desc"))+"\n      ")])]):t._e(),t._v(" "),t.isScheduleNotAvailable?n("div",{staticClass:"activity-not-available-tips"},[n("SvgIcon",{staticClass:"fn",attrs:{name:"common#icon_time_calendar_unavailable_xs",size:"16",color:"#b2b2b2"}}),t._v(" "),n("span",{staticClass:"not-available-content"},[t._v("\n        "+t._s(t.$t("activity.date.unavailable"))+"\n      ")])],1):t._e()])])}),[],!1,null,"f98a9536",null).exports),it=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},nt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).popVisible=!1,t.singlePopCloseFunc=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){var e=this;t&&this.$nextTick((function(){return e.showActiveItem("auto")}))}},{key:"computeLocation",value:function(t){var e=this.filteredAttrList.findIndex((function(t){var e;return null===(e=t)||void 0===e?void 0:e.isActive})),n=this.filteredAttrList.findIndex((function(e){return e===t}));this.$emit("directionChange",e>n?"right":"left")}},{key:"handleAttrPopSelect",value:function(t,e,n){var o=this;this.popVisible=!1,setTimeout((function(){return o.handleAttrSelect(t,{index:e,len:n,type:"PackageOptionsBring"})}),50)}},{key:"handleAttrSelect",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.computeLocation(t),this.handleSelect(t,this.specList[0],n),this.$nextTick(this.showActiveItem),this.isDelayedInstantScroll)setTimeout((function(){var t=Object(V.c)(document.querySelector(".js-goto-pkg-detail"))-60;window.scrollTo(0,t)}),300);else{var o=this.scrollEl,r=o?{lockLocation:Number(.1*(document.documentElement.clientHeight||document.body.clientHeight))+56,scrollEl:o}:void 0,c=Object(V.c)(document.querySelector(".js-goto-pkg-detail"),r)-60;Object(V.d)({scrollY:c,lockLocation:null===(e=r)||void 0===e?void 0:e.lockLocation},r)}}},{key:"showActiveItem",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";if(null===(t=this.$el)||void 0===t?void 0:t.querySelector){var n=this.$el.querySelector(".single-fixed-attributes-item.is-active"),o=this.$el.querySelector(".single-fixed-attributes .card-swiper");Object(V.f)(n,o,e)}}},{key:"filteredAttrList",get:function(){var t,e,n,o=this.specList;return(null===(n=null===(e=null===(t=o)||void 0===t?void 0:t[0])||void 0===e?void 0:e.attr)||void 0===n?void 0:n.length)?o[0].attr.filter((function(t){return t.isScheduleMatch&&t.isPackageMatch})):[]}}]),e}(Object(f.mixins)(E.a,K));it([f.State],nt.prototype,"klook",void 0),it([Object(f.Prop)()],nt.prototype,"scrollEl",void 0),it([Object(f.Prop)()],nt.prototype,"visible",void 0),it([Object(f.Prop)()],nt.prototype,"isDelayedInstantScroll",void 0),it([Object(f.Ref)()],nt.prototype,"cardSwiperRef",void 0),it([Object(f.Watch)("visible",{immediate:!0})],nt.prototype,"visibleChange",null);var at=nt=it([Object(f.Component)({components:{CardSwiper:B.a,SinglePop:U,ActivityPackageBtn:A}})],nt),ot=(n(2529),Object(L.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"single-fixed-attributes"},[n("CardSwiper",{ref:"cardSwiperRef",staticClass:"single-fixed-attributes-wrap",class:{"extra-padding-right":t.showSinglePop}},t._l(t.filteredAttrList,(function(e){return n("div",{key:e.id,class:["single-fixed-attributes-item",e.isActive&&"is-active"],on:{click:function(n){return t.handleAttrSelect(e)}}},[n("span",{staticClass:"single-fixed-attributes-text"},[t._v("\n        "+t._s(e.name)+"\n      ")])])})),0),t._v(" "),t.showSinglePop?n("SinglePop",{staticClass:"single-fixed-attributes-pop",attrs:{visible:t.popVisible,"activity-id":t.activityId,title:t.specTitle},on:{"update:visible":function(e){t.popVisible=e},close:t.handleSinglePopClose}},t._l(t.filteredAttrList,(function(e,o){return n("ActivityPackageBtn",{key:e.id,staticStyle:{"scroll-margin-top":"16px"},attrs:{active:e.isActive,disabled:!e.isScheduleMatch||!e.isPackageMatch,"promo-tag":e.promoTag,icon:e.isScheduleMatch?"":"common#icon_time_calendar_unavailable_xs","icon-size":16,discount:e.discount,content:e.name,"data-id":e.id,"open-date-tip":e.openDateTip,"price-text":t.getPackagePrice(e.id,14),"data-spm-module":"PackageType_LIST?oid=package_"+e.singleAttrPackageId+"&idx="+o+"&len="+t.filteredAttrList.length,"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(n){return t.handleAttrPopSelect(e,o,t.filteredAttrList.length)}}})})),1):t._e()],1)}),[],!1,null,"2502a9c8",null).exports),ct=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},st=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"autoSelectFirstAttr",value:function(){var t,e;this.shouldPin?(null===(t=this.singleFixedAttrRef)||void 0===t?void 0:t.autoSelectFirstAttr)&&this.singleFixedAttrRef.autoSelectFirstAttr():(null===(e=this.singleAttrRef)||void 0===e?void 0:e.autoSelectFirstAttr)&&this.singleAttrRef.autoSelectFirstAttr()}}]),e}(f.Vue);ct([Object(f.Prop)()],st.prototype,"shouldPin",void 0),ct([Object(f.Ref)()],st.prototype,"singleAttrRef",void 0),ct([Object(f.Ref)()],st.prototype,"singleFixedAttrRef",void 0);var lt=st=ct([Object(f.Component)({components:{SinglePackageAttributes:et,SingleFixedAttributes:ot}})],st),ut=(n(2530),Object(L.a)(lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"swiper-single-attributes"},[n("SinglePackageAttributes",t._g(t._b({ref:"singleAttrRef",staticClass:"js-swiper-attributes"},"SinglePackageAttributes",t.$attrs,!1),t.$listeners)),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldPin,expression:"shouldPin"}],staticClass:"swiper-single-attributes-panel"},[n("SingleFixedAttributes",t._g(t._b({ref:"singleFixedAttrRef",attrs:{visible:t.shouldPin}},"SingleFixedAttributes",t.$attrs,!1),t.$listeners))],1)],1)}),[],!1,null,"732c444a",null).exports),pt=(n(30),n(20),n(27),n(61),n(1421)),vt=n(9),ft=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ht=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"dataList",get:function(){return(this.textData||[]).reduce((function(t,e){return t.length&&t.push({type:"icon",content:""}),t.push({type:"text",content:e}),t}),[])}}]),e}(vt.Vue);ft([Object(vt.Prop)()],ht.prototype,"textData",void 0);var gt=ht=ft([vt.Component],ht),bt=(n(2531),Object(L.a)(gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comma-text"},t._l(t.dataList,(function(e,o){return n("span",{key:o,staticClass:"comma-text-item",class:{"is-icon":"text"!==e.type}},["text"===e.type?[t._v("\n      "+t._s(e.content)+"\n    ")]:t._t("default")],2)})),0)}),[],!1,null,"a6f314c4",null).exports),yt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},mt=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(){var t=this;this.$nextTick((function(){Object(V.g)(t.getScrollElBySectionConfig2provide())}))}},{key:"textData",get:function(){var t,e,n,o=this.spec,r=this.value,c=[];if((null===(t=r)||void 0===t?void 0:t.length)&&o){var l=!0,d=!1,v=void 0;try{for(var f,h=(o||[])[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var y=f.value,m=!0,k=!1,O=void 0;try{for(var _,j=(y.attr||[])[Symbol.iterator]();!(m=(_=j.next()).done);m=!0){var w=_.value;r.includes(null===(e=w)||void 0===e?void 0:e.id)&&c.push(null===(n=w)||void 0===n?void 0:n.name)}}catch(t){k=!0,O=t}finally{try{m||null==j.return||j.return()}finally{if(k)throw O}}}}catch(t){d=!0,v=t}finally{try{l||null==h.return||h.return()}finally{if(d)throw v}}}return c}}]),e}(f.Vue);yt([Object(f.Prop)()],mt.prototype,"spec",void 0),yt([Object(f.Prop)()],mt.prototype,"value",void 0),yt([Object(f.Prop)()],mt.prototype,"shouldPin",void 0),yt([Object(f.Inject)({default:function(t){return t}})],mt.prototype,"getScrollElBySectionConfig2provide",void 0);var kt=mt=yt([Object(f.Component)({components:{PackageAttributes:pt.default,CommaText:bt}})],mt),Ot=(n(2532),Object(L.a)(kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"swiper-multi-attributes"},[n("PackageAttributes",t._g(t._b({staticClass:"js-swiper-attributes",attrs:{spec:t.spec,value:t.value}},"PackageAttributes",t.$attrs,!1),t.$listeners)),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldPin,expression:"shouldPin"}],staticClass:"swiper-multi-attributes-panel"},[n("div",{staticClass:"panel-text"},[n("CommaText",{attrs:{"text-data":t.textData}},[n("i",{staticClass:"text-point"})])],1),t._v(" "),n("div",{staticClass:"panel-button",on:{click:t.handleClick}},[t._v("\n      "+t._s(t.$t("13500"))+"\n    ")])])],1)}),[],!1,null,"0dfa6ca4",null).exports),_t=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},jt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).attributesObserver=null,t.packageDetailObserver=null,t.isAttributesVisible=!1,t.isPackageDetailVisible=!1,t.attributesSelector=".js-swiper-attributes",t.packageDetailSelector=".js-package-detail-for-swiper",t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"beforeDestroy",value:function(){this.destroySwiperObserver()}},{key:"createSwiperObserver",value:function(){var t=this;if("IntersectionObserver"in window){var e=this.attributesSelector,n=this.packageDetailSelector,o=this.$el.querySelector(e),r=document.querySelector(n);o&&!this.attributesObserver&&(this.attributesObserver=new IntersectionObserver((function(e){return e.forEach((function(e){t.isAttributesVisible=e.intersectionRatio>0}))}),{rootMargin:this.calcCustomScrollEl?"-190px 0px 0px":"-50px 0px 0px",threshold:[0,1]}),this.attributesObserver.observe(o)),r&&!this.packageDetailObserver&&(this.packageDetailObserver=new IntersectionObserver((function(e){return e.forEach((function(e){t.isPackageDetailVisible=e.intersectionRatio>0}))}),{threshold:[0,1]}),this.packageDetailObserver.observe(r))}}},{key:"destroySwiperObserver",value:function(){var t=this.attributesSelector,e=this.packageDetailSelector;if(this.attributesObserver){var n=this.$el.querySelector(t);n&&this.attributesObserver.unobserve(n)}if(this.packageDetailObserver){var o=document.querySelector(e);o&&this.packageDetailObserver.unobserve(o)}}},{key:"calcCustomScrollEl",get:function(){return this.$attrs["custom-scroll-el"]}},{key:"shouldShowPanel",get:function(){return!this.isAttributesVisible&&this.isPackageDetailVisible}}]),e}(f.Vue),wt=jt=_t([f.Component],jt),Pt=n(883),Ct=n(1853),St=n(1298),Dt=n(1470),xt=n(2081),Tt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},It=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),e}(n(1931).a),Rt=It=Tt([Object(f.Component)({components:{FilterItem:Dt.a,CardSwiper:B.a,PopContent:xt.a}})],It),$t=(n(2533),Object(L.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero-filter-mobile"},[n("div",{staticClass:"hero-filter-mobile-left",attrs:{"data-spm-module":"TotalFilter","data-spm-virtual-item":"__virtual"},on:{click:t.openPop}},[n("svg-icon",{staticClass:"hero-filter-mobile-left-icon",attrs:{name:"activity-common#icon_filter_blank",size:"20"}}),t._v(" "),t.selectedText?n("span",{staticClass:"hero-filter-mobile-left-text"},[t._v("\n      "+t._s(t.selectedText)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"hero-filter-mobile-left-gradient"})],1),t._v(" "),n("CardSwiper",{staticClass:"hero-filter-mobile-wrap"},t._l(t.quickFilters,(function(e,o){return n("div",{key:e.key,staticClass:"hero-filter-mobile-item"},[n("FilterItem",{attrs:{mode:"outline",verbose:!0,active:t.selected.includes(e.selectValue),"data-spm-module":t.getQuickFilterItemSpm(e,t.quickFilters.length,o),"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(n){return t.handleSelect(e.selectValue)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])],1)})),0),t._v(" "),n("div",{staticClass:"hero-filter-mobile-right"}),t._v(" "),n("klk-bottom-sheet",{ref:"heroFilterPopRef",staticClass:"hero-filter-mobile-pop",attrs:{visible:t.popVisible,"can-pull-close":!1,transfer:!0,"show-close":!0,title:t.$t("28269"),"data-spm-page":"TNA_ActivityFilter?oid=activity_"+t.activityId+"&trg=manual"},on:{"update:visible":function(e){t.popVisible=e}}},[n("PopContent",{staticClass:"hero-filter-mobile-pop-content",attrs:{list:t.detailFilters,selected:t.popSelected},on:{select:t.handlePopSelect}}),t._v(" "),n("template",{slot:"footer"},[n("section",{staticClass:"hero-filter-mobile-pop-footer"},[n("span",{staticClass:"footer-clear",class:[{disabled:0===t.popSelected.length}],on:{click:function(e){return e.stopPropagation(),t.handlePopClear(e)}}},[t._v("\n          "+t._s(t.$t("search_mobile_clear"))+"\n        ")]),t._v(" "),n("klk-button",{ref:"heroFilterPopConfirmRef",staticClass:"footer-confirm",attrs:{color:"primary",disabled:0===t.popNum,"data-spm-module":"SeeResult?trg=manual&ext="+encodeURIComponent(JSON.stringify({TagKey:t.selectedKeys,ResultPackageAmount:t.resultPackageAmount,FilterAmount:t.filterAmount})),"data-spm-virtual-item":"__virtual?trg=manual"},on:{click:t.handlePopConfirm}},[t._v("\n          "+t._s(t.popConfirmText||t.$t("global.confirm"))+"\n        ")])],1)])],2)],1)}),[],!1,null,"1d4776e4",null).exports),Lt=n(882),At=n(1724),Et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Mt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).attrDirection="left",t.heroPanelVisible=!1,t.onWindowScroll=k()(t.computeHeroPin,5),t.moreObj={maxHeight:"500px",status:""},t}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"shouldShowPanelChange",value:function(t){Lt.a.$emit("toggleGlobalHeaderVisible",!t)}},{key:"mounted",value:(n=Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isSinglePackage||this.$nextTick(this.createSwiperObserver),t.next=3,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 3:window.addEventListener("scroll",this.onWindowScroll.bind(this));case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"destroyed",value:function(){window.removeEventListener("scroll",this.onWindowScroll.bind(this))}},{key:"initStatus",value:function(){var t=this,e=this.moreObj;e.status="",setTimeout((function(){var n,o,r,c=null===(n=t.$refs)||void 0===n?void 0:n.pkgDetailRef,l=parseInt(e.maxHeight)||0;!c||c&&(null===(r=null===(o=c)||void 0===o?void 0:o.$el)||void 0===r?void 0:r.offsetHeight)<=l?e.status="":e.status="more"}))}},{key:"clickShowMore",value:function(t){this.moreObj.status=t}},{key:"directionChange",value:function(t){this.attrDirection=t}},{key:"computeHeroPin",value:function(){if(this.calcActIsHeroPage){var t=this.$el.querySelector(this.attributesSelector);this.heroPanelVisible=Object(V.c)(t)+100<=Object(V.h)()}}},{key:"isSinglePackage",get:function(){var t;return 1===(null===(t=this.packageList)||void 0===t?void 0:t.length)}},{key:"realPanelShow",get:function(){return this.shouldShowPanel||this.heroPanelVisible}},{key:"shouldShowSingleAttributesPanel",get:function(){var t=(this.specList||[]).every((function(t){return t.attr.length>1}));return this.realPanelShow&&t}},{key:"calcShowMoreStyles",get:function(){var t=this.moreObj;return"more"===t.status?{overflow:"hidden",maxHeight:t.maxHeight}:{maxHeight:"initial"}}},{key:"calcTaggingTrack",get:function(){var t,e,n=null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags;return Object(Pt.getTaggingTrackObj)({track:{spm:"Package_Discount_Section",action:!0},list:n,pkg:{packageId:this.packageId}})}}]),e}(Object(f.mixins)(At.a,wt));Et([Object(f.Watch)("realPanelShow",{immediate:!0})],Mt.prototype,"shouldShowPanelChange",null);var Bt=Mt=Et([Object(f.Component)({components:{HeroFilter:$t,PackageOptionsBooking:Ct.a,OpenDateTips:P.default,PackageOptionsCalendarWrap:O.default,PackageDetail:j.default,BottomBar:w.default,ShoppingCart:_.default,NoneFilterResult:C.a,SwiperSingleAttributes:ut,SwiperMultiAttributes:Ot,ActivityPackagePromotion:St.default}})],Mt),Nt=(n(2534),Object(L.a)(Bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"js-spec-type-swiper-content"},[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"0 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}],staticClass:"spec-swiper-style"},[t.heroFilterObj?n("HeroFilter",{staticClass:"card-package-options_hero_filter",attrs:{selected:t.tagFilterList,"get-num":t.getTagPkgNum,"activity-id":t.activityId,"filter-data":t.heroFilterObj,"packages-total":t.packageList.length,packages:t.packageList},on:{"update:selected":function(e){t.tagFilterList=e},change:t.autoSelectFirstAttr}}):!t.calcActIsNewOpenTicket&&!t.isLinePage&&t.calcActScheduleList.length&&t.showOpenTicketBySpec?n("PackageOptionsCalendarWrap",{staticClass:"card-package-options_calendar",attrs:{state:t.activitySchedulesApiDefined.state,schedules:t.calcActScheduleList,warn:t.dateDescription,"hide-date-filter":t.calcActIsNewOpenTicket},on:{input:t.dateChange,reload:function(e){return t.getActivitySchedulesApiData(t.calcActSchedulesParams)}},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}}):t._e(),t._v(" "),t.calcActIsMultiSpec?n("div",{staticClass:"attr-pkg-options"},[t.calcActIsMultiSpecWithDiscount?n("ActivityPackagePromotion",t._b({attrs:{"package-id":t.packageId,"package-selected-date":t.pkgSelectedDate,"template-id":t.templateId,"activity-id":t.activityId,"valid-packages":t.calcActValidPkgList,"included-packages":t.packageList,"packages-in-date":t.calcActInDatePacakges},on:{selectPackage:t.selectPackage}},"ActivityPackagePromotion",t.bindIHTrack(t.calcTaggingTrack),!1)):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone,expression:"showFilterNone"}]}),t._v(" "),n("SwiperMultiAttributes",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"},{name:"track",rawName:"v-track:module:PackageType_LIST",value:{trg:"manual"},expression:"{\n          trg: 'manual'\n        }",arg:"module:PackageType_LIST"}],ref:"attrWrap",staticClass:"package-options",attrs:{value:t.chosenAttrIds,spec:t.specList,packages:t.packageList,schedule:t.calcSchedule,"activity-id":t.activityId,"included-packages":t.packageList,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-new-open-ticket":t.calcActIsNewOpenTicket,"should-pin":t.realPanelShow},on:{input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectPackage:t.selectPackage,selectSpec:t.handleSelectSpec}})],1):n("div",{staticClass:"dont-delete-this-div"},[n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showTagFilterNone,expression:"showTagFilterNone"}],attrs:{title:t.$t("13630")}}),t._v(" "),n("SwiperSingleAttributes",{directives:[{name:"show",rawName:"v-show",value:!t.showTagFilterNone,expression:"!showTagFilterNone"},{name:"track",rawName:"v-track:module:PackageType_LIST",value:{trg:"manual"},expression:"{\n          trg: 'manual'\n        }",arg:"module:PackageType_LIST"}],ref:"attrWrap",staticClass:"js-spec-type-swiper",attrs:{value:t.chosenAttrIds,spec:t.specList,packages:t.packageList,schedule:t.calcSchedule,"activity-id":t.activityId,"included-packages":t.packageList,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-new-open-ticket":t.calcActIsNewOpenTicket,"should-pin":t.shouldShowSingleAttributesPanel,"show-single-pop":t.packageList.length>4,"spec-title":t.calcActIsHeroPage?t.getTagFilterSpecTitle(t.packageList):"","included-tag-packages":t.getIncludedTagPackages(t.packageList),"is-delayed-instant-scroll":!0,"scroll-el":t.calcCustomScrollEl},on:{"date-change":t.dateChange,input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectPackage:t.selectPackage,directionChange:t.directionChange}})],1)],1),t._v(" "),n("PackageDetail",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone&&!t.showTagFilterNone,expression:"!showFilterNone && !showTagFilterNone"}],ref:"pkgDetailRef",staticClass:"js-goto-pkg-detail radius8-style js-package-detail-for-swiper",attrs:{"wait-time":55,direction:t.attrDirection,"pkg-detail":t.pkgDetail,preview:t.calcPreview,"package-id":t.packageId,"cache-pkg-detail":!0,"expand-all":!1,"state-timeout":t.$route.query.pkg_detail_state_timeout||100,"is-enable-swiper-mode":!0,"is-enable-first-fade-in":!0,"style-type":"hide-init-collapse-transition"},on:{mounted:t.initStatus}}),t._v(" "),n("BottomBar",{attrs:{"package-schedules-state":t.packageSchedulesAndUnitsApiDefined.state,spec:t.specList,"chosen-attr-ids":t.chosenAttrIds,"package-id":t.packageId,schedule:t.schedule2self,"selected-package":t.calcPkgSelectedObj,date:t.pkgSelectedDate,"activity-id":t.activityId,"is-support-shopping-cart":t.isSupportShoppingCart,packages:t.packageList,reopen:t.calcReopenObj,"basic-data":t.calcBasicData,"click-custom-fn":t.clickCustomFn}}),t._v(" "),n("PackageOptionsBooking",t._b({ref:"activityBookingRef",attrs:{"package-id":t.bookingCoreData.packageId,"from-type":t.currentBtnType,"show-shopping-cart":t.showShoppingCart},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"PackageOptionsBooking",t.bookingCoreData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"7befaa7f",null).exports),Vt=n(891),Ft=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Wt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bookingCoreData={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){var t=this.businessData,e=this.basicData,n=this.$route;this.bookingCoreData=Vt.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return Vt.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);Wt.displayName="MobilePackage_options_spec_type_left";var Ht=Wt=Ft([Object(f.Component)({components:{MobilePackageOptionsSpecTypeLeft:Nt}})],Wt),Ut=Object(L.a)(Ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("MobilePackageOptionsSpecTypeLeft",t._b({attrs:{"package-id":t.bookingCoreData.packageId},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"MobilePackageOptionsSpecTypeLeft",t.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=Ut.exports},,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(30);var o=n(0),r=(n(23),n(4)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(9),k=n(131),O=n(882),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).lockScroll=!1,t.attributesObserver=null,t.packagListObserver=null,t.listCardObserver=null,t.shouldShowPanel=!1,t.attributesSelector=".group-swiper-attributes",t.packageListSelector=".package_options_group",t.listCardSelector=".group-list",t.flag=!0,t.scrollOffset=160,t}var n;return Object(f.a)(e,t),Object(l.a)(e,[{key:"shouldShowPanelChange",value:function(t){O.a.$emit("toggleGlobalHeaderVisible",!t)}},{key:"createSwiperObserver",value:function(){var t=this;if("IntersectionObserver"in window){var e=this.attributesSelector,n=this.packageListSelector,o=document.querySelector(e),r=document.querySelector(n);o&&!this.packagListObserver&&r&&(this.packagListObserver=new IntersectionObserver((function(e){e.forEach((function(e){var n;e.intersectionRatio>0?(null===(n=o)||void 0===n?void 0:n.getBoundingClientRect().top)<0&&(t.shouldShowPanel=!0):t.shouldShowPanel=!1}))}),{threshold:[0,1]}),this.packagListObserver.observe(r)),r&&!this.attributesObserver&&o&&(this.attributesObserver=new IntersectionObserver((function(e){e.forEach((function(e){var n;0===e.intersectionRatio?(null===(n=r)||void 0===n?void 0:n.getBoundingClientRect().top)<0&&(t.shouldShowPanel=!0):t.shouldShowPanel=!1}))}),{rootMargin:"-60px 0px 0px",threshold:[0,.2,.4,.6,.8,1]}),this.attributesObserver.observe(o))}}},{key:"getVisibleTop",value:function(t){return t.getBoundingClientRect().top}},{key:"onScroll",value:function(){if(!this.lockScroll){var t=this.getCurrentIndexOnScroll(),e=this.list[t].value;this.setActive(e)}}},{key:"getCurrentIndexOnScroll",value:function(){for(var t=0;t<this.list.length;t++){var e=this.list[t],element=document.getElementById("group-render-list-".concat(e.value));if(element)if(this.getVisibleTop(element)>this.scrollOffset)return 0===t?0:t-1}return this.list.length-1}},{key:"destroySwiperObserver",value:function(){var t=this.attributesSelector,e=this.packageListSelector;if(this.attributesObserver){var n=this.$el.querySelector(t);n&&this.attributesObserver.unobserve(n)}if(this.packagListObserver){var o=document.querySelector(e);o&&this.packagListObserver.unobserve(o)}}},{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createSwiperObserver();case 2:document.addEventListener("scroll",this.throttleScroll);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"beforeDestroy",value:function(){this.destroySwiperObserver(),document.removeEventListener("scroll",this.throttleScroll)}},{key:"list",get:function(){return this.swiperList}},{key:"throttleScroll",get:function(){return Object(k.throttle)(this.onScroll,200)}}]),e}(m.Vue);_([Object(m.Prop)()],j.prototype,"swiperList",void 0),_([Object(m.Prop)()],j.prototype,"activeKey",void 0),_([Object(m.Prop)()],j.prototype,"activityId",void 0),_([Object(m.Prop)()],j.prototype,"setActive",void 0),_([Object(m.Watch)("shouldShowPanel",{immediate:!0})],j.prototype,"shouldShowPanelChange",null);var w=j=_([m.Component],j),P=n(1932),C=n.n(P),S=(n(273),n(70),n(212)),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).visiable=!1,t.showAll=!1,t.isTextOverflowed=!1,t.eleList=[],t.height="66px",t.navWidth=38,t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"scrollwith",value:function(t){this.tagScroll(t)}},{key:"checkScroll",value:function(t){var e=this;t&&(this.checkTextOverflow(),setTimeout((function(){e.tagScroll(e.activeKey)}),300))}},{key:"checkTextOverflow",value:function(){var t=this.$refs.list,e=0,n=!1;this.eleList.forEach((function(element){var t;element&&((null===(t=element.firstElementChild)||void 0===t?void 0:t.clientWidth)>=174&&(n=!0),e=e+element.clientWidth+12)})),this.isTextOverflowed=n,this.height=n?"66px":"45px",this.shouldShowPanel?this.showAll=t.clientWidth-e+12<0:this.showAll=t.clientWidth-e+12-this.navWidth<0}},{key:"reset",value:function(t){this.$emit("update:lockScroll",!0),this.onItemlick(t)}},{key:"mounted",value:function(){var t=this;this.eleList=this.list.map((function(t){return document.getElementById("group-swiper-listItem-".concat(t.value))})),this.calculateNavWidth(),O.a.$on("group-on-active",this.reset),this.$nextTick((function(){t.checkTextOverflow()}))}},{key:"beforeDestroy",value:function(){O.a.$off("changeDestination",this.reset)}},{key:"onItemlick",value:function(t){var e=this;this.setActive(t),this.$emit("update:lockScroll",!0),this.$nextTick((function(){e.listScroll(t)}))}},{key:"scroll",value:function(t){var e=this;setTimeout((function(){e.listScroll(t)}),100)}},{key:"scrollLeftTo",value:function(t,e,n){var o=0,r=t.scrollLeft,c=0===n?1:Math.round(1e3*n/16);!function animate(){t.scrollLeft+=(e-r)/c,++o<c&&window.requestAnimationFrame(animate)}()}},{key:"tagScroll",value:function(t){if(this.showAll){var e=this.$refs.list,element=this.eleList.find((function(e){return e.id==="group-swiper-listItem-".concat(t)}));if(element){var n=e.offsetWidth-this.navWidth,o=element.offsetWidth,r=element.offsetLeft-(n-o)/2;this.scrollLeftTo(e,r,.2)}}}},{key:"listScroll",value:function(t){var e=this,element=document.getElementById("group-render-list-".concat(t));if(element){var n=this.list.findIndex((function(e){return e.value===t})),o=0,r=document.getElementById("package_options_group");o=0===n?Object(S.c)(r):Object(S.c)(element)-(this.isTextOverflowed?88:66),Object(S.d)({scrollY:o,duration:150,callback:function(){e.$emit("update:lockScroll",!1)}})}}},{key:"getSpm",value:function(t,e,n){var o={GroupTitle:t.name,Groupid:t.track_id};return"GroupOption_LIST?&oid=group_".concat(t.track_id,"&ext=").concat(JSON.stringify(o),"&idx=").concat(e,"&len=").concat(n,"&mod=stop&evt=click")}},{key:"getSpmListItem",value:function(t,e,n){var o={GroupTitle:t.name};return"PackageGroup_LIST?oid=group_".concat(t.track_id,"&ext=").concat(JSON.stringify(o),"&mod=stop&evt=click&trg=manual&idx=").concat(e,"&len=").concat(n,"&mod=stop&evt=click")}},{key:"open",value:function(){this.visiable=!0}},{key:"onItemListlick",value:function(t){var e=this;this.setActive(t),this.visiable=!1,this.$emit("update:lockScroll",!0),setTimeout((function(){e.listScroll(t)}),400)}},{key:"calculateNavWidth",value:function(){var text=this.$t("389"),t=document.createElement("span");t.style.visibility="hidden",t.style.position="absolute",t.style.whiteSpace="nowrap",t.style.lineHeight="1",t.style.fontSize="14px",t.textContent=text,document.body.appendChild(t);var e=t.offsetWidth;e<24&&(e=24),e>54&&(e=54),document.body.removeChild(t),this.navWidth=e+18}},{key:"getStyles",get:function(){return this.showAll?{width:"calc(100% - ".concat(this.navWidth+4,"px)")}:{}}}]),e}(m.Vue);D([Object(m.Prop)()],x.prototype,"update",void 0),D([Object(m.Prop)()],x.prototype,"shouldShowPanel",void 0),D([Object(m.Prop)()],x.prototype,"activeKey",void 0),D([Object(m.Prop)()],x.prototype,"activityId",void 0),D([Object(m.Prop)()],x.prototype,"list",void 0),D([Object(m.Prop)()],x.prototype,"setActive",void 0),D([Object(m.Watch)("activeKey")],x.prototype,"scrollwith",null),D([Object(m.Watch)("shouldShowPanel")],x.prototype,"checkScroll",null);var T=x=D([Object(m.Component)({components:{IconTriangleDown:C.a}})],x),I=(n(2552),n(43)),R=Object(I.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-swiper"},[n("div",{ref:"list",staticClass:"group-swiper-list",style:t.getStyles},t._l(t.list,(function(e,o){return n("div",{key:e.value,class:["group-swiper-listItem",{"group-swiper-active":e.value==t.activeKey}],style:{height:t.height},attrs:{id:"group-swiper-listItem-"+e.value,"data-spm-module":t.getSpm(e,o,t.list.length),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return n.stopPropagation(),t.onItemlick(e.value)}}},[n("div",{staticClass:"group-swiper-conent"},[t._v("\n        "+t._s(e.label)+"\n      ")])])})),0),t._v(" "),t.showAll?n("div",{staticClass:"group-swiper-buttonWarp",attrs:{"data-spm-module":"GroupOptionAll?trg=manual","data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[n("div",{staticClass:"group-swiper-button"},[n("div",{staticClass:"group-swiper-all"},[t._v(t._s(t.$t("389")))]),t._v(" "),n("IconTriangleDown",{attrs:{theme:"filled",size:"24"}})],1)]):t._e(),t._v(" "),t.visiable?n("klk-bottom-sheet",{attrs:{"data-spm-page":"PackageGroups?oid=activity_"+t.activityId,"show-close":"",visible:t.visiable,title:t.$t("100506")},on:{"update:visible":function(e){t.visiable=e}}},[n("ul",{staticClass:"list"},t._l(t.list,(function(e,o){return n("li",{key:e.value,class:["list-item",{"list-item-active":e.value==t.activeKey}],attrs:{"data-spm-module":t.getSpmListItem(e,o,t.list.length),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return n.stopPropagation(),t.onItemListlick(e.value)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),0)]):t._e()],1)}),[],!1,null,"500fac8a",null).exports,$=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).lockScroll=!1,t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"list",get:function(){return this.swiperList}},{key:"title",get:function(){return this.$t("100502",{num:this.list.length})}}]),e}(w);$([Object(m.Prop)()],L.prototype,"swiperList",void 0),$([Object(m.Prop)()],L.prototype,"activeKey",void 0),$([Object(m.Prop)()],L.prototype,"activityId",void 0),$([Object(m.Prop)()],L.prototype,"setActive",void 0);var A=L=$([Object(m.Component)({components:{GroupSwiperList:R}})],L),E=(n(2553),Object(I.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"group-swiper-wapper"},[n("div",{staticClass:"group-swiper-title"},[t._v(t._s(t.title))]),t._v(" "),n("GroupSwiperList",{staticClass:"group-swiper-attributes",attrs:{list:t.list,"active-key":t.activeKey,"set-active":t.setActive,"activity-id":t.activityId,"lock-scroll":t.lockScroll},on:{"update:lockScroll":function(e){t.lockScroll=e},"update:lock-scroll":function(e){t.lockScroll=e}}}),t._v(" "),n("Transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowPanel,expression:"shouldShowPanel"}],staticClass:"nav-fixed"},[n("GroupSwiperList",{attrs:{list:t.list,"active-key":t.activeKey,"set-active":t.setActive,"should-show-panel":t.shouldShowPanel,"activity-id":t.activityId,"lock-scroll":t.lockScroll},on:{"update:lockScroll":function(e){t.lockScroll=e},"update:lock-scroll":function(e){t.lockScroll=e}}})],1)])],1)}),[],!1,null,"1450363a",null).exports),M=(n(20),n(27),n(1602)),B=n.n(M),N=(n(47),n(2555)),V=n.n(N),F=n(2051),W=(n(28),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),H=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"fromPrice",get:function(){var t,e,n=this.$t("activity_detail_from_price",[14,this.priceData.from_price]);return this.isDisable?(null===(t=this.priceData)||void 0===t?void 0:t.from_price)?n.replace("#333333","#A8A8A8"):"":(null===(e=this.priceData)||void 0===e?void 0:e.from_price)?n:""}}]),e}(y.Vue);W([Object(y.Prop)({type:Object,default:function(){return{}}})],H.prototype,"priceData",void 0),W([Object(y.Prop)({type:Number,default:14})],H.prototype,"priceFromFontSize",void 0),W([Object(y.Prop)({type:Boolean,default:!1})],H.prototype,"isSoldOut",void 0),W([Object(y.Prop)({type:Boolean,default:!1})],H.prototype,"isDisable",void 0);var U=H=W([y.Component],H),z=(n(2554),Object(I.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price"},[n("div",[t.priceData.from_price?n("div",{class:["price-sale-price",{disabedText:t.isDisable}],domProps:{innerHTML:t._s(t.fromPrice)}}):t._e(),t._v(" "),t.priceData.sale_price?n("div",{class:["price-sale-price",{disabedText:t.isDisable}]},[n("span",[t._v(t._s(t.priceData.sale_price))])]):t._e(),t._v(" "),t.priceData.save_price?n("div",{class:["price-save-price",{disabedText:t.isDisable}]},[t._v("\n      "+t._s(t.priceData.save_price)+"\n    ")]):t._e(),t._v(" "),t.priceData.underline_price?n("div",{class:["price-underline-price",{disabedText:t.isDisable}]},[n("span",[t._v(" "+t._s(t.priceData.underline_price)+" ")])]):t._e()])])}),[],!1,null,"2fb8e05e",null).exports),G=n(887),Y=n(1012),K=n(1117),J=n(883),X=n(2021),Q=n(1851),Z=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},tt=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).detailShow=!1,t.loading=!1,t.packageSchedulesUnitsMap={},t}var n;return Object(f.a)(e,t),Object(l.a)(e,[{key:"reload",value:function(){window&&window.location.reload()}},{key:"goDetail",value:function(){this.detailShow=!0}},{key:"bookHanlder",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isDisable){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.next=5,this.getPackageSchedulesUnits(this.packageData.package_id);case 5:n=t.sent,o=n.units,this.loading=!1,o&&o.length>0&&(this.toBook(null===(e=o[0])||void 0===e?void 0:e.sku_id,this.packageData.package_id,"".concat(this.packagesGroupDesc.name,"·").concat(this.packageName)),this.$inhouse.track("action",this.$refs.card));case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.packageData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"priceData",get:function(){var t;return(null===(t=this.packageData)||void 0===t?void 0:t.price_show)||{}}},{key:"calcTags2discount",get:function(){var t,e,n,o,r=(null===(e=null===(t=this.packageData)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],c=[];if(null===(n=r)||void 0===n?void 0:n.length){var l=r.filter((function(t){var e,n,o,r,c,l,d=(null===(e=t)||void 0===e?void 0:e.inner_vars)||{};return!(null===(o=null===(n=d)||void 0===n?void 0:n.inner)||void 0===o?void 0:o.derivation_info)||!(null===(l=null===(c=null===(r=d)||void 0===r?void 0:r.inner)||void 0===c?void 0:c.derivation_info)||void 0===l?void 0:l.is_derived)}));(null===(o=l)||void 0===o?void 0:o.length)&&l.forEach((function(t){var e,n,o;(null===(o=null===(n=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===n?void 0:n.rate_plan)||void 0===o?void 0:o.count_down_end_time)?Object(G.c)(t.inner_vars.rate_plan.count_down_end_time)&&c.push(t):c.push(t)}))}return c}},{key:"cutDownTimeList",get:function(){var t,e=this.calcTags2discount,n=[];return(null===(t=e)||void 0===t?void 0:t.length)&&e.forEach((function(t){var e,o,r,c=null===(r=null===(o=null===(e=t)||void 0===e?void 0:e.inner_vars)||void 0===o?void 0:o.rate_plan)||void 0===r?void 0:r.count_down_end_time;c&&n.push(c)})),n}},{key:"event",get:function(){var t,e;return null===(e=null===(t=this.packageData)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}},{key:"packageGroupInfor",get:function(){var t=this;return(this.packageDescList||[]).find((function(e){return e.package_id===t.packageData.package_id}))||this.packageData}},{key:"packageName",get:function(){return this.packageGroupInfor.package_name||this.packageData.package_name}},{key:"packageDesc",get:function(){var t;return(null===(t=this.packageGroupInfor)||void 0===t?void 0:t.package_desc)||[]}}]),e}(n(1693).a);Z([Object(y.Prop)({type:Boolean,default:!1})],tt.prototype,"isPassActivity",void 0),Z([Object(y.Prop)()],tt.prototype,"toBook",void 0),Z([Object(y.Prop)()],tt.prototype,"packageData",void 0),Z([Object(y.Prop)()],tt.prototype,"packageDescList",void 0),Z([Object(y.Prop)()],tt.prototype,"activityId",void 0),Z([Object(y.Prop)({type:Boolean,default:!1})],tt.prototype,"isDisable",void 0),Z([Object(y.Prop)()],tt.prototype,"getPackageSchedulesUnits",void 0),Z([Object(y.Prop)({default:{}})],tt.prototype,"packagesGroupDesc",void 0);var et=tt=Z([Object(y.Component)({components:{ExpTagging:J.default,WarmingSlogan:Y.a,ExperiencePackageDetailModule:K.a,CutDown:F.default,PackageCardContent:X.a,PriceAndButton:Q.a,IconCalendarUnavailable:V.a,Price:z}})],tt),it=(n(2556),Object(I.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"card",staticClass:"card"},[t.isDisable?n("div",{staticClass:"card-disabledwaring",on:{click:function(e){return e.stopPropagation(),t.goDetail(e)}}},[n("IconCalendarUnavailable",{attrs:{theme:"outline",size:"12"}}),t._v(" "),n("span",{staticClass:"card-disabledwaring-content"},[t._v("\n      "+t._s(t.$t("activity.date.unavailable"))+"\n    ")])],1):t._e(),t._v(" "),n("div",{staticClass:"card-top",attrs:{"data-spm-item":"PackageDetail?oid=package_"+t.packageData.package_id},on:{click:function(e){return e.stopPropagation(),t.goDetail(e)}}},[n("div",{class:["card-top-cardName",{disabedText:t.isDisable}]},[t._v("\n      "+t._s(t.packageName)+"\n    ")]),t._v(" "),n("div",{staticClass:"card-top-detailBtn"},[t._v("\n      "+t._s(t.$t("12686"))+"\n    ")])]),t._v(" "),n("div",{on:{click:function(e){return e.stopPropagation(),t.bookHanlder(e)}}},[n("div",{staticClass:"card-body"},[t.calcTags2attribute.length>0?n("ExpTagging",{class:["card-body-taglist",{disabledTag:t.isDisable}],attrs:{list:t.calcTags2attribute,line:1}}):t._e(),t._v(" "),t.calcTags2discount.length>0?n("ExpTagging",{class:["card-body-priceList",{disabledTag:t.isDisable}],attrs:{list:t.calcTags2discount,line:1}}):t._e(),t._v(" "),t.cutDownTimeList.length>0?n("CutDown",{class:["card-body-cutDown",{"card-body-cutDown-disabled":t.isDisable}],attrs:{"time-list":t.cutDownTimeList,size:"small",disabled:t.isDisable},on:{reload:t.reload}}):t._e(),t._v(" "),t.packageDesc.length>0?n("ul",{class:["card-body-list",{disabedText:t.isDisable}]},t._l(t.packageDesc,(function(e){return n("li",{key:e},[n("span",{class:["disc",{"disc-disabled":t.isDisable}]}),t._v("\n          "+t._s(e)+"\n        ")])})),0):t._e()],1),t._v(" "),n("div",{class:["card-footer",{disabedText:t.isDisable}]},[n("div",{staticClass:"card-footer-left"},[n("Price",{attrs:{"price-data":t.priceData,"is-disable":t.isDisable}})],1),t._v(" "),n("klk-button",{attrs:{type:"secondary",size:"small",disabled:t.isDisable}},[t._v("\n        "+t._s(t.$t("73626"))+"\n      ")])],1)]),t._v(" "),t.detailShow?n("ExperiencePackageDetailModule",{staticClass:"card-header-detail",attrs:{"group-pack-name":t.packagesGroupDesc.name+"·"+t.packageName,"expand-itinerary-section":!0,"package-data":Object.assign({},t.packageData||{},{isPassActivity:t.isPassActivity}),"data-spm-module":"PackageDetailsPopups?oid=package_"+t.packageData.package_id},on:{close:function(e){t.detailShow=!1}}}):t._e()],1)}),[],!1,null,"f75b7686",null).exports),nt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},at=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).close=!1,t.state="success",t.height="auto",t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"toggleChange",value:function(){var t=this;this.close=!this.close,this.$nextTick((function(){t.close&&O.a.$emit("group-on-active",t.packagesGroupDesc.track_id)}))}},{key:"isDisable",value:function(t){return!this.packagesInSchedule.map((function(t){return t.package_id})).includes(t)}},{key:"getSpm",value:function(t,e,n){var o={GroupTitle:this.packagesGroupDesc.name,Groupid:this.packagesGroupDesc.track_id};return"PackageType_LIST?oid=package_".concat(t.package_id,"&idx=").concat(e,"&len=").concat(n,"&ext=").concat(JSON.stringify(o),"&mod=stop&evt=click&trg=manual")}},{key:"mounted",value:function(){this.close=0!==this.index}},{key:"packagesGroupDescList",get:function(){return this.packagesGroupDesc.desc||[]}},{key:"id",get:function(){return"group-render-list-".concat(this.packagesGroupDesc.track_id)}},{key:"limitedAvailablePackageList",get:function(){var t=this.packagesInSchedule.map((function(t){return t.package_id})),e=function(pre,e){return Number(t.includes(e.package_id))-Number(t.includes(pre.package_id))};return this.close?this.packages.sort(e).slice(0,1):this.packages.sort(e)}},{key:"total",get:function(){var t;return(null===(t=null===this||void 0===this?void 0:this.packages)||void 0===t?void 0:t.length)||0}},{key:"showMore",get:function(){return this.$t("100504",{num:this.total-1})}},{key:"showLess",get:function(){return this.$t("17843")}}]),e}(y.Vue);nt([Object(y.Prop)({default:0})],at.prototype,"preview",void 0),nt([Object(y.Prop)()],at.prototype,"date",void 0),nt([Object(y.Prop)({default:{}})],at.prototype,"packagesGroupDesc",void 0),nt([Object(y.Prop)({default:[]})],at.prototype,"packageDescList",void 0),nt([Object(y.Prop)()],at.prototype,"packages",void 0),nt([Object(y.Prop)()],at.prototype,"packagesInSchedule",void 0),nt([Object(y.Prop)()],at.prototype,"toBook",void 0),nt([Object(y.Prop)()],at.prototype,"index",void 0),nt([Object(y.Prop)()],at.prototype,"activityId",void 0),nt([Object(y.Prop)()],at.prototype,"getPackageSchedulesUnits",void 0);var ot=at=nt([Object(y.Component)({components:{PackageCard:it,IconChevronDown:B.a}})],at),ct=(n(2557),Object(I.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"group-list",style:{maxHeight:t.height},attrs:{id:t.id}},[n("div",{staticClass:"group-list-top"},[n("div",{staticClass:"group-list-title"},[t._v("\n      "+t._s(t.packagesGroupDesc.name)+"\n    ")]),t._v(" "),t._l(t.packagesGroupDescList,(function(e){return n("div",{key:e,staticClass:"group-list-type"},[t._v("\n      "+t._s(e)+"\n    ")])}))],2),t._v(" "),n("div",{ref:"listRef",staticClass:"group-list-body package-card-list-content"},t._l(t.limitedAvailablePackageList,(function(e,o){return n("PackageCard",{key:e.package_id,attrs:{"package-data":e,"package-desc-list":t.packageDescList,"packages-group-desc":t.packagesGroupDesc,"is-disable":t.isDisable(e.package_id),"publish-info":e.publish_info,"to-book":t.toBook,"activity-id":t.activityId,"get-package-schedules-units":t.getPackageSchedulesUnits,"data-spm-module":t.getSpm(e,o,t.limitedAvailablePackageList.length),"data-spm-virtual-item":"__virtual"}})})),1),t._v(" "),t.total>1?n("div",{staticClass:"group-list-footer",on:{click:t.toggleChange}},[t.close?n("div",{staticClass:"group-list-footer-button"},[n("span",[t._v(" "+t._s(t.showMore))]),t._v(" "),n("IconChevronDown",{staticClass:"show-package-icon",attrs:{theme:"outline",size:"20"}})],1):n("div",{staticClass:"group-list-footer-button"},[n("span",[t._v("\n        "+t._s(t.$t("17843"))+"\n      ")]),t._v(" "),n("IconChevronDown",{staticClass:"show-package-icon up",attrs:{theme:"outline",size:"20"}})],1)]):n("div",{staticClass:"group-list-total"})])}),[],!1,null,"11c2a462",null).exports),st=n(1167),lt=n(1850),ut=n(2068),pt=n(13),vt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ft=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getPackages",value:function(t){var e=(t||[]).map((function(t){return t.package_id}));return this.packages.filter((function(t){return e.includes(t.package_id)}))}},{key:"packagesInSchedule",get:function(){var t,e=this,n=null===(t=this.schedule.find((function(t){return t.date===e.date})))||void 0===t?void 0:t.stocks;return n?n.reduce((function(t,n){var o=n.stock,r=n.package_id;if(0===o)return t;var c=e.packages.find((function(p){return p.package_id===r}));return c&&(c.status="available"),[].concat(Object(pt.a)(t),[c])}),[]):this.packages}},{key:"packageDescList",get:function(){return(this.packagesInfo||[]).reduce((function(t,e){return t.concat(e.packages||[])}),[])}}]),e}(y.Vue);vt([Object(y.Prop)()],ft.prototype,"packages",void 0),vt([Object(y.Prop)()],ft.prototype,"schedule",void 0),vt([Object(y.Prop)()],ft.prototype,"packagesInfo",void 0),vt([Object(y.Prop)()],ft.prototype,"date",void 0);var ht=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},gt=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).state="success",t}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getPackageInfo",value:function(){}},{key:"getSpm",value:function(t,e,n){var o=t.group,r=(t.packages||[]).map((function(t){return t.package_id})),c=this.packages.filter((function(t){return r.includes(t.package_id)})).length,l={GroupTitle:o.name,Groupid:o.track_id,PackageNumber:c};return"PackageGroup_LIST?idx=".concat(e,"&len=").concat(n,"&oid=group_").concat(o.track_id,"&ext=").concat(JSON.stringify(l))}}]),e}(ft=vt([y.Component],ft));ht([Object(y.Prop)({default:0})],gt.prototype,"preview",void 0),ht([Object(y.Prop)()],gt.prototype,"packageId",void 0),ht([Object(y.Prop)()],gt.prototype,"activityId",void 0),ht([Object(y.Prop)()],gt.prototype,"toBook",void 0),ht([Object(y.Prop)()],gt.prototype,"getPackageSchedulesUnits",void 0),ht([Object(y.Prop)()],gt.prototype,"packagesInfo",void 0);var bt=gt=ht([Object(y.Component)({inheritAttrs:!1,components:{EmptyStatus:ut.a,PackageCardPlaceholderList:lt.a,PackageDetailFailure:st.a,RenderList:ct}})],gt),yt=(n(2558),Object(I.a)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-package-warplist",attrs:{id:"group-package-warplist"}},["success"===t.state?t._l(t.packagesInfo,(function(e,o){return n("RenderList",{key:o,attrs:{index:o,packages:t.getPackages(e.packages),"packages-group-desc":e.group,"package-desc-list":t.packageDescList,"packages-in-schedule":t.packagesInSchedule,schedule:t.schedule,date:t.date,preview:t.preview,"get-package-schedules-units":t.getPackageSchedulesUnits,"to-book":t.toBook,"activity-id":t.activityId,"data-spm-module":t.getSpm(e,o,t.packagesInfo.length),"data-spm-virtual-item":"__virtual?&mod=stop"}})})):"failure"===t.state?n("PackageDetailFailure",{staticClass:"calendar-failure",on:{"fetch-detail":t.getPackageInfo}}):n("div",{staticClass:"placeholderList"},[n("PackageCardPlaceholderList",{staticStyle:{"margin-top":"12px"}}),t._v(" "),n("PackageCardPlaceholderList",{staticStyle:{"margin-top":"12px"}}),t._v(" "),n("PackageCardPlaceholderList",{staticStyle:{"margin-top":"12px"}})],1)],2)}),[],!1,null,"1d006d82",null).exports),mt=n(1104),kt=n(880),Ot=n(1750),_t=n(1916),jt=n(1411),wt=n(982),Pt=n(1253);function Ct(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var St=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Dt=Object(y.namespace)("traveller/activity"),xt=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).activeKey=0,t.packagesWithSkuByDate=null,t}var n;return Object(f.a)(e,t),Object(l.a)(e,[{key:"getActivityIdAndPackageId",value:function(t){return{activity_id:this.activityId,package_id:t}}},{key:"setActive",value:function(t){this.activeKey=t}},{key:"toBook",value:function(t,e,n){this.activityBookingRef.open({date:this.date,packageId:e,skuId:t,packageName:n})}},{key:"initGroupSwiper",value:function(){this.swiperList[0]&&(this.activeKey=this.swiperList[0].value)}},{key:"setCalendarDate",value:function(t){this.date=t}},{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSchedules();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"dateVisible",get:function(){return!(3===this.businessData.activity_ticket_type)}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"isLinePage",get:function(){var t,e,n;return null!=(n=null===(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)||void 0===e?void 0:e.is_line_page)&&n}},{key:"showOpendateByPackages",get:function(){var t;return(null===(t=this.packages)||void 0===t?void 0:t.length)>1}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}},{key:"packagesInfo",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.package_group_info)||[]}},{key:"packages",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.packages)||[]}},{key:"pickupDateDescription",get:function(){return this.businessData.date_description}},{key:"isNewOpenTicket",get:function(){return 3===(this.businessData||{}).activity_ticket_type}},{key:"swiperList",get:function(){var t;return((null===(t=this.businessData)||void 0===t?void 0:t.package_group_info)||[]).map((function(t){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ct(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ct(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({label:t.group.name,value:t.group.track_id},t.group)}))}}]),e}(Object(y.mixins)(mt.a,Ot.a,kt.a));xt.displayName="Package_options_group",St([Dt.State],xt.prototype,"tagFilter2state",void 0),St([Object(y.Ref)()],xt.prototype,"activityBookingRef",void 0);var Tt=xt=St([Object(y.Component)({components:{PackageOptionsBooking:_t.default,GroupPackageList:yt,GroupSwiper:E,CardBottomBar:jt.default,ShoppingCart:wt.default,PackageOptionsCalendarWrap:Pt.default}})],xt),It=(n(2559),Object(I.a)(Tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package_options_group"},[n("div",{staticClass:"group-package-top"},[t.isNewOpenTicket||t.isLinePage||t.isSchedulesNoData?t._e():n("PackageOptionsCalendarWrap",{staticClass:"package-options-group-calendar",attrs:{state:t.schedulesState,schedules:t.schedules,warn:t.pickupDateDescription},on:{reload:t.getSchedules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t.packagesInfo.length>0?n("GroupSwiper",{attrs:{"swiper-list":t.swiperList,"active-key":t.activeKey,"activity-id":t.activityId,"set-active":t.setActive}}):t._e()],1),t._v(" "),t.packagesInfo.length>0?n("GroupPackageList",{staticClass:"group-package-list-warp",attrs:{"packages-info":t.packagesInfo,packages:t.packages,schedule:t.schedules,"activity-id":t.activityId,date:t.date,preview:t.preview,"package-data":t.businessData,"to-book":t.toBook,"get-package-schedules-units":t.getPackageSchedulesUnits}}):t._e(),t._v(" "),n("PackageOptionsBooking",{ref:"activityBookingRef",attrs:{"business-data":t.businessData,preview:t.preview,"show-shopping-cart":t.showShoppingCart},on:{updateDate:t.setCalendarDate}}),t._v(" "),n("CardBottomBar",t._b({attrs:{"observe-target":".package_options_group",activity_price:t.businessData.activity_closer_price,"basic-data":t.basicData}},"CardBottomBar",t.businessData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"525e428c",null));e.default=It.exports},,function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleClick",value:function(){this.tip&&(this.visible=!0)}},{key:"backgroundStyle",get:function(){return{background:this.background}}}]),e}(h.Vue);y([Object(h.Prop)()],m.prototype,"content",void 0),y([Object(h.Prop)()],m.prototype,"icon",void 0),y([Object(h.Prop)({default:"#00B371;"})],m.prototype,"background",void 0),y([Object(h.Prop)()],m.prototype,"tip",void 0);var k=m=y([h.Component],m),O=(n(2620),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-usp-tag",style:t.backgroundStyle,on:{click:t.handleClick}},[t.icon?n("svg-icon",{staticClass:"activity-usp-tag_icon",attrs:{size:"16",name:t.icon,color:"#fff"}}):t._e(),t._v(" "),n("span",{staticClass:"activity-usp-tag_content",domProps:{innerHTML:t._s(t.content)}}),t._v(" "),n("svg-icon",{staticClass:"activity-usp-tag_icon",attrs:{size:"16",name:"common#icon_tips_tips_xs",color:"#fff"}}),t._v(" "),t.tip?n("klk-modal",{attrs:{title:t.tip.title,"title-align":"center","button-align":"block",open:t.visible,"show-cancel-button":!1},on:{"update:open":function(e){t.visible=e},"on-confirm":function(e){t.visible=!1}}},[n("div",{staticClass:"klk-modal-content"},[t._v("\n      "+t._s(t.tip.content)+"\n    ")])]):t._e()],1)}),[],!1,null,"486f3035",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getExtra",value:function(t){return JSON.stringify({Text:t.text,type:this.type})}},{key:"len",get:function(){return this.tagList.length}}]),e}(h.Vue);j([Object(h.Prop)()],w.prototype,"tagList",void 0),j([Object(h.Prop)()],w.prototype,"type",void 0);var P=w=j([Object(h.Component)({components:{UspTag:_}})],w),C=(n(2621),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tagList&&t.tagList.length?n("div",{staticClass:"normal-usp-tag"},t._l(t.tagList,(function(e,o){return n("UspTag",t._b({key:e.content,staticClass:"normal-usp-tag_item",attrs:{"data-spm-module":"UspTagList?idx="+o+"&len="+t.len+"&ext="+t.getExtra(e),"data-spm-virtual-item":"__virtual"}},"UspTag",e,!1))})),1):t._e()}),[],!1,null,"57f2b6fa",null).exports),S=(n(52),n(53),n(37),n(47),n(85)),D=n(16),x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"priceText",value:function(t){return"".concat(S.b[this.klook.currency]," ").concat(Object(D.y)(t))}},{key:"sellingPriceText",get:function(){return this.fromPrice?this.$t("activity_detail_from_price",[14,this.priceText(this.fromPrice)]):this.sellingPrice?"<b>".concat(this.priceText(Number(this.sellingPrice)),"</b>"):void 0}}]),e}(h.Vue);x([h.State],T.prototype,"klook",void 0),x([Object(h.Prop)()],T.prototype,"sellingPrice",void 0),x([Object(h.Prop)()],T.prototype,"fromPrice",void 0),x([Object(h.Prop)()],T.prototype,"toPrice",void 0),x([Object(h.Prop)()],T.prototype,"marketPrice",void 0),x([Object(h.Prop)()],T.prototype,"specPriceDesc",void 0);var I=T=x([h.Component],T),R=(n(2622),Object(O.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-price"},[t.sellingPriceText?n("div",{staticClass:"price-package"},[n("span",{staticClass:"price-package-selling-price",domProps:{innerHTML:t._s(t.sellingPriceText)}}),t._v(" "),1*t.marketPrice>1*t.sellingPrice?n("span",{staticClass:"price-package-marketPrice"},[t._v("\n      "+t._s(t._f("currencyToSymbol")(t.klook.currency))+"\n      "+t._s(t._f("formatThousands")(t.marketPrice))+"\n    ")]):t._e()]):n("div",{staticClass:"price-package"},[t._v("\n    "+t._s(t.specPriceDesc)+"\n  ")])])}),[],!1,null,null,null).exports),$=n(1433),L=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"getPriceDiff",value:function(a,b){return(100*a-100*b)/100}},{key:"marketPrice",get:function(){return this.price.market_price}},{key:"sellingPrice",get:function(){return this.price.selling_price}},{key:"fromPrice",get:function(){return this.price.from_price}},{key:"priceDesc",get:function(){return this.price.price_desc}},{key:"priceDiff",get:function(){var t;if(this.marketPrice){var e=Number(this.marketPrice),n=Number(this.fromPrice),o=this.getPriceDiff(e,n);if(!(o<=0)){var r=(null===(t=this.fromPrice.toString().split(".")[1])||void 0===t?void 0:t.length)||0;o=o.toFixed(r);var c="".concat(S.b[this.klook.currency]," ").concat(Object(D.y)(o));return this.$t("26260",{crossedregularprice_sellingprice:c})}}}}]),e}(h.Vue);L([h.State],A.prototype,"klook",void 0),L([Object(h.Prop)()],A.prototype,"price",void 0);var E=A=L([Object(h.Component)({components:{ActivityPrice:R,UspBanner:$.a}})],A),M=(n(2623),n(2624),Object(O.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("UspBanner",t._b({staticClass:"best-price-usp-banner"},"UspBanner",t.$attrs,!1),[n("div",{staticClass:"attraction-usp-banner_price"},[n("ActivityPrice",{staticClass:"attraction-usp-banner_price-display",attrs:{"selling-price":t.sellingPrice,"from-price":t.fromPrice,"market-price":t.marketPrice,"spec-price-desc":t.priceDesc}}),t._v(" "),t.priceDiff?n("span",{staticClass:"attraction-usp-banner_price-diff",domProps:{innerHTML:t._s(t.priceDiff)}}):t._e()],1)])}),[],!1,null,"efe43552",null).exports),B=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(v.a)(e,t),e}(h.Vue),V=N=B([Object(h.Component)({components:{UspBanner:$.a}})],N),F=(n(2625),Object(O.a)(V,(function(){var t=this.$createElement,e=this._self._c||t;return e("UspBanner",this._b({staticClass:"srv-usp-banner"},"UspBanner",this.$attrs,!1),[e("div",{staticClass:"srv-usp-banner_content",domProps:{innerHTML:this._s(this.$t("26259"))}})])}),[],!1,null,null,null).exports),W=n(272),H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},U=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleClick",value:function(){this.visible=!0}},{key:"content",get:function(){return Object(W.c)(this.$t("26257"))}}]),e}(h.Vue),z=U=H([Object(h.Component)({components:{UspBanner:$.a}})],U),G=(n(2626),Object(O.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("UspBanner",t._b({staticClass:"uob-usp-banner",on:{"click-tag":t.handleClick}},"UspBanner",t.$attrs,!1),[n("div",{staticClass:"srv-usp-banner_content",domProps:{innerHTML:t._s(t.$t("26254"))}}),t._v(" "),n("klk-bottom-sheet",{staticClass:"srv-usp-banner_sheet",attrs:{visible:t.visible,title:t.$t("26255")},on:{"update:visible":function(e){t.visible=e}}},[n("klk-button",{attrs:{slot:"header-right",type:"outlined",size:"mini"},on:{click:function(e){t.visible=!1}},slot:"header-right"},[t._v(t._s(this.$t("ptp_down")))]),t._v(" "),n("klk-markdown",{staticClass:"uob-usp-banner_markdown",attrs:{content:t.content}})],1)],1)}),[],!1,null,null,null).exports),Y=n(880),K=n(1378);function J(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var X=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Q=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).componentName="",t.uspData={},t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"visibleChange",value:function(t){t||this.hideSection()}},{key:"created",value:function(){switch(this.uspEmphasize){case"bpg_and_fc":var t=[];if(this.hasBestPriceGuarantee&&t.push(this.bestPricePackageData),this.hasFreeCancellation&&t.push(this.freeCancellationData),!t.length)break;this.componentName="UspTagList",this.uspData={tagList:t,type:"tag"};break;case"bpg_only":if(!this.hasBestPriceGuarantee)break;this.componentName="UspTagList",this.uspData={tagList:[this.bestPricePackageData],type:"tag"};break;case"bpg_without_price":if(!this.bestPriceGuarantee)break;this.componentName="UspTagList",this.uspData={tagList:[this.bpgWithoutPriceData],type:"tag"};break;case"fc_only":if(!this.hasFreeCancellation)break;this.componentName="UspTagList",this.uspData={tagList:[this.freeCancellationData],type:"tag"};break;case"bpg_with_price":if(!this.bestPriceGuarantee)break;this.componentName="BestPriceUspBanner",this.uspData={tagList:[this.bpgWithoutPriceData],type:"banner"};break;case"srv_eligible":if(!this.isSrvActivity)break;this.componentName="SrvUspBanner",this.uspData={tagList:[this.srvData],type:"banner"};break;case"srv_uob":if(!this.isSrvActivity)break;this.componentName="UobUspBanner",this.uspData={tagList:[this.uobData],type:"banner"}}}},{key:"bestPriceGuarantee",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.best_price_guarantee}},{key:"isSrvActivity",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.is_srv_activity}},{key:"activityCancellationType",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.activity_cancellation_type}},{key:"price",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.price}},{key:"visible",get:function(){return!!this.uspEmphasize&&!this.isShowPromotionDetail}},{key:"uspEmphasize",get:function(){return this.businessData.usp_emphasize}},{key:"hasBestPriceGuarantee",get:function(){return this.bestPriceGuarantee}},{key:"hasFreeCancellation",get:function(){var t=this.activityCancellationType;return t&&1===t.length&&9===t[0]}},{key:"bestPricePackageData",get:function(){return{content:this.$t("23174"),icon:"mobile-activity#usp-star",tip:{title:this.$t("23174"),content:this.$t("23175-bpg")},text:"BPG"}}},{key:"freeCancellationData",get:function(){return{content:this.$t("16900-FreeCancellation"),icon:"mobile-activity#usp-price",tip:{title:this.$t("16900"),content:this.$t("26252-refund")},text:"FreeCancellation"}}},{key:"srvData",get:function(){return{content:this.$t("17651"),icon:"mobile-activity#srv_xm_colorful",background:"#F4333D",tip:{title:this.$t("17651"),content:this.$t("26253-SRV")},text:"SRV"}}},{key:"uobData",get:function(){return{content:this.$t("26255-UOB"),icon:"common#icon_service_cards_xs_fill",text:"UOBDiscount"}}},{key:"bpgWithoutPriceData",get:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?J(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):J(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.bestPricePackageData,{content:this.$t("23174")})}}]),e}(Object(h.mixins)(Y.a,K.a));Q.displayName="MobileUsp_emphasize",X([Object(h.Watch)("visible",{immediate:!0})],Q.prototype,"visibleChange",null);var Z=Q=X([Object(h.Component)({components:{UspTagList:C,BestPriceUspBanner:M,SrvUspBanner:F,UobUspBanner:G}})],Q),tt=Object(O.a)(Z,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e(this.componentName,this._b({tag:"component",staticClass:"activity-usp-abtest",attrs:{price:this.price}},"component",Object.assign({},this.businessData,this.uspData),!1)):this._e()}),[],!1,null,null,null);e.default=tt.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(22),n(14),n(11),n(8),n(12),n(74)),m=(n(70),n(23),n(4)),k=n(0),O=n(13),_=(n(47),n(20),n(27),n(3)),j=n(1833),w=n(1997),P=n(883),C=n(10),S=n.n(C),D=n(908),x=n(957),T=n(2035),I=n(1094),R=(n(52),n(53),n(37),n(131)),$=n(1186),L=n(1425),A=n(1296),E=n(885),M=n(16),B=n(882),N=n(982),V=n(211),F=n(899),W=n(881);function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function U(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var z=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},G=Object(f.namespace)("traveller/activity"),Y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).source=null,t.shoppingCartVisible=!1,t.completeInfo=!1,t.throttleGetFixedWrapInfos=Object(R.throttle)(t.getFixedWrapInfos,300),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bindIHTrack",value:function(){return W.a.apply(void 0,arguments)}},{key:"getDatetimeFormat",value:function(){var t,e,n,o=this,r=this.selectedTime;if(this.isPkgOpenTicket)return this.$t("24717");var c="",l=(r||{}).date,d=1===(null===(n=null===(e=null===(t=this.packageSchedules||[])||void 0===t?void 0:t.find((function(t){return t.date===o.packageSelectedDate})))||void 0===e?void 0:e.time_slots)||void 0===n?void 0:n.length)?1:5;if(l){var v=this.$t.bind(this);c=Object(V.e)(l,v,this.klook.language,d)}return c}},{key:"getCalcPreTotalPrice",value:function(){var t,e,n,o,r,c=Object(M.v)(this.klook.currency,"-");if(!this.readyPrePrice)return{sale_price:c};var l=null===(t=this.pkgsPrePriceApiData[this.packageId])||void 0===t?void 0:t.result,d=this.$refs.bookingSettlementRef,v=Object(M.v)(this.klook.currency,null===(e=d)||void 0===e?void 0:e.price),f=Object(E.b)(this.currentSelectedPackage,l,{oldPriceShow:{price_summary:U({},Object(E.c)(this.currentSelectedPackage,this.units||[],this.klook.currency)),sale_price:v}}),h=this.handleCloseModalEvent,y=this.isBtnVisibleAddtocart,m=this.isMultiPass,k=this.bookingBottomBtnsBinds,O=this.creditsVisible,_=this.credits,j=(null===(n=f)||void 0===n?void 0:n.credits)||_,w={text:this.$t("activity.new.credits",{account:Math.floor(j)}),tag_key:"normal-credits",background_color:"#F0FFFA",text_color:"#0DA06A",border_color:"#F0FFFA"},P=(null===(o=this.currentSelectedPackage)||void 0===o?void 0:o.credits_tag)||{};if(null===(r=P)||void 0===r?void 0:r.text){var text="".concat(P.text.split(" ")[0]," +").concat(j);w=U({},P,{text:text})}return this.readyPrePrice&&this.isUnfold?B.a.$emit("updateRightPriceData2bus",{creditsObj:{creditsVisible:O,tagCredits:w},rightPriceDetail:Object(E.c)(this.currentSelectedPackage,this.units||[],this.klook.currency,{datetime_format:this.getDatetimeFormat(),package_id:this.currentSelectedPackage.package_id}),prePriceData:f,handleCloseModalEvent:h,bookingBottomBtnsBinds:k,isBtnVisibleAddtocart:y,isMultiPass:m}):B.a.$emit("updateRightPriceData2bus",{}),f}},{key:"clickSavePrice",value:function(t){var e,n,o=null===(n=null===(e=this.bookingSettlementBinds)||void 0===e?void 0:e.preTotalPrice)||void 0===n?void 0:n.price_summary;this.$emit("clickSavePrice",t,{priceSummary:o})}},{key:"toastHandler",value:function(t){var content=t.content;this.$toast(content)}},{key:"updateModuleExtra",value:function(t){this.completeInfo=JSON.parse(t).CompletedInfo}},{key:"handleCloseModalEvent",value:function(){this.showShoppingCart&&this.showShoppingCart()}},{key:"showShoppingCart",value:function(){this.source=this.$el.querySelector(".js-add-to-cart"),this.shoppingCartVisible=!0}},{key:"getFixedWrapInfos",value:function(){var t,e,n,o=null===(t=this.$refs)||void 0===t?void 0:t.fixedWrapRef;if(o){var r={height:null===(n=null===(e=o)||void 0===e?void 0:e.$el)||void 0===n?void 0:n.offsetHeight};return this.$emit("updateInfos",r),r}}},{key:"updated",value:function(){this.throttleGetFixedWrapInfos();var t=this.arrangementId,e=this.totalUnitCount;t&&e||B.a.$emit("updateRightPriceData2bus",{})}},{key:"addToCartText",get:function(){return this.modificationShoppingCart?this.$t("shoppingcart.confirm_change"):this.$t("activity.label.add_to_cart")}},{key:"arrangementId",get:function(){var t;return null===(t=this.selectedTime)||void 0===t?void 0:t.arrangement_id}},{key:"isPkgOpenTicket",get:function(){var t;return 3===(null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.package_ticket_type)}},{key:"credits",get:function(){var t;if(Object(R.isEmpty)(this.units))return 0;var e=this.units.reduce((function(t,e){var n;return t+parseFloat(null===(n=e.credits)||void 0===n?void 0:n.toString())*e.count}),0);return parseInt(null===(t=e)||void 0===t?void 0:t.toString())}},{key:"creditsVisible",get:function(){return!this.fieldsConfig2section.activity_custom_config_hide_credit&&!this.isGuestCheckout&&!this.custom_config_hide_credit&&this.credits>0}},{key:"mergeTrack",get:function(){var t=(this.units||[]).filter((function(t){return t.count>0}));return JSON.stringify({CompletedInfo:this.completeInfo,Sku_id:t.map((function(t){return t.skuId})),Sku_num:t.map((function(t){return t.count}))})}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"templateId",get:function(){return this.businessData.template_id}},{key:"isSupportShoppingCart",get:function(){return this.businessData.is_support_shopping_cart}},{key:"isOpenTicket",get:function(){return 3===this.businessData.activity_ticket_type}},{key:"packages",get:function(){return this.businessData.packages}},{key:"isSoldOut",get:function(){var t=this.packages;return Object(R.isEmpty)(t)||t.every((function(t){return!t.has_stocks}))}},{key:"isBtnVisibleAddtocart",get:function(){return![47631,46820,48639,48789,55826,49807,55724].includes(this.activityId)&&this.isSupportShoppingCart&&!this.isGuestCheckout&&!this.isMultiPass}},{key:"isInPromotion",get:function(){var t,e;return 5===((null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event)||{}).status}},{key:"bookingSettlementBinds",get:function(){var t,e;return{isSavingPoptip:!1,preTotalPrice:this.getCalcPreTotalPrice(),units:this.units,isInPromotion:this.isInPromotion,promotionDetail:null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.promotion_price)||void 0===e?void 0:e.promotion_event}}},{key:"bookingBottomBtnsBinds",get:function(){return{addToCartText:this.addToCartText,msgFn:this.toastHandler,selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,templateId:this.templateId,units:this.units,activityId:this.activityId,isSoldOut:this.isSoldOut,isOpenTicket:this.isOpenTicket,selectedPackagePriceSchedule:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount}}}]),e}(f.Vue);z([Object(f.Inject)({from:"fieldsConfig2section",default:function(){return F.a}})],Y.prototype,"fieldsConfig2section",void 0),z([f.State],Y.prototype,"klook",void 0),z([Object(f.Prop)()],Y.prototype,"readyPrePrice",void 0),z([Object(f.Prop)({default:!1})],Y.prototype,"custom_config_hide_credit",void 0),z([Object(f.Prop)()],Y.prototype,"isUnfold",void 0),z([Object(f.Prop)()],Y.prototype,"modificationShoppingCart",void 0),z([Object(f.Prop)()],Y.prototype,"hideDiscountTips",void 0),z([Object(f.Prop)()],Y.prototype,"units",void 0),z([Object(f.Prop)()],Y.prototype,"businessData",void 0),z([Object(f.Prop)({default:!1})],Y.prototype,"isMultiPass",void 0),z([Object(f.Prop)()],Y.prototype,"currentSelectedPackage",void 0),z([Object(f.Prop)()],Y.prototype,"selectedTime",void 0),z([Object(f.Prop)()],Y.prototype,"packageSchedules",void 0),z([Object(f.Prop)()],Y.prototype,"packageSelectedDate",void 0),z([Object(f.Prop)()],Y.prototype,"totalUnitCount",void 0),z([f.Getter],Y.prototype,"isGuestCheckout",void 0),z([Object(f.Prop)()],Y.prototype,"packageId",void 0),z([G.State],Y.prototype,"pkgsPrePriceApiData",void 0);var K=Y=z([Object(f.Component)({components:{ShoppingCart:N.default,TotalSlot:E.a,BookingBarWrap:L.a,ExpBookingSettlement:A.a,BookingBottomBtns:$.a}})],Y),J=(n(2484),n(43)),X=Object(J.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BookingBarWrap",{ref:"fixedWrapRef",staticClass:"js-hack-total-footer booking-bottom-bar",attrs:{"price-visible":!t.isMultiPass,"is-sold-out":t.isSoldOut}},[n("ExpBookingSettlement",t._b({ref:"bookingSettlementRef",staticClass:"unfold-booking-settlement",attrs:{slot:"settlement"},on:{clickSavePrice:t.clickSavePrice},slot:"settlement"},"ExpBookingSettlement",t.bookingSettlementBinds,!1)),t._v(" "),n("div",{staticClass:"activity-booking-options_bottom-bar-buttons",attrs:{slot:"buttons"},slot:"buttons"},[t.isBtnVisibleAddtocart?n("BookingBottomBtns",t._b({staticClass:"add-to-card js-add-to-cart",attrs:{type:"addToCart","btn-content":t.addToCartText},on:{"next-btn-complete":t.updateModuleExtra,closeModal:t.handleCloseModalEvent}},"BookingBottomBtns",Object.assign({},t.bookingBottomBtnsBinds,t.bindIHTrack({exposure:!1,type:"module",spm:"PackageOptionsAddToCartBtn",query:{oid:"package_"+t.packageId,ext:JSON.stringify({CompletedInfo:t.readyPrePrice})}})),!1)):t._e(),t._v(" "),n("BookingBottomBtns",t._b({attrs:{"btn-content":t.isMultiPass?this.$t("31062-reserve_slot"):"",type:"bookNow"}},"BookingBottomBtns",Object.assign({},t.bookingBottomBtnsBinds,t.bindIHTrack({exposure:!1,type:"module",spm:"PackageOptionsBookNowBtn",query:{oid:"package_"+t.packageId,ext:JSON.stringify({CompletedInfo:t.readyPrePrice})}})),!1)),t._v(" "),n("ShoppingCart",{attrs:{position:t.source,visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)],1)}),[],!1,null,"0bd58278",null).exports,Q=n(911),Z=n(1680),tt=n(895),et=n(1188),it=n(1005),nt=n(952),at=n(889),ot=n(985),ct=n(886),st=n(912),lt=n(891),ut=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},pt=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}var n,v;return Object(d.a)(e,t),Object(r.a)(e,[{key:"schedulesUnitsStateWatch",value:function(t){this.$emit("updateSchedulesUnitsState",t)}},{key:"selectedTimeChange",value:(v=Object(m.a)(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.arrangementId){t.next=5;break}if(null===(o=n)||void 0===o||!o.arrangementId||e.arrangementId!==n.arrangementId||"mobile"!==this.platform){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchPackageUnits();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"isUnfoldWatch",value:function(){this.initData()}},{key:"bindIHTrack",value:function(){return W.a.apply(void 0,arguments)}},{key:"packageSelectedDateWatch",value:function(t){this.calcActIsNewOpenTicket||this.$emit("updateDate",t)}},{key:"initData",value:(n=Object(m.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.packageId,n=this.date,o=this.skuId,this.packageId=e,this.preSelectedSkuId=o,this.pkgSelectedDate=n||"",!this.packageId){t.next=7;break}return t.next=7,this.getPackagePriceScheduleUnits({},{fromKey:lt.a.FromKeyDefined.desktop.sku});case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcPkgDetailTrack",get:function(){var t=this.packageId;return{type:"module",exposure:!1,spm:"PackageDetailsBtn",query:{oid:"package_".concat(t)}}}},{key:"calcPkgPreSettlementTips",get:function(){return this.getPkgPreSettlementTips2getters(this.packageId)}},{key:"bookingCalendarOptions",get:function(){return{hideTips:!0,packageId:this.packageId,schedules:this.calcPkgScheduleList,warn:this.dateDescription,selectedTime:this.pkgSelectedTime,currentSelectedPackage:this.calcPkgSelectedObj,calcActIsNewOpenTicket:this.calcActIsNewOpenTicket,isNewOpenTicket:this.calcPkgIsNewOpenTicket,legends:this.calcPkgLegendList}}},{key:"bookingUnitOptions",get:function(){return{customPreType:"unfold-pre-type",packageId:this.packageId,styleType:"desktop-type",selectedTime:this.pkgSelectedTime,unitList:this.currentUnits,preview:this.isPreview?1:0,currentSelectedPackage:this.calcPkgSelectedObj,inventories:this.calcUnitInventorieObj,totalUnitCount:this.calcTotalUnitCount,disabled:!this.calcArrangementId}}},{key:"readyPrePrice",get:function(){return!(!this.calcArrangementId||S()(this.currentUnits))&&(this.currentUnits||[]).reduce((function(t,e){return t+=e.count||0}),0)>0}},{key:"bottomBarBinds",get:function(){var t;return{packageId:this.packageId,readyPrePrice:!!this.readyPrePrice,isUnfold:this.isUnfold,modificationShoppingCart:this.modificationShoppingCart,hideDiscountTips:null===(t=this.bsObjSavePrice)||void 0===t?void 0:t.visible,businessData:this.businessData,units:this.currentUnits,currentSelectedPackage:this.calcPkgSelectedObj,selectedTime:this.pkgSelectedTime,packageSchedules:this.calcPkgScheduleList,packageSelectedDate:this.pkgSelectedDate,totalUnitCount:this.calcTotalUnitCount}}}]),e}(Object(f.mixins)(Z.a));ut([Object(f.Prop)()],pt.prototype,"modificationShoppingCart",void 0),ut([Object(f.Prop)()],pt.prototype,"pkgDetailData",void 0),ut([Object(f.Prop)({type:Number,default:0})],pt.prototype,"skuId",void 0),ut([Object(f.Prop)({type:String,default:""})],pt.prototype,"date",void 0),ut([Object(f.Prop)({type:Boolean,default:!1})],pt.prototype,"isUnfold",void 0),ut([Object(f.Prop)()],pt.prototype,"businessData",void 0),ut([Object(f.Watch)("packageSchedulesAndUnitsApiDefined.state")],pt.prototype,"schedulesUnitsStateWatch",null),ut([Object(f.Watch)("pkgSelectedTime",{immediate:!0})],pt.prototype,"selectedTimeChange",null),ut([Object(f.Watch)("isUnfold")],pt.prototype,"isUnfoldWatch",null),ut([Object(f.Watch)("pkgSelectedDate")],pt.prototype,"packageSelectedDateWatch",null);var vt=pt=ut([Object(f.Component)({components:{DesktopPackageDetailButton:ot.a,SavingPriceDetails:at.default,PriceDiscountTips:nt.a,ActivityValidity:et.default,HasOpenDateTips:it.a,HeaderTips:D.a,CardHeader:x.a,ExpLoadingState:Q.default,CommonContentLoading:tt.a,BookingCalendar:T.a,BookingUnit:I.a,DesktopBookingBtns:X,CalendarLengends:ct.a,CalenderTips:st.a}})],pt),ft=(n(2485),Object(J.a)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isUnfold?n("div",{staticClass:"experience-activity-booking"},[n("div",{staticClass:"booking-content show-bottom-bar"},[n("ExpLoadingState",{attrs:{"hide-initing":!0,state:t.packageSchedulesAndUnitsApiDefined.state,fetching:{type:"overlay"}},on:{refresh:t.getPackagePriceScheduleUnits}},[t.isUnfold?[n("ActivityValidity",t._b({staticClass:"custom-activity-validity-style"},"ActivityValidity",t.calcData,!1)),t._v(" "),n("div",{staticClass:"pkg-detail-btn",on:{click:function(e){return e.stopPropagation(),t.$emit("setPkgDetailStatus",!0)}}},[n("DesktopPackageDetailButton",t._b({staticClass:"text-link",attrs:{text:t.$t("activity.v2.label.pkg_info"),"custom-type":"desktop"}},"DesktopPackageDetailButton",t.bindIHTrack(t.calcPkgDetailTrack),!1))],1),t._v(" "),3!==t.activityTicketType&&t.calcActIsNewOpenTicket&&t.date?n("HasOpenDateTips",{staticStyle:{margin:"16px 0 0 0"}}):t._e(),t._v(" "),n("BookingCalendar",t._b({staticClass:"booking-content-calendar",on:{setTime:t.setPackageTime},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}},"BookingCalendar",t.bookingCalendarOptions,!1),[n("div",{staticClass:"booking-content-units"},[t.calcPkgSelectedObj?n("HeaderTips",{staticClass:"booking-content-units-tips",attrs:{limit:50,"style-type":"big-style","hide-more":!0,"hide-divider":!0,"max-pax":t.calcPkgSelectedObj.max_pax,"min-pax":t.calcPkgSelectedObj.min_pax}},[n("div",{staticClass:"empty-tips-style",attrs:{slot:"empty-slot"},slot:"empty-slot"},[t._v("\n                "+t._s(t.$t("activity.label.select_quantity"))+"\n              ")])]):t._e(),t._v(" "),n("ExpLoadingState",{staticClass:"spec-loading-state",attrs:{"hide-initing":!0,state:t.packageUnitsApiDefined.state||t.packageSchedulesAndUnitsApiDefined.state,fetching:{type:"overlay"},"keep-state":!0,"hide-failure":!0},on:{refresh:t.fetchPackageUnits}},[n("div",{staticClass:"spec-units-style"},[n("div",{staticClass:"booking-content-units-content"},[t._l(t.currentUnits,(function(e){return n("BookingUnit",t._b({key:e.priceId,staticClass:"booking-content-unit",attrs:{unit:e,"is-track-module":!0},on:{changeUnitCount:t.changeUnitCount,alert:t.alert}},"BookingUnit",t.bookingUnitOptions,!1))})),t._v(" "),t.readyPrePrice&&t.calcPkgPreSettlementTips?n("PriceDiscountTips",{attrs:{tips:t.calcPkgPreSettlementTips,"style-type":"text-ellipsis2"}}):t._e()],2)])])],1),t._v(" "),n("DesktopBookingBtns",t._b({staticClass:"booking-btns-style",attrs:{slot:"bottom-slot"},on:{clickSavePrice:t.clickSavePrice,updateInfos:t.updateInfos},slot:"bottom-slot"},"DesktopBookingBtns",t.bottomBarBinds,!1)),t._v(" "),n("template",{slot:"calendar-tips"},[n("CalenderTips",[t.calcPkgLegendList&&t.calcPkgLegendList.length?n("klk-poptip",{attrs:{content:t.calcPkgLegendList[0].desc||"",placement:"bottom","append-to-body":""}},[n("CalendarLengends",{attrs:{legends:t.calcPkgLegendList,"show-text":!0,"show-statement":!0}})],1):t._e()],1)],1)],2)]:t._e()],2)],1)]):t._e()}),[],!1,null,"70cd566a",null).exports),ht=n(2001),gt=n(212);function bt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function yt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?bt(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):bt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var mt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},kt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).pkgShowMore={init:!1,len:8,show:!1},t.unfoldPkgIdCache=0,t.pkgsCacheData={},t.schedulesUnitsState="",t}var n,v;return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleStateChange",value:function(t){"fetching"===t&&(this.unfoldPkgIdCache=0,this.handlerResetPkgCacheData())}},{key:"handlerResetPkgCacheData",value:function(){this.resetAllFoldStatus(),this.clearRightPriceData()}},{key:"clearRightPriceData",value:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.a.$emit("updateRightPriceData2bus",data||{})}},{key:"getIsReady",value:function(t){var e;return(null===(e=t)||void 0===e?void 0:e.package_id)===this.unfoldPkgIdCache&&["success","failure"].includes(this.schedulesUnitsState)}},{key:"handleUpdatePackageId",value:function(t){this.$emit("updatePkgId",t)}},{key:"mounted",value:(v=Object(m.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.$route.query,!(o=n.shop_id)){t.next=7;break}return t.next=5,this.getShoppingCartList({shopId:o});case 5:(r=t.sent)&&this.handleUpdatePackageId(r);case 7:(c=parseInt(null===(e=n)||void 0===e?void 0:e.scroll_pkg)||0)&&this.clickPackageHandler({package_id:c},!0);case 9:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getShoppingCartList",value:(n=Object(m.a)(regeneratorRuntime.mark((function t(data){var e,n,o,r,c,l,i,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get(_.a.shoppingCartList);case 2:if(!((e=t.sent)&&e.success&&e.result)){t.next=25;break}if(n=e.result.group,this.modificationShoppingCart=!0,!(o=data.shopId)||!n){t.next=25;break}if(r=null,n.find((function(t){return!!(r=t.items.find((function(t){return t.shoppingcart_id===Number(o)})))})),r){t.next=12;break}return t.abrupt("return",0);case 12:if(c=r.package_id,l=this.packages.find((function(t){return t.package_id===c}))){t.next=16;break}return t.abrupt("return",0);case 16:i=0;case 17:if(!(i<r.main_package_specs.length)){t.next=24;break}if(d=r.main_package_specs[i],l.spec_attr_id.includes(d.attr_id)){t.next=21;break}return t.abrupt("return",0);case 21:i++,t.next=17;break;case 24:return t.abrupt("return",c);case 25:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getUnitsList",value:function(t){var e;return(null===(e=(this.limitedAvailablePackageList||[]).find((function(e){return e.package_id===t})))||void 0===e?void 0:e.units)||[]}},{key:"getTaggingExtraTrackObj",value:function(t){var e,n,o,r,c=[].concat(Object(O.a)((null===(n=null===(e=t)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.attribute_tags)||[]),Object(O.a)((null===(r=null===(o=t)||void 0===o?void 0:o.product_tags)||void 0===r?void 0:r.discount_tags)||[]));return Object(P.getTaggingExtraTrackObj)(c)||{}}},{key:"getPkgTrack",value:function(t,e,n){var o,r,c,l,d,v,f=this.getTaggingExtraTrackObj(t),h=2===(null===(r=null===(o=t)||void 0===o?void 0:o.publish_info)||void 0===r?void 0:r.publish_status),y=3===(null===(l=null===(c=t)||void 0===c?void 0:c.publish_info)||void 0===l?void 0:l.publish_status),m=JSON.stringify({SelectType:"User",PackageTagIDList:(null===(d=f)||void 0===d?void 0:d.TagIDList)||[],PackageTagName:(null===(v=f)||void 0===v?void 0:v.TagKeyList)||[],StatusType:h?"Unavailable":y?"ForSalesSoon":"Normal"});return{type:"module",spm:"PackageType_LIST",query:{oid:"package_".concat(t.package_id),len:n.length,idx:e,ext:m}}}},{key:"resetAllFoldStatus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object.keys(this.pkgsCacheData).forEach((function(n){var o=Number(n);e!==o&&t.setFoldStatus(o,!1)}))}},{key:"setFoldStatus",value:function(t,e){var data=this.pkgsCacheData[t];data&&this.$set(data,"isUnfold",e)}},{key:"scrollToPackageOptionsTop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t&&document.querySelector("#js-pkg-id-".concat(t)),o=Object(gt.c)(n);Object(gt.d)(yt({scrollY:o,lockLocation:108},e))}},{key:"handlerUnfoldStatus",value:function(t,e){var n,o,r=this,c=null===(n=t)||void 0===n?void 0:n.package_id;if(this.unfoldPkgIdCache=c,e){var l=this.pkgsCacheData[c];if(e===(null===(o=l)||void 0===o?void 0:o.isUnfold))return!1;this.resetAllFoldStatus(c),this.$nextTick((function(){r.clickPackageHandler(t,e)})),setTimeout((function(){r.scrollToPackageOptionsTop(c,{duration:100})}),350)}else this.clickPackageHandler(t,e)}},{key:"getPkgCacheData",value:function(t,e){if(t){var n=(e||{}).package_id;return(this.pkgsCacheData[n]||{})[t]}}},{key:"setPkgCacheData",value:function(t,e,data){if(t&&e){var n=this.pkgsCacheData[e];return n?this.$set(n,t,data):this.$set(this.pkgsCacheData,e,Object(k.a)({},t,data)),data}}},{key:"clickPackageHandler",value:function(t,e){var n,o=(t||{}).package_id;if(o){var r=this.pkgsCacheData[o];if(e===(null===(n=r)||void 0===n?void 0:n.isUnfold))return!1;r||this.setPkgCacheData("pkgData",o,t),this.handleUpdatePackageId(o),this.setFoldStatus(o,e)}}},{key:"setPkgDetailStatus",value:function(t,e){this.$emit("setPkgDetailStatus",t,e)}},{key:"updatePkgDetail",value:function(t,e){this.$emit("updatePkgDetail",t,e)}},{key:"updateSchedulesUnitsState",value:function(t){this.schedulesUnitsState=t}},{key:"getBookingCoreData2section",value:function(t){var e=this.$attrs,n=e.activityId,o=e.publishInfo,r=e.specList,c=e.activityTicketType,l=e.isSupportShoppingCart,d=e.dateDescription,v=e.packageFilterTagList,f=lt.a.getBookingCoreData2vm(this);return f.packageId=t,yt({},f,{packageId:t,activityId:n,publishInfo:o,specList:r,activityTicketType:c,isSupportShoppingCart:l,dateDescription:d,packageFilterTagList:v})}},{key:"limitedAvailablePackageList",get:function(){var t=this.pkgShowMore,e=this.filterPackagesWithSku;return!t.init&&e.length>t.len&&(t.init=!0,t.show=!0),t.show?e.slice(0,t.len):e}},{key:"showMoreText",get:function(){var t=this.filterPackagesWithSku.length;return"".concat(this.$t("city_page_view_more")," (").concat(t-this.pkgShowMore.len,"+)")}}]),e}(Object(f.mixins)(w.a,ht.a));mt([Object(f.Prop)({default:0})],kt.prototype,"preview",void 0),mt([Object(f.Prop)({type:String,default:""})],kt.prototype,"date",void 0),mt([Object(f.Prop)({type:Boolean,default:!1})],kt.prototype,"isLinePage",void 0),mt([Object(f.Prop)({type:Array,default:function(){return[]}})],kt.prototype,"packages",void 0),mt([Object(f.Prop)()],kt.prototype,"isPreview",void 0),mt([Object(f.Prop)({type:Array,default:function(){return[]}})],kt.prototype,"packagesWithSku",void 0),mt([Object(f.Prop)()],kt.prototype,"businessData",void 0),mt([Object(f.Watch)("state",{immediate:!0})],kt.prototype,"handleStateChange",null);var Ot=kt=mt([Object(f.Component)({inheritAttrs:!1,components:{ExpPkgItem:j.a,PackageOptionsBooking:ft,CommonContentLoading:tt.a}})],kt),_t=(n(2486),Object(J.a)(Ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-pkg-list-box"},[n("div",[t._l(t.limitedAvailablePackageList,(function(e,o){return n("ExpPkgItem",{key:e.package_id,staticClass:"exp-pkg-item-box transition-unfold-card__item",attrs:{id:"js-pkg-id-"+e.package_id,"is-unfold":t.getPkgCacheData("isUnfold",e),"is-ready":t.getIsReady(e),"data-index":o,"pkg-data":e,units:t.getUnitsList(e.package_id),"pkg-track":t.getPkgTrack(e,o,t.filterPackagesWithSku),"publish-info":e.publish_info,disabled:t.isLinePage},on:{setPkgDetailStatus:function(n){return t.setPkgDetailStatus(e,n)},setUnfoldStatus:function(n){return t.handlerUnfoldStatus(e,n)}}},[n("transition",{attrs:{name:t.getPkgCacheData("isUnfold",e)?"transition-unfold-card__item-child":""}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.getIsReady(e)&&t.getPkgCacheData("isUnfold",e),expression:"getIsReady(pkg) && getPkgCacheData('isUnfold', pkg)"}]},[n("PackageOptionsBooking",t._b({attrs:{date:t.getPkgCacheData("pkgDate",e)||t.date,"is-unfold":t.getPkgCacheData("isUnfold",e),"modification-shopping-cart":t.modificationShoppingCart,"pkg-detail-data":t.getPkgCacheData("pkgDetailData",e),"business-data":t.businessData},on:{updateSchedulesUnitsState:t.updateSchedulesUnitsState,setPkgDetailStatus:function(n){return t.setPkgDetailStatus(e,n)},updatePkgDetail:function(n){return t.updatePkgDetail(e,n)},updateDate:function(n){return t.setPkgCacheData("pkgDate",e.package_id,n)}}},"PackageOptionsBooking",t.getBookingCoreData2section(e.package_id),!1))],1)])],1)})),t._v(" "),t.pkgShowMore.show?n("div",{staticClass:"pkg-show-more"},[n("klk-button",{attrs:{type:"outlined"},on:{click:function(e){t.pkgShowMore.show=!1}}},[n("span",{staticClass:"flex-center"},[n("span",{staticClass:"pkg-show-more__text"},[t._v(t._s(t.$t("73633")))]),t._v(" "),n("klk-icon",{staticClass:"pkg-show-more__icon",attrs:{type:"icon_navigation_chevron_down_xs",size:"20"}})],1)])],1):t._e(),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.schedulesUnitsState||"fetching"===t.state,expression:"schedulesUnitsState === 'fetching' || state === 'fetching'"}],attrs:{type:"overlay"}})],2)])}),[],!1,null,"09987aa0",null).exports),jt=n(1006),wt=n(1253),Pt=n(1460),Ct=n(1038),St=n(1254),Dt=n(1687),xt=n(1688);function Tt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var It=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Rt=Object(f.namespace)("traveller/activity"),$t=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).date="",t.pkgsCacheData={},t.pkgShowMore={init:!1,len:8,show:!1},t.pkgDetailObj={visible:!1,direction:"right",pkgData:null},t.packagesWithSkuByDate=null,t}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"setPkgDetailStatus",value:function(t,e){this.$set(this.pkgDetailObj,"pkgData",t),this.pkgDetailObj.visible=e}},{key:"getPkgCacheDetail",value:function(t){return t&&this.pkgsCacheData[t]||{}}},{key:"getPkgCacheData",value:function(t,e){if(t){var n=(e||{}).package_id;return(this.pkgsCacheData[n]||{})[t]}}},{key:"setPkgCacheData",value:function(t,e,data){if(t&&e){var n=this.pkgsCacheData[e];return n?this.$set(n,t,data):this.$set(this.pkgsCacheData,e,Object(k.a)({},t,data)),data}}},{key:"updatePkgDetail",value:function(t,e){var n=t.package_id,o=this.pkgsCacheData[n];o?this.$set(o,"pkgDetailData",e):this.$set(this.pkgsCacheData,n,{pkgDetailData:e})}},{key:"updatePkgId",value:function(t){this.updateExpPackageId(t)}},{key:"mounted",value:(n=Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return setTimeout((function(){B.a.$emit("setIsDelayFlag2bus",{from:"unfold_card_mounted"})}),60),t.next=3,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 3:this.initAutoBookingMinxin({activityId:this.activityId,shopId:parseInt(this.$route.query.shop_id),shoppingCartHandler:this.showShoppingCart});case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"filterSkuPackagesHandler",value:function(t){this.$set(this,"packagesWithSkuByDate",t||[])}},{key:"filteredPackageIdList",get:function(){return this.packageList.map((function(t){return t.package_id}))}},{key:"calcFilterPackagesWithSku",get:function(){var t=this.tagFilter2state.value,e=this.packageList,n=this.packagesWithSku,o=this.packagesWithSkuByDate||n||[];return t&&(o=o.filter((function(n){var o,r,c=null===(r=null===(o=e.find((function(t){return n.package_id===t.package_id})))||void 0===o?void 0:o.product_tags)||void 0===r?void 0:r.filter_tags;return c&&c.find((function(e){var n;return(null===(n=e)||void 0===n?void 0:n.tag_key)===t}))}))),o}},{key:"showCalendar",get:function(){var t;return(null===(t=this.packageList)||void 0===t?void 0:t.length)>1}},{key:"bookingCore",get:function(){return{packages:this.packageList,date_description:this.dateDescription,activity_id:this.activityId,template_id:this.templateId,is_support_shopping_cart:this.isSupportShoppingCart,activity_ticket_type:this.activityTicketType}}},{key:"bookingCoreData2section",get:function(){var t=lt.a.getBookingCoreData2vm(this),e=t.packageId,n=Object(y.a)(t,["packageId"]);return n.packagesWithSku=this.calcFilterPackagesWithSku,console.log("packageId-----",e),function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Tt(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Tt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},n)}}]),e}(Object(f.mixins)(St.a,Dt.a,xt.a));It([Rt.State],$t.prototype,"tagFilter2state",void 0),It([Rt.State],$t.prototype,"activityDetail",void 0),It([f.State],$t.prototype,"klook",void 0);var Lt=$t=It([Object(f.Component)({components:{CommonContentLoading:tt.a,ShoppingCart:N.default,NoneFilterResult:Ct.a,ExpPkgDetailLoading:Pt.default,PackageOptionsCalendarWrap:wt.default,OpenDateTips:jt.default,ExpPkgItem:j.a,PackageOptionsBooking:ft,PackageCardList:_t}})],$t),At=(n(2491),Object(J.a)(Lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-option-unfold-card global-js-add-to-cart"},[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"-8px 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}]},[!t.calcActIsNewOpenTicket&&t.calcActScheduleList.length&&t.showCalendar?n("PackageOptionsCalendarWrap",{staticClass:"card-package-options_calendar",attrs:{"style-type":"desktop-type",state:t.activitySchedulesApiDefined.state,schedules:t.calcActScheduleList,warn:t.dateDescription,"hide-date-filter":t.calcActIsNewOpenTicket},on:{reload:function(e){return t.getActivitySchedulesApiData(t.calcActSchedulesParams)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1),t._v(" "),n("PackageCardList",t._b({attrs:{date:t.date,preview:t.calcPreview,schedule:t.calcActScheduleList,"filtered-package-id-list":t.filteredPackageIdList,"modification-shopping-cart":t.modificationShoppingCart,"business-data":t.bookingCore},on:{setPkgDetailStatus:t.setPkgDetailStatus,updatePkgDetail:t.updatePkgDetail,updateSkuPackages:t.filterSkuPackagesHandler,updatePkgId:t.updatePkgId}},"PackageCardList",t.bookingCoreData2section,!1)),t._v(" "),n("klk-drawer",t._b({staticClass:"exp-common-drawer-style",attrs:{visible:t.pkgDetailObj.visible},on:{"update:visible":function(e){return t.$set(t.pkgDetailObj,"visible",e)}}},"klk-drawer",t.pkgDetailObj,!1),[n("div",{staticClass:"pkg-detail-header-wrap"},[n("div",{staticClass:"pkg-detail-header"},[n("span",[t._v(t._s(t.$t("12686")))]),t._v(" "),n("span",{staticClass:"icon-close",on:{click:function(e){t.pkgDetailObj.visible=!1}}},[n("SvgIcon",{attrs:{name:"desktop-common#icon_edit_close_s",width:"20px",height:"20px"}})],1)])]),t._v(" "),t.pkgDetailObj.visible?n("ExpPkgDetailLoading",{staticClass:"pkg-detail-wrap",attrs:{preview:t.isPreview,"hide-initing":!0,"spec-style":{width:"720px"},"package-id":t.pkgDetailObj.pkgData&&t.pkgDetailObj.pkgData.package_id,"pkg-detail-data":t.getPkgCacheData("pkgDetailData",t.pkgDetailObj.pkgData)},on:{updatePkgDetail:function(e){return t.updatePkgDetail(t.pkgDetailObj.pkgData,e)}}}):t._e()],1),t._v(" "),n("ShoppingCart",{attrs:{position:t.globalSource,visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}}),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.packageSchedulesAndUnitsApiDefined.state,expression:"packageSchedulesAndUnitsApiDefined.state === 'fetching'"}],attrs:{type:"overlay"}})],1)}),[],!1,null,"0e5b7e19",null).exports),Et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Mt=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return lt.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);Mt.displayName="DesktopPackage_option_card_sku_with_detail";var Bt=Mt=Et([Object(f.Component)({components:{DesktopPackageOptionSkuDetail:At}})],Mt),Nt=Object(J.a)(Bt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("DesktopPackageOptionSkuDetail",this._b({},"DesktopPackageOptionSkuDetail",this.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=Nt.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),base=n(2007),f=n(2069),h=n(46),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(h.a)(e,[{key:"fromPrice",get:function(){var t,e=null===(t=this.info)||void 0===t?void 0:t.from_price;return e?this.$t("activity_detail_from_price",["14px",e]):""}},{key:"salePrice",get:function(){var t;return null===(t=this.info)||void 0===t?void 0:t.sale_price}},{key:"underlinePrice",get:function(){var t;return null===(t=this.info)||void 0===t?void 0:t.underline_price}}]),e}(v.Vue);y([Object(v.Prop)()],m.prototype,"info",void 0);var k=m=y([v.Component],m),O=(n(2567),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-activity-price"},[t.fromPrice?n("span",{staticClass:"from-price",domProps:{innerHTML:t._s(t.fromPrice)}}):t._e(),t._v(" "),t.salePrice?n("span",{staticClass:"sale-price"},[t._v(t._s(t.salePrice))]):t._e(),t._v(" "),t.underlinePrice?n("span",{staticClass:"underline-price"},[t._v(t._s(t.underlinePrice))]):t._e()])}),[],!1,null,"12542f75",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(h.a)(e,[{key:"isValid",get:function(){var t;return(null===(t=this.imgList)||void 0===t?void 0:t.length)||this.text}},{key:"imgList",get:function(){var t;return((null===(t=this.review)||void 0===t?void 0:t.user_icons)||[]).reverse()}},{key:"text",get:function(){var t;return(null===(t=this.review)||void 0===t?void 0:t.booked)||""}}]),e}(v.Vue);j([Object(v.Prop)()],w.prototype,"review",void 0),j([Object(v.Prop)({default:!1})],w.prototype,"isGrey",void 0);var P=w=j([v.Component],w),C=(n(2568),Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isValid?n("div",{class:["pass-activity-review",t.isGrey&&"is-grey"]},[n("div",{staticClass:"pass-activity-review-img"},t._l(t.imgList,(function(t,e){return n("div",{key:e,staticClass:"pass-activity-review-img-wrap"},[n("span",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t,expression:"src",arg:"background-image"}],staticClass:"pass-activity-review-img-item"})])})),0),t._v(" "),n("span",{staticClass:"pass-activity-review-text"},[t._v(t._s(t.text))])]):t._e()}),[],!1,null,"6075c15a",null).exports),S=n(16),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(h.a)(e,[{key:"isLast",value:function(t){return t+1===this.imgList.length}},{key:"getImgSrc",value:function(t,e){return this.isLast(e)?"url(".concat(t,")"):"linear-gradient(0deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.3)), url(".concat(t,")")}},{key:"resizeImg",value:function(t){return"desktop"===this.platform?Object(S.jb)(t,450,450):Object(S.jb)(t,200,200)}},{key:"imgList",get:function(){return(this.list||[]).reverse()}}]),e}(v.Vue);D([Object(v.State)((function(t){return t.klook.platform}))],x.prototype,"platform",void 0),D([Object(v.Prop)()],x.prototype,"list",void 0),D([Object(v.Prop)()],x.prototype,"count",void 0);var T=x=D([v.Component],x),I=(n(2569),Object(O.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-activity-img",class:[t.platform]},t._l(t.imgList,(function(e,o){return n("div",{key:o,staticClass:"pass-activity-img-wrap"},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.resizeImg(e),expression:"resizeImg(src)",arg:"background-image"}],staticClass:"pass-activity-img-item",class:["pass-activity-img-item",t.isLast(o)&&"is-last"],attrs:{"data-gradient":t.isLast(o)?"":"linear-gradient(0deg, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5))"},on:{load:function(e){return t.handleImageLoad()}}},[t.count>0?n("span",{staticClass:"pass-activity-img-count"},[t._v("\n        +"+t._s(t.count)+"\n      ")]):t._e()])])})),0)}),[],!1,null,"d0c2e8f2",null).exports),R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},$=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(h.a)(e,[{key:"isDesktop",get:function(){return"desktop"===this.platform}},{key:"title",get:function(){var t;return(null===(t=this.cardData)||void 0===t?void 0:t.pass_act_name)||""}},{key:"subTitleHtml",get:function(){var t=this.cardData||{},e=t.standard_act_name,n=void 0===e?"":e,o=t.standard_act_num;return 1===o?this.$t("78233",{attraction_name:"<b>".concat(n,"</b>")}):this.$t("76909",{Attraction_name:"<b>".concat(n,"</b>"),num:"<b>".concat(o-1,"</b>")})}},{key:"priceShow",get:function(){var t;return null===(t=this.cardData)||void 0===t?void 0:t.price_show}},{key:"count",get:function(){var t;return(null===(t=this.cardData)||void 0===t?void 0:t.standard_act_num)-1}},{key:"imgList",get:function(){var t;return null===(t=this.cardData)||void 0===t?void 0:t.standard_act_images}},{key:"tagText",get:function(){var t,e;return null===(e=null===(t=this.cardData)||void 0===t?void 0:t.price_show)||void 0===e?void 0:e.tag}},{key:"review",get:function(){var t;return null===(t=this.cardData)||void 0===t?void 0:t.review}}]),e}(v.Vue);R([Object(v.State)((function(t){return t.klook.platform}))],$.prototype,"platform",void 0),R([Object(v.Prop)()],$.prototype,"cardData",void 0);var L=$=R([Object(v.Component)({components:{PassActivityPrice:_,PassActivityReview:C,PassActivityImg:I}})],$),A=(n(2570),Object(O.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-activity-card",class:[t.platform]},[n("div",{staticClass:"pass-activity-card-body"},[n("div",[t.tagText?n("klk-label",{staticClass:"pass-activity-card-tag",attrs:{type:"outlined","text-color":"#FF5B00"}},[t._v("\n        "+t._s(t.tagText)+"\n      ")]):t._e(),t._v(" "),n("h4",{staticClass:"pass-activity-card-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),t.isDesktop?n("p",{staticClass:"pass-activity-card-subtitle",domProps:{innerHTML:t._s(t.subTitleHtml)}}):[n("PassActivityPrice",{staticClass:"pass-activity-card-price",attrs:{info:t.priceShow}}),t._v(" "),n("PassActivityReview",{staticClass:"pass-activity-card-review",attrs:{review:t.review,"is-grey":!0}})]],2),t._v(" "),n("PassActivityImg",{staticClass:"pass-activity-card-img",attrs:{list:t.imgList,count:t.count}})],1),t._v(" "),n("klk-divider",{staticClass:"pass-activity-card-divider",attrs:{dashed:""}}),t._v(" "),n("div",{staticClass:"pass-activity-card-footer"},[t.isDesktop?n("div",{staticClass:"flex-center"},[n("PassActivityPrice",{attrs:{info:t.priceShow}}),t._v(" "),n("PassActivityReview",{staticClass:"pass-activity-card-review",attrs:{review:t.review,"is-grey":!0}})],1):n("p",{staticClass:"pass-activity-card-subtitle",domProps:{innerHTML:t._s(t.subTitleHtml)}}),t._v(" "),n("div",{staticClass:"flex-center pass-activity-card-btn-wrap"},[n("div",{staticClass:"flex-center pass-activity-card-btn"},[n("span",{staticClass:"pass-activity-card-btn-text"},[t._v("\n          "+t._s(t.$t("76908"))+"\n        ")]),t._v(" "),t.isDesktop?n("span",{staticClass:"flex-center pass-activity-card-btn-icon"},[n("SvgIcon",{staticClass:"package-promotion-icon",attrs:{name:"desktop-common#arrow-standard-right-new",width:"16",height:"16"}})],1):t._e()])])])],1)}),[],!1,null,"1c1b9a54",null).exports),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(base.a);M.displayName="Pass_with_pic";var B=M=E([Object(v.Component)({components:{PassTitle:f.a,PassActivityCard:A}})],M),N=(n(2571),Object(O.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.pass_activity.length?n("div",{staticClass:"pass-with-pic-wrap",class:[t.platform]},[n("PassTitle",{staticClass:"pass-with-pic-title"}),t._v(" "),t.cardData?n("PassActivityCard",{attrs:{"card-data":t.cardData,"data-spm-module":t.spmModule(t.cardData),"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.openModal(t.cardData)}}}):t._e(),t._v(" "),n(t.popComponent,{tag:"component",attrs:{"is-book":!0,"activity-id":t.activityId,total:t.total,visible:t.visible,"deep-link":t.deepLink},on:{"update:visible":function(e){t.visible=e},closeModal:function(e){t.visible=!1}}})],1):t._e()}),[],!1,null,"16afa6c8",null));e.default=N.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=n(46),h=n(1100),y=n.n(h),m=n(1107),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(f.a)(e,[{key:"valid",get:function(){var t;return!!(null===(t=this.data)||void 0===t?void 0:t.length)}},{key:"dataList",get:function(){return this.valid?"desktop"===this.platform?y()(this.data,2):void 0:[]}}]),e}(v.Vue);k([Object(v.State)((function(t){return t.klook.platform}))],O.prototype,"platform",void 0),k([Object(v.Prop)()],O.prototype,"data",void 0);var _=O=k([Object(v.Component)({components:{CardSwiper:m.a,CardSwiperItem:m.b}})],O),j=(n(2572),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{class:["pass-without-pic-wrap",t.platform]},["desktop"===t.platform?n("div",[t.data.length<3?[n("div",{staticClass:"less-content-box",class:[t.data.length>1&&"hover-style"]},t._l(t.data,(function(e,o){return n("div",{key:o,staticClass:"item-container"},[t._t("default",null,{item:e,len:t.data.length})],2)})),0)]:[n("klk-card-swiper",{staticClass:"rwd-desktop-swiper"},t._l(t.dataList,(function(e,o){return n("klk-card-swiper-item",{key:o,staticClass:"item-container"},t._l(e,(function(e,o){return n("div",{key:e.pass_act_id+"-"+o,staticClass:"rwd-desktop-swiper-item"},[t._t("default",null,{item:e,len:t.data.length})],2)})),0)})),1)]],2):n("div",[[n("CardSwiper",{staticClass:"rwd-mobile-swiper"},t._l(t.data,(function(e,o){return n("CardSwiperItem",t._b({key:o,attrs:{"per-view":1}},"CardSwiperItem",{length:t.data.length,isBigCard:!0},!1),[t._t("default",null,{item:e,len:t.data.length})],2)})),1)]],2)]):t._e()}),[],!1,null,"1bb02a84",null).exports,P=(n(47),n(954),n(277)),C=n.n(P),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).showBookedNumber=!0,t}return Object(l.a)(e,t),Object(f.a)(e,[{key:"reviewScore",get:function(){var t;return C()(null===(t=this.reviewData)||void 0===t?void 0:t.score)}},{key:"isNewActivity",get:function(){var t;return!!(null===(t=this.reviewData)||void 0===t?void 0:t.description)}},{key:"reviewNumber",get:function(){var t;return(null===(t=this.reviewData)||void 0===t?void 0:t.number)||""}},{key:"star",get:function(){return Number.isInteger(this.reviewScore)?"".concat(this.reviewScore,".0"):this.reviewScore}},{key:"bookedNumber",get:function(){var t;return(null===(t=this.reviewData)||void 0===t?void 0:t.booked)||""}},{key:"showScore",get:function(){return!this.isNewActivity&&(this.reviewScore>0||this.reviewNumber||this.bookedNumber)}}]),e}(v.Vue);S([v.State],D.prototype,"klook",void 0),S([Object(v.Prop)()],D.prototype,"reviewData",void 0);var x=D=S([v.Component],D),T=(n(2573),Object(j.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-activity-recommend-info-title-review"},[t.showScore?n("div",{staticClass:"page-activity-recommend-score"},[t.reviewScore>0?n("span",{staticClass:"page-activity-recommend-score-number"},[n("SvgIcon",{class:{"fix-en-svg-style":t.klook.language.includes("en")},attrs:{name:"activity-common#icon_operational_star_fill_xxxs",size:"16"}}),t._v(" "),n("span",{staticClass:"score-rate"},[t._v(t._s(t.star))])],1):t._e(),t._v(" "),t.reviewNumber?n("span",{staticClass:"page-activity-recommend-review-number"},[t._v("\n      ("),n("span",{staticClass:"review-number base-span-style"},[t._v(t._s(t.reviewNumber))]),t._v(")\n    ")]):t._e(),t._v(" "),t.reviewNumber&&t.showBookedNumber?n("i",{staticClass:"sep"}):t._e(),t._v(" "),t.showBookedNumber?n("span",{staticClass:"page-activity-recommend-booked-number  base-span-style"},[t._v("\n      "+t._s(t.bookedNumber)+"\n    ")]):t._e()]):t._e(),t._v(" "),t.isNewActivity?n("div",{staticClass:"page-activity-recommend-new-activity"},[n("span",[t._v(t._s(t.reviewData.description))])]):t._e()])}),[],!1,null,"2e2f38b3",null).exports),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(f.a)(e,[{key:"getPrice",value:function(t){var e;return((null===(e=this.data)||void 0===e?void 0:e.price_show)||{})[t]}},{key:"subTitle",get:function(){var t=this.data||{},e=t.standard_act_name,n=void 0===e?"":e,o=t.standard_act_num;return 1===o?this.$t("78233",{attraction_name:n}):this.$t("76909",{Attraction_name:n,num:o-1})}},{key:"fromPrice",get:function(){var t=this.getPrice("from_price");return t?this.$t("activity_detail_from_price",["14px",t]):""}}]),e}(v.Vue);I([Object(v.Prop)()],R.prototype,"data",void 0),I([Object(v.Prop)({type:String,default:"horizontal"})],R.prototype,"direction",void 0);var $=R=I([Object(v.Component)({components:{CardScore:T}})],R),L=(n(2574),Object(j.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-without-pic-item-content",class:[t.direction]},[n("div",{staticClass:"pass-without-pic-item-content_left"},[n("p",{staticClass:"title"},[t._v(t._s(t.data.pass_act_name))]),t._v(" "),n("p",{staticClass:"sub_title"},[t._v(t._s(t.subTitle))]),t._v(" "),n("CardScore",{staticClass:"card-score-box",attrs:{"review-data":t.data.review}})],1),t._v(" "),n("div",{staticClass:"pass-without-pic-item-content_right"},[n("div",{staticClass:"price_box"},[t.getPrice("underline_price")?n("p",{staticClass:"underline_price"},[t._v(t._s(t.getPrice("underline_price")))]):t._e(),t._v(" "),t.getPrice("from_price")?n("p",{staticClass:"from_price",domProps:{innerHTML:t._s(t.fromPrice)}}):t._e(),t._v(" "),t.getPrice("sale_price")?n("p",{staticClass:"sale_price"},[t._v(t._s(t.getPrice("sale_price")))]):t._e()]),t._v(" "),n("div",{staticClass:"operator"},[n("klk-button",{staticClass:"expore-btn",attrs:{size:"small"}},[t._v(t._s(t.$t("76908")))])],1)])])}),[],!1,null,"2142ba5b",null).exports),A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(f.a)(e,[{key:"direction",get:function(){return 1===this.length&&"desktop"===this.platform?"horizontal":"vertical"}}]),e}(v.Vue);A([Object(v.State)((function(t){return t.klook.platform}))],E.prototype,"platform",void 0),A([Object(v.Prop)()],E.prototype,"item",void 0),A([Object(v.Prop)()],E.prototype,"length",void 0);var M=E=A([Object(v.Component)({components:{PassActivityItemContent:L}})],E),B=(n(2575),Object(j.a)(M,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pass-without-pic-item",class:[this.platform]},[e("PassActivityItemContent",{attrs:{data:this.item,direction:this.direction}})],1)}),[],!1,null,"588af99c",null).exports),base=n(2007),N=n(2069),V=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},F=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(base.a);F.displayName="Pass_without_pic";var W=F=V([Object(v.Component)({components:{PassActivityWrap:w,PassTitle:N.a,PassActivityItem:B}})],F),H=(n(2576),Object(j.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.pass_activity&&t.pass_activity.length?n("div",{staticClass:"pass-without-pic",class:t.platform},[n("PassTitle"),t._v(" "),n("PassActivityWrap",{attrs:{data:t.pass_activity},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item,r=e.len;return[n("PassActivityItem",{attrs:{item:o,length:r,"data-spm-module":t.spmModule(o),"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.openModal(o)}}})]}}],null,!1,3345804277)}),t._v(" "),n(t.popComponent,{tag:"component",attrs:{visible:t.visible,mode:"book","activity-id":t.activityId,total:t.total},on:{"update:visible":function(e){t.visible=e},book:t.handleBook}})],1):t._e()}),[],!1,null,"fccf0072",null));e.default=H.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1462),m=n(1012),k=n(2076),O=n(2047),_=n(1924),j=n(1844),w=n(1925),P=n(2077),C=n(2032),S=n(2033),D=n(2034),x=n(1038),T=n(1006),I=n(952),R=n(883),$=(n(45),n(86),n(22),n(14),n(11),n(8),n(12),n(0));function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"styleObj",get:function(){var t=this.width;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object($.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t?{width:t}:{})}}]),e}(f.Vue);A([Object(f.Prop)({default:""})],E.prototype,"width",void 0);var M=E=A([f.Component],E),B=(n(2501),n(43)),N=Object(B.a)(M,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"base-render-screen-out",style:this.styleObj},[this._t("default")],2)}),[],!1,null,"142d2372",null).exports,V=n(1470),F=n(2081),W=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},H=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).displayFilters=[],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){this.checkOverflow()}},{key:"checkOverflow",value:function(){for(var t,e,n=(null===(t=this.$el.querySelector("#js-hero-filter-screen-out .hero-filter-desktop-filter.filter-all"))||void 0===t?void 0:t.clientWidth)||0,o=Array.from(this.$el.querySelectorAll("#js-hero-filter-screen-out .hero-filter-desktop-item.filter-normal")||[]),r=720-n-26,i=0;i<o.length;i+=1){var c=8+((null===(e=o[i])||void 0===e?void 0:e.clientWidth)||0);if(!(c<=r))break;this.displayFilters.push(this.quickFilters[i]),r-=c}}},{key:"shouldPaint",get:function(){return this.displayFilters.length>0}}]),e}(n(1931).a);W([Object(f.Prop)({default:720})],H.prototype,"width",void 0);var U=H=W([Object(f.Component)({components:{BaseRenderScreenOut:N,FilterItem:V.a,PopContent:F.a}})],H),z=(n(2504),Object(B.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero-filter-desktop"},[n("div",{staticClass:"hero-filter-desktop-title"},[t._v("\n    "+t._s(t.$t("28269"))+"\n  ")]),t._v(" "),n("div",{staticClass:"hero-filter-desktop-wrap"},[n("div",{staticClass:"hero-filter-desktop-filter",attrs:{"data-spm-module":"TotalFilter","data-spm-virtual-item":"__virtual"},on:{click:t.openPop}},[n("svg-icon",{staticClass:"hero-filter-desktop-filter-icon",attrs:{name:"activity-common#icon_filter",size:"16"}}),t._v(" "),t.selectedText?n("span",{staticClass:"hero-filter-desktop-filter-text"},[t._v("\n        "+t._s(t.selectedText)+"\n      ")]):t._e()],1),t._v(" "),t.shouldPaint?t._l(t.displayFilters,(function(e,o){return n("div",{key:e.key,staticClass:"hero-filter-desktop-item"},[n("FilterItem",{attrs:{size:"large",mode:"outline",verbose:!0,active:t.selected.includes(e.selectValue),"data-spm-module":t.getQuickFilterItemSpm(e,t.displayFilters.length,o),"data-spm-virtual-item":"__virtual"},nativeOn:{click:function(n){return t.handleSelect(e.selectValue)}}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1)})):t._e()],2),t._v(" "),t.shouldPaint?t._e():n("BaseRenderScreenOut",{attrs:{id:"js-hero-filter-screen-out"}},[n("div",{staticClass:"hero-filter-desktop-screen-out"},[n("div",{staticClass:"hero-filter-desktop-filter filter-all",attrs:{"data-spm-module":"TotalFilter","data-spm-virtual-item":"__virtual"},on:{click:t.openPop}},[n("svg-icon",{staticClass:"hero-filter-desktop-filter-icon",attrs:{name:"activity-common#icon_filter",size:"20"}}),t._v(" "),n("span",{staticClass:"hero-filter-desktop-filter-text"},[t._v("\n          "+t._s(t.selectedText)+"\n        ")])],1),t._v(" "),t._l(t.quickFilters,(function(e){return n("div",{key:e.key,staticClass:"hero-filter-desktop-item filter-normal"},[n("FilterItem",{attrs:{size:"large",mode:"outline",verbose:!0}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1)}))],2)]),t._v(" "),n("klk-modal",{ref:"heroFilterPopRef",staticClass:"hero-filter-desktop-pop",attrs:{size:"large",open:t.popVisible,"esc-press-closable":!0,width:750,scrollable:!0,closable:!0,title:t.$t("28269"),"data-spm-page":"TNA_ActivityFilter?oid=activity_"+t.activityId+"&trg=manual"},on:{"update:open":function(e){t.popVisible=e},close:function(e){t.popVisible=!1}}},[n("PopContent",{staticClass:"hero-filter-desktop-pop-content",attrs:{list:t.detailFilters,selected:t.popSelected},on:{select:t.handlePopSelect}}),t._v(" "),n("template",{slot:"footer"},[n("section",{staticClass:"hero-filter-desktop-pop-footer"},[n("span",{staticClass:"footer-clear",class:[{disabled:0===t.popSelected.length}],on:{click:function(e){return e.stopPropagation(),t.handlePopClear(e)}}},[t._v("\n          "+t._s(t.$t("search_mobile_clear"))+"\n        ")]),t._v(" "),n("klk-button",{ref:"heroFilterPopConfirmRef",staticClass:"footer-confirm",attrs:{color:"primary",disabled:0===t.popNum,"data-spm-module":"SeeResult?trg=manual&ext="+encodeURIComponent(JSON.stringify({TagKey:t.selectedKeys,ResultPackageAmount:t.resultPackageAmount,FilterAmount:t.filterAmount})),"data-spm-virtual-item":"__virtual?trg=manual"},on:{click:t.handlePopConfirm}},[t._v("\n          "+t._s(t.popConfirmText||t.$t("global.confirm"))+"\n        ")])],1)])],2)],1)}),[],!1,null,"b5147ba6",null).exports),G=n(1164),Y=n(2082),K=n(1687),J=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},X=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isHitHeroFilterAb=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleHitExperiment",value:function(t){var e;this.isHitHeroFilterAb=this.isHitHeroFilterAb||!!(null===(e=t)||void 0===e?void 0:e.component)}},{key:"clearAll",value:function(){this.isHitHeroFilterAb||(this.tagFilterList=[]),this.pkgSelectedDate="",this.chosenAttrIds=[],this.setExpPkgSelectedTime(),this.updateExpPackageId()}},{key:"calcTaggingTrack",get:function(){var t,e,n=null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags;return Object(R.getTaggingTrackObj)({track:{spm:"Package_Discount_Section",action:!0},list:n,pkg:this.calcPkgSelectedObj})}}]),e}(Object(f.mixins)(Y.a,K.a)),Q=X=J([Object(f.Component)({components:{PriceDiscountTips:I.a,OpenDateTips:T.default,PackageOptionsContent:y.a,ActivityDatePickerDesktop:O.default,PackageOptionsTime:_.a,ActivityPromotionInfoDesktop:j.default,BookingOptionsUnitsTips:w.a,PackageOptionsCounterNew:P.a,PackageAttrDesktop:C.a,PackageOptionsBtnGroup:S.a,ActivityPackageDetail:D.a,NoneFilterResult:x.a,PackageOptionsWarning:k.a,WarmingSlogan:m.a,HeroFilter:z,HeroFilterAb:Object(G.a)({experimentName:"Experiences_Hero_Desktop_Filter",groupComponents:{Variant:function(){return n.e(327).then(n.bind(null,4106))},Control:null},autoDataSend:!0})}})],X),Z=(n(2505),Object(B.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"-8px 0 16px 0"}}):t._e(),t._v(" "),t.heroFilterObj?n("HeroFilterAb",{staticStyle:{"margin-top":"24px"},attrs:{selected:t.tagFilterList,"get-num":t.getTagPkgNum,"activity-id":t.activityId,"packages-total":t.packageList.length,packages:t.packageList,"filter-data":t.heroFilterObj},on:{"update:selected":function(e){t.tagFilterList=e},change:t.autoSelectFirstAttr,hitExperiment:t.handleHitExperiment}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}]},[n("div",{staticClass:"activity-package-options js-activity-package-options"},[n("div",{staticClass:"activity-package-spec-wrap",attrs:{"data-spm-module":"PackageOptions?trg=manual"}},[n("div",{staticClass:"activity-package-options-title"},[t.calcActIsNewOpenTicket?n("span",[t._v("\n            "+t._s(t.$t("49828"))+"\n          ")]):n("span",[t._v("\n            "+t._s(t.$t("activity.new.package_options_tip"))+"\n          ")]),t._v(" "),n("span",{staticClass:"clearAll",attrs:{"data-spm-module":"Clear_Btn","data-spm-virtual-item":"__virtual"},on:{click:t.clearAll}},[t._v("\n            "+t._s(t.$t("global.clear_all"))+"\n          ")])]),t._v(" "),n("PackageOptionsContent",{directives:[{name:"show",rawName:"v-show",value:!t.calcActIsNewOpenTicket&&!t.isLinePage&&t.calcActScheduleList.length,expression:"!calcActIsNewOpenTicket && !isLinePage && calcActScheduleList.length"}],ref:"desktopPackageDate",staticClass:"package-detail-date",attrs:{"content-title":t.dateDescription}},[n("ActivityDatePickerDesktop",{attrs:{"schedules-state":t.activitySchedulesApiDefined.state,schedules:t.calcActScheduleList,"package-schedules":t.calcPkgScheduleList,"package-id":t.packageId,"activity-id":t.activityId,"template-id":t.templateId,"activity-page-template-id":t.activityPageTemplateId,"is-package-schedule":t.isPackageSchedule,legends:t.calcPkgLegendList},on:{"reload-schedules":function(e){return t.getActivitySchedulesApiData(t.calcActSchedulesParams)},changePackageType:t.setExpPkgScheduleType},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}})],1),t._v(" "),n("PackageOptionsTime",{directives:[{name:"show",rawName:"v-show",value:!t.calcActIsNewOpenTicket,expression:"!calcActIsNewOpenTicket"}],ref:"desktopPackageTime",attrs:{"package-price-schedules":t.calcPkgScheduleList,"package-selected-date":t.pkgSelectedDate,"package-id":t.packageId,legends:t.calcPkgLegendList,"current-selected-package":t.calcPkgSelectedObj,"is-new-open-ticket":t.calcActIsNewOpenTicket},on:{setPackageTime:t.setPackageTime,resetPackageTime:t.resetPackageTime}}),t._v(" "),t.calcActIsMultiSpecWithDiscount?n("ActivityPromotionInfoDesktop",t._b({attrs:{"package-id":t.packageId,"package-selected-date":t.pkgSelectedDate,"template-id":t.templateId,"activity-id":t.activityId,"valid-packages":t.calcActValidPkgList,"included-packages":t.packageList,"packages-in-date":t.calcActInDatePacakges},on:{selectPackage:t.selectPackage}},"ActivityPromotionInfoDesktop",t.bindIHTrack(t.calcTaggingTrack),!1)):t._e(),t._v(" "),t.heroFilterObj&&!t.isHitHeroFilterAb?n("HeroFilter",{staticClass:"activity-package-options_hero_filter",staticStyle:{"margin-top":"20px"},attrs:{selected:t.tagFilterList,"get-num":t.getTagPkgNum,"activity-id":t.activityId,"packages-total":t.packageList.length,packages:t.packageList,"filter-data":t.heroFilterObj},on:{"update:selected":function(e){t.tagFilterList=e},change:t.autoSelectFirstAttr}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone||t.showTagFilterNone,expression:"showFilterNone || showTagFilterNone"}],staticStyle:{margin:"40px 0 0","padding-bottom":"0px"},attrs:{title:t.showTagFilterNone?t.$t("13630"):""}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone&&!t.showTagFilterNone,expression:"!showFilterNone && !showTagFilterNone"}]},[n("PackageAttrDesktop",{ref:"attrWrap",attrs:{spec:t.specList,packages:t.packageList,schedule:t.calcActScheduleObj,value:t.chosenAttrIds,"activity-id":t.activityId,"activity-page-template-id":t.activityPageTemplateId,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-single-spec":t.calcActIsSingleSpec,"is-new-open-ticket":t.calcActIsNewOpenTicket,"show-open-date-tips":t.showOpenDateTips,"included-packages":t.packageList,"is-enable-reverse-select":!0,"spec-title":t.calcActIsHeroPage?t.getTagFilterSpecTitle(t.packageList):"","included-tag-packages":t.getIncludedTagPackages(t.packageList)},on:{input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectSpec:t.handleSelectSpec}}),t._v(" "),t.showWarning?n("WarmingSlogan",{key:t.calcPkgSelectedObj&&t.calcPkgSelectedObj.package_id,staticStyle:{"margin-top":"24px"},attrs:{"publish-info":t.calcPkgSelectedObj&&t.calcPkgSelectedObj.publish_info},scopedSlots:t._u([{key:"default",fn:function(e){var text=e.text;return[n("PackageOptionsWarning",{attrs:{"publish-info":t.calcPkgSelectedObj&&t.calcPkgSelectedObj.publish_info,"force-text":text}})]}}],null,!1,652473570)}):t.packageId?n("PackageOptionsContent",{staticClass:"package-detail-order",attrs:{"content-title":t.$t("activity.new.unit_quantity")}},[t.calcPkgSelectedObj?n("BookingOptionsUnitsTips",{attrs:{"max-pax":t.calcPkgSelectedObj.max_pax,"min-pax":t.calcPkgSelectedObj.min_pax}}):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.calcIsReloadStatus,expression:"calcIsReloadStatus"}],staticClass:"unit-list-box"},t._l(t.currentUnits,(function(e){return n("PackageOptionsCounterNew",{key:e.priceId,staticClass:"order-item",attrs:{unit:e,"tips-type":"tips-flex-column","selected-time":t.pkgSelectedTime,"current-selected-package":t.calcPkgSelectedObj,"publish-info":t.calcPkgSelectedObj.publish_info,disabled:t.isLinePage},on:{handlePlus:t.handlePlus,handleMinus:t.handleMinus}})})),1)],1):t._e(),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticStyle:{margin:"40px 0"},attrs:{tips:t.preSettlementTips2getters}}):t._e(),t._v(" "),t.calcPkgShowBookingAction?[n("PackageOptionsBtnGroup",t._b({ref:"packageOptionsBtnGroup",staticClass:"options-btn"},"PackageOptionsBtnGroup",t.addToCartOrBookButton,!1))]:t._e(),t._v(" "),t.packageId?n("ActivityPackageDetail",{staticClass:"js-spec-type-pkg-detail",attrs:{"package-id":t.packageId,"spec-list":t.calcExtraSpecList,"package-detail":t.calcPkgDetailObj,"current-selected-package":t.calcExtraPkgList,"fetch-package-detail-status":t.packageDetailApiDefined.reloadConfig.state}}):t._e()],2)],1)])])],1)}),[],!1,null,"b02d184e",null).exports),tt=n(891),et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},it=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bookingCoreData={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){var t=this.businessData,e=this.basicData,n=this.$route;this.bookingCoreData=tt.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return tt.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);it.displayName="DesktopPackage_options_spec_type";var nt=it=et([Object(f.Component)({components:{DesktopPackageOptionsSpecType:Z}})],it),at=Object(B.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DesktopPackageOptionsSpecType",t._b({attrs:{"package-id":t.bookingCoreData.packageId},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"DesktopPackageOptionsSpecType",t.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=at.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(22),n(14),n(11),n(8),n(12),n(28),n(13)),m=n(25),k=n(0),O=n(7),_=n.n(O),j=n(1226),w=n.n(j),P=n(1227),C=n.n(P),S=n(1462),D=n(1012),x=n(2076),T=n(2049),I=n(1924),R=n(1844),$=n(1925),L=n(2077),A=n(2032),E=n(2033),M=n(2034),B=n(1038),N=n(1006),V=n(952),F=n(883),W=n(2050),H=(n(70),n(52),n(53),n(886)),U=n(912);function z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Y=Object(f.namespace)("experience"),K=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).rangeDateList=[],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"clearHandler",value:function(){var t=Array.isArray(this.calendarDate)?[]:"";this.changeHandler(t)}},{key:"changeHandler",value:function(t){var e=this;if(Array.isArray(t)){var n=t.map((function(t){return e.getFormatDate(t)}));this.$emit("change",n)}else{var o=t?this.getFormatDate(t):"";this.$emit("change",o)}}},{key:"everyChangeHandler",value:function(t){var e=this;if(Array.isArray(t)){1===this.minDays&&1===this.maxDays&&1===t.length&&t.push(t[0]);var n=t.map((function(t){return e.getFormatDate(t)}));this.rangeDateList=n,this.$emit("change",n)}}},{key:"showItemLegend",value:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.legend_keys)||void 0===n?void 0:n.length)}},{key:"getPrice",value:function(t){var e;return null===(e=this.getSchedule(t))||void 0===e?void 0:e.selling_price}},{key:"getSchedule",value:function(t){var e=this.getFormatDate(t);return this.schedulesMap[e]}},{key:"getFormatDate",value:function(t,e){return _()(t).format(e||"YYYY-MM-DD")}},{key:"shouldDateDisabled",value:function(t){if(this.disabledFn)return this.disabledFn(t);var e=this.getFormatDate(t);return!this.getSchedule(t)||this.isSoldout(e)}},{key:"formatDay",value:function(t){return _()(t).format("D")}},{key:"isSoldout",value:function(t){var e=this.getFormatDate(t),n=this.schedulesMap[e];if(n)return n.soldout}},{key:"getLocalDate",value:function(t){if(Array.isArray(t))return t.map((function(t){return new Date(t)}));var e=_()(t||void 0).toString();return new Date(e)}},{key:"calcMinMaxTips",get:function(){var t=this.minDays,e=this.maxDays,n=t<=1?1:t,o=e<=1?1:e;return"date-range"!==this.calcPicker.type?"":n===o&&1===n?this.$t("89656"):1===n?this.$t("89263",{X:o}):this.$t("89152",{min:n,max:o})}},{key:"calcPicker",get:function(){return this.sectionActData.isWifi?{"double-panel":!0,"min-range-gap":86400*(this.minDays>=1?this.minDays-1:0),type:"date-range"}:{}}},{key:"calendarDate",get:function(){return this.date?this.getLocalDate(this.date):null}},{key:"schedulesMap",get:function(){var t;return null===(t=this.schedules)||void 0===t?void 0:t.reduce((function(t,e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,Object(k.a)({},e.date,e))}),{})}},{key:"defaultViewDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.find((function(t){var e,n;return null===(n=null===(e=t)||void 0===e?void 0:e.time_slots)||void 0===n?void 0:n.some((function(t){var e;return null===(e=t)||void 0===e?void 0:e.stock}))}));return(null===(e=o)||void 0===e?void 0:e.date)?this.getLocalDate(null===(n=o)||void 0===n?void 0:n.date):this.minDate}},{key:"minDate",get:function(){var t,e;return this.getLocalDate(null===(e=null===(t=this.schedules)||void 0===t?void 0:t[0])||void 0===e?void 0:e.date)}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.schedules)||void 0===t?void 0:t.length;return 0===o?null:this.getLocalDate(null===(n=null===(e=this.schedules)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}}]),e}(f.Vue);G([Y.State],K.prototype,"sectionActData",void 0),G([f.State],K.prototype,"klook",void 0),G([Object(f.Prop)({default:null})],K.prototype,"disabledFn",void 0),G([Object(f.Prop)({default:0})],K.prototype,"minPax",void 0),G([Object(f.Prop)({default:0})],K.prototype,"minDays",void 0),G([Object(f.Prop)({default:0})],K.prototype,"maxDays",void 0),G([Object(f.Prop)()],K.prototype,"schedules",void 0),G([Object(f.Prop)()],K.prototype,"date",void 0),G([Object(f.Prop)({default:!0})],K.prototype,"priceVisible",void 0),G([Object(f.Prop)({default:function(){return[]}})],K.prototype,"legends",void 0);var J=K=G([Object(f.Component)({components:{CalendarLengends:H.a,CalenderTips:U.a}})],K),X=(n(2511),n(43)),Q=Object(X.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-date-picker-content"},[t.calcMinMaxTips?n("div",{staticClass:"min-days-box"},[n("klk-alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n      "+t._s(t.calcMinMaxTips)+"\n    ")])],1):t._e(),t._v(" "),n("klk-date-picker",t._b({staticClass:"exp-date-picker-custom",attrs:{width:"auto",date:t.calendarDate,"min-date":t.minDate,"max-date":t.maxDate,"default-view-date":t.defaultViewDate,"should-disable-date":t.shouldDateDisabled},on:{change:t.changeHandler,everyChange:t.everyChangeHandler},scopedSlots:t._u([{key:"day",fn:function(e){return[t._t("day",[t.isSoldout(e.date)?n("div",{staticClass:"klk-date-picker-date-inner"},[n("div",{staticClass:"inner-content klk-date-picker-sold-out"},[t._v("\n            "+t._s(t.formatDay(e.date))+"\n          ")])]):t._e()],{date:e})]}},{key:"date-append",fn:function(e){var o=e.date;return[t.priceVisible?n("span",[t._v(t._s(t.getPrice(o)))]):t._e(),t._v(" "),t.showItemLegend(t.getSchedule(o))?n("CalendarLengends",{attrs:{legends:t.legends,item:t.getSchedule(o)}}):t._e()]}}],null,!0)},"klk-date-picker",t.calcPicker,!1),[t._v(" "),t._v(" "),n("template",{slot:"tip"},[t.$slots.tips?t._t("tips"):[n("CalenderTips",{staticClass:"calender-tips-box",attrs:{"price-visible":t.priceVisible}},[n("span",{staticClass:"clear-btn",on:{click:t.clearHandler}},[t._v(t._s(t.$t("clear")))])])],t._v(" "),t._t("footer-slot")],2)],2)],1)}),[],!1,null,"1e372bff",null).exports,Z=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},tt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).rules=t.getRules(),t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getRules",value:function(){var t=this;return{in:{hasError:null,validate:function(data,e){var n,o,r;if((!t.autoHideExtra||(null===(n=t.calcInList)||void 0===n?void 0:n.length))&&!(null===(o=data)||void 0===o?void 0:o.id))return e.hasError=new Error(t.$t("global.select.empty_error")),null===(r=e)||void 0===r?void 0:r.hasError;e.hasError=null}},out:{hasError:null,validate:function(data,e){var n,o,r;if((!t.autoHideExtra||(null===(n=t.calcOutList)||void 0===n?void 0:n.length))&&!(null===(o=data)||void 0===o?void 0:o.id))return e.hasError=new Error(t.$t("global.select.empty_error")),null===(r=e)||void 0===r?void 0:r.hasError;e.hasError=null}}}}},{key:"checkValidate",value:function(){var t=this.timeData,e=this.rules;return Object.keys(e).map((function(n){var o=t[n];return!e[n].validate(o,e[n])})).every((function(t){return t}))}},{key:"clickHandler",value:function(t,e){var n,o,r,c=this.timeExtra,l=this.rules,d=(null===(o=null===(n=c)||void 0===n?void 0:n[t])||void 0===o?void 0:o.find((function(t){return t.id===e})))||{};(null===(r=l)||void 0===r?void 0:r[t])&&this.$set(l[t],"hasError",!d),this.$emit("clickTime",t,d)}},{key:"mounted",value:function(){this.isValidate&&this.checkValidate()}},{key:"calcSelectProps",get:function(){var t=this.placement;return{"max-height":224,"style-type":"filled",placeholder:this.$t("14651"),placement:t}}},{key:"calcValue",get:function(){var t=this;return function(e){var n,o;return(null===(o=null===(n=t.timeData)||void 0===n?void 0:n[e])||void 0===o?void 0:o.id)||0}}},{key:"calcInList",get:function(){var t;return(null===(t=this.timeExtra)||void 0===t?void 0:t.in)||[]}},{key:"calcOutList",get:function(){var t;return(null===(t=this.timeExtra)||void 0===t?void 0:t.out)||[]}},{key:"calcTimeFormatStr",get:function(){var t=this;return function(e){var n,o;return(null===(o=null===(n=t.timeData)||void 0===n?void 0:n[e])||void 0===o?void 0:o.startEndFormatStr)||""}}},{key:"calcActive",get:function(){var t=this;return function(e){var n,o=t.styleType,r=t.timeData;return"select-time-type"===o&&(null===(n=r)||void 0===n?void 0:n.key)===e?"on":""}}},{key:"calcFirstKey",get:function(){return this.isDate?this.$t("13541"):this.$t("88952")}},{key:"calcLastKey",get:function(){return this.isDate?this.$t("15987"):this.$t("88953")}}]),e}(f.Vue);Z([f.State],tt.prototype,"klook",void 0),Z([Object(f.Prop)()],tt.prototype,"isValidate",void 0),Z([Object(f.Prop)()],tt.prototype,"flexType",void 0),Z([Object(f.Prop)()],tt.prototype,"isDate",void 0),Z([Object(f.Prop)()],tt.prototype,"showRight",void 0),Z([Object(f.Prop)()],tt.prototype,"timeData",void 0),Z([Object(f.Prop)()],tt.prototype,"styleType",void 0),Z([Object(f.Prop)()],tt.prototype,"autoHideExtra",void 0),Z([Object(f.Prop)()],tt.prototype,"timeExtra",void 0),Z([Object(f.Prop)({default:"bottom"})],tt.prototype,"placement",void 0);var et=tt=Z([Object(f.Component)({components:{}})],tt),it=(n(2512),Object(X.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"range-date-time",class:t.flexType},[n("div",{staticClass:"range-date-time__box"},[!t.autoHideExtra||t.calcInList.length?n("div",{staticClass:"box-item__wrap"},[n("div",{staticClass:"box-item",class:[t.calcActive("in"),t.rules.in.hasError&&"has-error"]},[n("klk-select",t._b({staticClass:"spec-select-style",attrs:{value:t.calcValue("in")},on:{change:function(e){return t.clickHandler("in",e)}}},"klk-select",t.calcSelectProps,!1),[n("span",{attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.calcFirstKey))]),t._v(" "),t._l(t.calcInList,(function(t){return n("klk-option",{key:t.id,attrs:{value:t.id,label:t.start+" - "+t.end}})}))],2)],1),t._v(" "),t.rules.in.hasError?n("span",{staticClass:"error-tips"},[t._v(t._s(t.$t("14651")+" "+t.$t("88952")))]):t._e()]):t._e(),t._v(" "),!t.autoHideExtra||t.calcOutList.length?n("div",{staticClass:"box-item__wrap"},[!t.autoHideExtra||t.calcOutList.length?n("div",{staticClass:"box-item",class:[t.calcActive("out"),t.rules.out.hasError&&"has-error"]},[n("klk-select",t._b({staticClass:"spec-select-style",attrs:{value:t.calcValue("out")},on:{change:function(e){return t.clickHandler("out",e)}}},"klk-select",t.calcSelectProps,!1),[n("span",{attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.calcLastKey))]),t._v(" "),t._l(t.calcOutList,(function(t){return n("klk-option",{key:t.id,attrs:{value:t.id,label:t.start+" - "+t.end}})}))],2)],1):t._e(),t._v(" "),t.rules.out.hasError?n("span",{staticClass:"error-tips"},[t._v(t._s(t.$t("14651")+" "+t.$t("88953")))]):t._e()]):t._e()])])}),[],!1,null,"739433bd",null).exports),nt=n(1364),at=n(2082),ot=n(1687);function ct(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function st(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ct(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ct(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var lt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};_.a.extend(w.a),_.a.extend(C.a);var ut=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).initObjCache=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcSchedulesWatch",value:function(t){var e;(null===(e=t)||void 0===e?void 0:e.length)&&this.initData()}},{key:"shouldDateDisabledFn",value:function(t){var e,n,o=this.dateObj.list||[],r=this.calcSchedules,c=this.maxDate,l=this.calcPkgSelectedObj,d=l.min_pax,v=l.min_trip,f=l.max_trip,h=Object(nt.c)(t);return(null===(e=o)||void 0===e?void 0:e.length)&&2!==(null===(n=o)||void 0===n?void 0:n.length)?this.isInvalidDate(t,{schedules:r,rangeDateList:o,minPax:d,minDays:v,maxDays:f,maxDate:c}):this.initObjCache[h]}},{key:"isInvalidDate",value:function(t,e){var n=Object(nt.c)(t);return!!this.isSoldout(n)||Object(nt.e)(t,e)}},{key:"isSoldout",value:function(t){var e=Object(nt.c)(t),n=this.pkgSchedulesMap[e];if(n)return n.soldout}},{key:"initData",value:function(){var t=this,e=this.calcSchedules,n=this.maxDate,o=this.calcPkgSelectedObj,r={schedules:e,rangeDateList:[],minPax:o.min_pax,minDays:o.min_trip,maxDays:o.max_trip,maxDate:n},c=Object(nt.a)(nt.f);c.onmessage=function(e){t.initObjCache=t.initDateDisabledCacheData(e.data).initedObj,c.terminate(),c=null},c.postMessage(r)}},{key:"initDateDisabledCacheData",value:function(t){var e,n=this,o=null===(e=t)||void 0===e?void 0:e.schedules;return o.length?{initedObj:o.reduce((function(e,o){var r=new Date(o.date);return e[o.date]=n.isInvalidDate(r,t),e}),{})}:{}}},{key:"showDatePickerHandler",value:function(t){var e=this.timeObj,n=this.calcTimeExtra;if(t){if(!n)return;this.initTimeObj(e)}}},{key:"initTimeObj",value:function(t){var e,n,o,r,c=this.calcTimeExtra;if(1===(null===(n=null===(e=c)||void 0===e?void 0:e.in)||void 0===n?void 0:n.length)){var l=c.in[0];t.in=st({},l,{startEndFormatStr:this.getStartEndFormatStr(l)})}if(1===(null===(r=null===(o=c)||void 0===o?void 0:o.out)||void 0===r?void 0:r.length)){var d=c.out[0];t.out=st({},d,{startEndFormatStr:this.getStartEndFormatStr(d)})}return t}},{key:"getStartEndFormatStr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" - ";return"".concat(t.start).concat(e).concat(t.end)}},{key:"getTitle2tid",value:function(t){var e;return null===(e={7:{title:this.calcTimeExtra?this.$t("15667-Date & time"):this.$t("74126-Date")},8:{title:this.$t("88949-Pick-up date & time")}}[t])||void 0===e?void 0:e.title}},{key:"rangeConfirmHandler",value:function(t){this.pkgSelectedDate=t.date||"",this.wifiSimParams=t}},{key:"changeDatePickerHandler",value:function(t){var e,n=this,o=this.$refs.pickupReturnDateTimeRef;this.updateRangeDate(t),this.calcTimeExtra||this.checkRangeDateValidate()?this.rangeConfirmHandler(this.getWifiParams()):(null===(e=o)||void 0===e?void 0:e.setDatePicker)&&o.setDatePicker(!1,(function(){n.rangeConfirmHandler(n.getWifiParams())}))}},{key:"getTotalBookingDays",value:function(){var t,e,n,o,r=this.dateObj,c=this.timeObj;if(!r.days)return 0;var l=(null===(e=null===(t=c)||void 0===t?void 0:t.in)||void 0===e?void 0:e.increase)||0,d=(null===(o=null===(n=c)||void 0===n?void 0:n.out)||void 0===o?void 0:o.increase)||0;return Math.max(r.days+l+d,1)}},{key:"getWifiParams",value:function(){var t,e,n,o,r=this.dateObj,c=this.timeObj,l=r.list||[],d=Object(m.a)(l,2),v=d[0],f=d[1];return{days:this.getTotalBookingDays(),date:v||"",start_date:v?"".concat(v," 00:00:00"):"",end_date:f?"".concat(f," 00:00:00"):"",start_time_type_id:(null===(e=null===(t=c)||void 0===t?void 0:t.in)||void 0===e?void 0:e.id)||0,end_time_type_id:(null===(o=null===(n=c)||void 0===n?void 0:n.out)||void 0===o?void 0:o.id)||0,minStock:r.minStock}}},{key:"validateSimCardParams",value:function(){var t,e,n,o=this.timeObj,r=this.dateObj;return this.pkgSelectedDate&&(null===(t=r.list)||void 0===t?void 0:t.length)?this.calcTimeExtra&&!(null===(n=null===(e=o)||void 0===e?void 0:e.in)||void 0===n?void 0:n.id)&&this.$t("88950"):this.$t("88950")}},{key:"getSimCardParams",value:function(t){var e,n,o=t.startDate,r=this.timeObj;return{date:o||"",start_date:o?"".concat(o," 00:00:00"):"",start_time_type_id:(null===(n=null===(e=r)||void 0===e?void 0:e.in)||void 0===n?void 0:n.id)||0,end_date:"",end_time_type_id:0,validateFn:this.validateSimCardParams}}},{key:"updateRangeDate",value:function(t){var e=this.dateObj,n=t||[],o=Object(m.a)(n,2),r=o[0],c=o[1],l=this.getArrangementIdsAndStocks(r,c);e.list=t,e.minStock=l.minStock,e.days=l.days,e.stocks=l.stocks,this.pkgSelectedDate=this.sectionActData.isSimCard?r:l.days?r:""}},{key:"getArrangementIdsAndStocks",value:function(t,e){var n,o=null===(n=this.calcPkgScheduleList)||void 0===n?void 0:n.filter((function(n){var o=_()(n.date);return o.isSameOrAfter(_()(t),"day")&&o.isSameOrBefore(_()(e),"day")})),r=o.length,c=o.map((function(t){return t.stock}));return{days:r,stocks:c,minStock:Math.min.apply(Math,Object(y.a)(c))||0}}},{key:"clickRangeTimeHandler",value:function(t,e){var n=this.timeObj;n.key=t,this.$set(n,t,e),this.rangeConfirmHandler(this.getWifiParams())}},{key:"clearAll",value:function(){this.initWifiSimData(),this.tagFilterList=[],this.pkgSelectedDate="",this.chosenAttrIds=[],this.setExpPkgSelectedTime(),this.updateExpPackageId()}},{key:"calcSchedules",get:function(){return Object(nt.b)(this.calcPkgScheduleList)}},{key:"pkgSchedulesMap",get:function(){var t;return null===(t=this.calcPkgScheduleList)||void 0===t?void 0:t.reduce((function(t,e){return st({},t,Object(k.a)({},e.date,e))}),{})}},{key:"maxDate",get:function(){var t,e,n,o=null===(t=this.calcPkgScheduleList)||void 0===t?void 0:t.length;return 0===o?null:Object(nt.d)(null===(n=null===(e=this.calcPkgScheduleList)||void 0===e?void 0:e[o-1])||void 0===n?void 0:n.date)}},{key:"calcSelectDateTime",get:function(){var t,e,n,o,r=this.timeObj,c=this.dateObj,l=this.formatStandardDate,d=c.list||[],v=Object(m.a)(d,2),f=v[0],h=v[1],y=((null===(e=null===(t=r)||void 0===t?void 0:t.in)||void 0===e?void 0:e.startEndFormatStr)||"").replace(/\s/g,""),k=((null===(o=null===(n=r)||void 0===n?void 0:n.out)||void 0===o?void 0:o.startEndFormatStr)||"").replace(/\s/g,"");return{in:{startEndFormatStr:f?"".concat(l(f)).concat(y?", "+y:""):""},out:{startEndFormatStr:h?"".concat(l(h)).concat(k?", "+k:""):""}}}},{key:"calcFormattedPriceDays",get:function(){var t=this.getTotalBookingDays();return this.$t("3397",{0:t})}},{key:"calcTaggingTrack",get:function(){var t,e,n=null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags;return Object(F.getTaggingTrackObj)({track:{spm:"Package_Discount_Section",action:!0},list:n,pkg:this.calcPkgSelectedObj})}}]),e}(Object(f.mixins)(at.a,ot.a));lt([Object(f.Watch)("calcSchedules",{deep:!0})],ut.prototype,"calcSchedulesWatch",null);var pt=ut=lt([Object(f.Component)({components:{RangeDateTimeDesktop:it,ExpDatePicker:Q,PickupReturnDateTime:W.default,PriceDiscountTips:V.a,OpenDateTips:N.default,PackageOptionsContent:S.a,PackageOptionsTime:I.a,ActivityPromotionInfoDesktop:R.default,BookingOptionsUnitsTips:$.a,PackageOptionsCounterNew:L.a,PackageAttrDesktop:A.a,PackageOptionsBtnGroup:E.a,ActivityPackageDetail:M.a,NoneFilterResult:B.a,PackageOptionsWarning:x.a,PackageOptionsLoading:T.default,WarmingSlogan:D.a}})],ut),vt=(n(2513),Object(X.a)(pt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"-8px 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}]},[n("div",{staticClass:"activity-package-options js-activity-package-options"},[n("div",{staticClass:"activity-package-spec-wrap",attrs:{"data-spm-module":"PackageOptions?trg=manual"}},[n("div",{staticClass:"activity-package-options-title"},[t.calcActIsNewOpenTicket?n("span",[t._v("\n            "+t._s(t.$t("49828"))+"\n          ")]):n("span",[t._v("\n            "+t._s(t.$t("activity.new.package_options_tip"))+"\n          ")]),t._v(" "),n("klk-button",{staticClass:"clearAll",attrs:{type:"secondary",size:"small","data-spm-module":"Clear_Btn","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.clearAll(e)}}},[t._v("\n            "+t._s(t.$t("global.clear_all"))+"\n          ")])],1),t._v(" "),n("PackageOptionsTime",{directives:[{name:"show",rawName:"v-show",value:!t.calcActIsNewOpenTicket,expression:"!calcActIsNewOpenTicket"}],ref:"desktopPackageTime",attrs:{"package-price-schedules":t.calcPkgScheduleList,"package-selected-date":t.pkgSelectedDate,"package-id":t.packageId,legends:t.calcPkgLegendList,"current-selected-package":t.calcPkgSelectedObj,"is-new-open-ticket":t.calcActIsNewOpenTicket},on:{setPackageTime:t.setPackageTime,resetPackageTime:t.resetPackageTime}}),t._v(" "),t.calcActIsMultiSpecWithDiscount?n("ActivityPromotionInfoDesktop",t._b({attrs:{"package-id":t.packageId,"package-selected-date":t.pkgSelectedDate,"template-id":t.templateId,"activity-id":t.activityId,"valid-packages":t.calcActValidPkgList,"included-packages":t.packageList,"packages-in-date":t.calcActInDatePacakges},on:{selectPackage:t.selectPackage}},"ActivityPromotionInfoDesktop",t.bindIHTrack(t.calcTaggingTrack),!1)):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone,expression:"showFilterNone"}],staticStyle:{margin:"40px 0 0","padding-bottom":"0px"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"}]},[n("PackageAttrDesktop",{ref:"attrWrap",attrs:{spec:t.specList,packages:t.packageList,schedule:t.calcActScheduleObj,value:t.chosenAttrIds,"activity-id":t.activityId,"activity-page-template-id":t.activityPageTemplateId,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-single-spec":t.calcActIsSingleSpec,"is-new-open-ticket":t.calcActIsNewOpenTicket,"show-open-date-tips":t.showOpenDateTips,"included-packages":t.packageList,"is-enable-reverse-select":!0},on:{input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectSpec:t.handleSelectSpec}}),t._v(" "),t.sectionActData.isWifi?n("PickupReturnDateTime",{directives:[{name:"show",rawName:"v-show",value:t.packageId,expression:"packageId"}],ref:"pickupReturnDateTimeRef",staticClass:"pickup-return-date-time",attrs:{title:t.getTitle2tid(t.sectionActData.templateId),"sub-title":t.dateDescription,"pickup-datetime":t.calcPickupDatetime,"return-datetime":t.calcReturnDatetime,"format-days":t.calcFormattedPriceDays,"hide-return":t.sectionActData.isSimCard,"border-type":t.sectionActData.isSimCard?"require-border-type":""},on:{showDatePicker:t.showDatePickerHandler}},[n("div",{attrs:{slot:"date-picker-slot"},slot:"date-picker-slot"},[n("ExpDatePicker",{ref:"expDatePickerRef",attrs:{date:t.sectionActData.isWifi?t.dateObj.list:t.pkgSelectedDate,legends:t.calcPkgLegendList,schedules:t.calcPkgScheduleList,"package-id":t.packageId,"price-visible":!1,"template-id":t.templateId,"min-pax":t.calcPkgSelectedObj.min_pax,"min-days":t.calcPkgSelectedObj.min_trip,"max-days":t.calcPkgSelectedObj.max_trip,"disabled-fn":t.sectionActData.isWifi&&t.shouldDateDisabledFn},on:{change:t.changeDatePickerHandler}},[t.sectionActData.isWifi&&t.calcTimeExtra?n("template",{slot:"footer-slot"},[n("div",{staticClass:"wifi-sim-footer-wrap"},[n("div",{ref:"wifiSimFooterRef",staticClass:"wifi-sim-footer"},[t.calcTimeExtra?n("div",{staticClass:"range-time-box"},[n("RangeDateTimeDesktop",{ref:"rangeTimeRef",attrs:{"auto-hide-extra":!0,"time-extra":t.calcTimeExtra,"show-right":!0,"time-data":t.timeObj,"is-validate":t.isRangeTimeValidate},on:{clickTime:t.clickRangeTimeHandler}})],1):t._e()])])]):t._e()],2)],1)]):t._e(),t._v(" "),t.showWarning?n("WarmingSlogan",{key:t.calcPkgSelectedObj&&t.calcPkgSelectedObj.package_id,staticStyle:{"margin-top":"24px"},attrs:{"publish-info":t.calcPkgSelectedObj&&t.calcPkgSelectedObj.publish_info},scopedSlots:t._u([{key:"default",fn:function(e){var text=e.text;return[n("PackageOptionsWarning",{attrs:{"publish-info":t.calcPkgSelectedObj&&t.calcPkgSelectedObj.publish_info,"force-text":text}})]}}],null,!1,652473570)}):t.packageId?n("PackageOptionsContent",{staticClass:"package-detail-order",attrs:{"content-title":t.$t("activity.new.unit_quantity")}},[t.calcPkgSelectedObj?n("BookingOptionsUnitsTips",{attrs:{"max-pax":t.calcPkgSelectedObj.max_pax,"min-pax":t.calcPkgSelectedObj.min_pax}}):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.calcIsReloadStatus,expression:"calcIsReloadStatus"}],staticClass:"unit-list-box"},t._l(t.currentUnits,(function(e){return n("PackageOptionsCounterNew",{key:e.priceId,staticClass:"order-item",attrs:{unit:e,"tips-type":"tips-flex-column","selected-time":t.pkgSelectedTime,"current-selected-package":t.calcPkgSelectedObj,"publish-info":t.calcPkgSelectedObj.publish_info,disabled:t.isLinePage,"min-stock":t.wifiSimParams.minStock||0},on:{handlePlus:t.handlePlus,handleMinus:t.handleMinus}})})),1)],1):t._e(),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticStyle:{margin:"40px 0"},attrs:{tips:t.preSettlementTips2getters}}):t._e(),t._v(" "),t.calcPkgShowBookingAction?[n("PackageOptionsBtnGroup",t._b({ref:"packageOptionsBtnGroup",staticClass:"options-btn"},"PackageOptionsBtnGroup",t.addToCartOrBookButton,!1))]:t._e(),t._v(" "),t.packageId?n("ActivityPackageDetail",{staticClass:"js-spec-type-pkg-detail",attrs:{"package-id":t.packageId,"spec-list":t.calcExtraSpecList,"package-detail":t.calcPkgDetailObj,"current-selected-package":t.calcExtraPkgList,"fetch-package-detail-status":t.packageDetailApiDefined.state}}):t._e()],2)],1)])])],1)}),[],!1,null,"456884ee",null).exports),ft=n(891),ht=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},gt=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bookingCoreData={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){var t=this.businessData,e=this.basicData,n=this.$route;this.bookingCoreData=ft.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return ft.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);gt.displayName="DesktopPackage_options_wifi_spec_type";var bt=gt=ht([Object(f.Component)({components:{DesktopPackageOptionsWifiSpecType:vt}})],gt),yt=Object(X.a)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DesktopPackageOptionsWifiSpecType",t._b({attrs:{"package-id":t.bookingCoreData.packageId},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"DesktopPackageOptionsWifiSpecType",t.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=yt.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(23),n(4)),m=n(10),k=n.n(m),O=(n(30),n(70),n(7)),_=n.n(O),j=n(923),w=n(211),P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).calendarDate=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"valueChange",value:function(t){this.handleDateChange(t)}},{key:"handleClick",value:function(t){var e=t&&t!==this.value?t:null;this.handleDateChange(e)}},{key:"handleCalendarDateCancel",value:function(){this.calendarDate=null,this.$emit("input",null)}},{key:"handleDateChange",value:function(t){var e=this.cellDateList.find((function(e){return e.date===t}));e||!t?this.calendarDate=null:!e&&t&&(this.calendarDate=t),this.$emit("input",t)}},{key:"formatDate",value:function(t){return Object(w.e)(t,this.$t.bind(this),this.klook.language,3)}},{key:"cellDateList",get:function(){return this.availableDateList.filter((function(t,i){return i<3}))}},{key:"availableDateList",get:function(){var t=this,e=[{name:this.$t("today"),date:_()().format("YYYY-MM-DD")},{name:this.$t("search_tomorrow"),date:_()().add(1,"day").format("YYYY-MM-DD")}],n=(this.schedules||[]).filter((function(e){return e.name=t.formatDate(e.date),!e.soldout&&!e.disable}));return e.forEach((function(t){var e=n.find((function(e){return e.date===t.date}));e&&(e.name=t.name)})),n||[]}}]),e}(f.Vue);P([f.State],C.prototype,"klook",void 0),P([Object(f.Prop)()],C.prototype,"schedules",void 0),P([Object(f.Prop)()],C.prototype,"value",void 0),P([Object(f.Prop)()],C.prototype,"visible",void 0),P([Object(f.Watch)("value")],C.prototype,"valueChange",null);var S=C=P([Object(f.Component)({components:{CardSwiper:j.a}})],C),D=(n(2514),n(43)),x=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CardSwiper",{staticClass:"experience-activity-calendar"},[n("div",{staticClass:"cell-wrap",attrs:{"data-spm-module":"SelectDate","data-spm-virtual-item":"__virtual"}},[t._l(t.cellDateList,(function(e){return n("div",{key:e.name,staticClass:"cell",class:{on:e.date===t.value},on:{click:function(n){return t.handleClick(e.date)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),t._v(" "),t.calendarDate?n("div",{staticClass:"cell",class:{on:t.calendarDate===t.value},on:{click:t.handleCalendarDateCancel}},[n("span",[t._v(t._s(t.formatDate(t.calendarDate)))]),t._v(" "),t.calendarDate===t.value?n("div",{staticClass:"close-wrap",on:{click:function(e){return e.stopPropagation(),t.handleCalendarDateCancel(e)}}},[n("SvgIcon",{staticClass:"suffix",attrs:{name:"common#icon_navigation_close_xxxs",size:"12"}})],1):t._e()]):t._e()],2),t._v(" "),t.availableDateList&&t.availableDateList.length>3?n("div",{staticClass:"cell",attrs:{"data-spm-module":"CheckAvailabilityBtn","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("update:visible",!0)}}},[n("SvgIcon",{staticClass:"prefix",attrs:{name:"desktop-common#calendar-new-sku",size:"16"}}),t._v(" "),n("span",[t._v(t._s(t.$t("14111")))])],1):t._e()])}),[],!1,null,"3210bb24",null).exports,T=n(1260),I=n(1413),R=n(912),$=n(886),L=n(1096),A=n(955),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isDatePickerVisible=!1,t.isPackageSchedule=!0,t.value="",t.statementVisible=!1,t.legendsInfo={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showStatementModal",value:function(data){this.legendsInfo=data,this.statementVisible=!0}},{key:"datePickerVisibleChange",value:function(t){var e=this;t&&setTimeout((function(){e.calculateHeight()}),80)}},{key:"handlePackageTypeChange",value:function(data){this.isPackageSchedule="packageSchedules"===data}},{key:"showDatePicker",value:function(){this.isDatePickerVisible=!0}},{key:"hideDatePicker",value:function(){this.isDatePickerVisible=!1}},{key:"handleHeadClick",value:function(){"success"===this.schedulesState&&this.showDatePicker()}},{key:"reload",value:function(){this.$emit("reload-schedules")}},{key:"handleSwiperDateChange",value:function(t){this.value=t,t||this.packageId||this.$refs.switchableCalendar&&(this.$refs.switchableCalendar.isActivitySchedule=!0)}},{key:"handleDateChange",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.value=e[0],this.hideDatePicker(),this.$emit.apply(this,e)}},{key:"recalcDatePickerHeight",value:function(){var t=this;this.$nextTick((function(){t.calculateHeight()}))}},{key:"calculateHeight",value:function(){var t,e,n,o,r,c=null===(t=document)||void 0===t?void 0:t.querySelector(".activity-date-picker .active-date-picker-wrap"),l=null===(e=document)||void 0===e?void 0:e.querySelector(".activity-date-picker .active-header-wrap"),d=null===(n=document)||void 0===n?void 0:n.querySelector(".activity-date-picker .experience-data-picker"),v=((null===(o=c)||void 0===o?void 0:o.offsetHeight)||0)-((null===(r=l)||void 0===r?void 0:r.offsetHeight)||0)-10;v>300&&d&&(d.style.height="".concat(v,"px"))}},{key:"valid",get:function(){return!k()(this.packageSchedules)}}]),e}(f.Vue);E([f.State],M.prototype,"klook",void 0),E([Object(f.Prop)()],M.prototype,"schedulesState",void 0),E([Object(f.Prop)()],M.prototype,"schedules",void 0),E([Object(f.Prop)()],M.prototype,"packageSchedules",void 0),E([Object(f.Prop)()],M.prototype,"packageId",void 0),E([Object(f.Prop)()],M.prototype,"warn",void 0),E([Object(f.Prop)({default:function(){return[]}})],M.prototype,"legends",void 0),E([Object(f.Watch)("isDatePickerVisible")],M.prototype,"datePickerVisibleChange",null);var B=M=E([Object(f.Component)({components:{CommonSkeletonSlots:A.a,PackageDetailFailure:T.a,SwitchableCalendar:I.a,ActivityCalendarDateBtn:x,CalenderTips:R.a,CalendarLengends:$.a,StatementModal:L.a}})],M),N=(n(2515),Object(D.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"switchable-activity-calendar"},[n("div",{directives:[{name:"track",rawName:"v-track:module:CheckAvailabilityBtn",value:{ext:{SelectType:"-1"}},expression:"{\n      ext: {\n        SelectType: '-1'\n      }\n    }",arg:"module:CheckAvailabilityBtn"}],staticClass:"switchable-activity-calendar_main",attrs:{"data-spm-virtual-item":"__virtual"}},[n("div",{staticClass:"activity-calendar_selector"},["success"===t.schedulesState?[n("ActivityCalendarDateBtn",{attrs:{schedules:t.schedules,value:t.value,visible:t.isDatePickerVisible},on:{"update:visible":function(e){t.isDatePickerVisible=e},input:t.handleSwiperDateChange}})]:"fetching"===t.schedulesState?[n("CommonSkeletonSlots",{staticClass:"act-date-skeleton-style",attrs:{"skeleton-name":"act-date-skeleton"}})]:n("PackageDetailFailure",{staticClass:"calendar-failure",on:{"fetch-detail":t.reload}})],2)]),t._v(" "),n("klk-bottom-sheet",{staticClass:"activity-date-picker",attrs:{"show-close":"",transfer:"",visible:t.isDatePickerVisible,title:t.$t("car_rental_home_select_date")},on:{"update:visible":function(e){t.isDatePickerVisible=e}}},[n("SwitchableCalendar",t._g({ref:"switchableCalendar",attrs:{value:t.value,"package-id":t.packageId,schedules:t.schedules,legends:t.legends,"package-schedules":t.packageSchedules,"vertical-scroll":!0,"date-picker-visible":t.isDatePickerVisible},on:{input:t.handleDateChange,changePackageType:t.handlePackageTypeChange,recalcDatePicker:t.recalcDatePickerHeight}},t.$listeners),[t.warn?n("div",{staticClass:"activity-date-picker_warn"},[n("klk-alert",{attrs:{type:"warning",light:"","show-icon":""}},[t._v("\n          "+t._s(t.warn)+"\n        ")])],1):t._e(),t._v(" "),n("template",{slot:"calendar-tips"},[n("CalenderTips",[t.isPackageSchedule&&t.packageId>0?n("CalendarLengends",{attrs:{legends:t.legends,"show-text":!0,"show-statement":!0},on:{showStatement:t.showStatementModal}}):t._e()],1)],1)],2)],1),t._v(" "),n("StatementModal",t._b({attrs:{visible:t.statementVisible},on:{"update:visible":function(e){t.statementVisible=e}}},"StatementModal",t.legendsInfo,!1))],1)}),[],!1,null,"0e1ef3d4",null).exports),V=n(982),F=n(1421),W=n(1408),H=n(1407),U=n(1298),z=n(1006),G=n(1038),Y=n(883),K=n(1853),J=n(212),X=n(1724),Q=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Z=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:(n=Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initAutoBookingMinxin({activityId:this.activityId,shopId:parseInt(this.$route.query.shop_id),shoppingCartHandler:this.showShoppingCart}),t.next=3,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleGoToSpec",value:function(){var t=document.querySelector(".activity-spec.unselected-spec");t&&(this.$toast(this.$t("83359")),Object(J.d)({scrollY:Object(J.c)(t),lockLocation:148}))}},{key:"calcTaggingTrack",get:function(){var t,e,n=null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags;return Object(Y.getTaggingTrackObj)({track:{spm:"Package_Discount_Section",action:!0},list:n,pkg:{packageId:this.packageId}})}}]),e}(Object(f.mixins)(X.a)),tt=Z=Q([Object(f.Component)({components:{PackageOptionsBooking:K.a,OpenDateTips:z.default,SwitchableActivityCalendar:N,PackageAttributes:F.default,PackageDetail:W.default,BottomBar:H.default,ActivityPackagePromotion:U.default,ShoppingCart:V.default,NoneFilterResult:G.a}})],Z),et=(n(2525),Object(D.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"0 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}]},[!t.calcActIsNewOpenTicket&&!t.isLinePage&&t.calcActScheduleList.length&&t.showOpenTicketBySpec?n("SwitchableActivityCalendar",{ref:"switchableActivityCalendar",attrs:{legends:t.calcPkgLegendList,"schedules-state":t.activitySchedulesApiDefined.state,schedules:t.calcActScheduleList,"package-schedules":t.calcPkgScheduleList,"package-id":t.packageId,warn:t.dateDescription},on:{input:t.dateChange,"reload-schedules":function(e){return t.getActivitySchedulesApiData(t.calcActSchedulesParams)}},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}}):t._e(),t._v(" "),n("div",{staticClass:"attr-pkg-options"},[t.calcActIsMultiSpecWithDiscount?n("ActivityPackagePromotion",t._b({attrs:{"package-id":t.packageId,"package-selected-date":t.pkgSelectedDate,"template-id":t.templateId,"activity-id":t.activityId,"valid-packages":t.calcActValidPkgList,"included-packages":t.packageList,"packages-in-date":t.calcActInDatePacakges},on:{selectPackage:t.selectPackage}},"ActivityPackagePromotion",t.bindIHTrack(t.calcTaggingTrack),!1)):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone,expression:"showFilterNone"}]}),t._v(" "),n("PackageAttributes",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"},{name:"track",rawName:"v-track:module:PackageType_LIST",value:{trg:"manual"},expression:"{\n          trg: 'manual'\n        }",arg:"module:PackageType_LIST"}],ref:"attrWrap",staticClass:"package-options",attrs:{value:t.chosenAttrIds,spec:t.specList,packages:t.packageList,schedule:t.calcSchedule,"included-packages":t.packageList,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-single-spec":t.calcActIsSingleSpec,"is-new-open-ticket":t.calcActIsNewOpenTicket,"is-enable-reverse-select":!0,"is-enable-clear":!0,"first-unselected-spec-id":t.calcFirstUnselectedSpecId},on:{clear:t.handleClear,input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectPackage:t.selectPackage,selectSpec:t.handleSelectSpec}})],1)],1),t._v(" "),n("PackageDetail",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"}],staticClass:"radius8-style",attrs:{"pkg-detail":t.pkgDetail,preview:t.calcPreview,"package-id":t.packageId,"expand-all":!1,"show-go-spec":!!t.calcFirstUnselectedSpecId},on:{goToSpec:t.handleGoToSpec}}),t._v(" "),n("BottomBar",{attrs:{"package-schedules-state":t.packageSchedulesAndUnitsApiDefined.state,spec:t.specList,"chosen-attr-ids":t.chosenAttrIds,"package-id":t.packageId,schedule:t.schedule2self,"selected-package":t.calcPkgSelectedObj,date:t.pkgSelectedDate,"activity-id":t.activityId,"is-support-shopping-cart":t.isSupportShoppingCart,packages:t.packageList,reopen:t.calcReopenObj,"basic-data":t.calcBasicData,"click-custom-fn":t.clickCustomFn}}),t._v(" "),n("PackageOptionsBooking",t._b({ref:"activityBookingRef",attrs:{"package-id":t.bookingCoreData.packageId,"from-type":t.currentBtnType,"show-shopping-cart":t.showShoppingCart},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"PackageOptionsBooking",t.bookingCoreData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"7e422ce0",null).exports),it=n(891),nt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},at=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bookingCoreData={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){var t=this.businessData,e=this.basicData,n=this.$route;this.bookingCoreData=it.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return it.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);at.displayName="MobilePackage_options_spec_type";var ot=at=nt([Object(f.Component)({components:{MobilePackageOptionsSpecType:et}})],at),ct=Object(D.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("MobilePackageOptionsSpecType",t._b({attrs:{"package-id":t.bookingCoreData.packageId},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"MobilePackageOptionsSpecType",t.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=ct.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(12),n(11),n(8),n(45);var o=n(0),r=n(13),c=(n(23),n(4)),l=n(31),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(10),O=n.n(k),_=n(162),j=n.n(_),w=n(880),P=n(212),C=n(16),S=n(983),D=(n(273),n(2060)),x=n(884),T=n(1420),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).imageList=[],t.reviews=[],t.currentReview=null,t.page=1,t.pageSize=8,t.total=0,t.galleryShow=!1,t.highlightSwiperSlideIndex=0,t}var n;return Object(h.a)(e,t),Object(d.a)(e,[{key:"getImages",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getReviewsImages({page:this.page,pageSize:this.pageSize});case 2:n=t.sent,(null===(e=n)||void 0===e?void 0:e.imageTotalCount)&&(this.total=n.imageTotalCount,o=this.arrayToObj(n.reviewImagesInfo),this.reviews=Object.assign(this.reviews,o),this.imageList=this.imageList.concat(n.imageList),this.page=this.page+1);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"arrayToObj",value:function(t){var e={};return t.forEach((function(t){e[t.review_id]=t})),e}},{key:"highlightSwiperSlide",value:function(t){this.highlightSwiperSlideIndex=t}},{key:"showGallery",value:function(t){var e=this;this.galleryShow=!0,this.$nextTick((function(){var n=e.imageList.findIndex((function(e){return e.image_id===t.image_id}));-1===n&&(n=0),e.highlightSwiperSlide(n),e.currentReview=e.reviews[e.imageList[n].reviewId]}))}},{key:"handleBuyNow",value:function(){var t=this;this.galleryShow=!1,this.$nextTick((function(){t.$emit("buy-now")}))}},{key:"mounted",value:function(){this.getImages()}},{key:"imageCount",get:function(){return Object(C.e)(this.customerImageAmount)}}]),e}(m.Vue);I([m.State],R.prototype,"klook",void 0),I([Object(m.Prop)()],R.prototype,"activityId",void 0),I([Object(m.Prop)()],R.prototype,"getReviewsImages",void 0),I([Object(m.Prop)()],R.prototype,"reviewGalleryShouldShow",void 0),I([Object(m.Prop)()],R.prototype,"customerImageAmount",void 0),I([Object(m.Prop)()],R.prototype,"reviewGalleryList",void 0);var $=R=I([Object(m.Component)({components:{ImageGallery:T.default,ActivityCommentItemInGallery:D.a,Logo:x.a}})],R),L=(n(2597),n(43)),A=Object(L.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.reviewGalleryShouldShow||t.galleryShow?n("div",{staticClass:"page-activity-reviews-gallery"},[t.reviewGalleryShouldShow?n("div",{staticClass:"page-activity-reviews-images-container",attrs:{"data-spm-module":"New_Gallery_Entrance","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.showGallery(t.imageList[0])}}},[n("div",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|View Photo Gallery Clicked",expression:"'Activity Page|View Photo Gallery Clicked'",arg:"click"}],staticClass:"page-activity-reviews-images-view-more-btn"},[n("div",[t._v(t._s(t.$t("activity.gallery.title")))]),t._v(" "),n("div",[t._v(t._s(t.imageCount)+" "+t._s(t.$t("review.gallery.photos")))]),t._v(" "),n("div",{staticClass:"cls-flex"},[n("span",[t._v(t._s(t.$t("see_more")))])])]),t._v(" "),n("div",{staticClass:"page-activity-reviews-image-list"},t._l(t.reviewGalleryList,(function(e,o){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:e.image_url,expression:"item.image_url",arg:"background-image",modifiers:{container:!0}},{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|View Photo Gallery Clicked",expression:"'Activity Page|View Photo Gallery Clicked'",arg:"click"}],key:o,staticClass:"page-activity-reviews-image-list-item",attrs:{ratio:"1:1","data-image-id":e.id},on:{click:function(n){return n.stopPropagation(),t.showGallery(e)}}},[n("Logo",{attrs:{ratio:"1:1",width:40}})],1)})),0)]):t._e(),t._v(" "),n("ImageGallery",{attrs:{"activity-id":t.activityId,"show-gallery":t.galleryShow,"default-tag":1,"current-index":t.highlightSwiperSlideIndex},on:{close:function(e){t.galleryShow=!1},"buy-now":t.handleBuyNow}})],1):t._e()}),[],!1,null,"7ba57e82",null).exports,E=n(1432),M=n(2030),B=(n(47),n(9)),N=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},V=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).transition="slide",t.showPreview=!1,t.previewIndex=-1,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"reviewImageChange",value:function(){this.hidePreview()}},{key:"highLightImg",value:function(t){return[this.showPreview&&this.previewIndex===t?"active":this.showPreview?"deactive":""]}},{key:"handleShowPreview",value:function(t){this.showPreview=!0,this.previewIndex=t}},{key:"hidePreview",value:function(){this.showPreview=!1}},{key:"swiperChange",value:function(t){this.previewIndex=t}},{key:"activityId",get:function(){var t;return null===(t=this.comment)||void 0===t?void 0:t.activity_id}}]),e}(B.Vue);N([Object(B.Prop)()],V.prototype,"comment",void 0),N([Object(B.Prop)({default:[]})],V.prototype,"reviewImage",void 0),N([Object(B.Watch)("reviewImage")],V.prototype,"reviewImageChange",null);var F=V=N([Object(B.Component)({components:{ImageGallery:T.default,Logo:x.a}})],V),W=(n(2600),Object(L.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-activity-reviews-img-container"},[t.reviewImage&&t.reviewImage.length?n("div",{staticClass:"page-activity-reviews-small-imgs"},t._l(t.reviewImage,(function(img,e){return n("div",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|View Photo Item Clicked",expression:"'Activity Page|View Photo Item Clicked'",arg:"click"},{name:"lazy",rawName:"v-lazy:background-image.container",value:img.img_resize_url,expression:"img.img_resize_url",arg:"background-image",modifiers:{container:!0}}],key:img.image_id,staticClass:"page-activity-reviews-small-img-item",attrs:{ratio:"1:1"},on:{click:function(n){return t.handleShowPreview(e)}}},[n("Logo",{attrs:{ratio:"1:1",width:125/3}})],1)})),0):t._e(),t._v(" "),t.reviewImage&&t.reviewImage.length>0?n("ImageGallery",{attrs:{"activity-id":t.activityId,"show-gallery":t.showPreview,"default-tag":1,"current-index":t.previewIndex,"override-images":t.reviewImage,"override-review":t.comment},on:{close:function(e){t.showPreview=!1},"buy-now":function(e){return t.$emit("buy-now")}}}):t._e()],1)}),[],!1,null,"2d01d1b8",null).exports),H=n(1168),U=n(1161),z=n(1852),G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Y=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).showTranslationContent=!0,t}return Object(h.a)(e,t),Object(d.a)(e,[{key:"setAvatarUrl",value:function(t){return"https://cdn.klook.com/upload/img200X200/"+t}},{key:"changeCommentContent",value:function(){this.showTranslationContent=!this.showTranslationContent}},{key:"starText",get:function(){var t,e=Number((null===(t=this.comment)||void 0===t?void 0:t.rating)||0);return e>80?this.$t("review_highly_recommended"):e>60?this.$t("review_good"):""}}]),e}(m.Vue);G([m.State],Y.prototype,"klook",void 0),G([Object(m.Prop)()],Y.prototype,"comment",void 0);var K=Y=G([Object(m.Component)({components:{ImagePreview:W,ActivityReviewsHelpful:H.a,KlkStars:S.a,SeeMoreWithLines:z.a,ReviewUser:U.a}})],Y),J=(n(2601),Object(L.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-item"},[n("ReviewUser",{staticClass:"comment-item-header",attrs:{avatar:t.setAvatarUrl(t.comment.avatar),name:t.comment.author||"",date:t.comment.date}}),t._v(" "),n("div",{staticClass:"comment-item-star"},[n("KlkStars",{staticClass:"comment-item-star-component",attrs:{size:16,score:t.comment.rating,total:"100"}}),t._v(" "),n("span",{staticClass:"comment-item-star-text"},[t._v(t._s(t.starText))])],1),t._v(" "),t.comment.package_name?n("p",{staticClass:"comment-item-review"},[t._v("\n    "+t._s(t.$t("reviews.review_for"))+"\n    "+t._s(t.comment.package_name)+"\n    "),n("span",{staticClass:"comment-item-review-buy",attrs:{"data-spm-module":"Buy_It_Now","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("buy-now")}}},[t._v("\n      "+t._s(t.$t("75393"))+"\n    ")])]):t._e(),t._v(" "),n("SeeMoreWithLines",{staticClass:"comment-item-content",attrs:{"max-lines":4,content:t.showTranslationContent?t.comment.translate_content:t.comment.content}}),t._v(" "),t.comment.need_translate_button?n("div",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Show Original Language Button Clicked",expression:"'Activity Page|Show Original Language Button Clicked'",arg:"click"}],staticClass:"comment-item-translate",attrs:{"data-track-event":"Activity Page|View Original Btn Click","data-id":t.comment.id},on:{click:t.changeCommentContent}},[t._v("\n    "+t._s(t.showTranslationContent?t.$t("activity.v2.translate.show.original"):t.$t("activity.v2.translate.btn"))+"\n  ")]):t._e(),t._v(" "),t.comment&&t.comment.review_image&&t.comment.review_image.length?n("image-preview",{staticClass:"comment-item-images",attrs:{"review-image":t.comment&&t.comment.review_image||[],comment:t.comment},on:{"buy-now":function(e){return t.$emit("buy-now")}}}):t._e(),t._v(" "),t.comment.has_reply?n("div",{staticClass:"comment-item-reply"},[n("p",{staticClass:"comment-item-reply-title"},[t._v("\n      "+t._s(t.$t("review.klook.reply"))+"\n    ")]),t._v(" "),n("SeeMoreWithLines",{attrs:{"hide-less":!0,content:t.showTranslationContent?t.comment.reply.translate_content:t.comment.reply.content}})],1):t._e(),t._v(" "),n("ActivityReviewsHelpful",{staticClass:"comment-item-helpful",attrs:{comment:t.comment}})],1)}),[],!1,null,"a1d220da",null).exports),X=n(3),Q=n(1417);function Z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function tt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Z(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},it=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).reviews=[],t.total=0,t.allReviewsTotal=0,t.reviewsParams={page:1,pageSize:8,star_num:"",lang:"",sort_type:0,only_image:!1},t.visible=!1,t.lowerScore=!0,t.reviewGalleryShouldShow=!1,t.customerImageAmount=0,t.reviewGalleryList=[],t.activityReviewsCancelToken=null,t}var n,y,m,k,_,w;return Object(h.a)(e,t),Object(d.a)(e,[{key:"itemChange",value:function(t){t&&(this.setActivityReviews(this.businessData),this.initVisible(),0===this.allReviewsTotal&&this.hideSection())}},{key:"showAllReviews",value:function(){this.visible=!0,this.lowerScore=!1}},{key:"onPageChange",value:(w=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchActivityReview(this.reviewsParams);case 2:e=t.sent,this.setActivityReviews(e),this.$nextTick((function(){var t=Object(P.c)(n.$refs.activityReviews);Object(P.d)({scrollY:t,lockLocation:105})}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"handleFilterChange",value:(_=Object(c.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.reviewsParams.star_num=e.star_num?e.star_num.join():"",this.reviewsParams.lang=e.lang?e.lang.join():"",this.reviewsParams.sort_type=e.sort_type?e.sort_type:0,this.reviewsParams.only_image=!!e.only_image&&e.only_image,this.reviewsParams.page=1,t.next=7,this.fetchActivityReview(this.reviewsParams);case 7:n=t.sent,this.setActivityReviews(n);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"initVisible",value:function(){this.allReviewsTotal<10&&this.score<4||(this.visible=!0,this.lowerScore=!1)}},{key:"setActivityReviews",value:function(t){var e=t.total,n=t.item;0===this.allReviewsTotal&&(this.allReviewsTotal=e),this.total=e,this.reviews=n}},{key:"getReviewsImages",value:(k=Object(c.a)(regeneratorRuntime.mark((function t(data){var e,n,c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.activityId,t.next=3,this.$axios.$get(Object(C.ob)(X.a.activityReviewGalleryImages,{activityId:e}),{regularUrl:"/v1/usrcsrv/activities/{*}/images/get",params:{page:data.page,limit:data.pageSize}});case 3:if(n=t.sent,c=n.result,!n.success||O()(c)){t.next=11;break}if(l=c.image_total_count,d=c.review_images_info,0!==l&&!O()(d)&&!O()(d)){t.next=9;break}return t.abrupt("return",{});case 9:return v=j()(d,(function(t,e){var n,c;return t.imageList=[].concat(Object(r.a)(t.imageList),Object(r.a)((c=null===(n=e)||void 0===n?void 0:n.images,null!=c?c:[]).map((function(img){return tt({},img,{reviewId:e.review_id})})))),t.reviewsMap=tt({},t.reviewsMap,Object(o.a)({},e.review_id,e)),t}),{imageList:[],reviewsMap:{}}),t.abrupt("return",{imageTotalCount:c.image_total_count,reviewsCount:c.reviews_count,reviewImagesInfo:c.review_images_info,imageList:v.imageList,reviewsMap:v.reviewsMap});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"fetchActivityReview",value:(m=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y,m,k,_,j,w,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.page,o=void 0===n?1:n,r=e.pageSize,c=void 0===r?15:r,l=e.star_num,d=void 0===l?"":l,v=e.lang,f=void 0===v?"":v,h=e.sort_type,y=void 0===h?0:h,m=e.only_image,k=void 0!==m&&m,j={params:{activity_id:this.activityId,page:o,limit:c,star_num:d,lang:f,sort_type:y,only_image:k}},this.activityReviewsCancelToken=this.$axios.CancelToken.source(),j.cancelToken=null===(_=this.activityReviewsCancelToken)||void 0===_?void 0:_.token,t.prev=4,t.next=7,this.$axios.$get(X.a.getActivityReviewsList,j);case 7:if(w=t.sent,P=w.result,!w.success||O()(P)){t.next=11;break}return t.abrupt("return",P);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(4);case 15:case"end":return t.stop()}}),t,this,[[4,13]])}))),function(t){return m.apply(this,arguments)})},{key:"getReviewsImageInfo",value:(y=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.preview,n=this.activityId,t.next=3,this.$axios.$get(Object(C.ob)(X.a.activityReviewGallery,{activityId:n}),{params:{preview:e},regularUrl:"/v1/usrcsrv/activities/{*}/images/show"});case 3:o=t.sent,r=o.result,o.success&&!O()(r)&&(this.customerImageAmount=r.count,this.reviewGalleryShouldShow=r.should_show,this.reviewGalleryList=r.image_info);case 6:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"handleBuyNow",value:function(){Object(P.g)({lockLocation:110})}},{key:"mounted",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.getReviewsImageInfo()]);case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcSubScoreList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.act_sub_score)||[]}},{key:"score",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.score}},{key:"reviewCount",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.review_count}},{key:"activityId",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.activity_id}},{key:"item",get:function(){return this.businessData.item}}]),e}(w.a);it.displayName="DesktopReviews",et([Object(m.Prop)()],it.prototype,"preview",void 0),et([m.State],it.prototype,"klook",void 0),et([Object(m.Watch)("item",{immediate:!0})],it.prototype,"itemChange",null);var nt=it=et([Object(m.Component)({components:{ExpSubScore:Q.default,stars:S.a,gallery:A,ReviewRating:E.a,ActivityCommentItem:J,ActivityReviewsFilter:M.a}})],it),at=(n(2602),Object(L.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.allReviewsTotal>0?n("div",{ref:"activityReviews",staticClass:"activity-reviews js-activity-reviews"},[t.lowerScore?n("div",{staticClass:"view-all",on:{click:t.showAllReviews}},[n("span",[t._v(t._s(t.$t("16914")))]),t._v(" "),n("SvgIcon",{attrs:{name:"common#icon_navigation_chevron_down_xxs",size:"16",color:"#4C87E3"}})],1):t._e(),t._v(" "),t.visible?[n("ReviewRating",{attrs:{score:t.score,count:t.reviewCount}}),t._v(" "),n("ExpSubScore",{staticClass:"custom-sub-score",attrs:{list:t.calcSubScoreList}}),t._v(" "),t.customerImageAmount>=8?n("gallery",{staticClass:"activity-reviews-gallery",attrs:{"activity-id":t.activityId,"get-reviews-images":t.getReviewsImages,"review-gallery-should-show":t.reviewGalleryShouldShow,"customer-image-amount":t.customerImageAmount,"review-gallery-list":t.reviewGalleryList},on:{"buy-now":t.handleBuyNow}}):t._e(),t._v(" "),n("ActivityReviewsFilter",{staticClass:"activity-reviews-filter",attrs:{"review-gallery-should-show":t.reviewGalleryShouldShow,"activity-id":t.activityId,"hide-button":t.allReviewsTotal<=8},on:{"filter-change":t.handleFilterChange}}),t._v(" "),n("off-screen",[t.total>0?t._l(t.reviews,(function(e,o){return n("ActivityCommentItem",{key:o,staticClass:"activity-reviews-item",attrs:{comment:e},on:{"buy-now":t.handleBuyNow}})})):n("div",{staticClass:"no-reviews"},[n("div",{staticClass:"no-reviews-bg"}),t._v(" "),n("p",{staticClass:"no-reviews-desc"},[t._v(t._s(t.$t("review_filter.empty")))])])],2),t._v(" "),n("div",{staticClass:"activity-reviews-pagination"},[n("klk-pagination",{staticClass:"activity-reviews-pagination-item",attrs:{total:t.total,current:t.reviewsParams.page},on:{"update:current":function(e){return t.$set(t.reviewsParams,"page",e)},change:t.onPageChange}})],1)]:t._e()],2):t._e()}),[],!1,null,"c2bfaa44",null));e.default=at.exports},,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(23),n(4)),m=n(982),k=n(1421),O=n(1408),_=n(1407),j=n(1298),w=n(1006),P=n(1038),C=n(883),S=(n(70),n(131)),D=n(7),x=n.n(D),T=n(908),I=n(957),R=n(1156),$=n(1094),L=n(1095),A=n(1845),E=n(1033),M=n(911),B=n(1680),N=n(895),V=n(1011),F=n(1005),W=n(952),H=n(889),U=n(882),z=n(2),G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Y=Object(f.namespace)("experience"),K=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).wifiSimParams={},t}var n,v;return Object(d.a)(e,t),Object(r.a)(e,[{key:"minStockWatch",value:function(t){var e;if(this.calcTotalUnitCount>t){var n=this.currentUnits;(null===(e=n)||void 0===e?void 0:e.length)&&n.forEach((function(t){t.count=0}))}}},{key:"visibleWatch",value:function(t){var e=this;t?this.$nextTick((function(){e.$inhouse.track("pageview","#booking_options_page_spm",{force:!0})})):this.clearPreSettlementData(),this.$emit("changeVisible",t)}},{key:"packageSelectedDateWatch",value:function(t){this.calcPkgIsNewOpenTicket||this.$emit("updateDate",t)}},{key:"closePriceSumary",value:function(){U.a.$emit("setShowPriceSummary2bus",!1)}},{key:"selectedTimeChange",value:(v=Object(y.a)(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.arrangementId){t.next=5;break}if(null===(o=n)||void 0===o||!o.arrangementId||e.arrangementId!==n.arrangementId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchPackageUnitsDebounce();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"getScheduleFilterNum",value:function(t,e){var n;if(!this.sectionActData.isWifi)return t;var o=t||[];if(!e||o.length<e)return o;var r=x()(null===(n=o[0])||void 0===n?void 0:n.date).clone().add(e-1,"days").format("YYYY-MM-DD");return o.filter((function(t){return t.date<=r}))}},{key:"open",value:(n=Object(y.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.packageId,o=e.date,r=e.skuId,c=e.selectedTime,l=e.selectedUnits,d=e.pkgDate,this.cacheOpt.date=o||"",this.bsObj.visible=!0,this.preSelectedSkuId=r,this.pkgSelectedDate=o||d||"",this.setExpPkgSelectedTime(c),this.oldPrevUnits=l||null,this.cacheOpt.selectedUnits=Object(S.cloneDeep)(l),!n){t.next=11;break}return t.next=11,this.getPackagePriceScheduleUnits({package_id:n});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"clearPreSettlementData",value:function(t){this.$store.commit("traveller/activity/".concat(z.SET_PRE_SETTLEMENT_API_DATA),{res:null})}},{key:"rangeConfirmHandler",value:function(t){this.pkgSelectedDate=t.date||"",this.wifiSimParams=t}},{key:"_showShoppingCart",value:function(){this.showShoppingCart&&this.showShoppingCart(),this.bsObj.visible=!1}},{key:"calcData",get:function(){var t=(this.calcUnitInventorieObj||{}).usage_validity_render_obj||[];return{title:(t.find((function(t){return"title"===t.type}))||{}).content,rules:t.filter((function(t){return"item"===t.type})).map((function(t){return t.content}))}}},{key:"bookingCalendarOptions",get:function(){var t=this.packageId,e=this.templateId;return{verticalScroll:!this.sectionActData.isWifi,priceVisible:!this.sectionActData.isWifi,templateId:e,autoTimeSlot:this.autoTimeSlot,packageId:t,schedules:this.calcPkgScheduleList,warn:this.dateDescription,selectedTime:this.pkgSelectedTime,currentSelectedPackage:this.calcPkgSelectedObj,isNewOpenTicket:this.calcPkgIsNewOpenTicket,legends:this.calcPkgLegendList}}},{key:"bookingUnitOptions",get:function(){return{selectedTime:this.pkgSelectedTime,unitList:this.currentUnits,preview:this.calcPreview,currentSelectedPackage:this.calcPkgSelectedObj,inventories:this.calcUnitInventorieObj,totalUnitCount:this.calcTotalUnitCount,disabled:!this.calcArrangementId,minStock:this.wifiSimParams.minStock||0}}},{key:"bottomBarBinds",get:function(){var t,e=this.templateId,n=this.packageList,o=this.activityId;return{fromType:this.fromType,hideDiscountTips:null===(t=this.bsObjSavePrice)||void 0===t?void 0:t.visible,activityId:o,templateId:e,isSupportShoppingCart:this.isSupportShoppingCart,packages:n,isActOpenTicket:this.calcActIsNewOpenTicket,units:this.currentUnits,currentSelectedPackage:this.calcPkgSelectedObj,selectedTime:this.pkgSelectedTime,packageSchedules:this.calcPkgScheduleList,packageSelectedDate:this.pkgSelectedDate,totalUnitCount:this.calcTotalUnitCount,showShoppingCart:this._showShoppingCart,wifiSimParams:this.wifiSimParams}}}]),e}(Object(f.mixins)(B.a));G([Y.State],K.prototype,"sectionActData",void 0),G([Object(f.Prop)()],K.prototype,"autoTimeSlot",void 0),G([Object(f.Watch)("wifiSimParams.minStock")],K.prototype,"minStockWatch",null),G([Object(f.Watch)("bsObj.visible")],K.prototype,"visibleWatch",null),G([Object(f.Watch)("pkgSelectedDate")],K.prototype,"packageSelectedDateWatch",null),G([Object(f.Watch)("pkgSelectedTime",{immediate:!0})],K.prototype,"selectedTimeChange",null);var J=K=G([Object(f.Component)({components:{SavingPriceDetails:H.default,PriceDiscountTips:W.a,ExpTagging:C.default,ActivityValidity:V.a,HasOpenDateTips:F.a,HeaderTips:T.a,CardHeader:I.a,BookineOptionsSkeleton:E.a,ExpLoadingState:M.default,CommonContentLoading:N.a,BookingCalendar:R.a,BookingUnit:$.a,HeaderAlert:L.a,NewBottomBar:A.default}})],K),X=(n(2560),n(43)),Q=Object(X.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bsObj.visible?n("klk-bottom-sheet",t._b({staticClass:"experience-activity-booking hack-zindex-safari",attrs:{"can-pull-close":!1,visible:t.bsObj.visible,title:t.$t("activity.v2.label.booking_options")},on:{"update:visible":function(e){return t.$set(t.bsObj,"visible",e)}}},"klk-bottom-sheet",t.bsObj,!1),[n("div",{staticClass:"booking-content show-bottom-bar",style:t.fixedHackStyle,attrs:{id:"booking_options_page_spm","data-spm-page":"BookingOptions?oid=package_"+t.calcPkgSelectedObj.package_id+"&trg=manual"}},[n("HeaderAlert",{ref:"headerAlertRef",staticClass:"booking-alert",attrs:{"package-id":t.calcPkgSelectedObj.package_id}}),t._v(" "),n("CardHeader",{staticClass:"booking-content-header",attrs:{"package-data":t.calcPkgSelectedObj}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.calcTags2attribute,pkg:{packageId:t.packageId},track:{spm:"Package_Product_Tag"},line:1}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:t.calcTags2discount,pkg:{packageId:t.packageId},track:{spm:"Package_Discount_Section"},line:1}}),t._v(" "),n("ExpLoadingState",{attrs:{state:t.packageSchedulesAndUnitsApiDefined.state,fetching:{type:"overlay"}},on:{refresh:t.getPackagePriceScheduleUnits}},[t.bsObj.visible?[t.calcPkgSelectedObj.usage_validity_render_obj&&t.calcPkgSelectedObj.usage_validity_render_obj.length?n("ActivityValidity",{staticClass:"activity-validity-style small",attrs:{data:t.calcPkgSelectedObj.usage_validity_render_obj,"max-height":"105px"}}):t._e(),t._v(" "),3!==t.activityTicketType&&t.calcPkgIsNewOpenTicket&&t.cacheOpt.date?n("HasOpenDateTips",{staticStyle:{margin:"16px 0"}}):t._e(),t._v(" "),n("BookingCalendar",t._b({directives:[{name:"show",rawName:"v-show",value:!t.calcPkgIsNewOpenTicket,expression:"!calcPkgIsNewOpenTicket"}],staticClass:"booking-content-calendar",attrs:{"is-track-item":!1},on:{setTime:t.setPackageTime,rangeConfirm:t.rangeConfirmHandler},model:{value:t.pkgSelectedDate,callback:function(e){t.pkgSelectedDate=e},expression:"pkgSelectedDate"}},"BookingCalendar",t.bookingCalendarOptions,!1)),t._v(" "),n("div",{staticClass:"booking-content-units"},[t.calcPkgSelectedObj?n("HeaderTips",{staticClass:"booking-content-units-tips",attrs:{"max-pax":t.calcPkgSelectedObj.max_pax,"min-pax":t.calcPkgSelectedObj.min_pax}}):t._e(),t._v(" "),n("ExpLoadingState",{attrs:{state:t.packageUnitsApiDefined.state?t.packageUnitsApiDefined.state:"success",fetching:{type:"overlay"},"keep-state":!0},on:{refresh:t.fetchPackageUnitsDebounce}},[n("div",{staticClass:"booking-content-units-content"},t._l(t.currentUnits,(function(e){return n("BookingUnit",t._b({key:e.priceId,staticClass:"booking-content-unit",attrs:{unit:e,"is-track-module":!0},on:{changeUnitCount:function(e){return t.changeUnitCount(e,{hideLoading:!0})},alert:t.alert}},"BookingUnit",t.bookingUnitOptions,!1))})),1)])],1)]:t._e()],2),t._v(" "),n("NewBottomBar",t._b({directives:[{name:"show",rawName:"v-show",value:t.showBottomBar,expression:"showBottomBar"}],on:{clickSavePrice:t.clickSavePrice,updateInfos:t.updateInfos},scopedSlots:t._u([{key:"slot-booking-bar__buttons",fn:function(e){var n=e.slotScope;return[t._t("slot-booking-bar__buttons",null,{slotScope:n})]}}],null,!0)},"NewBottomBar",t.bottomBarBinds,!1)),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"js-custom-bottom-sheet-hack custom-bottom-sheet-style",class:[t.bsObjSavePrice.visible?"hack-style":""],attrs:{visible:t.bsObjSavePrice.visible,title:t.$t("76591")},on:{"update:visible":function(e){return t.$set(t.bsObjSavePrice,"visible",e)},close:t.closePriceSumary}},"klk-bottom-sheet",t.bsObjSavePrice,!1),[n("SavingPriceDetails",{attrs:{"hide-dashed":!0,"price-summary":t.bsObjSavePrice.priceSummary}})],1),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"vsb-hidden",attrs:{tips:t.preSettlementTips2getters}}):t._e()],1),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.commonLoadingState,expression:"commonLoadingState === 'fetching'"}],attrs:{type:"overlay"}})],1):t._e()}),[],!1,null,"3b9e6f18",null).exports,Z=n(212),tt=n(1724),et=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},it=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}var n;return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:(n=Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initAutoBookingMinxin({activityId:this.activityId,shopId:parseInt(this.$route.query.shop_id),shoppingCartHandler:this.showShoppingCart}),t.next=3,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleGoToSpec",value:function(){var t=document.querySelector(".activity-spec.unselected-spec");t&&(this.$toast(this.$t("83359")),Object(Z.d)({scrollY:Object(Z.c)(t),lockLocation:148}))}},{key:"calcTaggingTrack",get:function(){var t,e,n=null===(e=null===(t=this.calcPkgSelectedObj)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags;return Object(C.getTaggingTrackObj)({track:{spm:"Package_Discount_Section",action:!0},list:n,pkg:{packageId:this.packageId}})}}]),e}(Object(f.mixins)(tt.a)),nt=it=et([Object(f.Component)({components:{NewPackageOptionsBooking:Q,OpenDateTips:w.default,PackageAttributes:k.default,PackageDetail:O.default,BottomBar:_.default,ActivityPackagePromotion:j.default,ShoppingCart:m.default,NoneFilterResult:P.a}})],it),at=(n(2561),Object(X.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"0 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone&&!t.calcActIsMultiSpecWithDiscount,expression:"showFilterNone && !calcActIsMultiSpecWithDiscount"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone||t.calcActIsMultiSpecWithDiscount,expression:"!showFilterNone || calcActIsMultiSpecWithDiscount"}]},[n("div",{staticClass:"attr-pkg-options"},[t.calcActIsMultiSpecWithDiscount?n("ActivityPackagePromotion",t._b({attrs:{"package-id":t.packageId,"package-selected-date":t.pkgSelectedDate,"template-id":t.templateId,"activity-id":t.activityId,"valid-packages":t.calcActValidPkgList,"included-packages":t.packageList,"packages-in-date":t.calcActInDatePacakges},on:{selectPackage:t.selectPackage}},"ActivityPackagePromotion",t.bindIHTrack(t.calcTaggingTrack),!1)):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone,expression:"showFilterNone"}]}),t._v(" "),n("PackageAttributes",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"},{name:"track",rawName:"v-track:module:PackageType_LIST",value:{trg:"manual"},expression:"{\n          trg: 'manual'\n        }",arg:"module:PackageType_LIST"}],ref:"attrWrap",staticClass:"package-options",attrs:{value:t.chosenAttrIds,spec:t.specList,packages:t.packageList,schedule:t.calcSchedule,"included-packages":t.packageList,"is-single-spec-with-discount":t.calcActIsSingleSpecWithDiscount,"is-single-spec":t.calcActIsSingleSpec,"is-new-open-ticket":t.calcActIsNewOpenTicket,"is-enable-reverse-select":!0,"is-enable-clear":!0,"first-unselected-spec-id":t.calcFirstUnselectedSpecId},on:{clear:t.handleClear,input:t.attrChange,deleteAttrs:t.handleDeleteAttrs,specFilterNone:t.toggleFilterNone,selectPackage:t.selectPackage,selectSpec:t.handleSelectSpec}})],1)]),t._v(" "),n("PackageDetail",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"}],staticClass:"radius8-style",attrs:{"pkg-detail":t.pkgDetail,preview:t.calcPreview,"package-id":t.packageId,"expand-all":!1,"show-go-spec":!!t.calcFirstUnselectedSpecId},on:{goToSpec:t.handleGoToSpec}}),t._v(" "),n("BottomBar",{attrs:{"package-schedules-state":t.packageSchedulesAndUnitsApiDefined.state,spec:t.specList,"chosen-attr-ids":t.chosenAttrIds,"package-id":t.packageId,schedule:t.schedule2self,"selected-package":t.calcPkgSelectedObj,date:t.pkgSelectedDate,"activity-id":t.activityId,"is-support-shopping-cart":t.isSupportShoppingCart,packages:t.packageList,reopen:t.calcReopenObj,"basic-data":t.calcBasicData,"click-custom-fn":t.clickCustomFn}}),t._v(" "),n("NewPackageOptionsBooking",t._b({ref:"activityBookingRef",attrs:{"package-id":t.bookingCoreData.packageId,"from-type":t.currentBtnType,"show-shopping-cart":t.showShoppingCart},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"NewPackageOptionsBooking",t.bookingCoreData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"59b63911",null).exports),ot=n(891),ct=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},st=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).bookingCoreData={},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){var t=this.businessData,e=this.basicData,n=this.$route;this.bookingCoreData=ot.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return ot.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);st.displayName="MobilePackage_options_wifi_spec_type";var lt=st=ct([Object(f.Component)({components:{MobilePackageOptionsWifiSpecType:at}})],st),ut=Object(X.a)(lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("MobilePackageOptionsWifiSpecType",t._b({attrs:{"package-id":t.bookingCoreData.packageId},on:{"update:packageId":function(e){return t.$set(t.bookingCoreData,"packageId",e)},"update:package-id":function(e){return t.$set(t.bookingCoreData,"packageId",e)}}},"MobilePackageOptionsWifiSpecType",t.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=ut.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"genTag",value:function(t){return{instant_discount:this.$t("16563")}[t]}}]),e}(f.Vue);h([Object(f.State)((function(t){return t.klook.platform}))],y.prototype,"platform",void 0),h([Object(f.Prop)()],y.prototype,"promotionInfoList",void 0);var m=y=h([f.Component],y),k=(n(2590),n(43)),O=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-promotion-info",class:{"is-mobile":"mobile"===t.platform}},[t._l(t.promotionInfoList,(function(e,o){return n("div",{key:e+"-"+o,staticClass:"activity-promotion-info_content"},[n("span",{staticClass:"activity-promotion-info_content-tag"},[t._v("\n      "+t._s(t.genTag(e.type))+"\n    ")]),t._v(" "),n("span",{staticClass:"activity-promotion-info_content-text"},[t._v("\n      "+t._s(e.data.title)+"\n    ")])])})),t._v(" "),n("SvgIcon",{staticClass:"activity-promotion-info_head-icon",attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",width:"16",height:"16",color:"#4a4a4a"}})],2)}),[],!1,null,"a5016f60",null).exports,_=(n(28),n(7)),j=n.n(_),w=n(272),P=n(1854),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getRenderContent",value:function(t){var e=t.summary_render_obj,n=t.start_time,o=t.end_time;return("string"==typeof e?Object(w.c)(e):Object(w.b)(e)).replace("{start_time}",j()(n).format("YYYY-MM-DD HH:mm")).replace("{end_time}",j()(o).format("YYYY-MM-DD HH:mm"))}},{key:"getTitleObj",value:function(t){return{0:t.rule.discount,package_name:t.package_name,unit_name:t.sku_name}}},{key:"getTimeObj",value:function(t){var e=j()(t.start_time),n=j()(t.end_time);return{mmm:e.format("MMM"),d:e.format("D"),hhmm:e.format("HH:mm"),mmm1:n.format("MMM"),d1:n.format("D"),hhmm1:n.format("HH:mm")}}},{key:"getPlatformText",value:function(t){var e={web:this.$t("16572"),mweb:this.$t("16571"),app:this.$t("16570")};return t.map((function(p){return e[p]})).join("/")}},{key:"promotionTips",get:function(){return"".concat(this.$t("16573")).concat(this.$t("16720")," ").concat(this.$t("16574"))}}]),e}(f.Vue);C([Object(f.State)((function(t){return t.klook.platform}))],S.prototype,"platform",void 0),C([Object(f.Prop)()],S.prototype,"promotionInfoList",void 0);var D=S=C([Object(f.Component)({components:{Markdown:P.a}})],S),x=(n(2591),Object(k.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-promotion-info-content",class:{"is-mobile":"mobile"===t.platform},attrs:{"data-spm-module":"PromotionDetail"}},t._l(t.promotionInfoList,(function(e){return n("div",{key:e.type,staticClass:"promotion-wrap"},["instant_discount"===e.type?[n("h4",{staticClass:"promotion-title"},[t._v(t._s(e.data.title))]),t._v(" "),t._l(e.data.events,(function(e,o){return n("div",{key:e.title+o,staticClass:"event-wrap"},[n("div",{staticClass:"event-title"},[t._v(t._s(e.title))]),t._v(" "),n("Markdown",{ref:"markdown",refInFor:!0,staticClass:"event-markdown",attrs:{content:t.getRenderContent(e)}})],1)}))]:t._e()],2)})),0)}),[],!1,null,null,null).exports),T=n(956),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isLayerVisible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleLayerShow",value:function(){this.isLayerVisible=!0}},{key:"handleLayerHide",value:function(){this.isLayerVisible=!1}},{key:"promotionInfoList",get:function(){return this.businessData.promotions}}]),e}(n(880).a);R.displayName="Promotions",I([Object(f.State)((function(t){return t.klook.platform}))],R.prototype,"platform",void 0);var $=R=I([Object(f.Component)({components:{ActivityPromotionInfo:O,ActivityLayer:T.a,ActivityPromotionInfoContent:x}})],R),L=(n(2592),Object(k.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-promotion-info-wrapper",attrs:{"data-spm-module":"PromotionInfo","data-spm-virtual-item":"__virtual"}},[n("ActivityPromotionInfo",{attrs:{"promotion-info-list":t.promotionInfoList},nativeOn:{click:function(e){return t.handleLayerShow(e)}}}),t._v(" "),n("mobile"===t.platform?"ActivityLayer":"klk-modal",{tag:"component",attrs:{visible:t.isLayerVisible,fixed:!0,title:t.$t("16562-promotions"),"overlay-closable":!0,height:"90%",color:"white",size:"large",open:t.isLayerVisible,"esc-press-closable":!0,closable:!0,scrollable:"","show-default-footer":!1},on:{"update:open":function(e){t.isLayerVisible=e},close:t.handleLayerHide}},[n("ActivityPromotionInfoContent",{attrs:{"promotion-info-list":t.promotionInfoList}})],1)],1)}),[],!1,null,"28529017",null));e.default=L.exports},,,,,function(t,e,n){"use strict";n.r(e);n(275);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1430),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){document.body.style.paddingBottom=this.showLink?"100px":"60px"}},{key:"wishButtonVisible",get:function(){var t;return!(null===(t=this.utilConfig)||void 0===t?void 0:t.whiteLabelUtilConfig)&&!this.isGuestCheckout}},{key:"showLink",get:function(){return this.link&&this.linkTitle}}]),e}(f.Vue);m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0),m([Object(f.State)((function(t){return t.klook.utilConfig}))],k.prototype,"utilConfig",void 0),m([f.Getter],k.prototype,"isGuestCheckout",void 0),m([Object(f.Prop)()],k.prototype,"linkTitle",void 0),m([Object(f.Prop)()],k.prototype,"link",void 0),m([Object(f.Prop)()],k.prototype,"content",void 0),m([Object(f.Prop)()],k.prototype,"cityId",void 0),m([Object(f.Prop)()],k.prototype,"activityId",void 0);var O=k=m([Object(f.Component)({components:{ActivityWishButton:y.a}})],k),_=(n(2419),n(43)),j=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-sold-out"},[t.showLink?n("div",{staticClass:"bottom-sold-out-link",attrs:{"data-spm-module":"Things_To_Do_In_City?oid=city_"+t.cityId,"data-spm-virtual-item":"__virtual?typ=entry"}},[n("a",{attrs:{href:t.link}},[t._v(t._s(t.linkTitle))])]):t._e(),t._v(" "),n("div",{staticClass:"bottom-sold-out-operation"},[t.wishButtonVisible?n("ActivityWishButton",{attrs:{"activity-id":t.activityId}}):t._e(),t._v(" "),n("klk-button",{staticClass:"bottom-sold-out-button",attrs:{type:"primary",disabled:""}},[t._v("\n      "+t._s(t.content)+"\n    ")])],1)])}),[],!1,null,"6f7bb4c6",null).exports,w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"content",get:function(){return this.businessData.bottom_button||this.$t("activity.unpublish_btn_text")}},{key:"link",get:function(){return this.businessData.link||""}},{key:"linkTitle",get:function(){return this.businessData.link_title||""}},{key:"cityId",get:function(){return this.basicData.city_id}},{key:"activityId",get:function(){return this.basicData.activity_id}}]),e}(h.a);P.displayName="MobileBottom_button",w([Object(f.Prop)()],P.prototype,"basicData",void 0);var C=P=w([Object(f.Component)({components:{BottomSoldOut:j}})],P),S=Object(_.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("BottomSoldOut",{attrs:{link:this.link,content:this.content,"link-title":this.linkTitle,"city-id":this.cityId,"activity-id":this.activityId}})}),[],!1,null,null,null);e.default=S.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(163),y=n.n(h),m=n(2061),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"couponCodeClick",value:function(data){this.$emit("couponCodeClick",data)}},{key:"couponStatus",value:function(t){var e="";switch(t){case"tostart":e="NotStarted";break;case"use":e="ToBeUsed";break;case"get":e="ToBeRedeemed";break;case"unusable":e="AllOut"}return e}}]),e}(f.Vue);k([Object(f.Prop)({type:Object,default:null})],O.prototype,"couponData",void 0);var _=O=k([Object(f.Component)({components:{}})],O),j=(n(2451),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"web-coupon-card"},[n("div",{staticClass:"coupon-left"},[n("div",{staticClass:"coupon-title"},[n("h3",[t._v(t._s(t.couponData.discount_desc))]),t._v(" "),n("klk-poptip",{attrs:{"append-to-body":"","z-index":9999,content:t.couponData.spec_desc,dark:""}},[n("klk-icon",{staticClass:"tips",attrs:{type:"icon_tips_tips",size:16}})],1)],1),t._v(" "),n("div",{staticClass:"coupon-detail"}),t._v(" "),n("div",{staticClass:"coupon-desc"},[t._v(t._s(t.couponData.desc))])]),t._v(" "),n("div",{directives:[{name:"track",rawName:"v-track:item:PromoCodeTab",value:{oid:t.couponData.coupon_batch_id,ext:{TabName:t.couponStatus(t.couponData.status),DiscountDesc:encodeURIComponent(t.couponData.discount_desc),SpecialDesc:encodeURIComponent(t.couponData.spec_desc)},inject:"section"},expression:"{\n      oid: couponData.coupon_batch_id,\n      ext: {\n        TabName: couponStatus(couponData.status),\n        DiscountDesc: encodeURIComponent(couponData.discount_desc),\n        SpecialDesc: encodeURIComponent(couponData.spec_desc)\n      },\n      inject: 'section'\n    }",arg:"item:PromoCodeTab"}],staticClass:"coupon-right",on:{click:function(e){return t.couponCodeClick({code:t.couponData.code,status:t.couponData.status,batchId:t.couponData.coupon_batch_id,specDesc:t.couponData.spec_desc,startTime:t.couponData.start_time_unix,disDesc:t.couponData.discount_desc})}}},[t.couponData.code?n("div",{staticClass:"coupon-code-content"},[n("div",{staticClass:"code-title"},[t._v(t._s(t.$t("30643")))]),t._v(" "),n("div",{staticClass:"coupon-code"},[t._v(t._s(t.couponData.code))])]):t._e(),t._v(" "),["tostart","unusable"].includes(t.couponData.status)?n("div",{staticClass:"code-btn-gray"},[t._v("\n      "+t._s(t.couponData.button_title)+"\n    ")]):"use"===t.couponData.status?n("div",{staticClass:"code-btn-gray"},[n("klk-icon",{attrs:{type:"icon_feedback_success_fill",size:16}}),t._v("\n      "+t._s(t.couponData.button_title)+"\n    ")],1):"get"===t.couponData.status?n("klk-button",{staticClass:"code-btn",attrs:{size:"mini",type:"primary",reverse:""}},[t._v(t._s(t.couponData.button_title))]):t._e()],1)])}),[],!1,null,"725a2a0e",null).exports,P=n(3),C=n(880),S=n(211),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isCouponDetailShow=!1,t.isLoading=!1,t.refreshCouponList=null,t.inhouseTagList=[],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"couponListEnterClick",value:function(){this.isCouponDetailShow=!0}},{key:"couponStatus",value:function(t){var e="";switch(t){case"tostart":e="NotStarted";break;case"use":e="ToBeUsed";break;case"get":e="ToBeRedeemed";break;case"unusable":e="AllOut"}return e}},{key:"getCouponData",value:function(){var t=this;this.$axios.$get(P.a.getCouponData,{params:{activity_id:this.businessData.activity_id}}).then((function(e){e.result&&(t.refreshCouponList=e.result.items)})).catch((function(){return!1}))}},{key:"couponCodeClick",value:function(data){var t=this;if("tostart"===data.status){var e=Object(S.e)(new Date(1e3*data.startTime),this.$t.bind(this),this.klook.language,1),time=Object(S.e)(new Date(1e3*data.startTime),this.$t.bind(this),this.klook.language,4);return this.$toast(this.$t("30239",{date:e,time:time})),!1}if("use"===data.status)return this.$toast(this.$t("30646")),!1;"get"===data.status&&(this.isLoading=!0,this.$axios.$post(P.a.redeemCouponCode,y.a.stringify({code:data.code})).then((function(e){var n=+new Date,o="undefined"!=typeof _args3?_args3:null;e.success?(t.isLoading=!1,t.$toast(t.$t("30648")),t.getCouponData(),t.setInhousCustom(data,"Success")):e.error&&(t.isLoading=!1,"4001"===e.error.code?window.location.href=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var e=+new Date-n;t=__in_house.get_spm_info(t,{duration:e,args:o})}catch(t){console.warn("Get spm info error",t)}return t}(t.$href("/signin")):(t.$toast(e.error.message),t.setInhousCustom(data,"Fail")))})).catch((function(){t.isLoading=!1,t.$toast(t.$t("5349")),t.setInhousCustom(data,"Fail")})))}},{key:"setInhousCustom",value:function(data,t){this.$inhouse.track("custom","body",{spm:"Activity.PromoCodeRedeem",oid:data.batchId,action_type:"click",ext:{RedeemStatus:t,DiscountDesc:data.disDesc,SpecialDesc:data.specDesc}})}},{key:"couponList",get:function(){var t,e=this.refreshCouponList||(null===(t=this.businessData)||void 0===t?void 0:t.items)||[];return 0===e.length&&this.$emit("hide-section"),e}},{key:"couponTitleList",get:function(){var t=this,e=[];return this.couponList.forEach((function(n,o){o<2&&(e.push(n.coupon_tag),t.inhouseTagList.push({list:n.coupon_batch_id,TagText:encodeURIComponent(n.coupon_tag)}))})),e}}]),e}(C.a);x.displayName="DesktopActivity_tag_coupon_entrance";var T=x=D([Object(f.Component)({components:{ActivityCouponSection:m.a,WebCouponCard:w}})],x),I=(n(2452),Object(j.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.couponList.length>0?n("div",{staticClass:"web-activity-coupon"},[n("ActivityCouponSection",{directives:[{name:"track",rawName:"v-track:module:Tags",value:{ext:{TagList:t.inhouseTagList},inject:"section"},expression:"{\n      ext: {\n        TagList: inhouseTagList\n      },\n      inject: 'section'\n    }",arg:"module:Tags"}],attrs:{"data-spm-virtual-item":"__virtual",type:"web","coupon-list":t.couponTitleList},on:{couponListEnterClick:t.couponListEnterClick}}),t._v(" "),n("klk-modal",{attrs:{title:t.$t("30642"),open:t.isCouponDetailShow,width:"820px","show-default-footer":!1,scrollable:"",closable:""},on:{"update:open":function(e){t.isCouponDetailShow=e},close:function(e){t.isCouponDetailShow=!1}}},[n("div",{staticClass:"klk-modal-content web-coupon-content"},[t._l(t.couponList,(function(e,o){return n("div",{key:o,staticClass:"web-coupon-item"},[n("WebCouponCard",{directives:[{name:"track",rawName:"v-track:module:PromoCode_LIST",value:{oid:e.coupon_batch_id,idx:o,len:t.couponList.length,ext:{TabName:t.couponStatus(e.status),DiscountDesc:encodeURIComponent(e.discount_desc),SpecialDesc:encodeURIComponent(e.spec_desc)},inject:"section"},expression:"{\n            oid: item.coupon_batch_id,\n            idx: index,\n            len: couponList.length,\n            ext: {\n              TabName: couponStatus(item.status),\n              DiscountDesc: encodeURIComponent(item.discount_desc),\n              SpecialDesc: encodeURIComponent(item.spec_desc)\n            },\n            inject: 'section'\n          }",arg:"module:PromoCode_LIST"}],attrs:{"coupon-data":e},on:{couponCodeClick:t.couponCodeClick}})],1)})),t._v(" "),n("klk-loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{"show-overlay":!0}},[t._v("\n        "+t._s(t.$t("car_rental_home_loading"))+"\n      ")])],2)])],1):t._e()}),[],!1,null,"4c46f6da",null));e.default=I.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(163),y=n.n(h),m=n(2061),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"couponCodeClick",value:function(data){this.$emit("couponCodeClick",data)}},{key:"couponStatus",value:function(t){var e="";switch(t){case"tostart":e="NotStarted";break;case"use":e="ToBeUsed";break;case"get":e="ToBeRedeemed";break;case"unusable":e="AllOut"}return e}},{key:"couponDetailTextShow",value:function(text){this.$emit("couponDetailTextShow",text)}}]),e}(f.Vue);k([Object(f.Prop)({type:Object,default:null})],O.prototype,"couponData",void 0);var _=O=k([Object(f.Component)({components:{}})],O),j=(n(2453),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mweb-coupon-card"},[n("div",{directives:[{name:"track",rawName:"v-track:item:PromoCodeDetail",value:{oid:t.couponData.coupon_batch_id,inject:"section"},expression:"{\n      oid: couponData.coupon_batch_id,\n      inject: 'section'\n    }",arg:"item:PromoCodeDetail"}],staticClass:"coupon-left",on:{click:function(e){return t.couponDetailTextShow(t.couponData.spec_desc)}}},[n("div",{staticClass:"coupon-title"},[n("h4",[t._v(t._s(t.couponData.discount_desc))]),t._v(" "),n("klk-icon",{attrs:{type:"icon_tips_tips",size:16}})],1),t._v(" "),n("div",{staticClass:"coupon-detail"}),t._v(" "),n("div",{staticClass:"coupon-desc"},[t._v(t._s(t.couponData.desc))])]),t._v(" "),n("div",{directives:[{name:"track",rawName:"v-track:item:PromoCodeTab",value:{oid:t.couponData.coupon_batch_id,ext:{TabName:t.couponStatus(t.couponData.status),DiscountDesc:encodeURIComponent(t.couponData.discount_desc),SpecialDesc:encodeURIComponent(t.couponData.spec_desc)},inject:"section"},expression:"{\n      oid: couponData.coupon_batch_id,\n      ext: {\n        TabName: couponStatus(couponData.status),\n        DiscountDesc: encodeURIComponent(couponData.discount_desc),\n        SpecialDesc: encodeURIComponent(couponData.spec_desc)\n      },\n      inject: 'section'\n    }",arg:"item:PromoCodeTab"}],staticClass:"coupon-right",on:{click:function(e){return t.couponCodeClick({code:t.couponData.code,status:t.couponData.status,batchId:t.couponData.coupon_batch_id,specDesc:t.couponData.spec_desc,startTime:t.couponData.start_time_unix,disDesc:t.couponData.discount_desc})}}},[t.couponData.code?n("div",{staticClass:"coupon-code-content"},[n("div",{staticClass:"code-title"},[t._v(t._s(t.$t("30643")))]),t._v(" "),n("div",{staticClass:"coupon-code"},[t._v(t._s(t.couponData.code))])]):t._e(),t._v(" "),["tostart","unusable"].includes(t.couponData.status)?n("div",{staticClass:"code-btn-gray"},[t._v("\n      "+t._s(t.couponData.button_title)+"\n    ")]):"use"===t.couponData.status?n("div",{staticClass:"code-btn-gray"},[n("klk-icon",{attrs:{type:"icon_feedback_success_fill",size:16}}),t._v("\n      "+t._s(t.couponData.button_title)+"\n    ")],1):"get"===t.couponData.status?n("klk-button",{staticClass:"code-btn",attrs:{size:"mini",type:"primary",reverse:""}},[t._v(t._s(t.couponData.button_title))]):t._e()],1)])}),[],!1,null,"6c58f3ba",null).exports,P=n(211),C=n(880),S=n(3),D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isCouponDetailShow=!1,t.isCouponDetailTextShow=!1,t.isLoading=!1,t.couponDetailText="",t.inhouseTagList=[],t.refreshCouponList=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"couponListEnterClick",value:function(){this.isCouponDetailShow=!0}},{key:"getCouponData",value:function(){var t=this;this.$axios.$get(S.a.getCouponData,{params:{activity_id:this.businessData.activity_id}}).then((function(e){e.result&&(t.refreshCouponList=e.result.items)})).catch((function(){return!1}))}},{key:"couponStatus",value:function(t){var e="";switch(t){case"tostart":e="NotStarted";break;case"use":e="ToBeUsed";break;case"get":e="ToBeRedeemed";break;case"unusable":e="AllOut"}return e}},{key:"couponCodeClick",value:function(data){var t=this;if("tostart"===data.status){var e=Object(P.e)(new Date(1e3*data.startTime),this.$t.bind(this),this.klook.language,1),time=Object(P.e)(new Date(1e3*data.startTime),this.$t.bind(this),this.klook.language,4);return this.$toast(this.$t("30239",{date:e,time:time})),!1}if("use"===data.status)return this.$toast(this.$t("30646")),!1;"get"===data.status&&(this.isLoading=!0,this.$axios.$post(S.a.redeemCouponCode,y.a.stringify({code:data.code})).then((function(e){var n=+new Date,o="undefined"!=typeof _args3?_args3:null;e.success?(t.isLoading=!1,t.$toast(t.$t("30648")),t.getCouponData(),t.setInhousCustom(data,"Success")):e.error&&(t.isLoading=!1,"4001"===e.error.code?window.location.href=function(t){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var e=+new Date-n;t=__in_house.get_spm_info(t,{duration:e,args:o})}catch(t){console.warn("Get spm info error",t)}return t}(t.$href("/signin")):(t.$toast(e.error.message),t.setInhousCustom(data,"Fail")))})).catch((function(){t.isLoading=!1,t.$toast(t.$t("5349")),t.setInhousCustom(data,"Fail")})))}},{key:"setInhousCustom",value:function(data,t){this.$inhouse.track("custom","body",{spm:"Activity.PromoCodeRedeem",oid:data.batchId,action_type:"click",ext:{RedeemStatus:t,DiscountDesc:data.disDesc,SpecialDesc:data.specDesc}})}},{key:"couponDetailTextShow",value:function(t){this.couponDetailText=t,this.isCouponDetailTextShow=!0}},{key:"couponList",get:function(){var t,e=this.refreshCouponList||(null===(t=this.businessData)||void 0===t?void 0:t.items)||[];return 0===e.length&&this.$emit("hide-section"),e}},{key:"couponTitleList",get:function(){var t=this,e=[];return this.couponList.forEach((function(n,o){o<2&&(e.push(n.coupon_tag),t.inhouseTagList.push({list:n.coupon_batch_id,TagText:encodeURIComponent(n.coupon_tag)}))})),e}}]),e}(C.a);x.displayName="MobileActivity_tag_coupon_entrance",D([Object(f.Prop)()],x.prototype,"preview",void 0);var T=x=D([Object(f.Component)({components:{ActivityCouponSection:m.a,MwebCouponCard:w}})],x),I=(n(2454),Object(j.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.couponList.length>0?n("div",{staticClass:"mweb-activity-coupon"},[n("ActivityCouponSection",{directives:[{name:"track",rawName:"v-track:module:Tags",value:{ext:{TagList:t.inhouseTagList},inject:"section"},expression:"{\n      ext: {\n        TagList: inhouseTagList\n      },\n      inject: 'section'\n    }",arg:"module:Tags"}],attrs:{"data-spm-virtual-item":"__virtual",type:"mweb","coupon-list":t.couponTitleList},on:{couponListEnterClick:t.couponListEnterClick}}),t._v(" "),n("klk-bottom-sheet",{attrs:{"show-close":"",visible:t.isCouponDetailShow,title:t.$t("30642")},on:{"update:visible":function(e){t.isCouponDetailShow=e}}},[n("div",{staticClass:"mweb-coupon-list"},[t._l(t.couponList,(function(e,o){return n("div",{key:o,staticClass:"mweb-coupon-item"},[n("MwebCouponCard",{directives:[{name:"track",rawName:"v-track:module:PromoCode_LIST",value:{oid:e.coupon_batch_id,idx:o,len:t.couponList.length,ext:{TabName:t.couponStatus(e.status),DiscountDesc:encodeURIComponent(e.discount_desc),SpecialDesc:encodeURIComponent(e.spec_desc)},inject:"section"},expression:"{\n            oid: item.coupon_batch_id,\n            idx: index,\n            len: couponList.length,\n            ext: {\n              TabName: couponStatus(item.status),\n              DiscountDesc: encodeURIComponent(item.discount_desc),\n              SpecialDesc: encodeURIComponent(item.spec_desc)\n            },\n            inject: 'section'\n          }",arg:"module:PromoCode_LIST"}],attrs:{"coupon-data":e},on:{couponCodeClick:t.couponCodeClick,couponDetailTextShow:t.couponDetailTextShow}})],1)})),t._v(" "),n("klk-loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{"show-overlay":!0}},[t._v("\n        "+t._s(t.$t("car_rental_home_loading"))+"\n      ")])],2)]),t._v(" "),n("klk-bottom-sheet",{attrs:{"show-close":"",visible:t.isCouponDetailTextShow},on:{"update:visible":function(e){t.isCouponDetailTextShow=e}}},[t._v("\n    "+t._s(t.couponDetailText)+"\n  ")])],1):t._e()}),[],!1,null,"7b6883ec",null));e.default=I.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1457),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).leftMinWidth=80,t.stylesList=[],t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"setWidth",value:function(){var t=this.stylesList.reduce((function(t,e){var n=(e||{}).width;return n>t?n:t}),0);t>this.leftMinWidth&&(this.leftMinWidth=t)}},{key:"updatedHandler",value:function(i,data){this.$set(this.stylesList,i,data),this.setWidth()}}]),e}(h.a);m([f.State],k.prototype,"klook",void 0),m([Object(f.Prop)({default:function(){return[]}})],k.prototype,"list",void 0);var O=k=m([Object(f.Component)({components:{AutoAlignContent:y.default}})],k),_=(n(2457),n(43)),content=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-device-details",class:t.klook.platform},[t.list&&t.list.length?n("div",{staticClass:"device-details-box"},t._l(t.list,(function(e,i){return n("p",{key:i,staticClass:"device-details-box__item-box"},[n("AutoAlignContent",{staticClass:"left-text",style:{minWidth:t.leftMinWidth+"px"},on:{updated:function(e){return t.updatedHandler(i,e)}}},[t._v("\n        "+t._s(e.title)+"\n      ")]),t._v(" "),n("span",{staticClass:"right-text"},[t._v(t._s(e.text))])],1)})),0):t._e()])}),[],!1,null,"44f64e6f",null).exports,j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.kvs)||[]}}]),e}(h.a);w.displayName="Device_detail",j([f.State],w.prototype,"klook",void 0);var P=w=j([Object(f.Component)({components:{DeviceDetailsContent:content}})],w),C=Object(_.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exp-device-details"},[this.calcList&&this.calcList.length?e("DeviceDetailsContent",{attrs:{list:this.calcList}}):this._e()],1)}),[],!1,null,null,null);e.default=C.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1030),y=n(918),m=n(1297),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"updated",value:function(){this.$emit("updated")}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"sections",void 0),k([Object(f.Prop)({default:"slideDetail"})],O.prototype,"type",void 0),k([Object(f.Prop)()],O.prototype,"size",void 0),k([Object(f.Prop)()],O.prototype,"specStyle",void 0);var _=O=k([Object(f.Component)({components:{ActivityMarkdown:y.a,PackageDetailContentImages:m.a,KlkExperienceItinerary:h.a}})],O),j=(n(2508),n(2509),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"package-detail-content-of-seciton"},t._l(t.sections,(function(e,o){return n("div",{key:o},[n("div",{staticClass:"act-side-package-detail"},[n("div",{staticClass:"act-side-package-detail-title"},[t._v("\n        "+t._s(t.$t(e.title))+"\n      ")]),t._v(" "),t._l(e.components,(function(e,o){return n("div",{key:o},["markdown"===e.type?n("ActivityMarkdown",{staticClass:"activity-package-detail-markdown",attrs:{content:e.data.render_obj}}):t._e(),t._v(" "),"image"===e.type?n("PackageDetailContentImages",{attrs:{images:e.data.images,"spec-style":t.specStyle,type:t.type,"data-len":e.data.images.length}}):t._e(),t._v(" "),"itinerary"===e.type?n("KlkExperienceItinerary",{staticClass:"itinerary-desktop",attrs:{"itinerary-data":e.data.itinerary,size:t.size}}):t._e()],1)}))],2)])})),0)}),[],!1,null,"4f487ef6",null).exports,P=n(1011),C=n(1459),S=n(883),D=n(1034),x=n(1848),T=n(924),I=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).moreObj={status:""},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"init",value:function(){var t,e,n=this.moreObj,o=this.showMoreRef,r=this.maxHeight,c=parseFloat(r),l=(null===(e=null===(t=o)||void 0===t?void 0:t.$el)||void 0===e?void 0:e.offsetHeight)||0;l&&(n.status=l>c?"more":"")}},{key:"clickShowMore",value:function(t){this.moreObj.status=t}},{key:"mounted",value:function(){this.init()}},{key:"activityName",get:function(){var t;return null===(t=this.packageDetail)||void 0===t?void 0:t.activity_name}},{key:"packageName",get:function(){var t;return null===(t=this.packageDetail)||void 0===t?void 0:t.package_name}},{key:"calcStyle",get:function(){var t=this.moreObj,e=this.maxHeight;return"more"===t.status?{maxHeight:e,overflow:"hidden"}:{}}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.packageDetail)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"activityValidity",get:function(){var t;return(null===(t=this.packageDetail)||void 0===t?void 0:t.usage_validity_render_obj)||[]}},{key:"passStandardActivityInfo",get:function(){var t;return(null===(t=this.packageDetail)||void 0===t?void 0:t.pass_standard_activity_info)||{}}},{key:"sections",get:function(){var t,e;return(null===(e=null===(t=this.packageDetail)||void 0===t?void 0:t.section_content)||void 0===e?void 0:e.sections)||[]}},{key:"isAiTranslation",get:function(){return this.translateButtonVisible&&this.isTranslated}},{key:"translateButtonVisible",get:function(){var t;return!!(null===(t=this.packageDetail)||void 0===t?void 0:t.enable_translation_button)}},{key:"isTranslated",get:function(){var t;return!(null===(t=this.packageDetail)||void 0===t?void 0:t.translation_status)}}]),e}(f.Vue);I([Object(f.Ref)()],R.prototype,"showMoreRef",void 0),I([f.State],R.prototype,"klook",void 0),I([Object(f.Prop)()],R.prototype,"specStyle",void 0),I([Object(f.Prop)()],R.prototype,"moreType",void 0),I([Object(f.Prop)()],R.prototype,"packageDetail",void 0),I([Object(f.Prop)({default:!1})],R.prototype,"showActivityTitle",void 0),I([Object(f.Prop)({default:"slideDetail"})],R.prototype,"type",void 0),I([Object(f.Prop)({default:"normal"})],R.prototype,"attractionSize",void 0),I([Object(f.Prop)({default:"230px"})],R.prototype,"maxHeight",void 0);var $=R=I([Object(f.Component)({components:{ViewMore:x.a,ShowMoreBox:D.default,ExpTagging:S.default,ActivityValidity:P.a,desktopDetailContentOfSection:w,AttractionIncluded:C.default,PublishAi:T.a}})],R),L=(n(2510),Object(j.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exp-pkg-detail"},["desktop-type"===t.moreType?n("div",{staticClass:"exp-pkg-detail__box"},[n("ShowMoreBox",{attrs:{status:t.moreObj.status}},[n("desktopDetailContentOfSection",{ref:"showMoreRef",staticClass:"pkg-detail-content-section-style",style:t.calcStyle,attrs:{type:t.type,sections:t.sections},on:{updated:t.init}}),t._v(" "),n("div",{staticClass:"pkg-detial-btn",attrs:{slot:"btn"},on:{click:function(e){return t.$emit("setPkgDetailStatus",!0)}},slot:"btn"},[n("span",{staticClass:"pkg-detial-btn__text"},[t._v(t._s(t.$t("12686")))]),t._v(" "),n("klk-icon",{staticClass:"pkg-detial-btn__icon",attrs:{type:"icon_navigation_chevron_right_xs"}})],1)],1)],1):n("div",[t.isAiTranslation?n("PublishAi",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"text"}}):t._e(),t._v(" "),t.showActivityTitle&&t.activityName?[n("div",{staticClass:"act-title"},[t._v(t._s(t.activityName))]),t._v(" "),n("div",{staticClass:"act-subtitle"},[t._v(t._s(t.packageName))])]:n("div",{staticClass:"pkg-title"},[t._v(t._s(t.packageName))]),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",class:t.type,attrs:{list:t.calcTags2attribute,pkg:t.packageDetail,track:{spm:"Package_Product_Tag"}}}),t._v(" "),t.passStandardActivityInfo?n("AttractionIncluded",{class:t.type,attrs:{size:t.attractionSize,"activity-id":t.packageDetail.activity_id,"package-id":t.packageDetail.id,info:t.passStandardActivityInfo}}):t._e(),t._v(" "),t.activityValidity.length?n("ActivityValidity",{staticClass:"activity-validity-style",class:t.type,attrs:{data:t.activityValidity,"max-height":"240px"}}):t._e(),t._v(" "),n("desktopDetailContentOfSection",{staticClass:"pkg-detail-content-section-style pkg-detail-content-section-no-margin",attrs:{type:t.type,sections:t.sections,"spec-style":t.specStyle}})],2)])}),[],!1,null,"788941e8",null));e.default=L.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=(n(47),n(23),n(4)),m=(n(70),n(13)),k=(n(20),n(27),n(131)),O=n(1253),_=n(2026),j=n(1853),w=n(982),P=n(1411),C=n(1006),S=n(1038),D=n(1840),x=n(212),T=n(16),I=n(882),R=n(1254),$=n(1688),L=n(891),A=n(2),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},M=Object(f.namespace)("traveller/activity"),B=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).date="",t.bookingCore={},t.reloadTagFilter=!0,t.isTagFilterShowMore=!1,t.isFiexdTag=!1,t.tagFixedTop=92,t.handleScroll=Object(k.throttle)(t.handleCheckVisible,60),t.packagesWithSkuByDate=null,t}var n,v;return Object(d.a)(e,t),Object(r.a)(e,[{key:"setCalendarDate",value:function(t){this.date=t}},{key:"changeTagFilter",value:function(t){var e,n=this,o=this.$refs.tagFilterRef;this.isTagFilterShowMore&&(null===(e=o)||void 0===e?void 0:e.setShowMore)&&o.setShowMore(!1);try{if(this.isFiexdTag){var r=Object(x.c)(document.querySelector(".package_option_card_sku"))-44;Object(x.d)({scrollY:r}),setTimeout((function(){n.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_VALUE),t)}),200)}else this.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_VALUE),t)}catch(t){}}},{key:"tagsHandler",value:function(t){var e=(t||[]).map((function(t){return t.package_id})),n=this.packageList.filter((function(t){return e.includes(t.package_id)})).reduce((function(t,e){var n,o,r=((null===(o=null===(n=e)||void 0===n?void 0:n.product_tags)||void 0===o?void 0:o.filter_tags)||[]).map((function(t){var e;return null===(e=t)||void 0===e?void 0:e.tag_key}));return t.push.apply(t,Object(m.a)(r)),t}),[]);return(this.packageFilterTagList||[]).filter((function(t){var e;return n.includes(null===(e=t)||void 0===e?void 0:e.tag_key)}))}},{key:"filterSkuPackagesHandler",value:function(t){var e,n=this,o=this.date,r=this.tagFilter2state.value;this.reloadTagFilter=!1,this.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_VALUE),"");var c=o?this.tagsHandler(t):this.packageFilterTagList||[],l=(null===(e=c)||void 0===e?void 0:e.find((function(t){return t.tag_key===r})))?r:"";this.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_LIST),c),this.packagesWithSkuByDate=t||[],this.$nextTick((function(){n.reloadTagFilter=!0,setTimeout((function(){n.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_VALUE),l)}),200)}))}},{key:"showMoreHander",value:function(t){this.isTagFilterShowMore=t}},{key:"toBook",value:function(t,e){var n=this,o=L.a.getBookingCoreData2vm(this);o.packageId=e,this.bookingCore=o,this.$nextTick((function(){n.activityBookingRef.open({date:n.date,packageId:e,skuId:t})}))}},{key:"created",value:function(){this.$store.commit("traveller/activity/".concat(A.SET_TAG_FILTER_LIST),this.packageFilterTagList||[])}},{key:"mounted",value:(v=Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getActivitySchedulesApiData(this.calcActSchedulesParams);case 2:return t.next=4,this.scrollAndOpenSku();case 4:document.addEventListener("scroll",this.handleScroll),this.initAutoBookingMinxin({activityId:this.activityId,shopId:parseInt(this.$route.query.shop_id),shoppingCartHandler:this.showShoppingCart});case 6:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"beforeDestroy",value:function(){document.removeEventListener("scroll",this.handleScroll)}},{key:"handleCheckVisible",value:function(){var t=this;I.a.$emit("getHeaderHeight2bus",(function(e){try{var n=document.querySelector(".package_option_card_sku");if(!n)return;var o=parseInt(Object(T.C)(n,"height")),r=document.querySelector(".js-exp-tag-filter");if(!r)return;var c=Object(x.h)(),l=parseInt(Object(T.C)(document.querySelector(".j-activity-nav-container"),"height"))||0,d=parseInt(r.getAttribute("data-win-top"))||0||Object(x.c)(r),v=parseInt(e)+l,f=c+v>d&&c+v+204<d+o;r.style.top="".concat(v,"px"),f?(r.setAttribute("data-win-top",d),r.parentNode&&(r.parentNode.style.height=Object(T.C)(r,"height")),t.isFiexdTag=!0):(r.style.top=0,r.setAttribute("data-win-top",""),r.parentNode&&(r.parentNode.style.height="auto"),t.isFiexdTag=!1)}catch(t){}}))}},{key:"scrollAndOpenSku",value:(n=Object(y.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=this.$route.query.package_id,!((l=Number(c||0))>0)){t.next=14;break}if(!(this.packagesWithSku||[]).some((function(t){return t.package_id===l}))){t.next=12;break}if(!(d=this.$el.querySelector('.js-package-card[data-id="'.concat(l,'"]')))){t.next=10;break}return d.scrollIntoView({behavior:"smooth"}),t.next=9,Object(x.a)(d);case 9:this.toBook(null,l);case 10:t.next=14;break;case 12:this.$logquery.service({timestamp:Date.now(),level:"I",message:JSON.stringify({tag_name:"package-option-sku-not-found",url:null===(n=null===(e=this)||void 0===e?void 0:e.$route)||void 0===n?void 0:n.fullPath,user_agent:null===(r=null===(o=window)||void 0===o?void 0:o.navigator)||void 0===r?void 0:r.userAgent,package_id:l})}),console.log("package-option-sku-not-found: ".concat(l));case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"basicData",get:function(){return{is_in_flash_sale:this.isInFlashSale,is_line_page:this.isLinePage}}},{key:"calcFilterPackagesWithSku",get:function(){var t=this.tagFilter2state.value,e=this.packageList,n=this.packagesWithSku,o=this.packagesWithSkuByDate||n||[];return t&&(o=o.filter((function(n){var o,r,c=null===(r=null===(o=e.find((function(t){return n.package_id===t.package_id})))||void 0===o?void 0:o.product_tags)||void 0===r?void 0:r.filter_tags;return c&&c.find((function(e){var n;return(null===(n=e)||void 0===n?void 0:n.tag_key)===t}))}))),o}},{key:"newBusinessData",get:function(){return{packageList:this.packageList,activity_closer_price:this.activityCloserPrice,dateDescription:this.dateDescription}}},{key:"showOpendateByPackages",get:function(){var t;return(null===(t=this.packageList)||void 0===t?void 0:t.length)>1}},{key:"filteredPackageIdList",get:function(){return this.packageList.map((function(t){return t.package_id}))}},{key:"dateVisible",get:function(){return!(3===this.activityTicketType)}}]),e}(Object(f.mixins)(R.a,$.a));E([M.State],B.prototype,"tagFilter2state",void 0),E([M.State],B.prototype,"activityDetail",void 0),E([Object(f.Ref)()],B.prototype,"activityBookingRef",void 0);var N=B=E([Object(f.Component)({components:{ExpTagFilter:D.default,OpenDateTips:C.default,PackageOptionsCalendarWrap:O.default,PackageOptionsBooking:j.a,PackageCardList:_.default,CardBottomBar:P.default,ShoppingCart:w.default,NoneFilterResult:S.a}})],B),V=(n(2544),n(43)),F=Object(V.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-package-options"},[t.calcActSomeOpenTicket?n("OpenDateTips",{staticStyle:{margin:"0 0 16px 0"}}):t._e(),t._v(" "),n("NoneFilterResult",{directives:[{name:"show",rawName:"v-show",value:t.showFilterNone,expression:"showFilterNone"}]}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFilterNone,expression:"!showFilterNone"}]},[t.dateVisible&&!t.isLinePage&&t.calcActScheduleList.length&&t.showOpendateByPackages?n("PackageOptionsCalendarWrap",{staticClass:"card-package-options_calendar",attrs:{state:t.activitySchedulesApiDefined.state,schedules:t.calcActScheduleList,warn:t.dateDescription,"hide-date-filter":t.calcActIsNewOpenTicket},on:{reload:function(e){return t.getActivitySchedulesApiData(t.calcActSchedulesParams)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),t._v(" "),t.reloadTagFilter&&t.tagFilter2state.list&&t.tagFilter2state.list.length?n("div",{staticClass:"js-exp-tag-filter-box exp-tag-filter-box"},[n("div",{class:["js-exp-tag-filter",t.isFiexdTag&&"is-fiexd-tag-show",t.isTagFilterShowMore&&"show-more-style"]},[n("ExpTagFilter",{ref:"tagFilterRef",attrs:{list:t.tagFilter2state.list,value:t.tagFilter2state.value},on:{change:t.changeTagFilter,showMore:t.showMoreHander}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"card-package-options_card-list"},[t.packageList?n("PackageCardList",{attrs:{"package-list":t.packageList,schedule:t.calcActScheduleList,date:t.date,preview:t.calcPreview,"packages-with-sku":t.calcFilterPackagesWithSku,"filtered-package-id-list":t.filteredPackageIdList},on:{toBook:t.toBook,updateSkuPackages:t.filterSkuPackagesHandler}}):t._e()],1),t._v(" "),n("PackageOptionsBooking",t._b({ref:"activityBookingRef",attrs:{preview:t.calcPreview,"show-shopping-cart":t.showShoppingCart},on:{updateDate:t.setCalendarDate}},"PackageOptionsBooking",t.bookingCore,!1))],1),t._v(" "),n("CardBottomBar",t._b({attrs:{"observe-target":".package_option_card_sku",activity_price:t.newBusinessData.activity_closer_price,"basic-data":t.basicData}},"CardBottomBar",t.newBusinessData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"27983ce2",null).exports,W=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},H=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcBookingCoreData",get:function(){var t=this.businessData,e=this.basicData,n=this.$route;return L.a.getBookingCoreData2section({businessData:t,basicData:e,$route:n})}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||{}}}]),e}(h.a);H.displayName="MobilePackage_option_card_sku";var U=H=W([Object(f.Component)({components:{MobilePackageOptionCardSku:F}})],H),z=Object(V.a)(U,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("MobilePackageOptionCardSku",this._b({},"MobilePackageOptionCardSku",this.calcBookingCoreData,!1))],1)}),[],!1,null,null,null);e.default=z.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=(n(70),n(7)),m=n.n(y),k=n(1182),O=n(2193),_=n(1465),j=n(1260),w=n(1427),P=n(1258),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"datePickerVisibleChange",value:function(t){var e=this;t&&setTimeout((function(){e.calculateHeight()}),80)}},{key:"showDatePicker",value:function(){"success"===this.state&&(this.visible=!0)}},{key:"close",value:function(){this.visible=!1}},{key:"limitDays",value:function(t,e){var n,o,r=null===(n=e.find((function(t){return!t.soldout})))||void 0===n?void 0:n.date,c=null===(o=e[this.schedules.length-1])||void 0===o?void 0:o.date,l=[];if(r)for(var i=0;i<t;i++){var d=m()(r).add(i,"day");d.isAfter(c,"day")||l.push(d.format("YYYY-MM-DD"))}else for(var v=0;v<t;v++)l.push(m()().add(v,"day").format("YYYY-MM-DD"));return l}},{key:"handleChange",value:function(t){t!==this.value&&(this.close(),this.$emit("input",t))}},{key:"handleReload",value:function(){this.$emit("reload")}},{key:"calculateHeight",value:function(){var t,e,n,o,r,c=null===(t=document)||void 0===t?void 0:t.querySelector(".activity-date-picker-modal .klk-bottom-sheet-body"),l=null===(e=document)||void 0===e?void 0:e.querySelector(".activity-date-picker-modal .activity-date-picker_warn"),d=null===(n=document)||void 0===n?void 0:n.querySelector(".activity-date-picker-modal .experience-data-picker"),v=((null===(o=c)||void 0===o?void 0:o.offsetHeight)||0)-((null===(r=l)||void 0===r?void 0:r.offsetHeight)||0)-10;v>300&&d&&(d.style.height="".concat(v,"px"))}},{key:"validDates",get:function(){var t=this.limitDays(this.limit,this.schedules),e=this.schedules.slice(0,this.limit);return t.map((function(t){return e.find((function(e){return t===e.date}))||{date:t,selling_price:"",soldout:!1,stocks:[],disable:!0}}))}}]),e}(h.Vue);C([Object(h.Prop)()],S.prototype,"schedules",void 0),C([Object(h.Prop)()],S.prototype,"value",void 0),C([Object(h.Prop)({default:"fetching"})],S.prototype,"state",void 0),C([Object(h.Prop)({default:14})],S.prototype,"limit",void 0),C([Object(h.Prop)()],S.prototype,"warn",void 0),C([Object(h.Watch)("visible")],S.prototype,"datePickerVisibleChange",null);var D=S=C([Object(h.Component)({components:{CalendarHeader:k.a,MiniCalendar:O.a,ActivityDataPicker:w.a,ActivitySkeleton:_.a,PackageDetailFailure:j.a,ActivityModal:P.default}})],S),x=(n(2545),n(43)),T=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-calendar"},[t._t("tip"),t._v(" "),n("CalendarHeader",{directives:[{name:"track",rawName:"v-track:module:CheckAvailabilityBtn",value:{ext:{SelectType:"-1"}},expression:"{\n      ext: {\n        SelectType: '-1'\n      }\n    }",arg:"module:CheckAvailabilityBtn"}],attrs:{"data-spm-virtual-item":"__virtual",schedules:t.schedules},nativeOn:{click:function(e){return t.showDatePicker(e)}}}),t._v(" "),"loading"===t.state?[n("klk-skeleton-block",{staticClass:"skeleton-main-1"}),t._v(" "),n("klk-skeleton-block",{staticClass:"skeleton-main-2"})]:"failure"===t.state?n("PackageDetailFailure",{staticClass:"calendar-failure",on:{"fetch-detail":t.handleReload}}):[n("MiniCalendar",t._g(t._b({attrs:{schedules:t.validDates,value:t.value},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[t._t("mini",null,{item:n})]}}],null,!0)},"MiniCalendar",t.$attrs,!1),t.$listeners)),t._v(" "),n("klk-bottom-sheet",{staticClass:"activity-date-picker-modal",attrs:{"show-close":"",transfer:"",visible:t.visible,title:t.$t("activity.new.check_availability")},on:{"update:visible":function(e){t.visible=e}}},[t.warn?n("div",{staticClass:"activity-date-picker_warn"},[n("klk-alert",{attrs:{type:"warning",light:"","show-icon":""}},[t._v("\n          "+t._s(t.warn)+"\n        ")])],1):t._e(),t._v(" "),n("ActivityDataPicker",t._g(t._b({attrs:{schedules:t.schedules,value:t.value,"vertical-scroll":!0,"date-picker-visible":t.visible},on:{input:t.handleChange},scopedSlots:t._u([{key:"day",fn:function(e){return[t._t("day",null,{date:e})]}},{key:"append",fn:function(e){return[t._t("append",null,{date:e})]}}],null,!0)},"ActivityDataPicker",t.$attrs,!1),t.$listeners))],1)]],2)}),[],!1,null,"d28007d2",null).exports,I=n(2027),R=n(1104),$=n(880),L=n(1411),A=n(1006),E=n(1750),M=n(982),B=n(16),N=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},V=Object(h.namespace)("traveller/activity"),F=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getActivityIdAndPackageId",value:function(t){return{activity_id:this.activityId,package_id:t}}},{key:"toBook",value:function(data){Object(B.kb)(this,{name:"ExperienceActivityBookOptions",params:{activityId:String(this.activityId)},query:{type:"book",act_date:this.date||"",packageId:String(data.package_id)}})}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSchedules();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"isLinePage",get:function(){var t,e;return null!=(e=null===(t=this.basicData)||void 0===t?void 0:t.is_line_page)&&e}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"hasSomeOpenDate",get:function(){return(this.packages||[]).some((function(t){return 3===t.package_ticket_type}))}},{key:"packages",get:function(){return this.businessData.packages}},{key:"pickupDateDescription",get:function(){return this.businessData.date_description}},{key:"dateVisible",get:function(){return!(3===this.businessData.activity_ticket_type)}},{key:"basicData",get:function(){var t,e;return null!=(e=null===(t=this.activityDetail)||void 0===t?void 0:t.basic_data)?e:{}}}]),e}(Object(h.mixins)(R.a,$.a,E.a));F.displayName="MobilePackage_options_card_type",N([V.State],F.prototype,"activityDetail",void 0);var W=F=N([Object(h.Component)({components:{OpenDateTips:A.default,ActivityMiniCalendar:T,PackageCard:I.default,CardBottomBar:L.default,ShoppingCart:M.default}})],F),H=(n(2550),Object(x.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-package-options"},[t.hasSomeOpenDate?n("OpenDateTips",{staticStyle:{margin:"0 0 16px 0"}}):t._e(),t._v(" "),t.dateVisible&&!t.isLinePage?n("ActivityMiniCalendar",{staticClass:"card-package-options_calendar",attrs:{state:t.schedulesState,schedules:t.schedules,warn:t.pickupDateDescription},on:{input:t.dateChange,reload:t.getSchedules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),t._v(" "),n("div",{staticClass:"card-package-options_card-list"},[t.packages?n("PackageCard",{attrs:{packages:t.packages,schedule:t.schedule,date:t.date,"button-content":t.$t("11888")},on:{toBook:t.toBook}}):t._e()],1),t._v(" "),n("CardBottomBar",t._b({attrs:{"basic-data":t.basicData}},"CardBottomBar",t.businessData,!1)),t._v(" "),n("ShoppingCart",{attrs:{visible:t.shoppingCartVisible},on:{"update:visible":function(e){t.shoppingCartVisible=e}}})],1)}),[],!1,null,"b06e3a96",null));e.default=H.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=(n(28),function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c}),m=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleShowPacakgePrice",value:function(t){return(this.$t("88601")||"").replace("{price}",'<span class="price_text">'.concat(t,"</span>"))}},{key:"handleShowProductNote",value:function(){this.visible=!0}},{key:"tagList",get:function(){var t,e,n;return(null===(n=null===(e=null===(t=this.data)||void 0===t?void 0:t.tag)||void 0===e?void 0:e.product_tags)||void 0===n?void 0:n.attribute_tags)||[]}},{key:"packageList",get:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.package_list)||[]}},{key:"openOptionText",get:function(){return this.isOpen?this.$t("88587"):this.$t("88586")}},{key:"openOptionIcon",get:function(){return this.isOpen?"icon_navigation_chevron_up_xs":"icon_navigation_chevron_down_xs"}}]),e}(h.Vue);y([h.State],m.prototype,"klook",void 0),y([h.Getter],m.prototype,"platform",void 0),y([h.Getter],m.prototype,"isMobile",void 0),y([Object(h.Prop)({default:function(){return{}}})],m.prototype,"data",void 0),y([Object(h.Prop)({default:!1})],m.prototype,"isOpen",void 0);var k=m=y([Object(h.Component)({})],m),O=(n(2577),n(2578),n(43)),_=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{class:["pass-attractions-card",t.platform],attrs:{"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.$emit("toDetial")}}},[n("div",{staticClass:"simple-wrap"},[n("div",{staticClass:"card-img",style:"background-image: url("+t.data.banner+");"}),t._v(" "),n("div",{staticClass:"simple-right"},[n("p",{staticClass:"card-title"},[t._v(t._s(t.data.title))]),t._v(" "),n("div",{staticClass:"tag-wrap"},t._l(t.tagList,(function(e,o){return n("div",{key:o,staticClass:"card-tag",style:{color:e.text_color||"#6056D6",backgroundColor:e.background_color||"#F6F5FC",borderRadius:e.radius+"px"||!1}},[n("span",[t._v(t._s(e.text))])])})),0),t._v(" "),t.isMobile?t._e():n("div",{staticClass:"show-pacakage-wrap",attrs:{"data-spm-module":"AttractionsQuickView?oid=activity_"+t.data.id+"&ext="+encodeURIComponent(JSON.stringify({status:t.isOpen?"open":"close"})),"data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.$emit("switchShowPackage")}}},[n("span",[t._v(t._s(t.openOptionText))]),t._v(" "),n("klk-icon",{staticClass:"show-package-icon",attrs:{type:t.openOptionIcon}})],1)])]),t._v(" "),n("div",{class:["hide-wrap",t.isOpen&&"open"]},[n("div",{staticClass:"product-wrap"},[n("div",{staticClass:"product-info"},[n("div",{staticClass:"product-title"},[n("span",[t._v(t._s(t.data.product_title))]),t._v(" "),t.isMobile?n("klk-icon",{staticClass:"product-title-icon",attrs:{type:"icon_tips_question_s"},on:{click:function(e){return e.stopPropagation(),t.handleShowProductNote(e)}}}):n("klk-poptip",{attrs:{content:t.data.product_title_note,dark:!0,offset:[-11,5],placement:"bottom-start",trigger:"hover"}},[n("klk-icon",{staticClass:"product-title-icon",attrs:{type:"icon_tips_question_s"}})],1)],1),t._v(" "),t._l(t.packageList,(function(e,o){return n("div",{key:o,staticClass:"package-item"},[n("p",{staticClass:"package-title"},[t._v(t._s(e.package_name))]),t._v(" "),t._m(0,!0),t._v(" "),n("p",{staticClass:"package-price",domProps:{innerHTML:t._s(t.handleShowPacakgePrice(e.price_show.sale_price))}})])}))],2)]),t._v(" "),n("div",{staticClass:"see-detail"},[n("klk-button",{attrs:{block:t.isMobile,type:"outlined"}},[n("span",[t._v(t._s(t.$t("88593")))]),t._v(" "),n("klk-icon",{attrs:{type:"icon_navigation_chevron_right_xxs"}})],1)],1)]),t._v(" "),t.isMobile?n("div",{staticClass:"show-pacakage-wrap"},[n("span",{attrs:{"data-spm-module":"AttractionsQuickView?oid=activity_"+t.data.id+"&ext="+encodeURIComponent(JSON.stringify({status:t.isOpen?"open":"close"})),"data-spm-virtual-item":"__virtual"},on:{click:function(e){return e.stopPropagation(),t.$emit("switchShowPackage")}}},[t._v(t._s(t.openOptionText))])]):t._e()]),t._v(" "),n("klk-bottom-sheet",{attrs:{visible:t.visible,"show-close":!0,title:t.$t("88596")},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"demo-content"},[t._v(t._s(t.data.product_title_note))])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"package-line"},[e("span")])}],!1,null,"500a1774",null).exports,j=n(880),w=n(1464),P=n(1155),C=n(1429),S=n(16);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var x=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).openIndex=-1,t.open=!1,t.openDetail=!1,t.standardActivityId=0,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"handleSwitchShowPackage",value:function(t){this.openIndex=this.openIndex===t?-1:t}},{key:"handleToDetail",value:function(t,e){this.isMobile?this.openDetail=!0:this.open=!0,this.standardActivityId=e?t.id:t}},{key:"handleToPreView",value:function(){this.open=!0,this.standardActivityId=0}},{key:"closeModal",value:function(){this.open=!1}},{key:"closeDetialModal",value:function(){this.openDetail=!1,this.standardActivityId=0}},{key:"cardList",get:function(){var t,e=this;return((null===(t=this.businessData)||void 0===t?void 0:t.pass_standard_card_list)||[]).map((function(t){var n=t.banner;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t,{banner:Object(S.O)(n,"".concat(e.isDesktop?"desktop":"mobile","PassAttractionsCard"),!0,!0)})}))}},{key:"standardTotal",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.standard_total)||0}},{key:"activityId",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.activity_id)||0}},{key:"displayTitle",get:function(){return this.$t("76895",{num:this.standardTotal})}},{key:"displayDetialTitle",get:function(){return this.$t("76898")}}]),e}(j.a);T.displayName="Pass_attractions",x([h.State],T.prototype,"klook",void 0),x([h.Getter],T.prototype,"platform",void 0),x([h.Getter],T.prototype,"isMobile",void 0);var I=T=x([Object(h.Component)({components:{AttractionCard:_,AttractionIncludedDesktop:w.default,AttractionIncludedMobile:P.default,AttractionPreview:C.a}})],T),R=(n(2579),n(2580),Object(O.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["activtity-pass-attractions",t.platform]},[n("div",{staticClass:"attraction-list"},t._l(t.cardList,(function(e,o){return n("AttractionCard",{key:o,staticClass:"attraction-card",attrs:{data:e,"is-open":t.openIndex===o,"data-spm-module":"SeeAttractionsDetails_LIST?oid=activity_"+e.id+"&idx="+o+"&len="+t.cardList.length},on:{switchShowPackage:function(e){return t.handleSwitchShowPackage(o)},toDetial:function(n){return t.handleToDetail(e,!0)}}})})),1),t._v(" "),t.standardTotal>3?n("div",{staticClass:"btn-wrap"},[n("klk-button",{attrs:{block:t.isMobile,type:"outlined","data-spm-module":"AttractionsSeeMore","data-spm-virtual-item":"__virtual"},on:{click:t.handleToPreView}},[n("span",[t._v(t._s(t.$t("88585")))]),t._v(" "),t.isMobile?t._e():n("klk-icon",{attrs:{type:"icon_navigation_chevron_right_xxs"}})],1)],1):t._e(),t._v(" "),n("div",{staticStyle:{height:"0px",overflow:"hidden"}},[n(t.isMobile?"AttractionIncludedMobile":"AttractionIncludedDesktop",{tag:"components",attrs:{"activity-id":t.activityId,info:{activity_total:t.standardTotal},title:t.displayTitle,visible:t.open,"standard-activity-id":t.standardActivityId},on:{"update:visible":function(e){t.open=e},closeModal:t.closeModal}})],1),t._v(" "),t.isMobile?n("AttractionPreview",{attrs:{title:t.displayDetialTitle,visible:t.openDetail,"activity-id":t.activityId,"standard-activity-id":t.standardActivityId},on:{"update:visible":function(e){t.openDetail=e},closeModal:t.closeDetialModal}}):t._e()],1)}),[],!1,null,"348a485b",null));e.default=R.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(901),m=n(2071),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"seeMoreReviews",value:function(){this.$emit("view-more")}}]),e}(f.Vue);k([f.State],O.prototype,"klook",void 0),k([Object(f.Prop)()],O.prototype,"score",void 0),k([Object(f.Prop)()],O.prototype,"reviewCount",void 0),k([Object(f.Prop)({default:function(){return[]}})],O.prototype,"reviewList",void 0);var _=O=k([Object(f.Component)({components:{RwdSwiper:y.default,RecentReviewCard:m.a}})],O),j=(n(2603),n(43)),w=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RwdSwiper",{staticClass:"recent-reviews-swiper custom-swiper",attrs:{"per-view":1,data:t.reviewList},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n("RecentReviewCard",{staticClass:"recent-reviews-card",attrs:{avatar:o.avatar,name:o.user_name,"utc-time":o.review_time_utc,content:o.content||"","hide-image":!0},nativeOn:{click:function(e){return t.seeMoreReviews(e)}}})]}}])})}),[],!1,null,"522c56d6",null).exports,P=n(1830),C=n(1432),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},D=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"viewMore",value:function(){this.visible=!0}},{key:"close",value:function(){this.visible=!1}},{key:"calcSubScoreList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.act_sub_score)||[]}},{key:"latestBestReview",get:function(){return this.businessData.reviews||[]}},{key:"reviewCount",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.review_count}},{key:"score",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.score}},{key:"reviewListTotal",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.total}},{key:"reviewList",get:function(){return this.businessData.item}},{key:"needHideReviews",get:function(){return this.reviewCount<10&&this.score<4}}]),e}(h.a);D.displayName="MobileReviews";var x=D=S([Object(f.Component)({components:{ReviewRating:C.a,RecentReviews:w,ReviewsModal:P.default}})],D),T=(n(2609),Object(j.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"activity-review"},[n("ReviewRating",{attrs:{score:t.score,count:t.reviewCount}}),t._v(" "),!t.needHideReviews&&t.latestBestReview.length?n("RecentReviews",{attrs:{score:t.score,"review-count":t.reviewCount,"review-list":t.latestBestReview},on:{"view-more":t.viewMore}}):t._e(),t._v(" "),n("div",{staticClass:"activity-review-view-more",attrs:{"data-spm-module":"View_All_Reviews","data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.viewMore(!0)}}},[n("klk-button",{staticClass:"custom-button-style",attrs:{block:"",type:"outlined",size:"small"}},[t._v("\n      "+t._s(t.$t("activity.v2.label.all_reviews"))+"\n    ")])],1),t._v(" "),n("ReviewsModal",{attrs:{visible:t.visible,score:t.score,"review-count":t.reviewCount,"activity-id":t.businessData.activity_id,"review-gallery-should-show":t.businessData.should_show,reviews:t.reviewList,"review-total":t.reviewListTotal,"sub-score-list":t.calcSubScoreList},on:{close:t.close}})],1)}),[],!1,null,"ec61af0a",null));e.default=T.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(2612),r=n.n(o),c=n(0),l=n(25),d=n(31),v=n(46),f=n(39),h=n(35),y=n(40),m=n(5),k=n(21),O=n(1933),_=n.n(O),map=n(1468),j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(d.a)(this,e),(t=Object(f.a)(this,Object(h.a)(e).apply(this,arguments))).mapShow=0,t}return Object(y.a)(e,t),Object(v.a)(e,[{key:"showMap",value:function(){this.mapShow+=1}}]),e}(k.Vue);j([Object(k.Prop)()],w.prototype,"map",void 0);var P=w=j([Object(k.Component)({components:{IconDestination:_.a,Map:map.a}})],w),C=(n(2610),n(43)),S=Object(C.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"location-wrapper"},[n("IconDestination",{attrs:{theme:"outline",size:"20",fill:[t.$tokensObj["$color-text-primary"]]}}),t._v(" "),n("div",{staticClass:"location-text",on:{click:t.showMap}},[t._v(t._s(t.map.address_desc))])],1),t._v(" "),t.mapShow?n("Map",t._g({attrs:{address:t.map.address,"address-desc":t.map.address_desc,show:t.mapShow}},t.$listeners)):t._e()],1)}),[],!1,null,"3e886d5e",null).exports,D=n(2072),x=n(880),T=n(2059),I=n(212),R=n(1108);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var L=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){function e(){return Object(d.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(v.a)(e,[{key:"viewMore",value:function(){var t=Object(I.c)(document.querySelector("#reviews"));t&&Object(I.d)({scrollY:t,lockLocation:105})}},{key:"calcDepartureList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.departures)||[]}},{key:"address",get:function(){var t,e,n=(null!=(e=null===(t=this.businessData)||void 0===t?void 0:t.components)?e:[]).filter((function(t){return"address"===t.type})),data=Object(l.a)(n,1)[0];return data?(data.data||[])[0]||null:""}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"reopen",get:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.businessData)}},{key:"isPublished",get:function(){return this.businessData.published}},{key:"visible",get:function(){return!this.isGuestCheckout&&this.isPublished&&!this.klook.utilConfig.whiteLabelUtilConfig}}]),e}(x.a);A.displayName="DesktopScore_participants",L([k.Getter],A.prototype,"isGuestCheckout",void 0);var E=A=L([Object(k.Component)({components:{IconDestinationOut:r.a,CardDeparture:R.a,ScoreParticipants:D.a,WishButton:T.a,ActivityLocation:S}})],A),M=(n(2613),Object(C.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reviews-number"},[n("div",{staticClass:"left-box"},[n("ScoreParticipants",t._b({staticClass:"flex-none",on:{"view-more-reviews":t.viewMore}},"ScoreParticipants",t.businessData,!1)),t._v(" "),n("div",{staticClass:"departure-location-box"},[t.calcDepartureList.length?n("div",{staticClass:"departure-box",class:t.address&&"spec-style"},[n("span",{staticClass:"departure-box__icon"},[n("IconDestinationOut",{attrs:{theme:"outline",size:"20",fill:[t.$tokensObj["$color-text-primary"]]}})],1),t._v(" "),n("CardDeparture",{staticClass:"departure-box__content",attrs:{list:t.calcDepartureList}})],1):t._e(),t._v(" "),t.address?n("div",{staticClass:"location-wrap"},[n("ActivityLocation",{attrs:{map:t.address}})],1):t._e()])],1),t._v(" "),t.visible?n("WishButton",{staticClass:"wish-wrap",attrs:{"activity-id":t.activityId,reopen:t.reopen},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"will-list"},[n("SvgIcon",{class:e.favorite?"will-hear-collect-icon":"will-heart-icon",attrs:{size:"20",name:"activity-common#"+(e.favorite?"collect-new":"uncollect-new")}}),t._v(" "),n("span",[t._v(t._s(t.$t("profile.mobile.wishlist.header")))])],1)]}}],null,!1,2680838178)}):t._e()],1)}),[],!1,null,"6740242a",null));e.default=M.exports},,function(t,e,n){"use strict";n(11),n(45),n(99);var o=n(13),r=(n(52),n(53),n(8),n(20),n(27),n(23),n(4)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(10),k=n.n(m),O=n(7),_=n.n(O),j={all:[408],country:[408,"country"],city:[408,"country","city"],jrpass:[408,"country","city"],fnb:[408,"country","city"],activity:[408,"country","city","activity"],wifi:[408],cr:[408,"country",445],hotel_voucher:[408,"country","city"]},w=n(3),P=n(120),C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=Object(P.a)(),D=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).noticeList=[],t.noticeMap={},t}var n,h;return Object(f.a)(e,t),Object(l.a)(e,[{key:"fetchNotice",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="desktop"===this.klook.platform?8:4,t.next=3,this.$axios.$get(w.a.noticeList,{params:{platform:e}});case 3:n=t.sent,o=n.success,r=n.result,o&&!k()(r)&&(this.noticeMap[this.klook.language]=r,S.setItem("klk_notices",this.noticeMap,18e4),this.noticeList=r);case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.noticeMap=S.getItem("klk_notices")||{},e=this.noticeMap[this.klook.language],k()(e)){t.next=6;break}this.noticeList=e,t.next=8;break;case 6:return t.next=8,this.fetchNotice();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"visible",get:function(){var t;return null===(t=this.klook.utilConfig)||void 0===t?void 0:t.global_notice}},{key:"valid",get:function(){return!k()(this.pageNoticeList)}},{key:"pageNoticeList",get:function(){var t=this,e=this.noticeList.filter((function(t){var e=[_()(t.start_time),_()(t.end_time)],n=e[0],o=e[1];return _()().isBetween(n,o)})),n=(j[this.type]||[]).reduce((function(n,r){var c=e.filter((function(e){if("408,445".includes(r.toString()))return e.type===r;var n=e["".concat(r,"_ids")],o=t.subTypeIds["".concat(r,"Id")];return!k()(n)&&o&&n.includes(String(o))}));return[].concat(Object(o.a)(n),Object(o.a)(c))}),[]);return Object(o.a)(new Set(n)).sort((function(a,b){return a.type!==b.type?0:_()(b.start_time).diff(a.start_time)}))}},{key:"renderPageNoticeList",get:function(){return this.pageNoticeList.map((function(t){if(t.content)return{content:t.content.title,link:t.content.url}}))}}]),e}(y.Vue);C([y.State],D.prototype,"klook",void 0),C([Object(y.Prop)()],D.prototype,"type",void 0),C([Object(y.Prop)()],D.prototype,"subTypeIds",void 0);var x=D=C([y.Component],D),T=(n(2282),n(43)),component=Object(T.a)(x,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("div",{directives:[{name:"show",rawName:"v-show",value:this.valid,expression:"valid"}],staticClass:"notice"},[this._t("default",[e("klk-announcement",{attrs:{"data-spm-module":"NoticeOnTop","data-spm-virtual-item":"__virtual",items:this.renderPageNoticeList,"max-content-width":1160}})],{noticeList:this.noticeList})],2):this._e()}),[],!1,null,null,null);e.a=component.exports},,function(t,e,n){"use strict";var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(213),y=n.n(h),m=n(212),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).scrollToTopVisible=!1,t.$verticalSearchBox=null,t.$headerSearchBox=null,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"headerSearchControl",value:function(){this.$headerSearchBox=document.querySelector("#js-header-search-box"),this.$headerSearchBox.style.display="none",this.$verticalSearchBox=document.querySelector("#js-desktop-platform-vertical-entrance")}},{key:"scrollFun",value:function(t,e){if(t){var n=Object(m.h)(),o=Object(m.c)(t);e.style.display=n>o+50?"block":"none"}else e.style.display="block"}},{key:"destinationText",value:function(){var t=document.querySelector("#js-destination-box-text"),e=document.querySelector("#js-header-search-box");if(!t)return!1;t.style.display=e&&"block"===e.style.display?"none":"block"}},{key:"initScroll",value:function(){Object(m.h)()>this.distance?this.setScrollToTopVisible(!0):this.setScrollToTopVisible(!1)}},{key:"setScrollToTopVisible",value:function(t){this.scrollToTopVisible=t}},{key:"backToTop",value:function(){Object(m.d)({scrollY:0})}},{key:"mounted",value:function(){window.document.addEventListener("scroll",this.throttleScroll)}},{key:"beforeDestroy",value:function(){window.document.removeEventListener("scroll",this.throttleScroll)}},{key:"throttleScroll",get:function(){return y()(this.initScroll,200)}}]),e}(f.Vue);k([Object(f.Prop)({default:function(){return"0px"}})],O.prototype,"setBottom",void 0),k([Object(f.Prop)({default:function(){return 1800}})],O.prototype,"distance",void 0);var _=O=k([Object(f.Component)({})],O),j=(n(2212),n(43)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.scrollToTopVisible,expression:"scrollToTopVisible"}],staticClass:"scroll-to-top",style:{bottom:this.setBottom},on:{click:this.backToTop}},[e("SvgIcon",{attrs:{name:"desktop-event#event_up_to_top",size:"24"}})],1)}),[],!1,null,null,null);e.a=component.exports},,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1907),m=n(1160),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcPoiList",get:function(){return this.businessData.list||[]}}]),e}(h.a);O.displayName="Theme_list";var _=O=k([Object(f.Component)({components:{ExpPioList:y.a,ActivityCardsListWrap:m.a}})],O),j=(n(2420),n(43)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exp-poi-section",class:this.klook.platform},[e("ActivityCardsListWrap",{attrs:{activities:this.calcPoiList,state:this.state}},[this.calcPoiList&&this.calcPoiList.length?e("div",{staticClass:"exp-poi-list-box"},[e("ExpPioList",{attrs:{list:this.calcPoiList}})],1):this._e()])],1)}),[],!1,null,"38460bf7",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(20),n(27);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1093),m=n(1160),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"getDataNosnippet",value:function(t){return[4048,47952,32775,47941].includes(t)}},{key:"logoWidth",get:function(){return(this.isDesktop?275:168)/4}},{key:"ratio",get:function(){return this.isDesktop?"16:9":""}},{key:"activities",get:function(){var t=this.businessData||{},e=t.recommend_activities_v2,n=t.recommend_activities;return e||n}},{key:"cardType",get:function(){var t;return null===(t=this.activities)||void 0===t?void 0:t.card_type}},{key:"perView",get:function(){return[3,4].includes(this.cardType)?"mobile"===this.klook.platform?1:4:"mobile"===this.klook.platform?2:4}},{key:"cClass",get:function(){return["activity-recommend_list","activity-recommend_list-".concat(this.klook.platform)]}}]),e}(h.a);O.displayName="Recommend_activity";var _=O=k([Object(f.Component)({components:{BaseActivityCards:y.a,ActivityCardsListWrap:m.a}})],O),j=(n(2421),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityCardsListWrap",{class:t.cClass,attrs:{activities:t.activities,state:t.state}},[n("BaseActivityCards",t._b({attrs:{data:t.activities,"per-view":t.perView,"image-type":"experienceDesktopLargeCard","get-data-nosnippet":t.getDataNosnippet,"logo-width":t.logoWidth,ratio:t.ratio}},"BaseActivityCards",{hasBorder:!0},!1))],1)}),[],!1,null,"2947fbb2",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1160),m=n(901),k=n(892),O=n(1093),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"logoWidth",get:function(){return(this.isDesktop?254:168)/4}},{key:"activities",get:function(){var t=this.businessData||{},e=t.related_activities_v2,n=t.related_activities;return e||n}}]),e}(h.a);j.displayName="Related_activity";var w=j=_([Object(f.Component)({components:{ActivityCardsListWrap:y.a,RwdSwiper:m.default,RwdActivityCard:k.default,BaseActivityCards:O.a}})],j),P=(n(2422),n(43)),component=Object(P.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("ActivityCardsListWrap",{attrs:{activities:this.activities,state:this.state}},[e("BaseActivityCards",this._b({attrs:{data:this.activities,"image-type":"desktopActivityCard","logo-width":this.logoWidth}},"BaseActivityCards",{swiperBind:{controllerPosition:"intersect"},hasBorder:!0},!1))],1)}),[],!1,null,"98ac3996",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1160),m=n(901),k=n(892),O=n(1093),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activities",get:function(){return(this.businessData||{}).same_city_activities}}]),e}(h.a);j.displayName="Same_city_activity";var w=j=_([Object(f.Component)({components:{ActivityCardsListWrap:y.a,RwdSwiper:m.default,RwdActivityCard:k.default,BaseActivityCards:O.a}})],j),P=(n(2423),n(43)),component=Object(P.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("ActivityCardsListWrap",{attrs:{activities:this.activities,state:this.state}},[e("BaseActivityCards",this._b({attrs:{data:this.activities}},"BaseActivityCards",{swiperBind:{controllerPosition:"intersect"},hasBorder:!0},!1))],1)}),[],!1,null,"99f38ff6",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1160),m=n(1093),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activities",get:function(){var t=this.businessData||{},e=t.related_and_recommend_activities_v2,n=t.related_and_recommend_activities;return e||n}}]),e}(h.a);O.displayName="DesktopUnpublished_recommend_activity";var _=O=k([Object(f.Component)({components:{ActivityCardsListWrap:y.a,BaseActivityCards:m.a}})],O),j=(n(2424),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityCardsListWrap",{staticClass:"activity-unpublished-recommend",attrs:{activities:t.activities,state:t.state}},[n("div",{staticClass:"activity-activity-unpublished_desc"},[n("span",{staticClass:"activity-unpublished_desc-text"},[t._v(t._s(t.businessData.unpublished_recommend_title))])]),t._v(" "),n("div",{staticClass:"activity-unpublish-recommend-list"},[n("BaseActivityCards",t._b({attrs:{data:t.activities}},"BaseActivityCards",{hasBorder:!0},!1))],1),t._v(" "),t.businessData.link||t.businessData.link_title?n("div",{staticClass:"explore-more"},[n("a",{attrs:{href:t.businessData.link,type:"primary"}},[t._v(t._s(t.businessData.link_title))]),t._v(" "),n("SvgIcon",{attrs:{name:"desktop-common#arrow-right",color:"#4985e6",size:"12"}})],1):t._e()])}),[],!1,null,"63a6988c",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1160),m=n(1093),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"activities",get:function(){var t=this.businessData||{},e=t.related_and_recommend_activities_v2,n=t.related_and_recommend_activities;return e||n}}]),e}(h.a);O.displayName="MobileUnpublished_recommend_activity";var _=O=k([Object(f.Component)({components:{BaseActivityCards:m.a,ActivityCardsListWrap:y.a}})],O),j=(n(2425),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActivityCardsListWrap",{staticClass:"activity-unpublished-recommend",attrs:{activities:t.activities,state:t.state}},[n("div",{staticClass:"activity-activity-unpublished_desc"},[n("span",{staticClass:"activity-unpublished_desc-text"},[t._v(t._s(t.businessData.unpublished_recommend_title))])]),t._v(" "),n("div",{staticClass:"activity-unpublish-recommend-list"},[n("BaseActivityCards",t._b({attrs:{data:t.activities}},"BaseActivityCards",{hasBorder:!0},!1))],1),t._v(" "),n("a",{staticClass:"explore-more",attrs:{href:t.businessData.link,type:"primary"}},[t._v(t._s(t.businessData.link_title))])])}),[],!1,null,"76bcd05e",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(1108),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcDepartureList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.departures)||[]}}]),e}(h.a);k.displayName="MobileActivity_departures",m([f.State],k.prototype,"klook",void 0);var O=k=m([Object(f.Component)({components:{CardDeparture:y.a}})],k),_=(n(2426),n(43)),component=Object(_.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-departure"},[e("div",{staticClass:"section-departure-wrap"},[this.calcDepartureList.length?e("CardDeparture",{staticClass:"card-departure-wrap",attrs:{list:this.calcDepartureList}}):this._e()],1)])}),[],!1,null,"1ef91b29",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"rateList",get:function(){return(this.lowestPriceInfo||{}).lowest_rate_list||[]}},{key:"firstThreeItems",get:function(){return this.rateList.slice(0,3)}},{key:"otherItems",get:function(){var t=this.rateList.slice(3);return{items:t,price:t[0].format_price}}}]),e}(n(2036).a);y.displayName="DesktopActivity_hotel";var m=y=h([f.Component],y),k=(n(2428),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.lowestPriceInfo.lowest_rate_list.length?n("div",{class:{"activity-hotel-wrapper":!0,"activity-hotel-single":1===t.rateList.length}},[n("div",{staticClass:"activity-hotel-header"},[n("div",{staticClass:"activity-hotel-title"},[t._v(t._s(t.lowestPriceInfo.title))]),t._v(" "),n("div",{staticClass:"activity-hotel-subtitle"},[t._v("\n      "+t._s(t.lowestPriceInfo.description)+"\n      "),n("klk-poptip",{staticClass:"remind-poptip",attrs:{content:t.lowestPriceInfo.remind}},[n("svg-icon",{attrs:{name:"common#icon_tips_tips_xs",size:16,"data-spm-module":"ToHotelPriceInfo","data-spm-virtual-item":"__virtual"}})],1)],1)]),t._v(" "),n("div",{staticClass:"activity-hotel-content"},[n("div",{staticClass:"activity-hotel-ratelist"},[t._l(t.firstThreeItems,(function(e,o){return n("div",{key:o,staticClass:"rateitem"},[n("img",{attrs:{src:e.icon_url}}),t._v(" "),n("div",{style:{color:e.text_color}},[t._v(t._s(e.format_price))])])})),t._v(" "),t.rateList.length>3?n("div",{staticClass:"rateitem"},[n("div",{staticClass:"viewmore"},[n("span",{staticClass:"viewmore-title"},[t._v(t._s(t.$t("28963")))]),t._v(" "),n("klk-poptip",{attrs:{width:260,placement:"bottom"}},[n("svg-icon",{staticClass:"triangle-svg",attrs:{name:"common#icon_navigation_triangle_down_fill_s",width:16,height:16,"data-spm-virtual-item":"__virtual","data-spm-module":"ToHotelMoreSites"}}),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},t._l(t.otherItems.items,(function(t,e){return n("RateItem",{key:e,attrs:{item:t}})})),1)],1)],1),t._v(" "),n("div",{staticClass:"viewmore-price"},[t._v(t._s(t.otherItems.price))])]):t._e()],2),t._v(" "),n("klk-button",{staticClass:"btn-detail",attrs:{type:"secondary","data-spm-module":t.dataSpmModule,"data-spm-virtual-item":"__virtual?typ=entry"},on:{click:t.goHotelDetail}},[t._v("\n      "+t._s(t.lowestPriceInfo.btn_title)+"\n    ")])],1)]):t._e()}),[],!1,null,"30af121a",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).toggleShowMore=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showRemindModal",value:function(){this.$alert(this.lowestPriceInfo.remind)}},{key:"rateList",get:function(){var t=(this.lowestPriceInfo||{}).lowest_rate_list||[];return this.toggleShowMore?t:t.slice(0,this.lowestPriceInfo.show_min||3)}}]),e}(n(2036).a);y.displayName="MobileActivity_hotel";var m=y=h([f.Component],y),k=(n(2429),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.lowestPriceInfo.lowest_rate_list.length?n("div",{staticClass:"activity-hotel-wrapper"},[n("div",{staticClass:"activity-hotel-title"},[t._v(t._s(t.lowestPriceInfo.title))]),t._v(" "),n("div",{staticClass:"activity-hotel-subtitle"},[t._v("\n    "+t._s(t.lowestPriceInfo.description)+"\n    "),n("svg-icon",{staticClass:"icon",attrs:{name:"common#icon_tips_tips_xs",size:16,"data-spm-module":"ToHotelPriceInfo","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(e){return t.showRemindModal(e)}}})],1),t._v(" "),n("div",{staticClass:"activity-hotel-ratelist"},t._l(t.rateList,(function(t,e){return n("RateItem",{key:e,attrs:{item:t}})})),1),t._v(" "),n("div",{staticClass:"activity-hotel-footer"},[n("klk-button",{attrs:{type:"secondary",size:"small","data-spm-module":t.dataSpmModule,"data-spm-virtual-item":"__virtual"},on:{click:t.goHotelDetail}},[t._v("\n      "+t._s(t.lowestPriceInfo.btn_title)+"\n    ")]),t._v(" "),(t.lowestPriceInfo.lowest_rate_list||[]).length>t.lowestPriceInfo.show_min?n("klk-button",{staticClass:"btn-viewmore",attrs:{type:"text","data-spm-module":"ToHotelMoreSites","data-spm-virtual-item":"__virtual?typ=entry"},on:{click:function(e){t.toggleShowMore=!t.toggleShowMore}}},[t._v("\n      "+t._s(t.toggleShowMore?t.$t("28961"):t.$t("28963"))+"\n      "),n("klk-icon",{class:{icon:!0,"rotate-180":t.toggleShowMore},attrs:{type:"icon_navigation_chevron_down_xxs"}})],1):t._e()],1)]):t._e()}),[],!1,null,"fffb887e",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(883),m=n(881),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"visibleChange",value:function(t){t||this.hideSection()}},{key:"bindIHTrack",value:function(){return m.a.apply(void 0,arguments)}},{key:"calcTags2attribute",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.attribute_tags)||[]}},{key:"visible",get:function(){var t;return(null===(t=this.calcTags2attribute)||void 0===t?void 0:t.length)>0}}]),e}(h.a);O.displayName="Activity_attribute_tags",k([Object(f.Watch)("visible",{immediate:!0})],O.prototype,"visibleChange",null);var _=O=k([Object(f.Component)({components:{ExpTagging:y.default}})],O),j=(n(2431),n(43)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("div",{staticClass:"section-tagging"},[e("ExpTagging",{staticClass:"tagging-act-attr-style",attrs:{list:this.calcTags2attribute,line:2,track:{spm:"Activity_Product_Tag"}}})],1):this._e()}),[],!1,null,"28763522",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(28),n(31)),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(2046),m=n(1420),k=n(1841),O=n(1842),_=n(880),j=n(212),w=n(1989);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},S=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).showGallery=!1,t.currentIndex=0,t.bannerList=[],t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"bannerClick",value:function(t){this.bannerList.length<=1||(this.currentIndex=t,this.showGallery=!0)}},{key:"handleBuyNow",value:function(){Object(j.g)({lockLocation:110})}},{key:"handleShowAllGallery",value:function(){this.showGallery=!0;var t=this.basicData||{},e=t.activity_id,n=t.activity_page_template_id;this.$sendGTMCustomEvent("View Photo Item Clicked|Activity Page|".concat(e,"_").concat(n))}},{key:"formatImg",value:function(t,e){var n=0===e?this.cutSize:"c_fill,w_627,h_470/q_80/",o=this.hasWaterMark(t)?"w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/":"",r=this.formatPicExtension(t.suffix);return t.prefix+t.pre_process+n+o+r}},{key:"hasWaterMark",value:function(t){return t.has_water_mark&&!this.klook.utilConfig.whiteLabelUtilConfig}},{key:"formatPicExtension",value:function(t){return t?this.klook.webp?t.replace(/.(jpg|png|jpeg)$/,".webp"):t:""}},{key:"created",value:function(){this.bannerList=this.businessData.banner_list||[]}},{key:"activityId",get:function(){var t;return null===(t=this.businessData)||void 0===t?void 0:t.activity_id}},{key:"rightPriceData",get:function(){var t,e,n;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.businessData,{price:!1,priceShow:null===(e=null===(t=this.businessData)||void 0===t?void 0:t.price)||void 0===e?void 0:e.price_show,isActivityPublishInfo:!0,publishInfo:null===(n=this.basicData)||void 0===n?void 0:n.publish_info,basicData:this.basicData})}},{key:"officialImages",get:function(){var t=this,e=this.klook.webp;return(this.bannerList||[]).map((function(n,o){var r=e?n.suffix.replace(/.(jpg|png|jpeg|gif)$/,".webp"):n.suffix,c=t.hasWaterMark(n)?"w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/":"",l="".concat(n.prefix,"fl_lossy.progressive,q_65/w_1080/").concat(c).concat(r);return{image_id:o,img_resize_url:l,img_url:l,height:n.height,width:n.width}}))}},{key:"cutSize",get:function(){var t;return(null===(t=this.bannerList)||void 0===t?void 0:t.length)<3?"c_fill,w_1160,h_474/q_80/":"c_fill,w_1265,h_712/q_80/"}},{key:"bannerImageUrls",get:function(){var t,e=this;return null===(t=this.bannerList)||void 0===t?void 0:t.map((function(t,n){return e.formatImg(t,n)}))}}]),e}(Object(h.mixins)(_.a,w.a));S.displayName="DesktopBanner_atlas",C([h.State],S.prototype,"klook",void 0),C([Object(h.Prop)()],S.prototype,"basicData",void 0);var D=S=C([Object(h.Component)({components:{ActivityRightPrice:k.default,ActivityRightPriceLoading:O.default,Banner:y.default,ImageGallery:m.default}})],S),x=(n(2442),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"experience-activity-banner-desktop"},[n("Banner",{attrs:{"origin-banner":t.bannerList,"banner-list":t.bannerImageUrls,"activity-id":t.activityId},on:{"banner-click":t.bannerClick}}),t._v(" "),t.bannerList.length>1?n("klk-button",{staticClass:"sea-all-button",attrs:{type:"outlined","data-spm-module":"BannerSeeAllPhoto?oid=activity_"+t.activityId,"data-spm-virtual-item":"__virtual"},on:{click:t.handleShowAllGallery}},[t._v("\n    "+t._s(t.$t("activity_gallery"))+"\n  ")]):t._e(),t._v(" "),t.businessData.price?n("div",{staticClass:"desktop-new-right-price js-scroll-right-price-wrap"},[n("ActivityRightPrice",t._b({staticClass:"js-scroll-right-price right-price-style",style:t.calcFixedStyle},"ActivityRightPrice",t.rightPriceData,!1))],1):n("ActivityRightPriceLoading",{staticClass:"desktop-new-right-price",attrs:{"loading-width":"320px"}}),t._v(" "),n("ImageGallery",{attrs:{"activity-id":t.activityId,"show-gallery":t.showGallery,"banner-list":t.officialImages,"current-index":t.currentIndex},on:{close:function(e){t.showGallery=!1},"buy-now":t.handleBuyNow}})],1)}),[],!1,null,"8310eda0",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(23),n(4)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(2058),k=n(1841),O=n(1842),_=n(880),j=n(1989);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var P=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).isVideoPlaying=!1,t.swiperOptions={loop:!0,speed:800,slidesPerView:"auto",centeredSlides:!0,spaceBetween:4,autoplay:{delay:6e3},navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},pagination:{el:".activity-swiper-pagination",bulletClass:"activity-swiper-pagination-bullet",bulletActiveClass:"activity-swiper-pagination-bullet-active",clickable:!0},disableOnInteraction:!1,watchSlidesVisibility:!0,width:960,slidesOffsetBefore:100},t.bannerList=[],t}var n;return Object(f.a)(e,t),Object(l.a)(e,[{key:"changePlaying",value:function(t){this.isVideoPlaying=t}},{key:"created",value:function(){this.bannerList=[this.businessData.banner_list[0]]}},{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.bannerList=this.businessData.banner_list,t.next=3,null;case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"rightPriceData",get:function(){var t,e,n;return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.businessData,{priceShow:null===(e=null===(t=this.businessData)||void 0===t?void 0:t.price)||void 0===e?void 0:e.price_show,isActivityPublishInfo:!0,publishInfo:null===(n=this.basicData)||void 0===n?void 0:n.publish_info,basicData:this.basicData})}}]),e}(Object(y.mixins)(_.a,j.a));C.displayName="DesktopBanner",P([Object(y.Prop)()],C.prototype,"basicData",void 0);var S=C=P([Object(y.Component)({components:{ExperienceActivityBanner:m.a,ActivityRightPrice:k.default,ActivityRightPriceLoading:O.default}})],C),D=(n(2443),n(2444),n(2445),n(43)),component=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ExperienceActivityBanner",{staticClass:"experience-activity-banner-desktop",attrs:{"is-video-playing":t.isVideoPlaying,"swiper-options":t.swiperOptions,"activity-banner":t.bannerList},on:{"playing-change":t.changePlaying},scopedSlots:t._u([{key:"pagination",fn:function(e){var o=e.videoUrl;return[n("div",{staticClass:"swiper-pagination-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o,expression:"videoUrl"}],staticClass:"vidio-sign",on:{click:function(e){return t.changePlaying(!0)}}},[n("SvgIcon",{attrs:{name:"desktop-common#media-play-full-xxs-new",size:"14"}}),t._v("\n        "+t._s(t.$t("global.video_play"))+"\n      ")],1),t._v(" "),n("div",{staticClass:"activity-swiper-pagination"})])]}}])},[t._v(" "),n("template",{slot:"swiper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isVideoPlaying,expression:"!isVideoPlaying"}],staticClass:"banner-swiper-button-next act-banner-images-arrow-wrapper swiper-no-swiping"},[n("div",{staticClass:"act-banner-images-icon-arrow swiper-next"},[n("SvgIcon",{staticClass:"act-banner-images-icon-arrow--right",attrs:{name:"desktop-common#arrow-standard-right-new",size:"20"}})],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isVideoPlaying,expression:"!isVideoPlaying"}],staticClass:"banner-swiper-button-prev act-banner-images-arrow-wrapper"},[n("div",{staticClass:"act-banner-images-icon-arrow swiper-prev"},[n("SvgIcon",{staticClass:"act-banner-images-icon-arrow--right",attrs:{name:"desktop-common#arrow-standard-left-new",size:"20"}})],1)])]),t._v(" "),t.businessData.price?n("div",{staticClass:"desktop-new-right-price js-scroll-right-price-wrap"},[n("ActivityRightPrice",t._b({staticClass:"js-scroll-right-price right-price-style",style:t.calcFixedStyle},"ActivityRightPrice",t.rightPriceData,!1))],1):n("ActivityRightPriceLoading",{staticClass:"desktop-new-right-price",attrs:{"loading-width":"320px"}})],2)}),[],!1,null,"9b3fc7cc",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1905),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showStyleVersion",get:function(){return this.fieldsConfig2section.show_style_version||0}},{key:"isTaVersion",get:function(){return 1===this.showStyleVersion}}]),e}(n(880).a);m.displayName="MobileBanner";var k=m=y([Object(f.Component)({components:{Banner:h.a}})],m),O=(n(2446),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement;return(this._self._c||t)("Banner",this._g(this._b({class:{"mobile-banner-ta":this.isTaVersion},attrs:{"is-ta-version":this.isTaVersion}},"Banner",this.businessData,!1),this.$listeners))}),[],!1,null,"d285575a",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1905),y=n(1430),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showStyleVersion",get:function(){return this.fieldsConfig2section.show_style_version||0}},{key:"isTaVersion",get:function(){return 1===this.showStyleVersion}}]),e}(n(880).a);k.displayName="MobileNew_flow_banner";var O=k=m([Object(f.Component)({components:{Banner:h.a,ActivityWishButton:y.a}})],k),_=(n(2447),n(43)),component=Object(_.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"experience-new-flow-banner"},[e("Banner",this._g(this._b({class:{"mobile-banner-ta":this.isTaVersion},attrs:{"is-ta-version":this.isTaVersion}},"Banner",this.businessData,!1),this.$listeners))],1)}),[],!1,null,"06cdbc61",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"breadcrumb",get:function(){return this.businessData}},{key:"cClass",get:function(){var t="activity-bread-crumb";return[t,"".concat(t,"-").concat(this.klook.platform)]}}]),e}(n(880).a);y.displayName="BreadCrumb";var m=y=h([f.Component],y),k=(n(2448),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.cClass},[n("klk-breadcrumb",{staticClass:"breadcrumb",attrs:{"current-enabled":!0}},t._l(t.breadcrumb,(function(e){return n("klk-breadcrumb-item",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Activity Page Breadcrumbs Bar Clicked",expression:"'Activity Page|Activity Page Breadcrumbs Bar Clicked'",arg:"click"}],key:e.type+e.id,attrs:{href:e.deep_link}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),1)],1)}),[],!1,null,"785c7d1d",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2187),y=n(1831),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).isShow=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"entranceAppeared",value:function(t){this.isShow=t,t||this.$emit("hide-section")}},{key:"activityId",get:function(){return this.businessData.activity_id}},{key:"isSrvActivity",get:function(){return this.businessData.is_srv_activity}},{key:"title",get:function(){return this.businessData.activity_title}}]),e}(n(893).a);k.displayName="Contact",m([Object(f.State)((function(t){return t.klook.platform}))],k.prototype,"platform",void 0);var O=k=m([Object(f.Component)({components:{ActivityContactButton:h.a,ChatEntrance:y.a}})],k),_=(n(2449),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"activity-contact js-activity-contact",class:t.klook.platform},[n("div",{staticClass:"activity-contact__content"},[t._v("\n    "+t._s(t.$t("12893"))+"\n  ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"chat-btn-container"},[n("ChatEntrance",{attrs:{inline:"desktop"===t.platform,"spm-name":null,"object-id":t.activityId,"extra-info":{activityName:t.title,isSRV:t.isSrvActivity}},on:{"chat-entrance-show":t.entranceAppeared}},[n("klk-button",t._b({attrs:{type:"secondary","data-spm-item":"__default"}},"klk-button",{block:!1,size:"mobile"===t.klook.platform?"small":"normal"},!1),[n("span",{staticClass:"flex-center"},[n("SvgIcon",{attrs:{name:"mobile-activity#icon_service_chat_fill_m",size:"mobile"===t.klook.platform?16:24,color:"#FF5B00"}}),t._v(" "),n("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("5110-chat_with_us")))])],1)])],1)],1),t._v(" "),n("ChatEntrance",{staticClass:"activity-contact-chat-float",attrs:{"object-id":t.activityId,"extra-info":{activityName:t.title,isSRV:t.isSrvActivity}}})],1)}),[],!1,null,"7fd9f467",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(16),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"validChange",value:function(t){t||this.hideSection()}},{key:"valid",get:function(){return this.creditRebate&&this.useCredits&&!this.isGuestCheckout}},{key:"href",get:function(){return this.$href("/credits/landing")}},{key:"creditRebate",get:function(){return this.businessData.credit_rebate}},{key:"sellingPrice",get:function(){return this.businessData.selling_price||"0"}},{key:"minRebate",get:function(){return this.businessData.min_rebate}},{key:"rebatePrice",get:function(){var t=(parseFloat(this.sellingPrice)*parseFloat(this.minRebate)/100).toFixed(1);return Object(y.y)(t)}},{key:"title",get:function(){return this.$t("Credit.Banner.Title",[this.creditRebate])}},{key:"content",get:function(){return this.$t("Credit.Banner.Content",[this.klook.currencySymbol,this.rebatePrice])}}]),e}(h.a);k.displayName="MobileCredits_rebate_banner",m([f.Getter],k.prototype,"useCredits",void 0),m([f.Getter],k.prototype,"isGuestCheckout",void 0),m([Object(f.Watch)("valid",{immediate:!0})],k.prototype,"validChange",null);var O=k=m([f.Component],k),_=(n(2455),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid?n("div",{staticClass:"credit-banner"},[n("a",{staticClass:"credit-landing-entrance",attrs:{href:t.href}},[n("SvgIcon",{staticClass:"credit-landing-entrance_icon",attrs:{name:"mobile-activity#illustration_earn_elook_credits",width:"32",height:"32"}}),t._v(" "),n("div",{staticClass:"flex-box"},[n("div",{staticClass:"title-box"},[t.title?n("p",{staticClass:"credit-landing-entrance_title",domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t.content?n("p",{staticClass:"credit-landing-entrance_content",domProps:{innerHTML:t._s(t.content)}}):t._e()])]),t._v(" "),n("div",{staticClass:"flex-box arrow-icon"},[n("SvgIcon",{staticStyle:{"margin-left":"12px"},attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",height:"18",width:"18",color:"#4A4A4A"}})],1)],1)]):t._e()}),[],!1,null,"4a90fb8e",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"link",get:function(){return this.$href("/credits/landing")}}]),e}(f.Vue);y.displayName="MobileCredits_rebate_landing_entrance",h([f.Getter],y.prototype,"useCredits",void 0);var m=y=h([f.Component],y),k=(n(2456),n(43)),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"credit-landing-entrance",attrs:{href:this.link}},[e("SvgIcon",{staticClass:"credit-landing-entrance_icon",attrs:{name:"mobile-activity#illustration_earn_elook_credits",width:"32",height:"32"}}),this._v(" "),e("div",{staticClass:"flex-box"},[e("div",{staticClass:"title-box"},[e("p",{staticClass:"credit-landing-entrance_title"},[this._v(this._s(this.$t("credits_info.banner.title")))])])]),this._v(" "),e("div",{staticClass:"flex-box arrow-icon"},[e("SvgIcon",{staticStyle:{"margin-left":"12px"},attrs:{name:"mobile-activity#icon_navigation_chevron_right_m",height:"18",width:"18",color:"#4A4A4A"}})],1)],1)}),[],!1,null,"4c927115",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h.displayName="MobileKlook_prefer";var y=h=f([v.Component],h),m=(n(2458),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-editor-choice"},[n("SvgIcon",{staticClass:"activity-editor-choice_icon",attrs:{name:"mobile-activity#preferred-new-instruction",size:"48"}}),t._v(" "),n("div",{staticClass:"preferred_main"},[n("div",{staticClass:"preferred_title"},[t._v(t._s(t.$t("preferred_activity.title")))]),t._v(" "),n("div",{staticClass:"preferred_content"},[t._v(t._s(t.$t("preferred_activity.content")))])])],1)}),[],!1,null,"2be1e37a",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(1990),m=n(918),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).isShowMore=!0,t.isShowMoreBtn=!1,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){var t,n,o,r=(e.klook.platform,250),c=null===(o=null===(n=null===(t=e)||void 0===t?void 0:t.$refs)||void 0===n?void 0:n.markdown)||void 0===o?void 0:o.$el;c&&c.scrollHeight>r&&(e.isShowMore=!0,e.isShowMoreBtn=!0)}),100);case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"showMore",value:function(){this.isShowMore=!this.isShowMore}},{key:"isWhiteLabelEnv",get:function(){var t,e;return!!(null===(e=null===(t=this.klook)||void 0===t?void 0:t.utilConfig)||void 0===e?void 0:e.isWhiteLabelEnv)}},{key:"viewMoreText",get:function(){return this.isShowMore?this.$t("city_page_view_more"):this.$t("collapse_all")}}]),e}(y.a);O.displayName="DesktopActivity_faq",k([h.State],O.prototype,"klook",void 0);var _=O=k([Object(h.Component)({components:{ActivityMarkdown:m.a}})],O),j=(n(2459),n(2460),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"activity-faq"},[t.activityFaqVisible?[n("h3",{staticClass:"faq_title"},[n("b",[t._v(t._s(t.activityFaq.title))])]),t._v(" "),n("div",{staticClass:"page-activity-faq-markdown-content",staticStyle:{"margin-bottom":"20px"},attrs:{"data-spm-item":"ActivityQ&A"}},[n("ActivityMarkdown",{ref:"markdown",class:{collapsed:t.isShowMore},attrs:{content:t.activityFaq}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMoreBtn,expression:"isShowMoreBtn"}],staticClass:"more-btn-wrap"},[n("span",{staticClass:"more-btn",on:{click:function(e){return t.showMore()}}},[t._v("\n          "+t._s(t.viewMoreText)+"\n          "),n("SvgIcon",{staticClass:"act-banner-images-icon-arrow--right",staticStyle:{"margin-left":"4px"},attrs:{name:"desktop-common#arrow-standard-"+(t.isShowMore?"down":"up")+"-new",size:"14"}})],1)])],1)]:t._e(),t._v(" "),t.helpCenterVisible?n("div",[n("a",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Activity FAQ Help Center Clicked",expression:"'Activity Page|Activity FAQ Help Center Clicked'",arg:"click"}],staticClass:"page-activity-faq-lint-to-help-center",attrs:{"data-spm-item":"HelpCenter","data-track-event":"Activity Page|Klook Help Center Clicked",href:t.helpCenter.link,target:"_blank"}},[n("klk-button",{attrs:{size:"small",type:"outlined"}},[n("b",[t._v(t._s(t.isWhiteLabelEnv?t.$t("16031"):t.helpCenter.title))])])],1)]):t._e()],2)}),[],!1,null,"290ca3c5",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2186),y=n(918),m=n(1258),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"showFaqLayer",value:function(){this.visible=!0}},{key:"hideFaqLayer",value:function(){this.visible=!1}},{key:"goToHelpCenter",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null;window.location.href=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n}(this.$href(this.helpCenter.link))}},{key:"isWhiteLabelEnv",get:function(){var t,e;return!!(null===(e=null===(t=this.klook)||void 0===t?void 0:t.utilConfig)||void 0===e?void 0:e.isWhiteLabelEnv)}}]),e}(n(1990).a);O.displayName="MobileActivity_faq";var _=O=k([Object(f.Component)({components:{ActivityFaqItem:h.a,ActivityMarkdown:y.a,ActivityModal:m.default}})],O),j=(n(2461),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"activity-faq"},[t.activityFaqVisible?[n("ActivityFaqItem",{directives:[{name:"track",rawName:"v-track:item:ActivityQ&A",arg:"item:ActivityQ&A"}],attrs:{content:t.$t("activity.v2.label.activity_faq")},nativeOn:{click:function(e){return t.showFaqLayer(e)}}}),t._v(" "),n("ActivityModal",{attrs:{visible:t.visible,title:t.activityFaq.title},on:{close:t.hideFaqLayer}},[n("ActivityMarkdown",{staticClass:"faq-content",attrs:{content:t.activityFaq}})],1)]:t._e(),t._v(" "),t.helpCenterVisible?n("ActivityFaqItem",{directives:[{name:"track",rawName:"v-track:item:HelpCenter",value:{typ:"entry"},expression:"{\n      typ: 'entry'\n    }",arg:"item:HelpCenter"}],attrs:{content:t.isWhiteLabelEnv?t.$t("16031"):t.helpCenter.title},nativeOn:{click:function(e){return t.goToHelpCenter(e)}}}):t._e()],2)}),[],!1,null,"214d9650",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).visible=!1,t.arrowIcon="common#icon_navigation_chevron_down_xxs",t.collapse=!0,t.showIcon=!1,t}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"klookInsiderChange",value:function(t){t||this.hideSection()}},{key:"showMore",value:function(){this.collapse=!this.collapse,this.arrowIcon=this.collapse?"common#icon_navigation_chevron_down_xxs":"common#icon_navigation_chevron_up_xxs"}},{key:"calcHeight",value:function(){var t=document.querySelector(".activity-insider-content_desc .content");if(t){var e=t.scrollHeight,n=t.clientHeight;this.showIcon=e>n}}},{key:"showModel",value:function(){"mobile"===this.platform&&(this.visible=!0)}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.calcHeight();case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"cClass",get:function(){return"activity-insider_".concat(this.klook.platform)}},{key:"klookInsider",get:function(){return this.businessData.klook_insider}},{key:"modelTitle",get:function(){return this.$t("49501")}}]),e}(n(880).a);m.displayName="Klook_insider",y([Object(h.State)((function(t){return t.klook.platform}))],m.prototype,"platform",void 0),y([Object(h.Watch)("klookInsider",{immediate:!0})],m.prototype,"klookInsiderChange",null);var k=m=y([h.Component],m),O=(n(2462),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.klookInsider?n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],class:["activity-insider",t.cClass],on:{click:t.showModel}},[n("SvgIcon",{staticClass:"keynote-insider",attrs:{name:"mobile-activity#icon_other_notify_fill_xs",size:t.isDesktop?20:16}}),t._v(" "),n("div",{staticClass:"activity-insider-content"},[n("div",{class:["activity-insider-content_desc",t.platform]},[t.isDesktop?n("div",{staticClass:"activity-insider-content_desc-box"},[n("p",{staticClass:"content",class:!t.collapse&&"no-limit-lines"},[t._v(t._s(t.klookInsider))]),t._v(" "),n("div",{staticClass:"icon-box"},[t.showIcon?n("SvgIcon",{staticClass:"icon",attrs:{size:"14",name:t.arrowIcon},nativeOn:{click:function(e){return t.showMore(e)}}}):t._e()],1)]):n("div",{staticClass:"activity-insider-content_desc-box"},[n("p",{staticClass:"content"},[t._v(t._s(t.klookInsider))]),t._v(" "),n("div",{staticClass:"icon-box"},[t.showIcon?n("SvgIcon",{staticClass:"mobile-icon",attrs:{size:"16",name:"mobile-activity#icon_navigation_chevron_right_m"}}):t._e()],1)])])]),t._v(" "),n("klk-bottom-sheet",{staticClass:"insider-tips-model",attrs:{visible:t.visible,title:t.modelTitle,"mask-closable":!0},on:{"update:visible":function(e){t.visible=e}}},[n("klk-icon",{attrs:{slot:"header-left",size:"16",type:"icon_navigation_close"},nativeOn:{click:function(e){t.visible=!1}},slot:"header-left"}),t._v(" "),n("p",{staticClass:"insider-tips-model_content"},[t._v(t._s(t.klookInsider))])],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),header=n(986),y=n(1255),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"calcInternalLink",get:function(){var t=this.businessData,e=this.activitySeoLink;return{title:t.title,seo_static_link:e}}},{key:"activitySeoLink",get:function(){return this.businessData.internal_link}}]),e}(h.a);k.displayName="Internal_link",m([f.State],k.prototype,"klook",void 0);var O=k=m([Object(f.Component)({components:{ExpInternalLink:y.default,DefaultSectionHeader:header.a}})],k),_=(n(2463),n(43)),component=Object(_.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return this.activitySeoLink&&this.activitySeoLink.length?e("div",{staticClass:"activity-seo-link",class:this.klook.platform},[e("div",{staticClass:"exp-internal-link-wrap"},[e("ExpInternalLink",{attrs:{"module-data":this.calcInternalLink}})],1)]):this._e()}),[],!1,null,"117c6814",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(2062),base=n(1991),m=n(2063),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).freshLoading=!1,t}return Object(v.a)(e,t),Object(c.a)(e,[{key:"fresh",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.freshLoading=!0,e.next=3,t.getLineUpInfo();case 3:setTimeout((function(){t.freshLoading=!1}),1200);case 4:case"end":return e.stop()}}),e)}))),350)}}]),e}(base.a);O.displayName="DesktopFlash_sale_line_info";var _=O=k([Object(h.Component)({components:{LineUpStatus:y.a,LineUpBookTips:m.a}})],O),j=(n(2466),n(43)),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.basicData.is_line_page&&3!=t.userStatus?n("div",{staticClass:"line-up-wrap"},[n("div",{staticClass:"line-up-head"},[t._v(t._s(t.$t("78622")))]),t._v(" "),n("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("78615")))]),t._v(" "),n("div",{staticClass:"line-up-status"},[n("LineUpStatus",{attrs:{"time-count":t.timeCount,"can-join":t.canJoin,info:t.lineUpInfo}})],1),t._v(" "),n("div",{staticClass:"line-up-btn-wrap"},[t.lineUpInfo.sold_out?n("div",{staticClass:"dsk-sold-out-empty"}):1==t.userStatus?n("klk-button",{staticClass:"line-up-btn",attrs:{disabled:!t.canJoin},on:{click:t.reload}},[t._v("\n        "+t._s(t.$t("78617"))+"\n      ")]):2==t.userStatus?n("klk-button",{staticClass:"line-up-btn",attrs:{type:"outlined",loading:t.freshLoading},on:{click:t.fresh}},[t._v("\n        "+t._s(t.freshLoading?"":t.$t("78621"))+"\n      ")]):3==t.userStatus?n("klk-button",{staticClass:"line-up-btn",on:{click:t.reload}},[t._v("\n        "+t._s(t.$t("78624"))+" ("+t._s(t.timeCount)+")\n      ")]):t._e()],1)]):n("div",{staticClass:"tips-wrap-desktop"},[n("LineUpBookTips",{attrs:{"time-count":t.timeCount}})],1)])}),[],!1,null,"4a1e3156",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(20),n(27),n(37);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),content=n(1461),y=n(881),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).insiderObj={status:""},t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"clickShowMore",value:function(){var t=this.insiderObj;t.status&&(t.status="more"===t.status?"less":"more")}},{key:"bindIHTrack",value:function(){return y.a.apply(void 0,arguments)}},{key:"gShowChange",value:function(t){t||this.hideSection(),this.initInsider()}},{key:"initInsider",value:function(){var t=this;setTimeout((function(){var e;(null===(e=t.insiderRef)||void 0===e?void 0:e.offsetHeight)>24&&(t.insiderObj.status="more")}),60)}},{key:"getComponentName",value:function(t){return{icon:"DynamicIcons",markdown:"DynamicMarkdown",address:"DynamicMap",image:"DynamicImage"}[t]||""}},{key:"calcTrack",get:function(){var t=(this.$route.params.activityPath||"").split("-")[0];return{type:"module",spm:"Mini_Info_Section",query:{oid:"activity_".concat(t)}}}},{key:"platform",get:function(){return this.klook.platform}},{key:"gShow",get:function(){var t=this.klookInsiderVisible,e=this.reopenVisible;return!!(t||e)}},{key:"klookInsiderVisible",get:function(){var t,e;return(null===(t=this.fieldsConfig2section)||void 0===t?void 0:t.klook_insider)&&(null===(e=this.klookInsider)||void 0===e?void 0:e.klook_insider)}},{key:"reopenVisible",get:function(){var t,e;return(null===(t=this.fieldsConfig2section)||void 0===t?void 0:t.reopen)&&[2,3].includes(null===(e=this.reopen)||void 0===e?void 0:e.tag)}},{key:"klookInsider",get:function(){var t=this.businessData.klook_insider;return{klook_insider:void 0===t?"":t}}},{key:"reopen",get:function(){return this.businessData}}]),e}(h.a);k.displayName="DesktopActivity_mini_info",m([f.State],k.prototype,"klook",void 0),m([Object(f.Ref)()],k.prototype,"insiderRef",void 0),m([Object(f.Watch)("gShow",{immediate:!0})],k.prototype,"gShowChange",null);var O=k=m([Object(f.Component)({components:{reopenContent:content.a}})],k),_=(n(2467),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.gShow?n("div",{staticClass:"mini-info"},[n("div",t._b({staticClass:"mini-info-box"},"div",t.bindIHTrack(t.calcTrack),!1),[n("div",{staticClass:"mini-info-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.klookInsiderVisible,expression:"klookInsiderVisible"}],staticClass:"line-box"},[n("div",{staticClass:"insider-wrap",on:{click:t.clickShowMore}},[n("span",{staticClass:"line-box__icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_other_notify_fill_xs"}})],1),t._v(" "),n("span",{staticClass:"line-box__text",class:t.insiderObj.status},[n("span",{ref:"insiderRef"},[t._v(t._s(t.klookInsider.klook_insider))])]),t._v(" "),t.insiderObj.status?n("div",{staticClass:"right-box"},[n("span",{staticClass:"arrow-icon"},[n("svg-icon",{attrs:{name:"more"===t.insiderObj.status?"common#icon_navigation_chevron_down_s":"common#icon_navigation_chevron_up_s",size:"16"}})],1)]):t._e()])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.reopenVisible,expression:"reopenVisible"}],staticClass:"line-box custom-reopen-style"},[n("span",{staticClass:"line-box__icon"},[n("svg-icon",{attrs:{name:"activity-common#icon_time_time_fill_xs"}})],1),t._v(" "),n("span",{staticClass:"line-box__text"},[n("reopenContent",{attrs:{reopen:t.reopen}})],1)])])])]):t._e()}),[],!1,null,"363462bc",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12);var o=n(0),r=(n(30),n(70),n(47),n(23),n(4)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(10),m=n.n(y),k=n(71),O=n.n(k),_=n(131),j=n(21),w=n(7),P=n.n(w),C=n(908),S=n(957),D=n(1156),x=n(1094),T=n(1095),I=n(1845),R=n(1033),$=n(911),L=n(1104),A=n(895),E=n(16),M=n(3),B=n(1011),N=n(1005),V=n(883),F=n(952),W=n(890),H=n(889),U=n(882),z=n(2),G=n(1436);function Y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function K(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var J=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},X=Object(j.namespace)("traveller/activity"),Q=Object(j.namespace)("experience"),Z=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).bsObj=Object(W.getBottomSheetConfig)("fixed-height-config"),t.bsObjSavePrice=Object(W.getBottomSheetConfig)({transfer:!1}),t.cacheOpt={date:"",selectedUnits:null},t.visible=!1,t.packageId=null,t.packageSelectedDate="",t.packageSchedules=[],t.oldPrevUnits=null,t.selectedTime=null,t.preSelectedSkuId=null,t.unitsMap={},t.currentUnits=[],t.legends=[],t.wifiSimParams={},t.fetchPackageUnitsDebounce=Object(_.debounce)(t.fetchPackageUnits,200),t.unitsLoadingState="success",t.fixedHackStyle=null,t}var n,h,y,k,j;return Object(f.a)(e,t),Object(l.a)(e,[{key:"minStockWatch",value:function(t){var e;if(this.totalUnitCount>t){var n=this.unitsMap[(this.selectedTime||{}).arrangementId];(null===(e=n)||void 0===e?void 0:e.unitList)&&n.unitList.forEach((function(t){t.count=0}))}}},{key:"visibleWatch",value:function(t){var e=this;t?this.$nextTick((function(){e.$inhouse.track("pageview","#booking_options_page_spm",{force:!0})})):this.clearPreSettlementData(),this.$emit("changeVisible",t)}},{key:"packageSelectedDateWatch",value:function(t){this.isNewOpenTicket||this.$emit("updateDate",t)}},{key:"closePriceSumary",value:function(){U.a.$emit("setShowPriceSummary2bus",!1)}},{key:"clickSavePrice",value:function(t,e){var n,o=this.bsObjSavePrice;o.visible=t,this.$set(o,"priceSummary",null===(n=e)||void 0===n?void 0:n.priceSummary)}},{key:"unitsChange",value:function(t){this.currentUnits=m()(t)?[]:t}},{key:"selectedTimeChange",value:(j=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.arrangementId){t.next=5;break}if(null===(o=n)||void 0===o||!o.arrangementId||e.arrangementId!==n.arrangementId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.fetchPackageUnitsDebounce();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return j.apply(this,arguments)})},{key:"getScheduleFilterNum",value:function(t,e){var n;if(!this.sectionActData.isWifi)return t;var o=t||[];if(!e||o.length<e)return o;var r=P()(null===(n=o[0])||void 0===n?void 0:n.date).clone().add(e-1,"days").format("YYYY-MM-DD");return o.filter((function(t){return t.date<=r}))}},{key:"open",value:(k=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.packageId,o=e.date,r=e.skuId,c=e.selectedTime,l=e.selectedUnits,d=e.pkgDate,this.cacheOpt.date=o||"",this.visible=!0,this.packageId=n,this.preSelectedSkuId=r,this.packageSelectedDate=o||d||"",this.selectedTime=c||null,this.oldPrevUnits=l||null,this.cacheOpt.selectedUnits=O()(l),!this.packageId){t.next=12;break}return t.next=12,this.getPackagePriceScheduleUnits(this.packageId);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"getPackagePriceScheduleUnits",value:(y=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,legend;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.selectedTime||{},r=o.arrangementId,t.next=3,this.getPackageSchedulesUnits(e);case 3:if(c=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:l=c.schedules,d=c.units,v=c.legend,legend=void 0===v?[]:v,this.packageSchedules=O()(l||[]),this.legends=legend,this.isNewOpenTicket&&this.autoSetFeasibleDate(!!(null===(n=this.currentSelectedPackage)||void 0===n?void 0:n.auto_select_first_date)),r||m()(d)||this.setPackageUnitMap({prices:d}),m()(d)&&(this.unitsMap={});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"autoSetFeasibleDate",value:function(t){var e,n=this,o=O()(this.packageSchedules||[]),r=t?o:o.reverse(),c=function(t){return!!t.stock&&n.currentSelectedPackage&&t.stock>=Number(n.currentSelectedPackage.min_pax)},l=r.find((function(t){return(t.time_slots||[]).some(c)}));this.packageSelectedDate=(null===(e=l)||void 0===e?void 0:e.date)||""}},{key:"autoSelectSku",value:function(t,e){var n;if(this.preSelectedSkuId===t.skuId){var o=this.selectedTime||{},r=o.arrangementId,c=o.maxPurchased,l=this.preview,d=this.unitsMap,v=this.currentSelectedPackage,f=this.totalUnitCount,h=v.max_pax,y=t.count,m=t.priceMinPax,k=t.priceMaxPax,O=t.inventoryId,_=Math.min(t.priceMaxPax,c-(f-t.count)),j=Math.min(_,Number(e[O]));if(l&&!d[r])return;if(f>=h)return void this.alert(this.$t("activity.v2.error.package_max",[h]));if(y>=k)return void((null===(n=t)||void 0===n?void 0:n.maxCount)&&this.alert(this.$t("activity.error.price_max_v2",[t.maxCount])));if(t.count>=j||0===y&&y+m>j)return void this.alert(this.$t("activity.v2.unit_out_of_inventory"));if(y<k)return void(t.count=Math.max(m,1));this.alert(this.$t("activity.error.price_max_v2",[k]))}}},{key:"setPackageUnitMap",value:function(data){var t=this,e=data.prices,n=data.inventories,r=void 0===n?{}:n,c=data.credits_tag,l=this.selectedTime||{},d=l.arrangementId,v=void 0===d?"default":d,f=l.maxPurchased,h=e.filter((function(t){return t.required&&(t.price_min_pax||t.min_pax)})).reduce((function(t,e){return t+(e.price_min_pax||e.min_pax)}),0),y=e.map((function(t){var e,n=t.price_min_pax||t.min_pax||0,o=f-h;e=o<0||!(t.required&&n)&&Math.max(n,1)>o;var l=Math.max(n,1)>r[t.inventory_id],d=t.required?n:0;return{credits_tag:c,redeem_status:t.redeem_status,product_tags:t.product_tags,priceMinPax:n,priceMaxPax:t.price_max_pax||t.max_pax||0,count:d,credits:t.credits,priceId:t.price_id||t.id,sellingPrice:t.selling_price||t.price||0,marketPrice:t.market_price||0,originalPrice:t.original_price||0,promotionDiscount:t.discount||0,priceName:t.price_name||t.name,isSoldOut:e||l,isFree:0===parseFloat(t.selling_price||t.price),specPriceDesc:t.spec_price&&t.spec_price.desc,requireBuy:t.required&&n,requireMinPax:!t.required&&d>=n&&n>1,required:t.required,skuId:t.sku_id,srvSkuInfo:t.srv_sku_info,inventoryId:t.inventory_id,eventId:t.promotion_event?t.promotion_event.event_id:0,isInPromotion:!!t.promotion_event&&!!t.promotion_event.event_id,isDefault:"default"===v}}));this.preSelectedSkuId&&y.forEach((function(e){return t.autoSelectSku(e,r)}));var m=this.oldPrevUnits||[];m&&y.forEach((function(t){var e=m.find((function(e){return e.skuId===t.skuId}));e&&!t.isSoldOut&&(t.prevCount=e.count)})),this.unitsMap=Object(o.a)({default:{inventories:r,unitList:y}},v,{inventories:r,unitList:y}),setTimeout((function(){var e;if((null===(e=t.currentSelectedPackage)||void 0===e?void 0:e.has_discount)&&"default"!==v){var n={hideLoading:!0,page_from:2,arrangement_id:v,sku_list:y.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}}))};t.getPreSettlementApiData(n)}}),1)}},{key:"clearPreSettlementData",value:function(t){this.$store.commit("traveller/activity/".concat(z.SET_PRE_SETTLEMENT_API_DATA),{res:null})}},{key:"rangeConfirmHandler",value:function(t){this.packageSelectedDate=t.date||"",this.wifiSimParams=t}},{key:"setPackageTime",value:function(data){(this.selectedTime||{}).arrangementId&&(this.oldPrevUnits=O()(this.units)),this.selectedTime=data}},{key:"fetchPackageUnits",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.selectedTime||{},r=o.arrangementId,c=this.preview,l="1"===(null===(e=this.$route.query)||void 0===e?void 0:e.translation),r){t.next=5;break}return t.abrupt("return",{success:!1});case 5:return this.unitsLoadingState="fetching",t.prev=6,t.next=9,this.$axios.$get(Object(E.ob)(M.a.getPackageUnits,{arrangementId:r}),{params:{preview:c,translation:l},regularUrl:"/v1/usrcsrv/arrangements/{*}/units"});case 9:d=t.sent,t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(6),this.unitsLoadingState="failure",t.abrupt("return");case 16:if(v=d.result,null===(n=d)||void 0===n||!n.success||m()(v)||m()(v.prices)||m()(v.inventories)){t.next=23;break}return this.setPackageUnitMap(K({},v,{arrangementId:r})),this.unitsLoadingState="success",t.abrupt("return",K({},d,{success:!0}));case 23:this.unitsLoadingState="failure";case 24:return t.abrupt("return",{success:!1});case 25:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(){return h.apply(this,arguments)})},{key:"changeUnitCount",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y,m,k,O,_,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.priceId,o=e.type,c=this.unitsMap,l=this.selectedTime,d=(l||{}).arrangementId,f=c[v=void 0===d?"default":d]){t.next=6;break}return t.abrupt("return");case 6:if(h=f.unitList,y=h.find((function(t){return t.priceId===n}))){t.next=10;break}return t.abrupt("return");case 10:if(m=y.count,k=y.priceMinPax,O=y.required,"add"!==o){t.next=15;break}0===m?y.count+=Math.max(k,1):y.count++,t.next=18;break;case 15:if(0!==m){t.next=17;break}return t.abrupt("return");case 17:m>k?y.count--:O||(y.count-=k);case 18:if(_=this.currentSelectedPackage,!(null===(r=_)||void 0===r?void 0:r.has_discount)){t.next=23;break}return j={hideLoading:!0,page_from:2,arrangement_id:v,sku_list:h.map((function(t){return{sku_id:t.skuId,quantity:t.isSoldOut?0:t.count}}))},t.next=23,this.getPreSettlementApiData(j);case 23:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"alert",value:function(text){this.headerAlertRef.open(text)}},{key:"_showShoppingCart",value:function(){this.showShoppingCart&&this.showShoppingCart(),this.visible=!1}},{key:"updateInfos",value:function(t){t&&(this.fixedHackStyle={paddingBottom:t.height+"px"})}},{key:"calcTags2attribute",get:function(){var t,e;return(null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.attribute_tags)||[]}},{key:"calcTags2discount",get:function(){var t,e,n,o=(null===(e=null===(t=this.currentSelectedPackage)||void 0===t?void 0:t.product_tags)||void 0===e?void 0:e.discount_tags)||[],r=[];return(null===(n=o)||void 0===n?void 0:n.length)&&o.forEach((function(t){var e,n,o,c,l,d,v=(null===(e=t)||void 0===e?void 0:e.inner_vars)||{};(null===(o=null===(n=v)||void 0===n?void 0:n.inner)||void 0===o?void 0:o.derivation_info)&&(null===(d=null===(l=null===(c=v)||void 0===c?void 0:c.inner)||void 0===l?void 0:l.derivation_info)||void 0===d?void 0:d.is_derived)||r.push(t)})),r}},{key:"showBottomBar",get:function(){var t;return(null===(t=this.currentUnits)||void 0===t?void 0:t.length)>0}},{key:"arrangementId",get:function(){var t;return null===(t=null===this||void 0===this?void 0:this.selectedTime)||void 0===t?void 0:t.arrangementId}},{key:"calcData",get:function(){var t=(this.currentSelectedPackage||{}).usage_validity_render_obj||[];return{title:(t.find((function(t){return"title"===t.type}))||{}).content,rules:t.filter((function(t){return"item"===t.type})).map((function(t){return t.content}))}}},{key:"isActOpenTicket",get:function(){return 3===this.activityTicketType}},{key:"isNewOpenTicket",get:function(){return 3===(this.currentSelectedPackage||{}).package_ticket_type}},{key:"currentSelectedPackage",get:function(){var t=this.packageId,e=this.packages;if(t)return e.find((function(e){return e.package_id===t}))}},{key:"units",get:function(){var t=this.unitsMap,e=this.totalUnitCount,n=this.selectedTime;return this.calcExpUnitsExtra({unitsMap:t,totalUnitCount:e,selectedTime:n})}},{key:"totalUnitCount",get:function(){var t=this.unitsMap,e=(this.selectedTime||{}).arrangementId;if(!e)return 0;var n=t[e];return n?n.unitList.reduce((function(t,e){return t+e.count}),0):0}},{key:"inventories",get:function(){var t=this.selectedTime,e=this.unitsMap,n=(t||{}).arrangementId;return n&&e[n]?e[n].inventories:{}}},{key:"bookingCalendarOptions",get:function(){return{verticalScroll:!this.sectionActData.isWifi,priceVisible:!this.sectionActData.isWifiSimCard,templateId:this.templateId,autoTimeSlot:this.autoTimeSlot,packageId:this.packageId,schedules:this.packageSchedules,warn:this.pickupDateDescription,selectedTime:this.selectedTime,currentSelectedPackage:this.currentSelectedPackage,isNewOpenTicket:this.isNewOpenTicket,legends:this.legends}}},{key:"bookingUnitOptions",get:function(){return{selectedTime:this.selectedTime,unitsMap:this.unitsMap,preview:this.preview,currentSelectedPackage:this.currentSelectedPackage,inventories:this.inventories,totalUnitCount:this.totalUnitCount,disabled:!this.arrangementId,minStock:this.wifiSimParams.minStock||0}}},{key:"bottomBarBinds",get:function(){var t;return{fromType:this.fromType,hideDiscountTips:null===(t=this.bsObjSavePrice)||void 0===t?void 0:t.visible,activityId:this.activityId,templateId:this.templateId,isSupportShoppingCart:this.isSupportShoppingCart,packages:this.packages,isActOpenTicket:this.isActOpenTicket,units:this.units,currentSelectedPackage:this.currentSelectedPackage,selectedTime:this.selectedTime,packageSchedules:this.packageSchedules,packageSelectedDate:this.packageSelectedDate,totalUnitCount:this.totalUnitCount,showShoppingCart:this._showShoppingCart,wifiSimParams:this.wifiSimParams}}}]),e}(Object(j.mixins)(L.a,G.a));J([Q.State],Z.prototype,"sectionActData",void 0),J([Object(j.Prop)()],Z.prototype,"autoTimeSlot",void 0),J([Object(j.Prop)({type:String,default:""})],Z.prototype,"fromType",void 0),J([Object(j.Prop)({default:0})],Z.prototype,"preview",void 0),J([Object(j.Prop)()],Z.prototype,"activityId",void 0),J([Object(j.Prop)()],Z.prototype,"templateId",void 0),J([Object(j.Prop)()],Z.prototype,"isSupportShoppingCart",void 0),J([Object(j.Prop)()],Z.prototype,"pickupDateDescription",void 0),J([Object(j.Prop)()],Z.prototype,"activityTicketType",void 0),J([Object(j.Prop)()],Z.prototype,"packages",void 0),J([Object(j.Prop)()],Z.prototype,"showShoppingCart",void 0),J([Object(j.Prop)({default:"fetching"})],Z.prototype,"state",void 0),J([Object(j.Ref)()],Z.prototype,"headerAlertRef",void 0),J([X.State],Z.prototype,"commonLoadingState",void 0),J([X.State],Z.prototype,"preSettlementApiData",void 0),J([X.Getter],Z.prototype,"preSettlementTips2getters",void 0),J([X.Action],Z.prototype,"getPreSettlementApiData",void 0),J([Object(j.Watch)("wifiSimParams.minStock")],Z.prototype,"minStockWatch",null),J([Object(j.Watch)("visible")],Z.prototype,"visibleWatch",null),J([Object(j.Watch)("packageSelectedDate")],Z.prototype,"packageSelectedDateWatch",null),J([Object(j.Watch)("units",{immediate:!0})],Z.prototype,"unitsChange",null),J([Object(j.Watch)("selectedTime",{immediate:!0})],Z.prototype,"selectedTimeChange",null);var tt=Z=J([Object(j.Component)({components:{SavingPriceDetails:H.default,PriceDiscountTips:F.a,ExpTagging:V.default,ActivityValidity:B.a,HasOpenDateTips:N.a,HeaderTips:C.a,CardHeader:S.a,BookineOptionsSkeleton:R.a,ExpLoadingState:$.default,CommonContentLoading:A.a,BookingCalendar:D.a,BookingUnit:x.a,HeaderAlert:T.a,NewBottomBar:I.default}})],Z),et=(n(2536),n(43)),component=Object(et.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("klk-bottom-sheet",t._b({staticClass:"experience-activity-booking hack-zindex-safari",attrs:{"can-pull-close":!1,visible:t.visible,title:t.$t("activity.v2.label.booking_options")},on:{"update:visible":function(e){t.visible=e}}},"klk-bottom-sheet",t.bsObj,!1),[n("div",{staticClass:"booking-content show-bottom-bar",style:t.fixedHackStyle,attrs:{id:"booking_options_page_spm","data-spm-page":"BookingOptions?oid=package_"+t.currentSelectedPackage.package_id+"&trg=manual"}},[n("HeaderAlert",{ref:"headerAlertRef",staticClass:"booking-alert",attrs:{"package-id":t.currentSelectedPackage.package_id}}),t._v(" "),n("CardHeader",{staticClass:"booking-content-header",attrs:{"package-data":t.currentSelectedPackage}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-attr-style",staticStyle:{margin:"4px 0 4px 0"},attrs:{list:t.calcTags2attribute,pkg:{packageId:t.packageId},track:{spm:"Package_Product_Tag"},line:1}}),t._v(" "),n("ExpTagging",{staticClass:"tagging-pkg-tag-style",staticStyle:{margin:"4px 0 8px 0"},attrs:{list:t.calcTags2discount,pkg:{packageId:t.packageId},track:{spm:"Package_Discount_Section"},line:1}}),t._v(" "),n("ExpLoadingState",{attrs:{state:t.schedulesUnitsState,fetching:{type:"overlay"}},on:{refresh:function(e){return t.getPackagePriceScheduleUnits(t.packageId||0)}}},[t.visible?[t.currentSelectedPackage.usage_validity_render_obj&&t.currentSelectedPackage.usage_validity_render_obj.length?n("ActivityValidity",{staticClass:"activity-validity-style small",attrs:{data:t.currentSelectedPackage.usage_validity_render_obj,"max-height":"105px"}}):t._e(),t._v(" "),3!==t.activityTicketType&&t.isNewOpenTicket&&t.cacheOpt.date?n("HasOpenDateTips",{staticStyle:{margin:"16px 0"}}):t._e(),t._v(" "),n("BookingCalendar",t._b({directives:[{name:"show",rawName:"v-show",value:!t.isNewOpenTicket,expression:"!isNewOpenTicket"}],staticClass:"booking-content-calendar",attrs:{"is-track-item":!1},on:{setTime:t.setPackageTime,rangeConfirm:t.rangeConfirmHandler},model:{value:t.packageSelectedDate,callback:function(e){t.packageSelectedDate=e},expression:"packageSelectedDate"}},"BookingCalendar",t.bookingCalendarOptions,!1)),t._v(" "),n("div",{staticClass:"booking-content-units"},[t.currentSelectedPackage?n("HeaderTips",{staticClass:"booking-content-units-tips",attrs:{"max-pax":t.currentSelectedPackage.max_pax,"min-pax":t.currentSelectedPackage.min_pax}}):t._e(),t._v(" "),n("ExpLoadingState",{attrs:{state:t.unitsLoadingState,fetching:{type:"overlay"},"keep-state":!0},on:{refresh:t.fetchPackageUnitsDebounce}},[n("div",{staticClass:"booking-content-units-content"},t._l(t.currentUnits,(function(e){return n("BookingUnit",t._b({key:e.priceId,staticClass:"booking-content-unit",attrs:{unit:e,"is-track-module":!0},on:{changeUnitCount:t.changeUnitCount,alert:t.alert}},"BookingUnit",t.bookingUnitOptions,!1))})),1)])],1)]:t._e()],2),t._v(" "),n("NewBottomBar",t._b({directives:[{name:"show",rawName:"v-show",value:t.showBottomBar,expression:"showBottomBar"}],on:{clickSavePrice:t.clickSavePrice,updateInfos:t.updateInfos},scopedSlots:t._u([{key:"slot-booking-bar__buttons",fn:function(e){var n=e.slotScope;return[t._t("slot-booking-bar__buttons",null,{slotScope:n})]}}],null,!0)},"NewBottomBar",t.bottomBarBinds,!1)),t._v(" "),n("klk-bottom-sheet",t._b({staticClass:"js-custom-bottom-sheet-hack custom-bottom-sheet-style",class:[t.bsObjSavePrice.visible?"hack-style":""],attrs:{visible:t.bsObjSavePrice.visible,title:t.$t("76591")},on:{"update:visible":function(e){return t.$set(t.bsObjSavePrice,"visible",e)},close:t.closePriceSumary}},"klk-bottom-sheet",t.bsObjSavePrice,!1),[n("SavingPriceDetails",{attrs:{"hide-dashed":!0,"price-summary":t.bsObjSavePrice.priceSummary}})],1),t._v(" "),t.preSettlementTips2getters?n("PriceDiscountTips",{staticClass:"vsb-hidden",attrs:{tips:t.preSettlementTips2getters}}):t._e()],1),t._v(" "),n("CommonContentLoading",{directives:[{name:"show",rawName:"v-show",value:"fetching"===t.commonLoadingState,expression:"commonLoadingState === 'fetching'"}],attrs:{type:"overlay"}})],1):t._e()}),[],!1,null,"506bcfd9",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(1430),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).initBottomButton=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"mounted",value:function(){var t=this;"mobile"===this.platform&&setTimeout((function(){t.initBottomButton=!0}),1e3)}},{key:"wishButtonVisible",get:function(){var t;return!(null===(t=this.utilConfig)||void 0===t?void 0:t.whiteLabelUtilConfig)&&!this.isGuestCheckout}},{key:"activityId",get:function(){return this.basicData.activity_id}},{key:"cClass",get:function(){var t="package-options-sold-out";return[t,"".concat(t,"-").concat(this.platform)]}}]),e}(f.Vue);m.displayName="Package_option_soldout",y([Object(f.State)((function(t){return t.klook.platform}))],m.prototype,"platform",void 0),y([Object(f.State)((function(t){return t.klook.utilConfig}))],m.prototype,"utilConfig",void 0),y([f.Getter],m.prototype,"isGuestCheckout",void 0),y([Object(f.Prop)()],m.prototype,"basicData",void 0);var k=m=y([Object(f.Component)({components:{ActivityWishButton:h.a}})],m),O=(n(2562),n(43)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.cClass},[n("div",{staticClass:"package-options-sold-out_title"},[t._v("\n    "+t._s(t.$t("activity.new.all_sold_out"))+"\n  ")]),t._v(" "),t.initBottomButton?n("div",{staticClass:"activity-bottom-booking_operation"},[t.wishButtonVisible?n("ActivityWishButton",{attrs:{"activity-id":t.activityId}}):t._e(),t._v(" "),n("klk-button",{staticClass:"activity-bottom_sold-out",attrs:{type:"primary",disabled:""}},[t._v(t._s(t.$t("activity.v2.btn.sold_out")))])],1):t._e()])}),[],!1,null,"e7f096a8",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(2052),m=n(2028),k=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"popComponent",get:function(){return this.isDesktop?"PassGuideDsktop":"PassGuideMobile"}},{key:"activityId",get:function(){var t;return(null===(t=this.$attrs["basic-data"])||void 0===t?void 0:t.activity_id)||0}}]),e}(h.a);O.displayName="Pass_guide",k([f.State],O.prototype,"klook",void 0);var _=O=k([Object(f.Component)({components:{PassGuideDsktop:y.default,PassGuideMobile:m.default}})],O),j=n(43),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.popComponent,{tag:"component",attrs:{"activity-id":this.activityId}})],1)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"first",get:function(){return this.list[0]}},{key:"desc",get:function(){var t,e;return null===(e=null===(t=this.list[0])||void 0===t?void 0:t.desc)||void 0===e?void 0:e.replace(/color-text-highlight-orange/g,"#FF5B00")}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"list",void 0);var m=y=h([f.Component],y),k=(n(2581),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-introduce"},[n("div",{staticClass:"pass-introduce-left"},[n("div",{staticClass:"pass-introduce-left-content",domProps:{innerHTML:t._s(t.desc)}}),t._v(" "),n("img",{staticClass:"img",attrs:{src:t.first.src_url}})]),t._v(" "),n("div",{staticClass:"pass-introduce-right"},t._l(t.list.slice(1),(function(e,o){return n("div",{key:o,staticClass:"pass-introduce-right-item"},[n("div",{staticClass:"name"},[t._v("\n        "+t._s(e.title)+"\n      ")]),t._v(" "),n("div",{staticClass:"content"},[t._v("\n        "+t._s(e.desc)+"\n      ")]),t._v(" "),n("img",{staticClass:"img",attrs:{src:e.src_url}})])})),0)])}),[],!1,null,"197527ac",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(v.Vue);h.displayName="DesktopPass_introductionLoading";var y=h=f([v.Component],h),m=(n(2582),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("klk-skeleton-block",{staticClass:"introduce-title",attrs:{width:289,height:37}}),t._v(" "),n("div",{staticClass:"introduce-loading"},[n("div",{staticClass:"introduce-loading-left"},[t._l(3,(function(t){return n("klk-skeleton-block",{key:t,staticClass:"introduce-loading-left-content",attrs:{width:164}})})),t._v(" "),n("klk-skeleton-block",{staticClass:"introduce-loading-left-content",attrs:{width:84}}),t._v(" "),n("klk-skeleton-block",{staticClass:"img",attrs:{width:169,height:114}})],2),t._v(" "),n("div",{staticClass:"introduce-loading-right"},t._l(4,(function(e){return n("div",{key:e,staticClass:"introduce-loading-right-item"},[n("klk-skeleton-block",{staticClass:"content",attrs:{width:159}}),t._v(" "),n("klk-skeleton-block",{staticClass:"content",attrs:{width:84}}),t._v(" "),n("klk-skeleton-block",{staticClass:"img",attrs:{width:56,height:56}})],1)})),0)])],1)}),[],!1,null,"350b5067",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"isDesktop",get:function(){return"desktop"===this.klook.platform}},{key:"popComponent",get:function(){return this.isDesktop?"PassIntroduceDsktop":"PassIntroduceMobile"}},{key:"list",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.selling_points)||[]}}]),e}(n(880).a);y.displayName="Pass_introduction",h([f.State],y.prototype,"klook",void 0);var m=y=h([Object(f.Component)({components:{PassIntroduceDsktop:function(){return Promise.resolve().then(n.bind(null,2765))},PassIntroduceMobile:function(){return Promise.resolve().then(n.bind(null,2768))}}})],y),k=n(43),component=Object(k.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.popComponent,{tag:"component",attrs:{list:this.list}})],1)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(28);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"desc",get:function(){var t,e;return null===(e=null===(t=this.list[0])||void 0===t?void 0:t.desc)||void 0===e?void 0:e.replace(/color-text-highlight-orange/g,"#FF5B00")}}]),e}(f.Vue);h([Object(f.Prop)()],y.prototype,"list",void 0);var m=y=h([f.Component],y),k=(n(2583),n(43)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-introduce"},t._l(t.list,(function(e,o){return n("div",{key:o,staticClass:"pass-introduce-item"},[n("div",[n("img",{staticClass:"pass-introduce-item-img",attrs:{src:e.src_url,alt:"infor"}})]),t._v(" "),n("div",{staticClass:"pass-introduce-item-name"},[t._v("\n      "+t._s(e.title)+"\n    ")]),t._v(" "),0===o?n("div",{staticClass:"pass-introduce-item-content",domProps:{innerHTML:t._s(t.desc)}}):n("div",{staticClass:"pass-introduce-item-content"},[t._v("\n      "+t._s(e.desc)+"\n    ")])])})),0)}),[],!1,null,"287e5c3b",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(39),c=n(35),l=n(40),d=n(5),v=n(21),f=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},h=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).introductions=[{title:"划线价格",content:"划线价格为参考价格，指商品或服务的门市价、服务提供商的指导价、零售价或曾经展示过的销售价格，并非原价，该价格仅供您参考。"},{title:"未划线价格",content:"指商品或服务的实时标价，为划线价基础上计算出来的优惠价格。具体成交价格根据商品或服务参加活动，或会员使用优惠券等发生变化，最终以订单结算页价格为准"}],t}return Object(l.a)(e,t),e}(n(880).a);h.displayName="Price_info",f([v.State],h.prototype,"klook",void 0);var y=h=f([v.Component],h),m=(n(2584),n(43)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-klk-markdown",class:t.klook.platform},[n("div",{staticClass:"klk-markdown"},[n("h5",[t._v("\n      价格说明\n    ")]),t._v(" "),t._l(t.introductions,(function(e){return n("div",{key:e.title},[n("h6",[t._v("\n        "+t._s(e.title)+"\n      ")]),t._v(" "),n("ul",[n("li",[t._v("\n          "+t._s(e.content)+"\n        ")])])])}))],2)])}),[],!1,null,"38c17620",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(23);var o=n(4),r=n(0),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(71),k=n.n(m),O=n(2070),_=n(2029),j=n(2053),w=n(3),P=n(880),C=n(881),S=n(883);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},I=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).promotionData=null,t.modalObj={size:"large",closable:!0,scrollable:!0,overlayClosable:!0,modalClass:"modal-style",titleAlign:"left",width:"900px"},t.promotionObj={visible:!1,showClose:!0,title:"",height:"auto"},t}var n,r;return Object(f.a)(e,t),Object(l.a)(e,[{key:"getTaggingTarck",value:function(){var t,e=Object(S.getTaggingExtraTrackObj)(this.promotionTags),track=k()((null===(t=this.businessData)||void 0===t?void 0:t.track)||{});return track.query=x({},track.query||{},{ext:encodeURIComponent(JSON.stringify(e))}),track}},{key:"visibleWatch",value:function(t){var e=this.$route.query;this.$router.push({query:x({},e,{pv:t?"none":void 0,showPromotion:t?"1":void 0})})}},{key:"created",value:function(){this.promotionObj.title=this.$t("73938"),this.checkShowPromotion()}},{key:"checkShowPromotion",value:function(){var t=this;this.$nextTick((function(){t.$route.query.showPromotion&&t.openPromotion()}))}},{key:"visibleChange",value:function(t){t||this.hideSection()}},{key:"openPromotion",value:(r=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.promotionObj,this.promotionData){t.next=9;break}return this.$showLoading({overlayColor:"rgba(255, 255, 255, 0.7)"}),n=this.businessData||{},o=n.activity_id,t.next=6,this.$axios.$get(w.a.experiencePromoSystemTagInfo,{params:{activity_id:o,time_zone:this.calcTimeZone}});case 6:(r=t.sent).success&&(this.promotionData=r.result),this.$hideLoading();case 9:return e.visible=!0,t.abrupt("return",e.visible);case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"bindIHTrack",value:function(){return C.a.apply(void 0,arguments)}},{key:"calcHeight",value:function(){var t=this.$el.querySelector(".tagging-wrap"),e=document.querySelector(".promotion-system");t&&(t.clientHeight>=t.scrollHeight&&e&&(e.style.paddingBottom="0"))}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.calcHeight(),t.next=3,null;case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"calcLineClamp",get:function(){return"mobile"===this.klook.platform?10:5}},{key:"promotionTags",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.tag_list)||[]}},{key:"calcDiscounts",get:function(){return(this.promotionData||{}).promo_system_infos||[]}},{key:"calcCoupons",get:function(){var t;return(null===(t=(this.promotionData||{}).coupons)||void 0===t?void 0:t.items)||[]}},{key:"calcTnc",get:function(){return(this.promotionData||{}).terms_conditions||""}},{key:"calcTimeZone",get:function(){var t=-(new Date).getTimezoneOffset()/60;return t>=0?"+".concat(t):"".concat(t)}},{key:"visible",get:function(){var t;return(null===(t=this.promotionTags)||void 0===t?void 0:t.length)>0}}]),e}(P.a);I.displayName="Activity_promo_system_tag",T([y.State],I.prototype,"auth",void 0),T([Object(y.Watch)("promotionObj.visible")],I.prototype,"visibleWatch",null),T([Object(y.Watch)("visible",{immediate:!0})],I.prototype,"visibleChange",null);var R=I=T([Object(y.Component)({components:{Tag:O.a,Discounts:_.default,Coupons:j.default,ExpTagging:S.default}})],I),$=(n(2589),n(43)),component=Object($.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"promotion-system-wrap"},[t.visible?n("div",{staticClass:"promotion-system-box"},[n("div",t._b({staticClass:"promotion-system",class:t.klook.platform,on:{click:t.openPromotion}},"div",t.bindIHTrack(t.getTaggingTarck()),!1),[n("ExpTagging",{attrs:{list:t.promotionTags,line:t.isDesktop?1:2,"auto-tips":!0}}),t._v(" "),n("div",{staticClass:"icon-box"},["desktop"===t.klook.platform?n("span",{staticClass:"icon-text"},[t._v(t._s(t.promotionObj.title))]):t._e(),t._v(" "),n("span",{staticClass:"icon-arrow"},[n("SvgIcon",{attrs:{name:"common#icon_navigation_chevron_right_xxxs",width:"desktop"===t.klook.platform?14:16}})],1)])],1),t._v(" "),t.promotionData&&t.promotionObj.visible?["desktop"===t.klook.platform?n("klk-modal",t._b({attrs:{title:t.promotionObj.title,open:t.promotionObj.visible},on:{"update:open":function(e){return t.$set(t.promotionObj,"visible",e)},close:function(e){t.promotionObj.visible=!1}}},"klk-modal",t.modalObj,!1),[t.calcDiscounts.length?[n("h3",{staticClass:"group-title dicounts"},[t._v(t._s(t.$t("73939")))]),t._v(" "),n("Discounts",{staticClass:"discounts-style",attrs:{"discount-list":t.calcDiscounts,"line-clamp":t.calcLineClamp,"tag-max-width":"auto"}})]:t._e(),t._v(" "),t.calcCoupons.length?[n("h3",{staticClass:"group-title coupons"},[t._v(t._s(t.$t("73945")))]),t._v(" "),n("Coupons",{staticClass:"coupons-style",attrs:{"coupons-list":t.calcCoupons}})]:t._e(),t._v(" "),n("div",{staticClass:"tnc-box",staticStyle:{"margin-bottom":"40px"}},[t._v(t._s(t.calcTnc))])],2):t._e(),t._v(" "),"mobile"===t.klook.platform?n("klk-bottom-sheet",t._b({attrs:{visible:t.promotionObj.visible},on:{"update:visible":function(e){return t.$set(t.promotionObj,"visible",e)},click:function(t){t.stopPropagation()}}},"klk-bottom-sheet",t.promotionObj,!1),[t.calcDiscounts.length?[n("h3",{staticClass:"group-title dicounts"},[t._v(t._s(t.$t("73939")))]),t._v(" "),n("Discounts",{staticClass:"discounts-style",attrs:{"discount-list":t.calcDiscounts,"line-clamp":t.calcLineClamp,"tag-max-width":"auto"}})]:t._e(),t._v(" "),t.calcCoupons.length?[n("h3",{staticClass:"group-title coupons"},[t._v(t._s(t.$t("73945")))]),t._v(" "),n("Coupons",{staticClass:"coupons-style",attrs:{"coupons-list":t.calcCoupons}})]:t._e(),t._v(" "),n("div",{staticClass:"tnc-box"},[t._v(t._s(t.calcTnc))])],2):t._e()]:t._e()],2):t._e()])}),[],!1,null,"42c9448b",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),y=n(212),m=n(901),k=n(1432),O=n(2071),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},j=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"businessReviewsChange",value:function(t){t||this.$emit("hide-section")}},{key:"skipToReview",value:function(){var t=Object(y.c)(document.querySelector("#reviews"));t&&Object(y.d)({scrollY:t,lockLocation:105})}},{key:"reviewCount",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.review_count)||0}},{key:"score",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.score)||5}},{key:"reviewList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.reviews)||[]}},{key:"shouldHideImage",get:function(){return this.reviewList.every((function(t){var e,n;return!((null===(e=t.review_image)||void 0===e?void 0:e.length)||(null===(n=t.review_image_list)||void 0===n?void 0:n.length))}))}}]),e}(h.a);j.displayName="DesktopBest_latest_review",_([f.State],j.prototype,"klook",void 0),_([Object(f.Watch)("businessData.reviews",{immediate:!0})],j.prototype,"businessReviewsChange",null);var w=j=_([Object(f.Component)({components:{RwdSwiper:m.default,ReviewRating:k.a,RecentReviewCard:O.a}})],j),P=(n(2595),n(43)),component=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"track",rawName:"v-track:module",value:{inject:"section"},expression:"{\n    inject: 'section'\n  }",arg:"module"}],staticClass:"activity-recent-reviews"},[n("div",{staticClass:"reviews-title"},[n("ReviewRating",{attrs:{score:t.score,count:t.reviewCount}}),t._v(" "),n("div",{staticClass:"reviews-btn"},[n("span",{directives:[{name:"gtm",rawName:"v-gtm:click",value:"Activity Page|Read All Reviews Clicked",expression:"'Activity Page|Read All Reviews Clicked'",arg:"click"}],staticClass:"more",attrs:{"data-spm-module":"View_All_Reviews","data-spm-virtual-item":"__virtual"},on:{click:t.skipToReview}},[n("span",[t._v("\n          "+t._s(t.$t("activity.v2.label.all_reviews"))+"\n        ")])])])],1),t._v(" "),n("RwdSwiper",{staticClass:"reviews-swiper",class:{"only-one":1===t.reviewList.length},attrs:{"swiper-bind":{controllerPosition:"intersect"},"per-view":1===t.reviewList.length?1:2,data:t.reviewList},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n("RecentReviewCard",{attrs:{avatar:o.avatar,name:o.user_name,"utc-time":o.review_time_utc,content:o.content||"","image-list":o.review_image||o.review_image_list||[],"hide-image":t.shouldHideImage,"image-size":1===t.reviewList.length?8:4},nativeOn:{click:function(e){return t.skipToReview(e)}}})]}}])})],1)}),[],!1,null,"5586fc02",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(880),content=n(1461),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"handleDisappear",value:function(){this.hideSection&&this.hideSection()}}]),e}(h.a);m.displayName="Reopen";var k=m=y([Object(f.Component)({components:{reopenContent:content.a}})],m),O=(n(2596),n(43)),component=Object(O.a)(k,(function(){var t=this.$createElement;return(this._self._c||t)("reopenContent",{staticClass:"section-reopen-content",attrs:{reopen:this.businessData},on:{disappear:this.handleDisappear}})}),[],!1,null,"0bd23f19",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2073),y=n(2072),m=n(880),k=n(1830),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).apply(this,arguments))).visible=!1,t}return Object(d.a)(e,t),Object(r.a)(e,[{key:"viewMore",value:function(){this.visible=!0}},{key:"calcSubScoreList",get:function(){var t;return(null===(t=this.businessData)||void 0===t?void 0:t.act_sub_score)||[]}},{key:"bestPriceGuarantee",get:function(){return this.businessData.price_guarantee}},{key:"priceGuaranteeVisible",get:function(){return!this.businessData.custom_config_hide_price_guarantee&&this.bestPriceGuarantee}},{key:"basicData",get:function(){return this.$attrs["basic-data"]||null}},{key:"isHeroPage",get:function(){var t,e;return"hero_page"===(null!=(e=null===(t=this.basicData)||void 0===t?void 0:t.act_product_type)?e:"")}}]),e}(m.a);_.displayName="MobileScore_participants";var j=_=O([Object(f.Component)({components:{ScoreParticipants:y.a,PriceGuarantee:h.a,ReviewsModal:k.default}})],_),w=(n(2615),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ScoreParticipants",t._b({staticClass:"section-score-style",class:{"section-score-hero-style":t.isHeroPage},on:{"view-more-reviews":t.viewMore}},"ScoreParticipants",t.businessData,!1)),t._v(" "),n("ReviewsModal",{attrs:{visible:t.visible,score:t.businessData.score,"review-count":t.businessData.review_count,"activity-id":t.businessData.activity_id,"review-gallery-should-show":t.businessData.should_show,reviews:t.businessData.item,"review-total":t.businessData.total,"sub-score-list":t.calcSubScoreList},on:{close:function(e){t.visible=!1}}})],1)}),[],!1,null,"580f21e1",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(2073),y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"bestPriceGuarantee",get:function(){return this.businessData.price_guarantee}},{key:"priceGuaranteeVisible",get:function(){return!this.businessData.custom_config_hide_price_guarantee&&this.bestPriceGuarantee}}]),e}(n(880).a);m.displayName="MobilePrice_guarantee";var k=m=y([Object(f.Component)({components:{PriceGuarantee:h.a}})],m),O=n(43),component=Object(O.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"price-guarantee-wrap"},[this.priceGuaranteeVisible?e("PriceGuarantee",{attrs:{"best-price-guarantee":this.bestPriceGuarantee}}):this._e()],1)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(31),r=n(46),c=n(39),l=n(35),d=n(40),v=n(5),f=n(21),h=n(10),y=n.n(h),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"created",value:function(){y()(this.businessData)&&this.handleHideSection()}},{key:"multiple",get:function(){return this.businessData.share_coupon&&this.businessData.share_coupon.length>1}}]),e}(n(880).a);k.displayName="Customer_platform_share_coupon";var O=k=m([Object(f.Component)({components:{}})],k),_=(n(2616),n(43)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.businessData.share_coupon?n("div",{staticClass:"sharing-coupon",class:{"is-mobile":"mobile"===t.klook.platform}},[n("div",{staticClass:"coupon-icon",class:{multiple:t.multiple}},[n("img",{attrs:{src:"https://res.klook.com/image/upload/v1639986244/aemx6vin63fcumfo8k6h.png",alt:""}})]),t._v(" "),n("klk-carousel",{attrs:{"hide-controllers":"","indicators-outside":!!t.multiple,loop:!1,"autoplay-interval":2500}},t._l(t.businessData.share_coupon,(function(e,o){return n("klk-carousel-item",{key:e.title,attrs:{"data-spm-module":"ShareCouponBanner_LIST?oid=event_"+e.id+"&idx="+o+"&len="+t.businessData.share_coupon.length+"&ext="+encodeURIComponent(JSON.stringify({InviteNumber:e.track_info.invite_number})),"data-spm-virtual-item":"__virtual?typ=entry"}},[n("a",{staticClass:"coupon-item",attrs:{href:e.deep_link}},[n("div",{staticClass:"coupon-text"},[n("div",{staticClass:"coupon-title"},[t._v("\n            "+t._s(e.title)+"\n          ")]),t._v(" "),n("div",{staticClass:"coupon-desc"},[t._v(t._s(e.rule))])]),t._v(" "),n("div",{staticClass:"coupon-entrance-icon"})])])})),1)],1):t._e()}),[],!1,null,"61f5a0a5",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var o=n(1203),r=n.n(o),c=(n(30),n(23),n(4)),l=(n(11),n(8),n(12),n(31)),d=n(46),v=n(39),f=n(35),h=n(40),y=n(5),m=n(21),k=n(918),O=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).apply(this,arguments))).isShowMore=!0,t.isShowMoreBtn=!1,t.openModal=!1,t}var o,r;return Object(h.a)(e,t),Object(d.a)(e,[{key:"onOpenModalChange",value:function(t){t&&this.sendPV()}},{key:"created",value:function(){this.businessData&&0!==Object.keys(this.businessData).length||this.hideSection()}},{key:"mounted",value:(r=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 1===this.foldStyle||2===this.foldStyle||3===this.foldStyle?(e="desktop"===this.klook.platform?52:32,(n=document.getElementById("eligibility-content-2"))&&n.scrollHeight>e?(this.isShowMore=!0,this.isShowMoreBtn=!0):3===this.foldStyle?this.isShowMoreBtn=!0:this.isShowMore=!1):this.isShowMore=!1,t.next=3,null;case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"showMore",value:(o=Object(c.a)(regeneratorRuntime.mark((function t(){var e,o,r,c,l,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===(e=this.foldStyle)&&(this.isShowMore=!this.isShowMore),3!==e){t.next=9;break}return t.next=5,n.e(19).then(n.bind(null,3499));case 5:o=t.sent,r=o.showTc,(c={guolv_voucher:1,yifun_voucher:2})[this.voucherType]&&(l=r({platform:this.klook.platform,type:c[this.voucherType],$t:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return d.$t.apply(d,[t].concat(n))},$href:function(t,e,n){return d.$href(t,e,n)}}),this.$once("hook:beforeDestroy",(function(){l.close()})));case 9:2===e&&(this.openModal=!0);case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleShowMore",value:function(){this.isShowMoreBtn&&this.isMobile&&this.showMore()}},{key:"sendPV",value:function(){var t=this;setTimeout((function(){var e;return t.$inhouse.track("pageview",null===(e=t.openModalRef)||void 0===e?void 0:e.$el,{force:!0})}),100)}},{key:"isMobile",get:function(){return"mobile"===this.klook.platform}},{key:"popComponent",get:function(){return this.isMobile?"klk-bottom-sheet":"klk-modal"}},{key:"viewMoreText",get:function(){return 3===this.foldStyle?this.businessData.fold_text:this.isShowMore?this.$t("city_page_view_more"):this.$t("collapse_all")}},{key:"spm",get:function(){var t,e,n;return(null===(n=null===(e=null===(t=this.sectionData)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.track)||void 0===n?void 0:n.name)||"PromoText"}},{key:"dataSpmPage",get:function(){return"".concat(this.spm,"?trg=manual")}},{key:"foldStyle",get:function(){return void 0===this.businessData.fold_style?1:this.businessData.fold_style}},{key:"voucherType",get:function(){return this.businessData.key}}]),e}(n(880).a);_.displayName="Eligibility_hint",O([Object(m.Ref)()],_.prototype,"openModalRef",void 0),O([Object(m.Watch)("openModal")],_.prototype,"onOpenModalChange",null);var j=_=O([Object(m.Component)({components:{ActivityMarkdown:k.a,IconNext:r.a}})],_),w=(n(2617),n(43)),component=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"activity-eligibility-box",class:{"is-mobile":t.isMobile},style:"background: "+t.businessData.background_color,attrs:{"data-spm-module":t.spm,"data-spm-virtual-item":"__virtual"},on:{click:function(e){return t.handleShowMore()}}},[n("div",{staticClass:"eligibility-content"},[n("div",{staticClass:"eligibility-content-1",style:"color: "+t.businessData.title_color},[t._v("\n        "+t._s(t.businessData.title)+"\n      ")]),t._v(" "),n("ActivityMarkdown",{class:["eligibility-content-2",{"eligibility-dot":t.isShowMore}],attrs:{id:"eligibility-content-2",content:t.businessData.content_render_markdown_obj,"linear-gradient":t.isShowMore?t.businessData.background_color:""}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMoreBtn,expression:"isShowMoreBtn"}],staticClass:"more-btn",attrs:{"data-spm-item":"SeeMore"},on:{click:function(e){return e.stopPropagation(),t.showMore()}}},[t._v("\n        "+t._s(t.viewMoreText)+"\n        "),n("IconNext",{attrs:{theme:"outline",size:"20",fill:[t.$tokensObj["$color-text-primary"]]}})],1)],1),t._v(" "),n("div",{staticClass:"eligibility-icon"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.businessData.icon,expression:"businessData.icon"}]})])]),t._v(" "),2===t.foldStyle?n(t.popComponent,{ref:"openModalRef",tag:"component",attrs:{title:t.businessData.title,width:"900px",open:t.openModal,"show-default-footer":!1,closable:!0,"overlay-closable":!0,"esc-press-closable":!0,visible:t.openModal,"show-close":!0,"data-spm-page":t.dataSpmPage},on:{"update:open":function(e){t.openModal=e},"update:visible":function(e){t.openModal=e},close:function(e){t.openModal=!1}}},[n("div",{staticClass:"markdowm-wrap",class:{"is-mobile":t.isMobile}},[n("ActivityMarkdown",{attrs:{content:t.businessData.content_render_markdown_obj}})],1)]):t._e()],1)}),[],!1,null,"517d547d",null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(22),n(14),n(11),n(8),n(12),n(23);var o=n(4),r=n(0),c=(n(37),n(31)),l=n(46),d=n(39),v=n(35),f=n(40),h=n(5),y=n(21),m=n(880),k=n(924),O=n(16);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).apply(this,arguments))).selfCompData=null,t}var n;return Object(f.a)(e,t),Object(l.a)(e,[{key:"translateActionHandler",value:function(){if(this.calcCustomScrollEl){var t=String(this.isSourceText?0:1);this.$emit("customAiTranslate",{translation:t})}else this.translateAction()}},{key:"translateAction",value:function(){var t=+new Date,e="undefined"!=typeof _args3?_args3:null,n=window.location.href.split("?")[0];n+="?"+Object(O.eb)(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.$route.query,{translation:this.isSourceText?0:1})),window.location.href=function(n){if("undefined"!=typeof __in_house&&__in_house.get_spm_info)try{var o=+new Date-t;n=__in_house.get_spm_info(n,{duration:o,args:e})}catch(t){console.warn("Get spm info error",t)}return n}(n)}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null;case 2:(e=document.querySelector(".js-activity-contact"))&&e.classList.add("has-translate-bot");case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"isMobile",get:function(){return"mobile"===this.klook.platform}},{key:"isSourceText",get:function(){return"1"===this.$route.query.translation}},{key:"activityId",get:function(){var t=(this.businessData||{}).activity_id;return void 0===t?"":t}}]),e}(m.a);w.displayName="Translation_bot",j([y.State],w.prototype,"klook",void 0);var P=w=j([Object(y.Component)({components:{PublishAi:k.a}})],w),C=(n(2618),n(2619),n(43)),component=Object(C.a)(P,(function(){var t=this.$createElement;return(this._self._c||t)("PublishAi",{class:["translation-bot",this.klook.platform],attrs:{top:"130px","root-margin":"-60px 0px 600px 0px",type:this.isMobile?"ball":"button","is-source-text":this.isSourceText,"show-tips":this.isMobile,visible:!0,"translate-action":this.translateActionHandler}})}),[],!1,null,"02cc574d",null);e.default=component.exports},,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n(13);n(30);function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(t){case 0:return e?"/"+e:"";case 1:return e?"/"+e+"-mcate":"/mcate";default:return e?"/"+e+"-cate":"/cate"}}function c(t){var e=t.destinationId,n=t.frontendId,o=t.destinationSeo,r=t.frontendSeo;return 1===n?"".concat(e,"-").concat(o):"".concat(e,"-").concat(n,"-").concat(o,"-").concat(r)}function l(t){var e=function(t){var e,n,o=t.indexName,l=t.countryName,d=t.cityName,v=t.langPath,f=t.countryId,h=t.countrySeoUrl,y=t.cityId,m=t.citySeo,k=t.frontendTree,O=t.isCityPublish,_=t.isCountryPublish,j={id:"index",path:"/".concat(v),name:o},w={id:"country",path:"/".concat(v,"coureg/").concat(f,"-").concat(h,"-things-to-do/"),name:l},P={id:"city",path:"/".concat(v,"city/").concat(y,"-").concat(encodeURIComponent(m),"-things-to-do/"),name:d},C=null===(e=k)||void 0===e?void 0:e[0];return{index:j,country:w,city:P,frontList:null===(n=k)||void 0===n?void 0:n.map((function(t,e){var n;if(1!==(null===(n=C)||void 0===n?void 0:n.id))return{id:"frontList".concat(e),path:"/".concat(v,"city/").concat(y,"-").concat(encodeURIComponent(m),"-things-to-do?frontend_id_list=").concat(t.id),name:t.name};var o=t.level,l=t.id,d=t.seo_url,k=t.name,j="/".concat(v,"experiences"),path="";return path=O?"".concat(j).concat(r(o,"city"),"/").concat(c({destinationSeo:m,destinationId:y,frontendId:l,frontendSeo:d}),"/"):_?"".concat(j).concat(r(o,"coureg"),"/").concat(c({destinationSeo:h,destinationId:f,frontendId:l,frontendSeo:d}),"/"):"".concat(j).concat(r(o),"/").concat(l,"-").concat(d,"/"),{id:"frontList".concat(e),path:path,name:k}}))}}(t),n=t.countryName,l=t.cityName,d=t.isCityPublish,v=t.isCountryPublish,f=[e.index];return n.toUpperCase()!==l.toUpperCase()&&v&&f.push(e.country),d&&f.push(e.city),f.push.apply(f,Object(o.a)(e.frontList)),f}},,,,,,,,,,,,,,,,,,,,,function(t,e,n){var o=n(2806)(!0);t.exports=o},function(t,e,n){var o=n(1967),r=n(2807),c=n(2202),l=n(2203),d=n(59),v=n(2811),f="Expected a function",h=8,y=32,m=128,k=256;t.exports=function(t){return r((function(e){var n=e.length,r=n,O=o.prototype.thru;for(t&&e.reverse();r--;){var _=e[r];if("function"!=typeof _)throw new TypeError(f);if(O&&!j&&"wrapper"==l(_))var j=new o([],!0)}for(r=j?r:n;++r<n;){_=e[r];var w=l(_),data="wrapper"==w?c(_):void 0;j=data&&v(data[0])&&data[1]==(m|h|y|k)&&!data[4].length&&1==data[9]?j[l(data[0])].apply(j,data[3]):1==_.length&&v(_)?j[w]():j.thru(_)}return function(){var t=arguments,o=t[0];if(j&&1==t.length&&d(o))return j.plant(o).value();for(var r=0,c=n?e[r].apply(this,t):o;++r<n;)c=e[r].call(this,c);return c}}))}},function(t,e,n){var o=n(2808),r=n(441),c=n(442);t.exports=function(t){return c(r(t,void 0,o),t+"")}},function(t,e,n){var o=n(2293);t.exports=function(t){return(null==t?0:t.length)?o(t,1):[]}},function(t,e,n){var o=n(439),r=o&&new o;t.exports=r},function(t,e){t.exports={}},function(t,e,n){var o=n(1969),r=n(2202),c=n(2203),l=n(2812);t.exports=function(t){var e=c(t),n=l[e];if("function"!=typeof n||!(e in o.prototype))return!1;if(t===n)return!0;var data=r(n);return!!data&&t===data[0]}},function(t,e,n){var o=n(1969),r=n(1967),c=n(1968),l=n(59),d=n(75),v=n(2813),f=Object.prototype.hasOwnProperty;function h(t){if(d(t)&&!l(t)&&!(t instanceof o)){if(t instanceof r)return t;if(f.call(t,"__wrapped__"))return v(t)}return new r(t)}h.prototype=c.prototype,h.prototype.constructor=h,t.exports=h},function(t,e,n){var o=n(1969),r=n(1967),c=n(288);t.exports=function(t){if(t instanceof o)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=c(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(16),r="hotel API";function c(t,e){var n="desktop"===e?"SG - Hotel API pages versus Hotel TTD pages":"SG - Hotel API pages versus Hotel TTD pages_Mweb";return Object(o.j)(t.experimentsGroup,n)(r)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return j})),n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return P})),n.d(e,"d",(function(){return C}));n(22),n(14),n(11),n(8),n(12);var o=n(13),r=n(0),c=(n(30),n(7)),l=n.n(c),d=n(279),v=n.n(d),f=n(16),h=n(271),y=n(2784);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function O(t){return t.slice(0,t.indexOf(" "))}function _(t){return{type:"application/ld+json",json:t}}function j(t){var title=t.title,e=t.description,n=t.lastUpdatedTime,o=t.siteName,r=t.videoUrl,c=t.bannerImage,l=t.webp;title=v.a.inHTMLData(title),e=v.a.inHTMLData(e),o=v.a.inHTMLData(o);var d=v.a.inHTMLData(r),f="".concat(Object(h.a)(c)).concat(Object(h.a)(title)).concat(l?".webp":".jpg");return _({"@context":"http://schema.org","@type":"VideoObject",name:title,description:e,thumbnailUrl:"https://res.klook.com/images/fl_lossy.progressive,q_65/c_fill,w_1200,h_630,f_auto/w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/activities/".concat(f),uploadDate:O(n),publisher:{"@type":"Organization",name:o,logo:{"@type":"ImageObject",url:"https://res.klook.com/image/upload/c_scale,h_60,w_300/v1490601012/280aa487-logo.png",width:300,height:60}},contentUrl:d})}function w(t){var e=t.cityName,n=t.countryName,o={index:{"@type":"ListItem",position:1,item:{}},country:{"@type":"ListItem",position:2,item:{}},city:{"@type":"ListItem",position:e===n?2:3,item:{}},frontList0:{"@type":"ListItem",position:e===n?3:4,item:{}},frontList1:{"@type":"ListItem",position:e===n?4:5,item:{}},frontList2:{"@type":"ListItem",position:e===n?5:6,item:{}}},r={"@context":"http://schema.org","@type":"BreadcrumbList",itemListElement:[]};return _(Object(y.a)(t).reduce((function(t,e){var n=e.id,r=e.name,path=e.path;return t.itemListElement.push(k({},o[n],{item:{"@id":"https://www.klook.com".concat(path),name:r}})),t}),r))}function P(t){var title=t.title,e=t.activityId,n=t.seoDescription,r=t.reviewCount,c=t.latestBestReview,d=t.sellingPrice,y=t.score,m=t.canonicalPath,k=t.currency,j=t.images,w=t.usageImages,P=t.bannerImage,C=t.isNoWatermarkActivity?"":"/w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3",S=Object(h.a)(title),D="https://res.klook.com/images/fl_lossy.progressive,q_65/c_fill,w_1200,h_630,f_auto/activities/".concat(Object(h.a)(P),"/").concat(S,".jpg"),x=[].concat(Object(o.a)(j||[]),Object(o.a)(w||[])).map((function(t){var e=Object(h.f)(t.url||t.image_url);return"https://res.klook.com/images/fl_lossy.progressive,q_65/c_fill,w_".concat(t.width,",h_").concat(t.height,",f_auto").concat(C,"/activities/").concat(e,"/").concat(S,".jpg")})),T={"@context":"http://schema.org/","@type":"Product",name:title,mpn:e,sku:e,description:n,image:[D].concat(Object(o.a)(x)),brand:{"@type":"Brand",name:"Klook"}};return r>0&&(T.aggregateRating={"@type":"AggregateRating",ratingValue:y,ratingCount:r,bestRating:"5",worstRating:"1"}),c&&(T.review={"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:Object(f.db)(c.rating,2e3)},name:title,author:{"@type":"Person",name:v.a.inHTMLData(c.author)},datePublished:O(c.date),reviewBody:v.a.inHTMLData(c.content)}),d>0&&(T.offers={"@type":"Offer",url:"https://www.klook.com/".concat(m),priceCurrency:k,price:d,priceValidUntil:l()().format("YYYY-MM-DD"),itemCondition:"http://schema.org/UsedCondition",availability:"http://schema.org/InStock"}),_(T)}function C(t){var e;return _(k({},{"@context":"http://schema.org","@type":"BreadcrumbList",itemListElement:[]},{itemListElement:null===(e=t)||void 0===e?void 0:e.map((function(t,e){return{"@type":"ListItem",position:e+1,item:{"@id":t.deep_link,name:t.name}}}))}))}},,,,,,,,,,,,,,,,,function(t,e,n){var map={"./default.scss":[3362,349]};function o(t){if(!n.o(map,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=map[t],o=e[0];return n.e(e[1]).then((function(){return n.t(o,7)}))}o.keys=function(){return Object.keys(map)},o.id=2832,t.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(3),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=Object(h.namespace)("traveller/activity"),O=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"getActivitySdkInfo",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get(y.a.getActivitySdkInfo,{params:{activity_id:this.activityId}});case 2:o=t.sent,(null===(e=o)||void 0===e?void 0:e.success)&&(null===(n=o)||void 0===n?void 0:n.result)&&this.createScript();case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"createScript",value:function(){var script=document.createElement("script");script.type="text/javascript",script.defer=!0,script.id="claritysdk",script.textContent='(function(c,l,a,r,i,t,y){\n        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;\n        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n    })(window, document, "clarity", "script", "g27f3n93cw");',document.body.appendChild(script)}},{key:"mounted",value:function(){this.getActivitySdkInfo()}},{key:"beforeDestroy",value:function(){"function"==typeof window.clarity&&window.clarity("stop");var t=document.getElementById("claritysdk");t&&document.body.removeChild(t)}},{key:"activityId",get:function(){return this.activityDetail.basic_data.activity_id}},{key:"platform",get:function(){return this.klook.platform}}]),e}(h.Vue);m([h.State],O.prototype,"klook",void 0),m([k.State],O.prototype,"activityDetail",void 0),O=m([h.Component],O),e.a=O},function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n(37),n(23);var o=n(4),r=(n(135),n(11),n(12),n(20),n(27),n(30),n(52),n(53),n(8),n(47),n(13)),c=n(31),l=n(46),d=n(39),v=n(35),f=n(40),h=(n(28),n(5)),y=n(21),m=n(10),k=n.n(m),O=n(2805),_=n.n(O),j=n(219),w=n(1180),P=n(16),C=n(64),S=n(271),D=n(2815),x=n(2814),T=n(3),I=T.a.experienceActivityDetail,R=T.a.experienceFastPassActivityDetail,$=T.a.experienceActivityDetailForWhiteLabel;var L=function(t){var e,n,o=I;return"express_check_out"===(null===(e=t.store.state.klook.utilConfig)||void 0===e?void 0:e.f_source_type)?R:(null===(n=t.store.state.klook.utilConfig)||void 0===n?void 0:n.whiteLabelUtilConfig)?$:o},A=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},E=Object(y.namespace)("experience"),M=Object(y.namespace)("traveller/activity");var B,N=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getSEODiscount",value:function(){var t=this.basicData.discount;if(t>=6&&t<=90){var e=t%10;return 10*Math.floor(t/10)+(0===e?0:e<=5?5:10)}return""}},{key:"updateSEOMeta",value:function(t){return{title:t.title,description:t.description}}},{key:"addSeoCountry",value:function(t){var title=t.title,e={title:"",description:t.description||this.$t("global.seo.title")};return this.isWhiteLabelEnv?e.title=title?title+" - "+this.$t("54096"):this.$t("54096"):e.title=title?title+" "+this.$t("global.seo.titlesite"):this.$t("global.seo.title"),e}},{key:"head",value:function(){var t,e,n,o={meta:[],script:[]},c=this.basicData,l=c.seo,d=l.city_id,v=l.country_id,f=l.activity_id,h=l.template_id,y=l.published,m=l.country_name,O=l.city_name,C=l.card_tags,x=l.banner_url,T=l.title,I=l.description,R=l.keywords,$=l.images,L=l.seo_url,A=l.video_url,E=l.last_updated_time,M=l.review_count,B=l.latest_best_review,N=l.selling_price,V=l.score,F=l.usage_images,W=l.bread_crumb,H=l.hide_water_mark,U=l.no_index,z=l.no_hreflang,G=c.sub_category_id,Y=c.leaf_category_id,K=c.activity_page_template_id,J=c.price,X=c.sold_out,Q=c.act_product_type,Z=this.klook,tt=Z.currency,et=Z.webp,path=this.$route.path,it="https://res.klook.com/images/fl_lossy.progressive,q_65/c_fill,w_1200,h_630/".concat(H?"":"w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/","activities/"),nt=encodeURIComponent(T),at={content:"".concat(it).concat(Object(S.f)(x),"/").concat(nt,".jpg"),hid:Object(S.f)(x)},ot=($||[]).map((function(t){return{content:"".concat(it).concat(Object(S.f)(t.image_url),"/").concat(nt,".jpg"),hid:Object(S.f)(t.image_url)}})),ct=[at].concat(Object(r.a)(ot)).slice(0,1),st={title:T,description:I,keywords:R},lt=_()(this.addSeoCountry,this.updateSEOMeta)(st),title=lt.title,ut=lt.description;if((null===(t=this.klook.utilConfig)||void 0===t?void 0:t.whiteLabelUtilConfig)||(o.title=title),o.meta=[{hid:"description",name:"description",content:ut}].concat(Object(r.a)(o.meta)),R&&o.meta.push({hid:"keywords",name:"keywords",content:R}),!z){var link=this.$canonical({indexable:!0});o.link=link}if(U&&(o.meta=[this.$robots("noindex,nofollow")].concat(Object(r.a)(o.meta))),A&&o.script.push(D.c({title:title,description:ut,lastUpdatedTime:E,siteName:this.$t("seo.site.name"),videoUrl:A,bannerImage:x,webp:!!et})),y&&o.script.push(D.d(W)),M>0&&y){var pt=null===(n=null===(e=B)||void 0===e?void 0:e.reviews)||void 0===n?void 0:n[0];o.script.push(D.b({title:title,activityId:f,seoDescription:ut,reviewCount:M,latestBestReview:pt&&{rating:pt.rating,author:pt.user_name,content:pt.content,date:pt.review_time_utc},sellingPrice:Number(N),score:V,canonicalPath:this.$route.path,currency:tt,images:$,usageImages:F,bannerImage:x,isNoWatermarkActivity:H}))}o.meta=[].concat(Object(r.a)(o.meta),[this.$setMeta({name:"google",content:"notranslate"}),this.$setMeta({property:"og:locale",content:this.$i18n.locale}),this.$setMeta({property:"og:type",content:"product"}),this.$setMeta({property:"og:title",content:title}),this.$setMeta({property:"og:description",content:ut}),this.$setMeta({property:"og:url",content:"https://".concat(this.klook.host).concat(path)})],Object(r.a)(ct.map((function(t){var content=t.content,e=t.hid;return{property:"og:image",content:content,hid:"og".concat(e)}}))),[this.$setMeta({property:"og:site_name",content:this.$t("seo.site.name").toString()},!0),this.$setMeta({property:"product:price:amount",content:J.selling_price}),this.$setMeta({property:"product:price:currency",content:tt}),this.$setMeta({name:"twitter:card",content:"summary_large_image"}),this.$setMeta({name:"twitter:title",content:title}),this.$setMeta({name:"twitter:description",content:ut}),this.$setMeta({name:"twitter:site",content:"@KlookTravel"})],Object(r.a)(ct.map((function(t){var content=t.content,e=t.hid;return{name:"twitter:image",content:content,hid:"twitter".concat(e)}}))),[this.$setMeta({name:"twitter:app:name:iphone",content:this.$t("global.app.name").toString()},!0),this.$setMeta({name:"twitter:app:id:iphone",content:"961850126"}),this.$setMeta({name:"twitter:app:url:iphone",content:"klook://activity/".concat(f)})]);var vt={page_template_id:K,activity_id:f,sub_category_id:G,leaf_category_id:Y,status:X?"sold_out":y?"published":"unpublished"};"hero_page"===Q&&(vt.PageType="TNAHero");var ft={package_option_card_sku:"sku",package_option:"attribute",package_options_spec_type:"packagelist",package_options_group:"packagegroup",package_option_card_sku_with_detail:"sku"},ht=(this.sectionsData||[]).map((function(t){var e;return null===(e=t)||void 0===e?void 0:e.meta.name})).filter((function(t){return Object.keys(ft).includes(t)}))[0];ht&&ft[ht]&&(vt.PackageOptionType=ft[ht]),k()(C)||(vt.TagNameList=Object.values(C)),o.bodyAttrs={"data-spm-page":"Activity?oid=activity_".concat(f,"&ext=").concat(encodeURIComponent(JSON.stringify(vt)))};var gt=Object(w.b)(this);return o.script=[].concat(Object(r.a)(o.script),Object(r.a)(gt.script||[]),[this.$insetDataLayer({ActId:f,ActUrl:L,CityId:d,CountryId:v,TemplateId:h,ActPrice:Object(P.o)(Number(J.selling_price),tt).toFixed(1),ActAvailability:y?"Available":"Unavailable",operationTag:Object(j.b)(C).join(",")||-1,CountryName:m,CityName:O})]),o}},{key:"mounted",value:function(){var t,e,o,r,c,l,d,v=null===(t=this.theme)||void 0===t?void 0:t.name;v&&n(2832)("./".concat(v,".scss"));var f=null===(o=null===(e=this.klook.utilConfig)||void 0===e?void 0:e.whiteLabelUtilConfig)||void 0===o?void 0:o.sdk;f&&(f.updateSupportLanguages(null===(r=this.basicData)||void 0===r?void 0:r.support_language),f.syncRecentlyViewed({vertical_id:this.basicData.activity_id,vertical_type:"100",user_id:(null===(d=null===(l=null===(c=this.$store.state)||void 0===c?void 0:c.auth)||void 0===l?void 0:l.user)||void 0===d?void 0:d.user_id)||0})),this.initRootData()}},{key:"initRootData",value:function(){var t=(this.basicData||{}).template_id,e=7===t,n=8===t,o={templateId:t,isWifi:e,isSimCard:n,isWifiSimCard:e||n};this.sectionActDataMutations(o)}},{key:"preview",get:function(){return this.activityDetail.preview}},{key:"theme",get:function(){return this.activityDetail.theme}},{key:"language",get:function(){return this.klook.language}},{key:"isWhiteLabelEnv",get:function(){var t,e;return!!(null===(e=null===(t=this.klook)||void 0===t?void 0:t.utilConfig)||void 0===e?void 0:e.isWhiteLabelEnv)}},{key:"sectionsData",get:function(){return this.activityDetail.sections}},{key:"sourceData",get:function(){return this.activityDetail.source}},{key:"basicData",get:function(){return this.activityDetail.basic_data}}]),e}(y.Vue);A([E.Mutation],N.prototype,"sectionActDataMutations",void 0),A([y.State],N.prototype,"klook",void 0),A([M.State],N.prototype,"activityDetail",void 0),N=A([Object(y.Component)({validate:function(t){var e=t.params,n=e.preview,o=e.activityPath,r=o.replace("\u2028","");return n?/\d+/.test(r):/^\d+$/.test(r)||/^\d+-(.+)?/.test(r)},fetch:(B=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l,d,v,f,h,y,m,O,_,w,P,S,D,T,I,R,$,A,E,M,B,N,V,F,W,H,U,z,G,Y,K,J,X,Q,Z;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P=e.params,S=P.preview,D=P.activityPath,T=e.query.translation,e.query.sales_channels,I=null===(n=e.store.state.klook.utilConfig)||void 0===n?void 0:n.is_guest_checkout,R=e.store.state.klook,$=R.language,A=R.ipCountry,E=R.currency,M=e.app,B=M.$href,N=M.$axios,V=D.split("-"),F=S?D:V[0],W=I?"guest_checkout":"",!(H=j.d[F])){t.next=17;break}if(U=null===(c=null===(r=null===(o=e)||void 0===o?void 0:o.app)||void 0===r?void 0:r.store)||void 0===c?void 0:c.state,!Object(x.a)(null===(d=null===(l=U)||void 0===l?void 0:l.common)||void 0===d?void 0:d.kepler,null===(f=null===(v=U)||void 0===v?void 0:v.klook)||void 0===f?void 0:f.platform)){t.next=17;break}return z=B("/hotels/".concat(H,"/?").concat("check_in_num=1&check_out_num=2&page_source=staycation"),$,""),e.redirect(z),t.abrupt("return");case 17:return G=0,Y="".concat($,":").concat(A,":").concat(E),j.a.includes(Y)&&(G=1),K=L(e),t.next=23,N.$get(K,{params:{activity_id:F,preview:S?1:0,partner_type:W,translation:"1"===T?"true":"false",__sales_channels:null,__template_type:G}});case 23:if(J=t.sent,X=J.result,J.success&&!k()(X)){t.next=34;break}if(Q=J.error&&J.error.code,!["7010","7009"].includes(Q)){t.next=32;break}return e.redirect({name:"Error401"}),t.abrupt("return");case 32:return e.error({statusCode:404}),t.abrupt("return");case 34:e.store.commit("SET_PAGE_TEMPLATE","activity_template_v2:".concat(null===(y=null===(h=X)||void 0===h?void 0:h.basic_data)||void 0===y?void 0:y.activity_page_template_id)),X.preview=S?1:0,X.version=1,e.store.commit("traveller/activity/SET_ACTIVITY_DETAIL",X),(null===(O=null===(m=X)||void 0===m?void 0:m.basic_data)||void 0===O?void 0:O.support_language)&&(Z=null===(w=null===(_=X)||void 0===_?void 0:_.basic_data)||void 0===w?void 0:w.support_language.map((function(t){return Object(C.b)(t)})),e.store.dispatch("syncSupportLanguages",Z));case 39:case"end":return t.stop()}}),t)}))),function(t){return B.apply(this,arguments)})})],N);e.a=N},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(3172);n.n(o).a},function(t,e,n){"use strict";var o=n(3173);n.n(o).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(23);var o=n(4),r=n(31),c=n(46),l=n(39),d=n(35),v=n(40),f=n(5),h=n(21),y=n(2180),m=n(1184),k=n(3477),O=n(2722),_=n(2724),j=n(3171),w=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object(m.a)(n(2417),"desktop");var P=Object(h.namespace)("common/header-search"),C=Object(h.namespace)("traveller/activity"),S=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}var n;return Object(v.a)(e,t),Object(c.a)(e,[{key:"initHeaderSearchData",value:function(){var t=encodeURIComponent(this.basicData.city_id),e=encodeURIComponent(this.basicData.city_name);this.setHeaderSearch({placeholder:this.$t("search_activity_at_city",[this.basicData.city_name]),searchQuery:"type=city&city=".concat(t,"&src_location_id=").concat(t,"&city_name=").concat(e),suggestParams:{city_id:this.basicData.city_id}})}},{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initHeaderSearchData(),t.next=3,null;case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"subTypeIds",get:function(){return{activityId:this.basicData.activity_id,cityId:this.basicData.city_id,countryId:this.basicData.country_id}}},{key:"showWaterMark",get:function(){var t,e;return null===(e=null===(t=this.$route)||void 0===t?void 0:t.params)||void 0===e?void 0:e.preview}}]),e}(Object(h.mixins)(k.a,j.a));w([C.State],S.prototype,"previewExpired",void 0),w([P.Action],S.prototype,"setHeaderSearch",void 0);var D=S=w([Object(h.Component)({components:{Notice:O.a,SectionList:y.a,ScrollToTop:_.a,WaterMarkModal:function(){return n.e(114).then(n.bind(null,4098))},WaterMark:function(){return n.e(110).then(n.bind(null,4099))}},layout:function(t){return t.store.state.klook.utilConfig.whiteLabelUtilConfig?"white-label":"default"},middleware:["previewRedirect"]})],S),x=(n(3678),n(3679),n(43)),component=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-page-container"},[n("Notice",{attrs:{type:"activity","sub-type-ids":t.subTypeIds}}),t._v(" "),n("div",{staticClass:"section-container desktop"},[n("SectionList",{staticClass:"activity-page",attrs:{sections:t.sectionsData,sources:t.sourceData,"basic-data":t.basicData,preview:t.preview}})],1),t._v(" "),n("ScrollToTop",{attrs:{"set-bottom":"210px"}}),t._v(" "),t.showWaterMark?n("WaterMark",{attrs:{text:t.$t("101023")}}):t._e(),t._v(" "),t.previewExpired?n("WaterMarkModal"):t._e()],1)}),[],!1,null,"429c4366",null);e.default=component.exports}])]);